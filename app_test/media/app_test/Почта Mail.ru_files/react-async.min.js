(function(a,b){typeof exports==="object"&&typeof module!=="undefined"?b(exports,require("react"),require("mobx"),require("react-dom")):typeof define==="function"&&define.amd?define("mobx-react",["exports","react","mobx","react-dom"],b):b(a.mobxReact={},a.React,a.mobx,a.ReactDOM)})(this,function(exports,a,b,c){"use strict";var d="default"in a?a["default"]:a;function e(a){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){e=function(a){return typeof a}}else{e=function(a){return a&&typeof Symbol==="function"&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a}}return e(a)}function f(a,b){if(!(a instanceof b)){throw new TypeError("Cannot call a class as a function")}}function g(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||false;d.configurable=true;if("value"in d)d.writable=true;Object.defineProperty(a,d.key,d)}}function h(a,b,c){if(b)g(a.prototype,b);if(c)g(a,c);return a}function i(a,b,c){if(b in a){Object.defineProperty(a,b,{value:c,enumerable:true,configurable:true,writable:true})}else{a[b]=c}return a}function j(a,b){if(typeof b!=="function"&&b!==null){throw new TypeError("Super expression must either be null or a function")}a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,writable:true,configurable:true}});if(b)l(a,b)}function k(a){k=Object.setPrototypeOf?Object.getPrototypeOf:function a(b){return b.__proto__||Object.getPrototypeOf(b)};return k(a)}function l(a,b){l=Object.setPrototypeOf||function a(b,c){b.__proto__=c;return b};return l(a,b)}function m(a){if(a===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return a}function n(a,b){if(b&&(typeof b==="object"||typeof b==="function")){return b}return m(a)}function o(a){return a&&a.__esModule&&Object.prototype.hasOwnProperty.call(a,"default")?a.default:a}function p(a,b){return b={exports:{}},a(b,b.exports),b.exports}var q=p(function(a,exports){Object.defineProperty(exports,"__esModule",{value:!0});var b="function"===typeof Symbol&&Symbol.for,c=b?Symbol.for("react.element"):60103,d=b?Symbol.for("react.portal"):60106,e=b?Symbol.for("react.fragment"):60107,f=b?Symbol.for("react.strict_mode"):60108,g=b?Symbol.for("react.profiler"):60114,h=b?Symbol.for("react.provider"):60109,i=b?Symbol.for("react.context"):60110,j=b?Symbol.for("react.async_mode"):60111,k=b?Symbol.for("react.forward_ref"):60112,l=b?Symbol.for("react.placeholder"):60113;function m(a){if("object"===typeof a&&null!==a){var b=a.$$typeof;switch(b){case c:switch(a=a.type,a){case j:case e:case g:case f:return a;default:switch(a=a&&a.$$typeof,a){case i:case k:case h:return a;default:return b}}case d:return b}}}exports.typeOf=m;exports.AsyncMode=j;exports.ContextConsumer=i;exports.ContextProvider=h;exports.Element=c;exports.ForwardRef=k;exports.Fragment=e;exports.Profiler=g;exports.Portal=d;exports.StrictMode=f;exports.isValidElementType=function(a){return"string"===typeof a||"function"===typeof a||a===e||a===j||a===g||a===f||a===l||"object"===typeof a&&null!==a&&("function"===typeof a.then||a.$$typeof===h||a.$$typeof===i||a.$$typeof===k)};exports.isAsyncMode=function(a){return m(a)===j};exports.isContextConsumer=function(a){return m(a)===i};exports.isContextProvider=function(a){return m(a)===h};exports.isElement=function(a){return"object"===typeof a&&null!==a&&a.$$typeof===c};exports.isForwardRef=function(a){return m(a)===k};exports.isFragment=function(a){return m(a)===e};exports.isProfiler=function(a){return m(a)===g};exports.isPortal=function(a){return m(a)===d};exports.isStrictMode=function(a){return m(a)===f}});o(q);var r=q.typeOf;var s=q.AsyncMode;var t=q.ContextConsumer;var u=q.ContextProvider;var v=q.Element;var w=q.ForwardRef;var x=q.Fragment;var y=q.Profiler;var z=q.Portal;var A=q.StrictMode;var B=q.isValidElementType;var C=q.isAsyncMode;var D=q.isContextConsumer;var E=q.isContextProvider;var F=q.isElement;var G=q.isForwardRef;var H=q.isFragment;var I=q.isProfiler;var J=q.isPortal;var K=q.isStrictMode;var L=p(function(a){{a.exports=q}});var M;function N(a,b,c){if(b in a){Object.defineProperty(a,b,{value:c,enumerable:true,configurable:true,writable:true})}else{a[b]=c}return a}var O={childContextTypes:true,contextTypes:true,defaultProps:true,displayName:true,getDefaultProps:true,getDerivedStateFromProps:true,mixins:true,propTypes:true,type:true};var P={name:true,length:true,prototype:true,caller:true,callee:true,arguments:true,arity:true};var Q=N({},L.ForwardRef,(M={},N(M,"$$typeof",true),N(M,"render",true),M));var R=Object.defineProperty;var S=Object.getOwnPropertyNames;var T=Object.getOwnPropertySymbols;var U=Object.getOwnPropertyDescriptor;var V=Object.getPrototypeOf;var W=Object.prototype;function X(a,b,c){if(typeof b!=="string"){if(W){var d=V(b);if(d&&d!==W){X(a,d,c)}}var e=S(b);if(T){e=e.concat(T(b))}var f=Q[a["$$typeof"]]||O;var g=Q[b["$$typeof"]]||O;for(var h=0;h<e.length;++h){var i=e[h];if(!P[i]&&!(c&&c[i])&&!(g&&g[i])&&!(f&&f[i])){var j=U(b,i);try{R(a,i,j)}catch(a){}}}return a}return a}var Y=X;var Z=function(){function a(){f(this,a);this.listeners=[]}h(a,[{key:"on",value:function a(b){var c=this;this.listeners.push(b);return function(){var a=c.listeners.indexOf(b);if(a!==-1)c.listeners.splice(a,1)}}},{key:"emit",value:function a(b){this.listeners.forEach(function(a){return a(b)})}}]);return a}();function _(a){function c(c,d,e,f,g,h){for(var i=arguments.length,j=new Array(i>6?i-6:0),k=6;k<i;k++){j[k-6]=arguments[k]}return b.untracked(function(){f=f||"<<anonymous>>";h=h||e;if(d[e]==null){if(c){var b=d[e]===null?"null":"undefined";return new Error("The "+g+" `"+h+"` is marked as required "+"in `"+f+"`, but its value is `"+b+"`.")}return null}else{return a.apply(void 0,[d,e,f,g,h].concat(j))}})}var d=c.bind(null,false);d.isRequired=c.bind(null,true);return d}function aa(a,b){if(a==="symbol"){return true}if(b["@@toStringTag"]==="Symbol"){return true}if(typeof Symbol==="function"&&b instanceof Symbol){return true}return false}function ba(a){var b=e(a);if(Array.isArray(a)){return"array"}if(a instanceof RegExp){return"object"}if(aa(b,a)){return"symbol"}return b}function ca(a){var b=ba(a);if(b==="object"){if(a instanceof Date){return"date"}else if(a instanceof RegExp){return"regexp"}}return b}function da(a,c){return _(function(d,e,f,g,h){return b.untracked(function(){if(a){if(ba(d[e])===c.toLowerCase())return null}var g;switch(c){case"Array":g=b.isObservableArray;break;case"Object":g=b.isObservableObject;break;case"Map":g=b.isObservableMap;break;default:throw new Error("Unexpected mobxType: ".concat(c))}var i=d[e];if(!g(i)){var j=ca(i);var k=a?" or javascript `"+c.toLowerCase()+"`":"";return new Error("Invalid prop `"+h+"` of type `"+j+"` supplied to"+" `"+f+"`, expected `mobx.Observable"+c+"`"+k+".")}return null})})}function ea(a,c){return _(function(d,e,f,g,h){for(var i=arguments.length,j=new Array(i>5?i-5:0),k=5;k<i;k++){j[k-5]=arguments[k]}return b.untracked(function(){if(typeof c!=="function"){return new Error("Property `"+h+"` of component `"+f+"` has "+"invalid PropType notation.")}var b=da(a,"Array")(d,e,f);if(b instanceof Error)return b;var i=d[e];for(var k=0;k<i.length;k++){b=c.apply(void 0,[i,k,f,g,h+"["+k+"]"].concat(j));if(b instanceof Error)return b}return null})})}var fa=da(false,"Array");var ga=ea.bind(null,false);var ha=da(false,"Map");var ia=da(false,"Object");var ja=da(true,"Array");var ka=ea.bind(null,true);var la=da(true,"Object");var ma=Object.freeze({observableArray:fa,observableArrayOf:ga,observableMap:ha,observableObject:ia,arrayOrObservableArray:ja,arrayOrObservableArrayOf:ka,objectOrObservableObject:la});function na(a){return!(a.prototype&&a.prototype.render)}var oa=0;function pa(a){if(typeof Symbol==="function"){return Symbol(a)}var b="__$mobx-react ".concat(a," (").concat(oa,")");oa++;return b}var qa=pa("patchMixins");var ra=pa("patchedDefinition");function sa(a,b){var c=a[qa]=a[qa]||{};var d=c[b]=c[b]||{};d.locks=d.locks||0;d.methods=d.methods||[];return d}function ta(a,b){var c=this;for(var d=arguments.length,e=new Array(d>2?d-2:0),f=2;f<d;f++){e[f-2]=arguments[f]}b.locks++;try{var g;if(a!==undefined&&a!==null){g=a.apply(this,e)}return g}finally{b.locks--;if(b.locks===0){b.methods.forEach(function(a){a.apply(c,e)})}}}function ua(a,b){var c=function c(){for(var d=arguments.length,e=new Array(d),f=0;f<d;f++){e[f]=arguments[f]}ta.call.apply(ta,[this,a,b].concat(e))};return c}function va(a,b){var c=sa(a,b);for(var d=arguments.length,e=new Array(d>2?d-2:0),f=2;f<d;f++){e[f-2]=arguments[f]}for(var g=0;g<e.length;g++){var h=e[g];if(c.methods.indexOf(h)<0){c.methods.push(h)}}var i=Object.getOwnPropertyDescriptor(a,b);if(i&&i[ra]){return}var j=a[b];var k=wa(a,b,i?i.enumerable:undefined,c,j);Object.defineProperty(a,b,k)}function wa(a,b,c,d,e){var f;var g=ua(e,d);return f={},i(f,ra,true),i(f,"get",function a(){return g}),i(f,"set",function e(f){if(this===a){g=ua(f,d)}else{var h=wa(this,b,c,d,f);Object.defineProperty(this,b,h)}}),i(f,"configurable",true),i(f,"enumerable",c),f}var xa={mobxStores:la};Object.seal(xa);var ya={contextTypes:{get:function a(){return xa},set:function a(b){console.warn("Mobx Injector: you are trying to attach `contextTypes` on an component decorated with `inject` (or `observer`) HOC. Please specify the contextTypes on the wrapped component instead. It is accessible through the `wrappedComponent`")},configurable:true,enumerable:false},isMobxInjector:{value:true,writable:true,configurable:true,enumerable:true}};function za(b,c,d){var e="inject-"+(c.displayName||c.name||c.constructor&&c.constructor.name||"Unknown");if(d)e+="-with-"+d;var g=function(d){j(e,d);function e(){var a;var b;f(this,e);for(var c=arguments.length,d=new Array(c),g=0;g<c;g++){d[g]=arguments[g]}b=n(this,(a=k(e)).call.apply(a,[this].concat(d)));b.storeRef=function(a){b.wrappedInstance=a};return b}h(e,[{key:"render",value:function d(){var e={};for(var f in this.props){if(this.props.hasOwnProperty(f)){e[f]=this.props[f]}}var g=b(this.context.mobxStores||{},e,this.context)||{};for(var h in g){e[h]=g[h]}if(!na(c)){e.ref=this.storeRef}return a.createElement(c,e)}}]);return e}(a.Component);g.displayName=e;Y(g,c);g.wrappedComponent=c;Object.defineProperties(g,ya);return g}function Aa(a){return function(b,c){a.forEach(function(a){if(a in c)return;if(!(a in b))throw new Error("MobX injector: Store '"+a+"' is not available! Make sure it is provided by some Provider");c[a]=b[a]});return c}}function Ba(){var a;if(typeof arguments[0]==="function"){a=arguments[0];return function(b){var c=za(a,b);c.isMobxInjector=false;c=Xa(c);c.isMobxInjector=true;return c}}else{var b=[];for(var c=0;c<arguments.length;c++){b[c]=arguments[c]}a=Aa(b);return function(c){return za(a,c,b.join("-"))}}}var Ca=b.$mobx||"$mobx";var Da=pa("isUnmounted");var Ea=false;var Fa=false;var Ga=false;var Ha=typeof WeakMap!=="undefined"?new WeakMap:undefined;var Ia=new Z;var Ja=pa("skipRender");var Ka=pa("isForcingUpdate");function La(a,b,c){if(!Object.hasOwnProperty.call(a,b)){Object.defineProperty(a,b,{enumerable:false,configurable:true,writable:true,value:c})}else{a[b]=c}}function Ma(a){if(c.findDOMNode){try{return c.findDOMNode(a)}catch(a){return null}}return null}function Na(a){var b=Ma(a);if(b&&Ha)Ha.set(b,a);Ia.emit({event:"render",renderTime:a.__$mobRenderEnd-a.__$mobRenderStart,totalTime:Date.now()-a.__$mobRenderStart,component:a,node:b})}function Oa(){if(typeof WeakMap==="undefined")throw new Error("[mobx-react] tracking components is not supported in this browser.");if(!Ea)Ea=true}function Pa(a){Fa=a}var Qa=new Z;function Ra(a,b){va(a,b,Va[b])}function Sa(a,b){if(Ta(a,b))return true;if(e(a)!=="object"||a===null||e(b)!=="object"||b===null){return false}var c=Object.keys(a);var d=Object.keys(b);if(c.length!==d.length)return false;for(var f=0;f<c.length;f++){if(!hasOwnProperty.call(b,c[f])||!Ta(a[c[f]],b[c[f]])){return false}}return true}function Ta(a,b){if(a===b){return a!==0||1/a===1/b}else{return a!==a&&b!==b}}function Ua(c){var d=this;if(Fa===true)return c.call(this);function e(){var a=this;i=false;var c=undefined;var d=undefined;j.track(function(){if(Ea){a.__$mobRenderStart=Date.now()}try{d=b._allowStateChanges(false,h)}catch(a){c=a}if(Ea){a.__$mobRenderEnd=Date.now()}});if(c){Qa.emit(c);throw c}return d}var f=this.displayName||this.name||this.constructor&&(this.constructor.displayName||this.constructor.name)||"<component>";var g=this._reactInternalInstance&&this._reactInternalInstance._rootNodeID||this._reactInternalInstance&&this._reactInternalInstance._debugID||this._reactInternalFiber&&this._reactInternalFiber._debugID;La(this,Ja,false);La(this,Ka,false);var h=c.bind(this);var i=false;var j=new b.Reaction("".concat(f,"#").concat(g,".render()"),function(){if(!i){i=true;if(typeof d.componentWillReact==="function")d.componentWillReact();if(d[Da]!==true){var b=true;try{La(d,Ka,true);if(!d[Ja])a.Component.prototype.forceUpdate.call(d);b=false}finally{La(d,Ka,false);if(b)j.dispose()}}}});j.reactComponent=this;e[Ca]=j;this.render=e;return e.call(this)}var Va={componentWillUnmount:function a(){if(Fa===true)return;this.render[Ca]&&this.render[Ca].dispose();this[Da]=true;if(Ea){var b=Ma(this);if(b&&Ha){Ha.delete(b)}Ia.emit({event:"destroy",component:this,node:b})}},componentDidMount:function a(){if(Ea){Na(this)}},componentDidUpdate:function a(){if(Ea){Na(this)}},shouldComponentUpdate:function a(b,c){if(Fa){console.warn("[mobx-react] It seems that a re-rendering of a React component is triggered while in static (server-side) mode. Please make sure components are rendered only once server-side.")}if(this.state!==c){return true}return!Sa(this.props,b)}};function Wa(a,c){var d=pa("reactProp_".concat(c,"_valueHolder"));var e=pa("reactProp_".concat(c,"_atomHolder"));function f(){if(!this[e]){La(this,e,b.createAtom("reactive "+c))}return this[e]}Object.defineProperty(a,c,{configurable:true,enumerable:true,get:function a(){f.call(this).reportObserved();return this[d]},set:function a(b){if(!this[Ka]&&!Sa(this[d],b)){La(this,d,b);La(this,Ja,true);f.call(this).reportChanged();La(this,Ja,false)}else{La(this,d,b)}}})}function Xa(b,c){if(typeof b==="string"){throw new Error("Store names should be provided as array")}if(Array.isArray(b)){if(!Ga){Ga=true;console.warn('Mobx observer: Using observer to inject stores is deprecated since 4.0. Use `@inject("store1", "store2") @observer ComponentClass` or `inject("store1", "store2")(observer(componentClass))` instead of `@observer(["store1", "store2"]) ComponentClass`')}if(!c){return function(a){return Xa(b,a)}}else{return Ba.apply(null,b)(Xa(c))}}var d=b;if(d.isMobxInjector===true){console.warn("Mobx observer: You are trying to use 'observer' on a component that already has 'inject'. Please apply 'observer' before applying 'inject'")}if(d.__proto__===a.PureComponent){console.warn("Mobx observer: You are using 'observer' on React.PureComponent. These two achieve two opposite goals and should not be used together")}if(typeof d==="function"&&(!d.prototype||!d.prototype.render)&&!d.isReactClass&&!a.Component.isPrototypeOf(d)){var e,g;var i=Xa((g=e=function(a){j(b,a);function b(){f(this,b);return n(this,k(b).apply(this,arguments))}h(b,[{key:"render",value:function a(){return d.call(this,this.props,this.context)}}]);return b}(a.Component),e.displayName=d.displayName||d.name,e.contextTypes=d.contextTypes,e.propTypes=d.propTypes,e.defaultProps=d.defaultProps,g));Y(i,d);return i}if(!d){throw new Error("Please pass a valid component to 'observer'")}var l=d.prototype||d;Ya(l);d.isMobXReactObserver=true;Wa(l,"props");Wa(l,"state");var m=l.render;l.render=function(){return Ua.call(this,m)};return d}function Ya(a){["componentDidMount","componentWillUnmount","componentDidUpdate"].forEach(function(b){Ra(a,b)});if(!a.shouldComponentUpdate){a.shouldComponentUpdate=Va.shouldComponentUpdate}else{if(a.shouldComponentUpdate!==Va.shouldComponentUpdate){console.warn("Use `shouldComponentUpdate` in an `observer` based component breaks the behavior of `observer` and might lead to unexpected results. Manually implementing `sCU` should not be needed when using mobx-react.")}}}var Za=Xa(function(a){var b=a.children,c=a.inject,e=a.render;var f=b||e;if(typeof f==="undefined"){return null}if(!c){return f()}console.warn("<Observer inject=.../> is no longer supported. Please use inject on the enclosing component instead");var g=Ba(c)(f);return d.createElement(g,null)});Za.displayName="Observer";var $a=function a(b,c,d,f,g){var h=c==="children"?"render":"children";if(typeof b[c]==="function"&&typeof b[h]==="function"){return new Error("Invalid prop,do not use children and render in the same time in`"+d)}if(typeof b[c]==="function"||typeof b[h]==="function"){return}return new Error("Invalid prop `"+g+"` of type `"+e(b[c])+"` supplied to"+" `"+d+"`, expected `function`.")};Za.propTypes={render:$a,children:$a};function _a(){var a=this.constructor.getDerivedStateFromProps(this.props,this.state);if(a!==null&&a!==undefined){this.setState(a)}}function ab(a){function b(b){var c=this.constructor.getDerivedStateFromProps(a,b);return c!==null&&c!==undefined?c:null}this.setState(b.bind(this))}function bb(a,b){try{var c=this.props;var d=this.state;this.props=a;this.state=b;this.__reactInternalSnapshotFlag=true;this.__reactInternalSnapshot=this.getSnapshotBeforeUpdate(c,d)}finally{this.props=c;this.state=d}}_a.__suppressDeprecationWarning=true;ab.__suppressDeprecationWarning=true;bb.__suppressDeprecationWarning=true;function cb(a){var b=a.prototype;if(!b||!b.isReactComponent){throw new Error("Can only polyfill class components")}if(typeof a.getDerivedStateFromProps!=="function"&&typeof b.getSnapshotBeforeUpdate!=="function"){return a}var c=null;var d=null;var e=null;if(typeof b.componentWillMount==="function"){c="componentWillMount"}else if(typeof b.UNSAFE_componentWillMount==="function"){c="UNSAFE_componentWillMount"}if(typeof b.componentWillReceiveProps==="function"){d="componentWillReceiveProps"}else if(typeof b.UNSAFE_componentWillReceiveProps==="function"){d="UNSAFE_componentWillReceiveProps"}if(typeof b.componentWillUpdate==="function"){e="componentWillUpdate"}else if(typeof b.UNSAFE_componentWillUpdate==="function"){e="UNSAFE_componentWillUpdate"}if(c!==null||d!==null||e!==null){var f=a.displayName||a.name;var g=typeof a.getDerivedStateFromProps==="function"?"getDerivedStateFromProps()":"getSnapshotBeforeUpdate()";throw Error("Unsafe legacy lifecycles will not be called for components using new component APIs.\n\n"+f+" uses "+g+" but also contains the following legacy lifecycles:"+(c!==null?"\n  "+c:"")+(d!==null?"\n  "+d:"")+(e!==null?"\n  "+e:"")+"\n\nThe above lifecycles should be removed. Learn more about this warning here:\n"+"https://fb.me/react-async-component-lifecycle-hooks")}if(typeof a.getDerivedStateFromProps==="function"){b.componentWillMount=_a;b.componentWillReceiveProps=ab}if(typeof b.getSnapshotBeforeUpdate==="function"){if(typeof b.componentDidUpdate!=="function"){throw new Error("Cannot polyfill getSnapshotBeforeUpdate() for components that do not define componentDidUpdate() on the prototype")}b.componentWillUpdate=bb;var h=b.componentDidUpdate;b.componentDidUpdate=function a(b,c,d){var e=this.__reactInternalSnapshotFlag?this.__reactInternalSnapshot:d;h.call(this,b,c,e)}}return a}var db={children:true,key:true,ref:true};var eb=function(b){j(c,b);function c(a,b){var d;f(this,c);d=n(this,k(c).call(this,a,b));d.state={};fb(a,d.state);return d}h(c,[{key:"render",value:function b(){return a.Children.only(this.props.children)}},{key:"getChildContext",value:function a(){var b={};fb(this.context.mobxStores,b);fb(this.props,b);return{mobxStores:b}}}],[{key:"getDerivedStateFromProps",value:function a(b,c){if(!b)return null;if(!c)return b;if(Object.keys(b).filter(gb).length!==Object.keys(c).filter(gb).length)console.warn("MobX Provider: The set of provided stores has changed. Please avoid changing stores as the change might not propagate to all children");if(!b.suppressChangedStoreWarning)for(var d in b){if(gb(d)&&c[d]!==b[d])console.warn("MobX Provider: Provided store '"+d+"' has changed. Please avoid replacing stores as the change might not propagate to all children")}return b}}]);return c}(a.Component);eb.contextTypes={mobxStores:la};eb.childContextTypes={mobxStores:la.isRequired};function fb(a,b){if(!a)return;for(var c in a){if(gb(c))b[c]=a[c]}}function gb(a){return!db[a]&&a!=="suppressChangedStoreWarning"}cb(eb);var hb=pa("disposeOnUnmount");function ib(){var a=this;if(!this[hb]){return}this[hb].forEach(function(b){var c=typeof b==="string"?a[b]:b;if(c!==undefined&&c!==null){if(typeof c!=="function"){throw new Error("[mobx-react] disposeOnUnmount only works on functions such as disposers returned by reactions, autorun, etc.")}c()}});this[hb]=[]}function jb(b,c){if(Array.isArray(c)){return c.map(function(a){return jb(b,a)})}if(!b instanceof a.Component){throw new Error("[mobx-react] disposeOnUnmount only works on class based React components.")}if(typeof c!=="string"&&typeof c!=="function"){throw new Error("[mobx-react] disposeOnUnmount only works if the parameter is either a property key or a function.")}var d=!!b[hb];var e=b[hb]||(b[hb]=[]);e.push(c);if(!d){va(b,"componentWillUnmount",ib)}if(typeof c!=="string"){return c}}if(!a.Component)throw new Error("mobx-react requires React to be available");if(!b.spy)throw new Error("mobx-react requires mobx to be available");if(typeof c.unstable_batchedUpdates==="function")b.configure({reactionScheduler:c.unstable_batchedUpdates});var kb=function a(b){return Qa.on(b)};if((typeof __MOBX_DEVTOOLS_GLOBAL_HOOK__==="undefined"?"undefined":e(__MOBX_DEVTOOLS_GLOBAL_HOOK__))==="object"){var lb={spy:b.spy,extras:{getDebugName:b.getDebugName}};var mb={renderReporter:Ia,componentByNodeRegistry:Ha,componentByNodeRegistery:Ha,trackComponents:Oa};__MOBX_DEVTOOLS_GLOBAL_HOOK__.injectMobxReact(mb,lb)}exports.propTypes=ma;exports.PropTypes=ma;exports.onError=kb;exports.observer=Xa;exports.Observer=Za;exports.renderReporter=Ia;exports.componentByNodeRegistery=Ha;exports.componentByNodeRegistry=Ha;exports.trackComponents=Oa;exports.useStaticRendering=Pa;exports.Provider=eb;exports.inject=Ba;exports.disposeOnUnmount=jb;Object.defineProperty(exports,"__esModule",{value:true})});define("@mail/jssdk/next/util/define",["require","exports"],function(require,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getLazyPropertyDescriptor=exports.getHiddenPropertyDescriptor=exports.defineProperties=exports.defineProperty=void 0;function a(a,b,c){return Object.defineProperty(a,b,c)}exports.defineProperty=a;function b(a,b){return Object.defineProperties(a,b)}exports.defineProperties=b;function c(a,b){return{configurable:false,writable:b==null||b,enumerable:false,value:a}}exports.getHiddenPropertyDescriptor=c;function d(a){var b=typeof a==="function"?{get:a}:a,c=b.get,d=b.set,e=b.configurable,f=b.enumerable;var g=false;var h;var i={configurable:e!==null&&e!==void 0?e:false,enumerable:f!==null&&f!==void 0?f:false,get:function(){if(!g){g=true;h=c()}return h}};if(d){i.set=function(a){g=true;h=d(a)}}return i}exports.getLazyPropertyDescriptor=d});define("@mail/jssdk/next/state/selector",["require","exports","@mail/jssdk/next/util/define"],function(require,exports,a){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.createGlobalStateSelector=exports.createGlobalStateSelectorForState=void 0;function b(a,c){if(a===c){return true}if(c==null&&a!=null||c!=null&&a==null||typeof c!==typeof a||Array.isArray(c)||c instanceof Map||c instanceof Set){return false}if(c instanceof Object){for(var d in c){if(c.hasOwnProperty(d)){if(!b(a[d],c[d])){return false}}}return Object.keys(a).length===Object.keys(c).length}return false}function c(c,d){var e;var f=function(){var a=d(c.get());e=b(e,a)?e:a;return e};(0,a.defineProperty)(f,"state",{enumerable:false,value:c});return f}exports.createGlobalStateSelectorForState=c;function d(c,d){var e=c.length;var f=Array(e);var g;var h=function(){for(var a=0;a<e;a++){f[a]=c[a]()}var h=d.apply(null,f);g=b(g,h)?g:h;return g};(0,a.defineProperty)(h,"deps",{enumerable:false,value:c});return h}function e(a,b){return Array.isArray(a)?d(a,b):c(a,b)}exports.createGlobalStateSelector=e});define("data-source/store/letter-action/state",["require","exports","@mail/jssdk/next/state/global"],function(require,exports,a){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.letterFastActionState=void 0;exports.letterFastActionState=(0,a.createGlobalState)("letter-fast-action",{})});define("data-source/store/letter-action/types",["require","exports"],function(require,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.LetterFastActionKey=exports.LetterFastActionType=void 0;var a;(function(a){a["unread"]="togglestatus:unread";a["archive"]="archive";a["remove"]="remove";a["settings"]="settings"})(a=exports.LetterFastActionType||(exports.LetterFastActionType={}));exports.LetterFastActionKey="LetterFastActionKey"});var __importDefault=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};define("data-source/store/letter-action/getters",["require","exports","@mail/jssdk/next/state/selector","router","service/storage","./state","./types"],function(require,exports,a,b,c,d,e){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getFastAction=exports.getFastActionCurrent=exports.getFastActionReal=void 0;c=__importDefault(c);var f=function(){return c.default.get(e.LetterFastActionKey,{email:false})||e.LetterFastActionType.settings};exports.getFastActionReal=f;var g=function(){var a=(0,exports.getFastActionReal)();var c=(0,b.getAppRouter)().model.folder;if(a===e.LetterFastActionType.archive&&(c.isTrash()||c.isSpam()||c.isArchive())){return e.LetterFastActionType.remove}return a};exports.getFastActionCurrent=g;exports.getFastAction=(0,a.createGlobalStateSelector)(d.letterFastActionState,exports.getFastActionCurrent)});var __importDefault=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};define("data-source/store/letter-action/actions",["require","exports","@mail/jssdk/next/action/global","data-source/store/letter-action/getters","data-source/store/letter-action/types","data-source/store/vk-overlay/actions","data-source/store/vk-overlay/types","mediator/letters-actions","service/storage"],function(require,exports,a,b,c,d,e,f,g){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.callFastAction=exports.setFastAction=void 0;f=__importDefault(f);g=__importDefault(g);exports.setFastAction=(0,a.createGlobalAction)("letter-fast-action/setFastAction",function(a){g.default.set(c.LetterFastActionKey,a,{email:false});return{}});exports.callFastAction=(0,a.createGlobalAction)("letter-fast-action/callFastAction",function(a){var g=(0,b.getFastActionCurrent)();if(g!==c.LetterFastActionType.settings){f.default.handleEvent({type:g,details:{model:a}})}else{(0,d.pushModal)(e.ModalPages.letterFastActionSettings)}return{}})});define("data-source/store/user/account/getters",["require","exports","@mail/jssdk/next/state/selector","./state"],function(require,exports,a,b){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getCurrentAccount=exports.getOtherAccounts=void 0;exports.getOtherAccounts=(0,a.createGlobalStateSelector)(b.accountUserState,function(a){var b=a.accounts,c=a.email;return c?b.filter(function(a){return a.email!==c}):b});exports.getCurrentAccount=(0,a.createGlobalStateSelector)(b.accountUserState,function(a){var b=a.accounts,c=a.email;return c&&b.find(function(a){return a.email===c})})});define("data-source/store/vk-overlay/getters",["require","exports","@mail/jssdk/next/state/selector","./state"],function(require,exports,a,b){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getModalDataActual=exports.getModalActual=void 0;exports.getModalActual=(0,a.createGlobalStateSelector)(b.VKOverlayState,function(a){var b=a.modalHistory;return b[b.length-1]||null});exports.getModalDataActual=(0,a.createGlobalStateSelector)(b.VKOverlayState,function(a){var b=a.modalData,c=a.modalHistory;return b[c[c.length-1]]})});define("helpers/languages",["exports","default-values"],function(exports,a){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.LANG_MAP=exports.LANG_ARRAY=undefined;var b=[{key:"ru_RU",label:"Русский",src:a.PACKAGES_URL+"/static.promo/octavius/languages/ru.png"},{key:"uk_UA",label:"Українська",src:a.PACKAGES_URL+"/static.promo/octavius/languages/ua.png"},{key:"be_BY",label:"Беларуская",src:a.PACKAGES_URL+"/static.promo/octavius/languages/bel.png"},{key:"hy_AM",label:"Հայերեն",src:a.PACKAGES_URL+"/static.promo/octavius/languages/arm.png"},{key:"kk_KZ",label:"Казақша",src:a.PACKAGES_URL+"/static.promo/octavius/languages/kaz.png"},{key:"uz_UZ",label:"O‘zbek",src:a.PACKAGES_URL+"/static.promo/octavius/languages/uz.png"},{key:"mo_MD",label:"Moldovenească",src:a.PACKAGES_URL+"/static.promo/octavius/languages/mold.png"},{key:"ro_RO",label:"Română",src:a.PACKAGES_URL+"/static.promo/octavius/languages/rom.png"},{key:"en_US",label:"English",src:a.PACKAGES_URL+"/static.promo/octavius/languages/eng.png"},{key:"es_ES",label:"Español",src:a.PACKAGES_URL+"/static.promo/octavius/languages/esp.png"}];var c={};b.forEach(function(a,b){a.index=b;c[a.key]=a});exports.LANG_ARRAY=b;exports.LANG_MAP=c});define("helpers/plural",["require","exports"],function(require,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});function a(a,b){var c=b.one,d=b.many;return a===1?c:d}exports.default=a});(function(a,b){typeof exports==="object"&&typeof module!=="undefined"?b(exports,require("react"),require("mobx"),require("react-dom")):typeof define==="function"&&define.amd?define("mobx-react",["exports","react","mobx","react-dom"],b):b(a.mobxReact={},a.React,a.mobx,a.ReactDOM)})(this,function(exports,a,b,c){"use strict";var d="default"in a?a["default"]:a;function e(a){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){e=function(a){return typeof a}}else{e=function(a){return a&&typeof Symbol==="function"&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a}}return e(a)}function f(a,b){if(!(a instanceof b)){throw new TypeError("Cannot call a class as a function")}}function g(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||false;d.configurable=true;if("value"in d)d.writable=true;Object.defineProperty(a,d.key,d)}}function h(a,b,c){if(b)g(a.prototype,b);if(c)g(a,c);return a}function i(a,b,c){if(b in a){Object.defineProperty(a,b,{value:c,enumerable:true,configurable:true,writable:true})}else{a[b]=c}return a}function j(a,b){if(typeof b!=="function"&&b!==null){throw new TypeError("Super expression must either be null or a function")}a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,writable:true,configurable:true}});if(b)l(a,b)}function k(a){k=Object.setPrototypeOf?Object.getPrototypeOf:function a(b){return b.__proto__||Object.getPrototypeOf(b)};return k(a)}function l(a,b){l=Object.setPrototypeOf||function a(b,c){b.__proto__=c;return b};return l(a,b)}function m(a){if(a===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return a}function n(a,b){if(b&&(typeof b==="object"||typeof b==="function")){return b}return m(a)}function o(a){return a&&a.__esModule&&Object.prototype.hasOwnProperty.call(a,"default")?a.default:a}function p(a,b){return b={exports:{}},a(b,b.exports),b.exports}var q=p(function(a,exports){Object.defineProperty(exports,"__esModule",{value:!0});var b="function"===typeof Symbol&&Symbol.for,c=b?Symbol.for("react.element"):60103,d=b?Symbol.for("react.portal"):60106,e=b?Symbol.for("react.fragment"):60107,f=b?Symbol.for("react.strict_mode"):60108,g=b?Symbol.for("react.profiler"):60114,h=b?Symbol.for("react.provider"):60109,i=b?Symbol.for("react.context"):60110,j=b?Symbol.for("react.async_mode"):60111,k=b?Symbol.for("react.forward_ref"):60112,l=b?Symbol.for("react.placeholder"):60113;function m(a){if("object"===typeof a&&null!==a){var b=a.$$typeof;switch(b){case c:switch(a=a.type,a){case j:case e:case g:case f:return a;default:switch(a=a&&a.$$typeof,a){case i:case k:case h:return a;default:return b}}case d:return b}}}exports.typeOf=m;exports.AsyncMode=j;exports.ContextConsumer=i;exports.ContextProvider=h;exports.Element=c;exports.ForwardRef=k;exports.Fragment=e;exports.Profiler=g;exports.Portal=d;exports.StrictMode=f;exports.isValidElementType=function(a){return"string"===typeof a||"function"===typeof a||a===e||a===j||a===g||a===f||a===l||"object"===typeof a&&null!==a&&("function"===typeof a.then||a.$$typeof===h||a.$$typeof===i||a.$$typeof===k)};exports.isAsyncMode=function(a){return m(a)===j};exports.isContextConsumer=function(a){return m(a)===i};exports.isContextProvider=function(a){return m(a)===h};exports.isElement=function(a){return"object"===typeof a&&null!==a&&a.$$typeof===c};exports.isForwardRef=function(a){return m(a)===k};exports.isFragment=function(a){return m(a)===e};exports.isProfiler=function(a){return m(a)===g};exports.isPortal=function(a){return m(a)===d};exports.isStrictMode=function(a){return m(a)===f}});o(q);var r=q.typeOf;var s=q.AsyncMode;var t=q.ContextConsumer;var u=q.ContextProvider;var v=q.Element;var w=q.ForwardRef;var x=q.Fragment;var y=q.Profiler;var z=q.Portal;var A=q.StrictMode;var B=q.isValidElementType;var C=q.isAsyncMode;var D=q.isContextConsumer;var E=q.isContextProvider;var F=q.isElement;var G=q.isForwardRef;var H=q.isFragment;var I=q.isProfiler;var J=q.isPortal;var K=q.isStrictMode;var L=p(function(a){{a.exports=q}});var M;function N(a,b,c){if(b in a){Object.defineProperty(a,b,{value:c,enumerable:true,configurable:true,writable:true})}else{a[b]=c}return a}var O={childContextTypes:true,contextTypes:true,defaultProps:true,displayName:true,getDefaultProps:true,getDerivedStateFromProps:true,mixins:true,propTypes:true,type:true};var P={name:true,length:true,prototype:true,caller:true,callee:true,arguments:true,arity:true};var Q=N({},L.ForwardRef,(M={},N(M,"$$typeof",true),N(M,"render",true),M));var R=Object.defineProperty;var S=Object.getOwnPropertyNames;var T=Object.getOwnPropertySymbols;var U=Object.getOwnPropertyDescriptor;var V=Object.getPrototypeOf;var W=Object.prototype;function X(a,b,c){if(typeof b!=="string"){if(W){var d=V(b);if(d&&d!==W){X(a,d,c)}}var e=S(b);if(T){e=e.concat(T(b))}var f=Q[a["$$typeof"]]||O;var g=Q[b["$$typeof"]]||O;for(var h=0;h<e.length;++h){var i=e[h];if(!P[i]&&!(c&&c[i])&&!(g&&g[i])&&!(f&&f[i])){var j=U(b,i);try{R(a,i,j)}catch(a){}}}return a}return a}var Y=X;var Z=function(){function a(){f(this,a);this.listeners=[]}h(a,[{key:"on",value:function a(b){var c=this;this.listeners.push(b);return function(){var a=c.listeners.indexOf(b);if(a!==-1)c.listeners.splice(a,1)}}},{key:"emit",value:function a(b){this.listeners.forEach(function(a){return a(b)})}}]);return a}();function _(a){function c(c,d,e,f,g,h){for(var i=arguments.length,j=new Array(i>6?i-6:0),k=6;k<i;k++){j[k-6]=arguments[k]}return b.untracked(function(){f=f||"<<anonymous>>";h=h||e;if(d[e]==null){if(c){var b=d[e]===null?"null":"undefined";return new Error("The "+g+" `"+h+"` is marked as required "+"in `"+f+"`, but its value is `"+b+"`.")}return null}else{return a.apply(void 0,[d,e,f,g,h].concat(j))}})}var d=c.bind(null,false);d.isRequired=c.bind(null,true);return d}function aa(a,b){if(a==="symbol"){return true}if(b["@@toStringTag"]==="Symbol"){return true}if(typeof Symbol==="function"&&b instanceof Symbol){return true}return false}function ba(a){var b=e(a);if(Array.isArray(a)){return"array"}if(a instanceof RegExp){return"object"}if(aa(b,a)){return"symbol"}return b}function ca(a){var b=ba(a);if(b==="object"){if(a instanceof Date){return"date"}else if(a instanceof RegExp){return"regexp"}}return b}function da(a,c){return _(function(d,e,f,g,h){return b.untracked(function(){if(a){if(ba(d[e])===c.toLowerCase())return null}var g;switch(c){case"Array":g=b.isObservableArray;break;case"Object":g=b.isObservableObject;break;case"Map":g=b.isObservableMap;break;default:throw new Error("Unexpected mobxType: ".concat(c))}var i=d[e];if(!g(i)){var j=ca(i);var k=a?" or javascript `"+c.toLowerCase()+"`":"";return new Error("Invalid prop `"+h+"` of type `"+j+"` supplied to"+" `"+f+"`, expected `mobx.Observable"+c+"`"+k+".")}return null})})}function ea(a,c){return _(function(d,e,f,g,h){for(var i=arguments.length,j=new Array(i>5?i-5:0),k=5;k<i;k++){j[k-5]=arguments[k]}return b.untracked(function(){if(typeof c!=="function"){return new Error("Property `"+h+"` of component `"+f+"` has "+"invalid PropType notation.")}var b=da(a,"Array")(d,e,f);if(b instanceof Error)return b;var i=d[e];for(var k=0;k<i.length;k++){b=c.apply(void 0,[i,k,f,g,h+"["+k+"]"].concat(j));if(b instanceof Error)return b}return null})})}var fa=da(false,"Array");var ga=ea.bind(null,false);var ha=da(false,"Map");var ia=da(false,"Object");var ja=da(true,"Array");var ka=ea.bind(null,true);var la=da(true,"Object");var ma=Object.freeze({observableArray:fa,observableArrayOf:ga,observableMap:ha,observableObject:ia,arrayOrObservableArray:ja,arrayOrObservableArrayOf:ka,objectOrObservableObject:la});function na(a){return!(a.prototype&&a.prototype.render)}var oa=0;function pa(a){if(typeof Symbol==="function"){return Symbol(a)}var b="__$mobx-react ".concat(a," (").concat(oa,")");oa++;return b}var qa=pa("patchMixins");var ra=pa("patchedDefinition");function sa(a,b){var c=a[qa]=a[qa]||{};var d=c[b]=c[b]||{};d.locks=d.locks||0;d.methods=d.methods||[];return d}function ta(a,b){var c=this;for(var d=arguments.length,e=new Array(d>2?d-2:0),f=2;f<d;f++){e[f-2]=arguments[f]}b.locks++;try{var g;if(a!==undefined&&a!==null){g=a.apply(this,e)}return g}finally{b.locks--;if(b.locks===0){b.methods.forEach(function(a){a.apply(c,e)})}}}function ua(a,b){var c=function c(){for(var d=arguments.length,e=new Array(d),f=0;f<d;f++){e[f]=arguments[f]}ta.call.apply(ta,[this,a,b].concat(e))};return c}function va(a,b){var c=sa(a,b);for(var d=arguments.length,e=new Array(d>2?d-2:0),f=2;f<d;f++){e[f-2]=arguments[f]}for(var g=0;g<e.length;g++){var h=e[g];if(c.methods.indexOf(h)<0){c.methods.push(h)}}var i=Object.getOwnPropertyDescriptor(a,b);if(i&&i[ra]){return}var j=a[b];var k=wa(a,b,i?i.enumerable:undefined,c,j);Object.defineProperty(a,b,k)}function wa(a,b,c,d,e){var f;var g=ua(e,d);return f={},i(f,ra,true),i(f,"get",function a(){return g}),i(f,"set",function e(f){if(this===a){g=ua(f,d)}else{var h=wa(this,b,c,d,f);Object.defineProperty(this,b,h)}}),i(f,"configurable",true),i(f,"enumerable",c),f}var xa={mobxStores:la};Object.seal(xa);var ya={contextTypes:{get:function a(){return xa},set:function a(b){console.warn("Mobx Injector: you are trying to attach `contextTypes` on an component decorated with `inject` (or `observer`) HOC. Please specify the contextTypes on the wrapped component instead. It is accessible through the `wrappedComponent`")},configurable:true,enumerable:false},isMobxInjector:{value:true,writable:true,configurable:true,enumerable:true}};function za(b,c,d){var e="inject-"+(c.displayName||c.name||c.constructor&&c.constructor.name||"Unknown");if(d)e+="-with-"+d;var g=function(d){j(e,d);function e(){var a;var b;f(this,e);for(var c=arguments.length,d=new Array(c),g=0;g<c;g++){d[g]=arguments[g]}b=n(this,(a=k(e)).call.apply(a,[this].concat(d)));b.storeRef=function(a){b.wrappedInstance=a};return b}h(e,[{key:"render",value:function d(){var e={};for(var f in this.props){if(this.props.hasOwnProperty(f)){e[f]=this.props[f]}}var g=b(this.context.mobxStores||{},e,this.context)||{};for(var h in g){e[h]=g[h]}if(!na(c)){e.ref=this.storeRef}return a.createElement(c,e)}}]);return e}(a.Component);g.displayName=e;Y(g,c);g.wrappedComponent=c;Object.defineProperties(g,ya);return g}function Aa(a){return function(b,c){a.forEach(function(a){if(a in c)return;if(!(a in b))throw new Error("MobX injector: Store '"+a+"' is not available! Make sure it is provided by some Provider");c[a]=b[a]});return c}}function Ba(){var a;if(typeof arguments[0]==="function"){a=arguments[0];return function(b){var c=za(a,b);c.isMobxInjector=false;c=Xa(c);c.isMobxInjector=true;return c}}else{var b=[];for(var c=0;c<arguments.length;c++){b[c]=arguments[c]}a=Aa(b);return function(c){return za(a,c,b.join("-"))}}}var Ca=b.$mobx||"$mobx";var Da=pa("isUnmounted");var Ea=false;var Fa=false;var Ga=false;var Ha=typeof WeakMap!=="undefined"?new WeakMap:undefined;var Ia=new Z;var Ja=pa("skipRender");var Ka=pa("isForcingUpdate");function La(a,b,c){if(!Object.hasOwnProperty.call(a,b)){Object.defineProperty(a,b,{enumerable:false,configurable:true,writable:true,value:c})}else{a[b]=c}}function Ma(a){if(c.findDOMNode){try{return c.findDOMNode(a)}catch(a){return null}}return null}function Na(a){var b=Ma(a);if(b&&Ha)Ha.set(b,a);Ia.emit({event:"render",renderTime:a.__$mobRenderEnd-a.__$mobRenderStart,totalTime:Date.now()-a.__$mobRenderStart,component:a,node:b})}function Oa(){if(typeof WeakMap==="undefined")throw new Error("[mobx-react] tracking components is not supported in this browser.");if(!Ea)Ea=true}function Pa(a){Fa=a}var Qa=new Z;function Ra(a,b){va(a,b,Va[b])}function Sa(a,b){if(Ta(a,b))return true;if(e(a)!=="object"||a===null||e(b)!=="object"||b===null){return false}var c=Object.keys(a);var d=Object.keys(b);if(c.length!==d.length)return false;for(var f=0;f<c.length;f++){if(!hasOwnProperty.call(b,c[f])||!Ta(a[c[f]],b[c[f]])){return false}}return true}function Ta(a,b){if(a===b){return a!==0||1/a===1/b}else{return a!==a&&b!==b}}function Ua(c){var d=this;if(Fa===true)return c.call(this);function e(){var a=this;i=false;var c=undefined;var d=undefined;j.track(function(){if(Ea){a.__$mobRenderStart=Date.now()}try{d=b._allowStateChanges(false,h)}catch(a){c=a}if(Ea){a.__$mobRenderEnd=Date.now()}});if(c){Qa.emit(c);throw c}return d}var f=this.displayName||this.name||this.constructor&&(this.constructor.displayName||this.constructor.name)||"<component>";var g=this._reactInternalInstance&&this._reactInternalInstance._rootNodeID||this._reactInternalInstance&&this._reactInternalInstance._debugID||this._reactInternalFiber&&this._reactInternalFiber._debugID;La(this,Ja,false);La(this,Ka,false);var h=c.bind(this);var i=false;var j=new b.Reaction("".concat(f,"#").concat(g,".render()"),function(){if(!i){i=true;if(typeof d.componentWillReact==="function")d.componentWillReact();if(d[Da]!==true){var b=true;try{La(d,Ka,true);if(!d[Ja])a.Component.prototype.forceUpdate.call(d);b=false}finally{La(d,Ka,false);if(b)j.dispose()}}}});j.reactComponent=this;e[Ca]=j;this.render=e;return e.call(this)}var Va={componentWillUnmount:function a(){if(Fa===true)return;this.render[Ca]&&this.render[Ca].dispose();this[Da]=true;if(Ea){var b=Ma(this);if(b&&Ha){Ha.delete(b)}Ia.emit({event:"destroy",component:this,node:b})}},componentDidMount:function a(){if(Ea){Na(this)}},componentDidUpdate:function a(){if(Ea){Na(this)}},shouldComponentUpdate:function a(b,c){if(Fa){console.warn("[mobx-react] It seems that a re-rendering of a React component is triggered while in static (server-side) mode. Please make sure components are rendered only once server-side.")}if(this.state!==c){return true}return!Sa(this.props,b)}};function Wa(a,c){var d=pa("reactProp_".concat(c,"_valueHolder"));var e=pa("reactProp_".concat(c,"_atomHolder"));function f(){if(!this[e]){La(this,e,b.createAtom("reactive "+c))}return this[e]}Object.defineProperty(a,c,{configurable:true,enumerable:true,get:function a(){f.call(this).reportObserved();return this[d]},set:function a(b){if(!this[Ka]&&!Sa(this[d],b)){La(this,d,b);La(this,Ja,true);f.call(this).reportChanged();La(this,Ja,false)}else{La(this,d,b)}}})}function Xa(b,c){if(typeof b==="string"){throw new Error("Store names should be provided as array")}if(Array.isArray(b)){if(!Ga){Ga=true;console.warn('Mobx observer: Using observer to inject stores is deprecated since 4.0. Use `@inject("store1", "store2") @observer ComponentClass` or `inject("store1", "store2")(observer(componentClass))` instead of `@observer(["store1", "store2"]) ComponentClass`')}if(!c){return function(a){return Xa(b,a)}}else{return Ba.apply(null,b)(Xa(c))}}var d=b;if(d.isMobxInjector===true){console.warn("Mobx observer: You are trying to use 'observer' on a component that already has 'inject'. Please apply 'observer' before applying 'inject'")}if(d.__proto__===a.PureComponent){console.warn("Mobx observer: You are using 'observer' on React.PureComponent. These two achieve two opposite goals and should not be used together")}if(typeof d==="function"&&(!d.prototype||!d.prototype.render)&&!d.isReactClass&&!a.Component.isPrototypeOf(d)){var e,g;var i=Xa((g=e=function(a){j(b,a);function b(){f(this,b);return n(this,k(b).apply(this,arguments))}h(b,[{key:"render",value:function a(){return d.call(this,this.props,this.context)}}]);return b}(a.Component),e.displayName=d.displayName||d.name,e.contextTypes=d.contextTypes,e.propTypes=d.propTypes,e.defaultProps=d.defaultProps,g));Y(i,d);return i}if(!d){throw new Error("Please pass a valid component to 'observer'")}var l=d.prototype||d;Ya(l);d.isMobXReactObserver=true;Wa(l,"props");Wa(l,"state");var m=l.render;l.render=function(){return Ua.call(this,m)};return d}function Ya(a){["componentDidMount","componentWillUnmount","componentDidUpdate"].forEach(function(b){Ra(a,b)});if(!a.shouldComponentUpdate){a.shouldComponentUpdate=Va.shouldComponentUpdate}else{if(a.shouldComponentUpdate!==Va.shouldComponentUpdate){console.warn("Use `shouldComponentUpdate` in an `observer` based component breaks the behavior of `observer` and might lead to unexpected results. Manually implementing `sCU` should not be needed when using mobx-react.")}}}var Za=Xa(function(a){var b=a.children,c=a.inject,e=a.render;var f=b||e;if(typeof f==="undefined"){return null}if(!c){return f()}console.warn("<Observer inject=.../> is no longer supported. Please use inject on the enclosing component instead");var g=Ba(c)(f);return d.createElement(g,null)});Za.displayName="Observer";var $a=function a(b,c,d,f,g){var h=c==="children"?"render":"children";if(typeof b[c]==="function"&&typeof b[h]==="function"){return new Error("Invalid prop,do not use children and render in the same time in`"+d)}if(typeof b[c]==="function"||typeof b[h]==="function"){return}return new Error("Invalid prop `"+g+"` of type `"+e(b[c])+"` supplied to"+" `"+d+"`, expected `function`.")};Za.propTypes={render:$a,children:$a};function _a(){var a=this.constructor.getDerivedStateFromProps(this.props,this.state);if(a!==null&&a!==undefined){this.setState(a)}}function ab(a){function b(b){var c=this.constructor.getDerivedStateFromProps(a,b);return c!==null&&c!==undefined?c:null}this.setState(b.bind(this))}function bb(a,b){try{var c=this.props;var d=this.state;this.props=a;this.state=b;this.__reactInternalSnapshotFlag=true;this.__reactInternalSnapshot=this.getSnapshotBeforeUpdate(c,d)}finally{this.props=c;this.state=d}}_a.__suppressDeprecationWarning=true;ab.__suppressDeprecationWarning=true;bb.__suppressDeprecationWarning=true;function cb(a){var b=a.prototype;if(!b||!b.isReactComponent){throw new Error("Can only polyfill class components")}if(typeof a.getDerivedStateFromProps!=="function"&&typeof b.getSnapshotBeforeUpdate!=="function"){return a}var c=null;var d=null;var e=null;if(typeof b.componentWillMount==="function"){c="componentWillMount"}else if(typeof b.UNSAFE_componentWillMount==="function"){c="UNSAFE_componentWillMount"}if(typeof b.componentWillReceiveProps==="function"){d="componentWillReceiveProps"}else if(typeof b.UNSAFE_componentWillReceiveProps==="function"){d="UNSAFE_componentWillReceiveProps"}if(typeof b.componentWillUpdate==="function"){e="componentWillUpdate"}else if(typeof b.UNSAFE_componentWillUpdate==="function"){e="UNSAFE_componentWillUpdate"}if(c!==null||d!==null||e!==null){var f=a.displayName||a.name;var g=typeof a.getDerivedStateFromProps==="function"?"getDerivedStateFromProps()":"getSnapshotBeforeUpdate()";throw Error("Unsafe legacy lifecycles will not be called for components using new component APIs.\n\n"+f+" uses "+g+" but also contains the following legacy lifecycles:"+(c!==null?"\n  "+c:"")+(d!==null?"\n  "+d:"")+(e!==null?"\n  "+e:"")+"\n\nThe above lifecycles should be removed. Learn more about this warning here:\n"+"https://fb.me/react-async-component-lifecycle-hooks")}if(typeof a.getDerivedStateFromProps==="function"){b.componentWillMount=_a;b.componentWillReceiveProps=ab}if(typeof b.getSnapshotBeforeUpdate==="function"){if(typeof b.componentDidUpdate!=="function"){throw new Error("Cannot polyfill getSnapshotBeforeUpdate() for components that do not define componentDidUpdate() on the prototype")}b.componentWillUpdate=bb;var h=b.componentDidUpdate;b.componentDidUpdate=function a(b,c,d){var e=this.__reactInternalSnapshotFlag?this.__reactInternalSnapshot:d;h.call(this,b,c,e)}}return a}var db={children:true,key:true,ref:true};var eb=function(b){j(c,b);function c(a,b){var d;f(this,c);d=n(this,k(c).call(this,a,b));d.state={};fb(a,d.state);return d}h(c,[{key:"render",value:function b(){return a.Children.only(this.props.children)}},{key:"getChildContext",value:function a(){var b={};fb(this.context.mobxStores,b);fb(this.props,b);return{mobxStores:b}}}],[{key:"getDerivedStateFromProps",value:function a(b,c){if(!b)return null;if(!c)return b;if(Object.keys(b).filter(gb).length!==Object.keys(c).filter(gb).length)console.warn("MobX Provider: The set of provided stores has changed. Please avoid changing stores as the change might not propagate to all children");if(!b.suppressChangedStoreWarning)for(var d in b){if(gb(d)&&c[d]!==b[d])console.warn("MobX Provider: Provided store '"+d+"' has changed. Please avoid replacing stores as the change might not propagate to all children")}return b}}]);return c}(a.Component);eb.contextTypes={mobxStores:la};eb.childContextTypes={mobxStores:la.isRequired};function fb(a,b){if(!a)return;for(var c in a){if(gb(c))b[c]=a[c]}}function gb(a){return!db[a]&&a!=="suppressChangedStoreWarning"}cb(eb);var hb=pa("disposeOnUnmount");function ib(){var a=this;if(!this[hb]){return}this[hb].forEach(function(b){var c=typeof b==="string"?a[b]:b;if(c!==undefined&&c!==null){if(typeof c!=="function"){throw new Error("[mobx-react] disposeOnUnmount only works on functions such as disposers returned by reactions, autorun, etc.")}c()}});this[hb]=[]}function jb(b,c){if(Array.isArray(c)){return c.map(function(a){return jb(b,a)})}if(!b instanceof a.Component){throw new Error("[mobx-react] disposeOnUnmount only works on class based React components.")}if(typeof c!=="string"&&typeof c!=="function"){throw new Error("[mobx-react] disposeOnUnmount only works if the parameter is either a property key or a function.")}var d=!!b[hb];var e=b[hb]||(b[hb]=[]);e.push(c);if(!d){va(b,"componentWillUnmount",ib)}if(typeof c!=="string"){return c}}if(!a.Component)throw new Error("mobx-react requires React to be available");if(!b.spy)throw new Error("mobx-react requires mobx to be available");if(typeof c.unstable_batchedUpdates==="function")b.configure({reactionScheduler:c.unstable_batchedUpdates});var kb=function a(b){return Qa.on(b)};if((typeof __MOBX_DEVTOOLS_GLOBAL_HOOK__==="undefined"?"undefined":e(__MOBX_DEVTOOLS_GLOBAL_HOOK__))==="object"){var lb={spy:b.spy,extras:{getDebugName:b.getDebugName}};var mb={renderReporter:Ia,componentByNodeRegistry:Ha,componentByNodeRegistery:Ha,trackComponents:Oa};__MOBX_DEVTOOLS_GLOBAL_HOOK__.injectMobxReact(mb,lb)}exports.propTypes=ma;exports.PropTypes=ma;exports.onError=kb;exports.observer=Xa;exports.Observer=Za;exports.renderReporter=Ia;exports.componentByNodeRegistery=Ha;exports.componentByNodeRegistry=Ha;exports.trackComponents=Oa;exports.useStaticRendering=Pa;exports.Provider=eb;exports.inject=Ba;exports.disposeOnUnmount=jb;Object.defineProperty(exports,"__esModule",{value:true})});!function(a){"object"==typeof exports&&"undefined"!=typeof module?module.exports=a():"function"==typeof define&&define.amd?define("prop-types",[],a):("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).PropTypes=a()}(function(){return function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);throw(i=new Error("Cannot find module '"+g+"'")).code="MODULE_NOT_FOUND",i}i=c[g]={exports:{}},b[g][0].call(i.exports,function(a){return e(b[g][1][a]||a)},i,i.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(require,a,exports){"use strict";var b=require(3);function c(){}function d(){}d.resetWarningCache=c,a.exports=function(){function a(a,c,d,e,f,g){if(g!==b){g=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw g.name="Invariant Violation",g}}function e(){return a}var f={array:a.isRequired=a,bigint:a,bool:a,func:a,number:a,object:a,string:a,symbol:a,any:a,arrayOf:e,element:a,elementType:a,instanceOf:e,node:a,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:d,resetWarningCache:c};return f.PropTypes=f}},{3:3}],2:[function(require,a,exports){a.exports=require(1)()},{1:1}],3:[function(require,a,exports){"use strict";a.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},{}]},{},[2])(2)});!function(a,b){"object"==typeof exports&&"undefined"!=typeof module?b(exports):"function"==typeof define&&define.amd?define("@mail/feedback-loader/EventsLogger",["exports"],b):b((a="undefined"!=typeof globalThis?globalThis:a||self).EventsLogger={})}(this,function(a){"use strict";function b(a,b,c,d){return new(c||(c=Promise))(function(e,f){function g(a){try{i(d.next(a))}catch(a){f(a)}}function h(a){try{i(d.throw(a))}catch(a){f(a)}}function i(a){var b;a.done?e(a.value):(b=a.value,b instanceof c?b:new c(function(a){a(b)})).then(g,h)}i((d=d.apply(a,b||[])).next())})}function c(a,b){var c,d,e,f,g={label:0,sent:function(){if(1&e[0])throw e[1];return e[1]},trys:[],ops:[]};return f={next:h(0),throw:h(1),return:h(2)},"function"==typeof Symbol&&(f[Symbol.iterator]=function(){return this}),f;function h(h){return function(i){return function(h){if(c)throw new TypeError("Generator is already executing.");for(;f&&(f=0,h[0]&&(g=0)),g;)try{if(c=1,d&&(e=2&h[0]?d.return:h[0]?d.throw||((e=d.return)&&e.call(d),0):d.next)&&!(e=e.call(d,h[1])).done)return e;switch(d=0,e&&(h=[2&h[0],e.value]),h[0]){case 0:case 1:e=h;break;case 4:return g.label++,{value:h[1],done:!1};case 5:g.label++,d=h[1],h=[0];continue;case 7:h=g.ops.pop(),g.trys.pop();continue;default:if(!(e=g.trys,(e=e.length>0&&e[e.length-1])||6!==h[0]&&2!==h[0])){g=0;continue}if(3===h[0]&&(!e||h[1]>e[0]&&h[1]<e[3])){g.label=h[1];break}if(6===h[0]&&g.label<e[1]){g.label=e[1],e=h;break}if(e&&g.label<e[2]){g.label=e[2],g.ops.push(h);break}e[2]&&g.ops.pop(),g.trys.pop();continue}h=b.call(a,g)}catch(a){h=[6,a],d=0}finally{c=e=0}if(5&h[0])throw h[1];return{value:h[0]?h[1]:void 0,done:!0}}([h,i])}}}function d(a){if(null===a||!0===a||!1===a)return NaN;var b=Number(a);return isNaN(b)?b:b<0?Math.ceil(b):Math.floor(b)}function e(a,b){if(b.length<a)throw new TypeError(a+" argument"+(a>1?"s":"")+" required, but only "+b.length+" present")}function f(a){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a})(a)}function g(a){e(1,arguments);var b=Object.prototype.toString.call(a);return a instanceof Date||"object"===f(a)&&"[object Date]"===b?new Date(a.getTime()):"number"==typeof a||"[object Number]"===b?new Date(a):("string"!=typeof a&&"[object String]"!==b||"undefined"==typeof console||(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn((new Error).stack)),new Date(NaN))}function h(a,b){e(2,arguments);var c=g(a).getTime(),f=d(b);return new Date(c+f)}function i(a,b){e(2,arguments);var c=g(a),d=g(b);return c.getTime()>d.getTime()}var j=function(){function a(a,b){void 0===a&&(a=""),void 0===b&&(b=""),this.userId=a,this.surveyId=b;try{this.storage=window.localStorage}catch(a){this.storage={}}}return a.prototype.set=function(a,b){var c=this.getExpandedKey(a);try{this.storage[c]=JSON.stringify(b)}catch(a){}},a.prototype.get=function(a){var b=this.getExpandedKey(a);try{return JSON.parse(this.storage[b])}catch(a){return null}},a.prototype.getExpandedKey=function(a){return[this.surveyId,"feedback",this.userId,a].filter(Boolean).join(":")},a}(),k=function(){function a(a){void 0===a&&(a=""),this.storage=new j("EventsLogger",a)}return a.prototype.push=function(a){return b(this,void 0,void 0,function(){return c(this,function(b){return this.storage.set(a,Date.now()),[2]})})},a.prototype.check=function(a){return b(this,void 0,void 0,function(){var b,d,e,f;return c(this,function(c){return 0===a.length?[2,!0]:(b=a[a.length-1],d=b.type,e=b.minDelay,null===(f=this.storage.get(d))?[2,!1]:void 0===e?[2,!0]:[2,i(new Date,h(f,e))])})})},a}();a.default=k,Object.defineProperty(a,"__esModule",{value:!0})});!function(a,b){"object"==typeof exports&&"undefined"!=typeof module?b(exports):"function"==typeof define&&define.amd?define("@mail/feedback-loader/FeedbackLoader",["exports"],b):b((a="undefined"!=typeof globalThis?globalThis:a||self).FeedbackLoader={})}(this,function(a){"use strict";var b=function(a,c){return(b=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])})(a,c)};var c=function(){return(c=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++)for(var e in b=arguments[c])Object.prototype.hasOwnProperty.call(b,e)&&(a[e]=b[e]);return a}).apply(this,arguments)};function d(a,b){var c={};for(var d in a)Object.prototype.hasOwnProperty.call(a,d)&&b.indexOf(d)<0&&(c[d]=a[d]);if(null!=a&&"function"==typeof Object.getOwnPropertySymbols){var e=0;for(d=Object.getOwnPropertySymbols(a);e<d.length;e++)b.indexOf(d[e])<0&&Object.prototype.propertyIsEnumerable.call(a,d[e])&&(c[d[e]]=a[d[e]])}return c}function e(a,b,c,d){return new(c||(c=Promise))(function(e,f){function g(a){try{i(d.next(a))}catch(a){f(a)}}function h(a){try{i(d.throw(a))}catch(a){f(a)}}function i(a){var b;a.done?e(a.value):(b=a.value,b instanceof c?b:new c(function(a){a(b)})).then(g,h)}i((d=d.apply(a,b||[])).next())})}function f(a,b){var c,d,e,f,g={label:0,sent:function(){if(1&e[0])throw e[1];return e[1]},trys:[],ops:[]};return f={next:h(0),throw:h(1),return:h(2)},"function"==typeof Symbol&&(f[Symbol.iterator]=function(){return this}),f;function h(h){return function(i){return function(h){if(c)throw new TypeError("Generator is already executing.");for(;f&&(f=0,h[0]&&(g=0)),g;)try{if(c=1,d&&(e=2&h[0]?d.return:h[0]?d.throw||((e=d.return)&&e.call(d),0):d.next)&&!(e=e.call(d,h[1])).done)return e;switch(d=0,e&&(h=[2&h[0],e.value]),h[0]){case 0:case 1:e=h;break;case 4:return g.label++,{value:h[1],done:!1};case 5:g.label++,d=h[1],h=[0];continue;case 7:h=g.ops.pop(),g.trys.pop();continue;default:if(!(e=g.trys,(e=e.length>0&&e[e.length-1])||6!==h[0]&&2!==h[0])){g=0;continue}if(3===h[0]&&(!e||h[1]>e[0]&&h[1]<e[3])){g.label=h[1];break}if(6===h[0]&&g.label<e[1]){g.label=e[1],e=h;break}if(e&&g.label<e[2]){g.label=e[2],g.ops.push(h);break}e[2]&&g.ops.pop(),g.trys.pop();continue}h=b.call(a,g)}catch(a){h=[6,a],d=0}finally{c=e=0}if(5&h[0])throw h[1];return{value:h[0]?h[1]:void 0,done:!0}}([h,i])}}}var g=function(){this.__data__=[],this.size=0};var h=function(a,b){return a===b||a!=a&&b!=b};var i=function(a,b){for(var c=a.length;c--;)if(h(a[c][0],b))return c;return-1},j=Array.prototype.splice;var k=function(a){var b=this.__data__,c=i(b,a);return!(c<0)&&(c==b.length-1?b.pop():j.call(b,c,1),--this.size,!0)};var l=function(a){var b=this.__data__,c=i(b,a);return c<0?void 0:b[c][1]};var m=function(a){return i(this.__data__,a)>-1};var n=function(a,b){var c=this.__data__,d=i(c,a);return d<0?(++this.size,c.push([a,b])):c[d][1]=b,this};function o(a){var b=-1,c=null==a?0:a.length;for(this.clear();++b<c;){var d=a[b];this.set(d[0],d[1])}}o.prototype.clear=g,o.prototype.delete=k,o.prototype.get=l,o.prototype.has=m,o.prototype.set=n;var p=o;var q=function(){this.__data__=new p,this.size=0};var r=function(a){var b=this.__data__,c=b.delete(a);return this.size=b.size,c};var s=function(a){return this.__data__.get(a)};var t=function(a){return this.__data__.has(a)},u="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function v(a,b){return a(b={exports:{}},b.exports),b.exports}var w="object"==typeof u&&u&&u.Object===Object&&u,x="object"==typeof self&&self&&self.Object===Object&&self,y=w||x||Function("return this")(),z=y.Symbol,A=Object.prototype,B=A.hasOwnProperty,C=A.toString,D=z?z.toStringTag:void 0;var E=function(a){var b=B.call(a,D),c=a[D];try{a[D]=void 0;var d=!0}catch(a){}var e=C.call(a);return d&&(b?a[D]=c:delete a[D]),e},F=Object.prototype.toString;var G=function(a){return F.call(a)},H=z?z.toStringTag:void 0;var I=function(a){return null==a?void 0===a?"[object Undefined]":"[object Null]":H&&H in Object(a)?E(a):G(a)};var J=function(a){var b=typeof a;return null!=a&&("object"==b||"function"==b)};var K,L=function(a){if(!J(a))return!1;var b=I(a);return"[object Function]"==b||"[object GeneratorFunction]"==b||"[object AsyncFunction]"==b||"[object Proxy]"==b},M=y["__core-js_shared__"],N=(K=/[^.]+$/.exec(M&&M.keys&&M.keys.IE_PROTO||""))?"Symbol(src)_1."+K:"";var O=function(a){return!!N&&N in a},P=Function.prototype.toString;var Q=function(a){if(null!=a){try{return P.call(a)}catch(a){}try{return a+""}catch(a){}}return""},R=/^\[object .+?Constructor\]$/,S=Function.prototype,$=Object.prototype,T=S.toString,U=$.hasOwnProperty,V=RegExp("^"+T.call(U).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");var W=function(a){return!(!J(a)||O(a))&&(L(a)?V:R).test(Q(a))};var X=function(a,b){return null==a?void 0:a[b]};var Y=function(a,b){var c=X(a,b);return W(c)?c:void 0},Z=Y(y,"Map"),_=Y(Object,"create");var aa=function(){this.__data__=_?_(null):{},this.size=0};var ba=function(a){var b=this.has(a)&&delete this.__data__[a];return this.size-=b?1:0,b},ca=Object.prototype.hasOwnProperty;var da=function(a){var b=this.__data__;if(_){var c=b[a];return"__lodash_hash_undefined__"===c?void 0:c}return ca.call(b,a)?b[a]:void 0},ea=Object.prototype.hasOwnProperty;var fa=function(a){var b=this.__data__;return _?void 0!==b[a]:ea.call(b,a)};var ga=function(a,b){var c=this.__data__;return this.size+=this.has(a)?0:1,c[a]=_&&void 0===b?"__lodash_hash_undefined__":b,this};function ha(a){var b=-1,c=null==a?0:a.length;for(this.clear();++b<c;){var d=a[b];this.set(d[0],d[1])}}ha.prototype.clear=aa,ha.prototype.delete=ba,ha.prototype.get=da,ha.prototype.has=fa,ha.prototype.set=ga;var ia=ha;var ja=function(){this.size=0,this.__data__={hash:new ia,map:new(Z||p),string:new ia}};var ka=function(a){var b=typeof a;return"string"==b||"number"==b||"symbol"==b||"boolean"==b?"__proto__"!==a:null===a};var la=function(a,b){var c=a.__data__;return ka(b)?c["string"==typeof b?"string":"hash"]:c.map};var ma=function(a){var b=la(this,a).delete(a);return this.size-=b?1:0,b};var na=function(a){return la(this,a).get(a)};var oa=function(a){return la(this,a).has(a)};var pa=function(a,b){var c=la(this,a),d=c.size;return c.set(a,b),this.size+=c.size==d?0:1,this};function qa(a){var b=-1,c=null==a?0:a.length;for(this.clear();++b<c;){var d=a[b];this.set(d[0],d[1])}}qa.prototype.clear=ja,qa.prototype.delete=ma,qa.prototype.get=na,qa.prototype.has=oa,qa.prototype.set=pa;var ra=qa;var sa=function(a,b){var c=this.__data__;if(c instanceof p){var d=c.__data__;if(!Z||d.length<199)return d.push([a,b]),this.size=++c.size,this;c=this.__data__=new ra(d)}return c.set(a,b),this.size=c.size,this};function ta(a){var b=this.__data__=new p(a);this.size=b.size}ta.prototype.clear=q,ta.prototype.delete=r,ta.prototype.get=s,ta.prototype.has=t,ta.prototype.set=sa;var ua=ta,va=function(){try{var a=Y(Object,"defineProperty");return a({},"",{}),a}catch(a){}}();var wa=function(a,b,c){"__proto__"==b&&va?va(a,b,{configurable:!0,enumerable:!0,value:c,writable:!0}):a[b]=c};var xa=function(a,b,c){(void 0!==c&&!h(a[b],c)||void 0===c&&!(b in a))&&wa(a,b,c)};var ya=function(a){return function(b,c,d){for(var e=-1,f=Object(b),g=d(b),h=g.length;h--;){var i=g[a?h:++e];if(!1===c(f[i],i,f))break}return b}}(),za=v(function(a,b){var c=b&&!b.nodeType&&b,d=c&&a&&!a.nodeType&&a,e=d&&d.exports===c?y.Buffer:void 0,f=e?e.allocUnsafe:void 0;a.exports=function(a,b){if(b)return a.slice();var c=a.length,d=f?f(c):new a.constructor(c);return a.copy(d),d}}),Aa=y.Uint8Array;var Ba=function(a){var b=new a.constructor(a.byteLength);return new Aa(b).set(new Aa(a)),b};var Ca=function(a,b){var c=b?Ba(a.buffer):a.buffer;return new a.constructor(c,a.byteOffset,a.length)};var Da=function(a,b){var c=-1,d=a.length;for(b||(b=Array(d));++c<d;)b[c]=a[c];return b},Ea=Object.create,Fa=function(){function a(){}return function(b){if(!J(b))return{};if(Ea)return Ea(b);a.prototype=b;var c=new a;return a.prototype=void 0,c}}();var Ga=function(a,b){return function(c){return a(b(c))}}(Object.getPrototypeOf,Object),Ha=Object.prototype;var Ia=function(a){var b=a&&a.constructor;return a===("function"==typeof b&&b.prototype||Ha)};var Ja=function(a){return"function"!=typeof a.constructor||Ia(a)?{}:Fa(Ga(a))};var Ka=function(a){return null!=a&&"object"==typeof a};var La=function(a){return Ka(a)&&"[object Arguments]"==I(a)},Ma=Object.prototype,Na=Ma.hasOwnProperty,Oa=Ma.propertyIsEnumerable,Pa=La(function(){return arguments}())?La:function(a){return Ka(a)&&Na.call(a,"callee")&&!Oa.call(a,"callee")},Qa=Array.isArray;var Ra=function(a){return"number"==typeof a&&a>-1&&a%1==0&&a<=9007199254740991};var Sa=function(a){return null!=a&&Ra(a.length)&&!L(a)};var Ta=function(a){return Ka(a)&&Sa(a)};var Ua=function(){return!1},Va=v(function(a,b){var c=b&&!b.nodeType&&b,d=c&&a&&!a.nodeType&&a,e=d&&d.exports===c?y.Buffer:void 0,f=(e?e.isBuffer:void 0)||Ua;a.exports=f}),Wa=Function.prototype,Xa=Object.prototype,Ya=Wa.toString,Za=Xa.hasOwnProperty,$a=Ya.call(Object);var _a=function(a){if(!Ka(a)||"[object Object]"!=I(a))return!1;var b=Ga(a);if(null===b)return!0;var c=Za.call(b,"constructor")&&b.constructor;return"function"==typeof c&&c instanceof c&&Ya.call(c)==$a},ab={};ab["[object Float32Array]"]=ab["[object Float64Array]"]=ab["[object Int8Array]"]=ab["[object Int16Array]"]=ab["[object Int32Array]"]=ab["[object Uint8Array]"]=ab["[object Uint8ClampedArray]"]=ab["[object Uint16Array]"]=ab["[object Uint32Array]"]=!0,ab["[object Arguments]"]=ab["[object Array]"]=ab["[object ArrayBuffer]"]=ab["[object Boolean]"]=ab["[object DataView]"]=ab["[object Date]"]=ab["[object Error]"]=ab["[object Function]"]=ab["[object Map]"]=ab["[object Number]"]=ab["[object Object]"]=ab["[object RegExp]"]=ab["[object Set]"]=ab["[object String]"]=ab["[object WeakMap]"]=!1;var bb=function(a){return Ka(a)&&Ra(a.length)&&!!ab[I(a)]};var cb=function(a){return function(b){return a(b)}},db=v(function(a,b){var c=b&&!b.nodeType&&b,d=c&&a&&!a.nodeType&&a,e=d&&d.exports===c&&w.process,f=function(){try{var a=d&&d.require&&d.require("util").types;return a||e&&e.binding&&e.binding("util")}catch(a){}}();a.exports=f}),eb=db&&db.isTypedArray,fb=eb?cb(eb):bb;var gb=function(a,b){if(("constructor"!==b||"function"!=typeof a[b])&&"__proto__"!=b)return a[b]},hb=Object.prototype.hasOwnProperty;var ib=function(a,b,c){var d=a[b];hb.call(a,b)&&h(d,c)&&(void 0!==c||b in a)||wa(a,b,c)};var jb=function(a,b,c,d){var e=!c;c||(c={});for(var f=-1,g=b.length;++f<g;){var h=b[f],i=d?d(c[h],a[h],h,c,a):void 0;void 0===i&&(i=a[h]),e?wa(c,h,i):ib(c,h,i)}return c};var kb=function(a,b){for(var c=-1,d=Array(a);++c<a;)d[c]=b(c);return d},lb=/^(?:0|[1-9]\d*)$/;var mb=function(a,b){var c=typeof a;return!!(b=null==b?9007199254740991:b)&&("number"==c||"symbol"!=c&&lb.test(a))&&a>-1&&a%1==0&&a<b},nb=Object.prototype.hasOwnProperty;var ob=function(a,b){var c=Qa(a),d=!c&&Pa(a),e=!c&&!d&&Va(a),f=!c&&!d&&!e&&fb(a),g=c||d||e||f,h=g?kb(a.length,String):[],i=h.length;for(var j in a)!b&&!nb.call(a,j)||g&&("length"==j||e&&("offset"==j||"parent"==j)||f&&("buffer"==j||"byteLength"==j||"byteOffset"==j)||mb(j,i))||h.push(j);return h};var pb=function(a){var b=[];if(null!=a)for(var c in Object(a))b.push(c);return b},qb=Object.prototype.hasOwnProperty;var rb=function(a){if(!J(a))return pb(a);var b=Ia(a),c=[];for(var d in a)("constructor"!=d||!b&&qb.call(a,d))&&c.push(d);return c};var sb=function(a){return Sa(a)?ob(a,!0):rb(a)};var tb=function(a){return jb(a,sb(a))};var ub=function(a,b,c,d,e,f,g){var h=gb(a,c),i=gb(b,c),j=g.get(i);if(j)xa(a,c,j);else{var k=f?f(h,i,c+"",a,b,g):void 0,l=void 0===k;if(l){var m=Qa(i),n=!m&&Va(i),o=!m&&!n&&fb(i);k=i,m||n||o?Qa(h)?k=h:Ta(h)?k=Da(h):n?(l=!1,k=za(i,!0)):o?(l=!1,k=Ca(i,!0)):k=[]:_a(i)||Pa(i)?(k=h,Pa(h)?k=tb(h):J(h)&&!L(h)||(k=Ja(i))):l=!1}l&&(g.set(i,k),e(k,i,d,f,g),g.delete(i)),xa(a,c,k)}};var vb=function a(b,c,d,e,f){b!==c&&ya(c,function(g,h){if(f||(f=new ua),J(g))ub(b,c,h,d,a,e,f);else{var i=e?e(gb(b,h),g,h+"",b,c,f):void 0;void 0===i&&(i=g),xa(b,h,i)}},sb)};var wb=function(a){return a};var xb=function(a,b,c){switch(c.length){case 0:return a.call(b);case 1:return a.call(b,c[0]);case 2:return a.call(b,c[0],c[1]);case 3:return a.call(b,c[0],c[1],c[2])}return a.apply(b,c)},yb=Math.max;var zb=function(a,b,c){return b=yb(void 0===b?a.length-1:b,0),function(){for(var d=arguments,e=-1,f=yb(d.length-b,0),g=Array(f);++e<f;)g[e]=d[b+e];e=-1;for(var h=Array(b+1);++e<b;)h[e]=d[e];return h[b]=c(g),xb(a,this,h)}};var Ab=function(a){return function(){return a}},Bb=va?function(a,b){return va(a,"toString",{configurable:!0,enumerable:!1,value:Ab(b),writable:!0})}:wb,Cb=Date.now;var Db=function(a){var b=0,c=0;return function(){var d=Cb(),e=16-(d-c);if(c=d,e>0){if(++b>=800)return arguments[0]}else b=0;return a.apply(void 0,arguments)}}(Bb);var Eb=function(a,b){return Db(zb(a,b,wb),a+"")};var Fb=function(a,b,c){if(!J(c))return!1;var d=typeof b;return!!("number"==d?Sa(c)&&mb(b,c.length):"string"==d&&b in c)&&h(c[b],a)};var Gb=function(a){return Eb(function(b,c){var d=-1,e=c.length,f=e>1?c[e-1]:void 0,g=e>2?c[2]:void 0;for(f=a.length>3&&"function"==typeof f?(e--,f):void 0,g&&Fb(c[0],c[1],g)&&(f=e<3?void 0:f,e=1),b=Object(b);++d<e;){var h=c[d];h&&a(b,h,d,f)}return b})}(function(a,b,c){vb(a,b,c)}),Hb=function(){function a(a,b){void 0===a&&(a=""),void 0===b&&(b=""),this.userId=a,this.surveyId=b;try{this.storage=window.localStorage}catch(a){this.storage={}}}return a.prototype.set=function(a,b){var c=this.getExpandedKey(a);try{this.storage[c]=JSON.stringify(b)}catch(a){}},a.prototype.get=function(a){var b=this.getExpandedKey(a);try{return JSON.parse(this.storage[b])}catch(a){return null}},a.prototype.getExpandedKey=function(a){return[this.surveyId,"feedback",this.userId,a].filter(Boolean).join(":")},a}();function Ib(a){if(null===a||!0===a||!1===a)return NaN;var b=Number(a);return isNaN(b)?b:b<0?Math.ceil(b):Math.floor(b)}function Jb(a,b){if(b.length<a)throw new TypeError(a+" argument"+(a>1?"s":"")+" required, but only "+b.length+" present")}function Kb(a){return(Kb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a})(a)}function Lb(a){Jb(1,arguments);var b=Object.prototype.toString.call(a);return a instanceof Date||"object"===Kb(a)&&"[object Date]"===b?new Date(a.getTime()):"number"==typeof a||"[object Number]"===b?new Date(a):("string"!=typeof a&&"[object String]"!==b||"undefined"==typeof console||(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn((new Error).stack)),new Date(NaN))}var Mb=function(){function a(a,b){this.window=a,this.origin=b,this.messageHandlers=[]}return a.prototype.send=function(a,b){var c={type:"feedback-evt",action:a,params:b};this.window.postMessage(c,this.origin)},a.prototype.addActionHandler=function(a,b){var c=this.createMessageHandler(a,b);window.addEventListener("message",c),this.messageHandlers.push(c)},a.prototype.clearActionHandlers=function(){this.messageHandlers.forEach(function(a){window.removeEventListener("message",a)})},a.prototype.createMessageHandler=function(a,b){var c=this;return function(d){var e=d.origin,f=d.source,g=d.data;e===c.origin&&f===c.window&&g&&"feedback-evt"===g.type&&g.action===a&&b(g)}},a}(),Nb=function(){function a(a,b){void 0===b&&(b={});var c=this;this.surveyId=a,this.frame=null,this.postMessage=null,this.handleCloseMessage=function(){c.close()},this.handleSetSizeMessage=function(a){var b=a.params||{},d=b.width,e=b.height;"number"==typeof d&&"number"==typeof e&&c.setSize(d,e)},this.handleAppLoadedMessage=function(){c.frame&&(c.frame.style.visibility="visible",c.options.loadedClassName&&c.frame.classList.add(c.options.loadedClassName))},this.handleSubmitMessage=function(){var a=c.options.successHideTimeout;a&&setTimeout(function(){c.close()},a)},this.options=Gb({},b)}return a.prototype.open=function(){var a,b,c=this;if(!this.frame){var d=this.createSrc(),e=this.options,f=e.styles,g=void 0===f?{}:f,h=e.testId,i=void 0===h?"csat":h,j=e.rootElement,k=e.openedClassName;this.frame=document.createElement("iframe"),this.frame.src=d,this.frame.width="320px",this.frame.height="120px",this.frame.dataset.testId=i,this.frame.style.border="none",this.frame.style.display="block",this.frame.style.position="fixed",this.frame.style.zIndex="500",this.frame.style.bottom="8px",this.frame.style.left="8px",this.frame.style.borderRadius="var(--vkui--size_border_radius_promo--regular, 20px)",this.frame.style.boxShadow="var(--vkui--elevation2, 0 4px 32px 0 rgba(0, 16, 61, 0.32))",this.frame.style.visibility="hidden",k&&this.frame.classList.add(k),Object.keys(g).forEach(function(a){var b=g[a];b&&c.frame&&(c.frame.style[a]=b)}),j?j.appendChild(this.frame):null===(b=null===(a=window.document)||void 0===a?void 0:a.body)||void 0===b||b.appendChild(this.frame),this.frame.contentWindow&&(this.postMessage=new Mb(this.frame.contentWindow,this.getFrameOrigin()),this.postMessage.addActionHandler("close",this.handleCloseMessage),this.postMessage.addActionHandler("setSize",this.handleSetSizeMessage),this.postMessage.addActionHandler("appLoaded",this.handleAppLoadedMessage),this.postMessage.addActionHandler("submit",this.handleSubmitMessage))}},a.prototype.setDarkTheme=function(a){var b;this.options.darkTheme=a,null===(b=this.postMessage)||void 0===b||b.send("setTheme",{darkMode:a})},a.prototype.close=function(){var a,b,c,d;null===(a=this.postMessage)||void 0===a||a.clearActionHandlers(),this.postMessage=null,null===(b=this.frame)||void 0===b||b.remove(),this.frame=null,null===(d=(c=this.options).onClose)||void 0===d||d.call(c)},a.prototype.createSrc=function(){var a=new URL(this.getFrameOrigin()),b=this.options,c=b.email,d=b.clientId,e=b.project,f=b.darkTheme,g=b.internal,h=b.theme;return a.pathname="feedback/nps",a.searchParams.append("id",String(this.surveyId)),a.searchParams.append("mode","popup"),a.searchParams.append("type","csat"),a.searchParams.append("origin",location.origin),a.searchParams.append("darkTheme",f?"1":"0"),a.searchParams.append("csatV2","1"),c&&a.searchParams.append("email",c),d&&a.searchParams.append("clientId",d),e&&a.searchParams.append("project",e),g&&a.searchParams.append("internal","1"),h&&a.searchParams.append("theme",h),a.toString()},a.prototype.getFrameOrigin=function(){return"https://".concat(this.options.domain||"e.mail.ru")},a.prototype.setSize=function(a,b){this.frame&&(this.frame.width="".concat(a,"px"),this.frame.height="".concat(b,"px"))},a}();function Ob(a){return Jb(1,arguments),1e3*a}function Pb(a,b){var c=Object.keys(a);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(a);b&&(d=d.filter(function(b){return Object.getOwnPropertyDescriptor(a,b).enumerable})),c.push.apply(c,d)}return c}function Qb(a){for(var b=1;b<arguments.length;b++){var c=null!=arguments[b]?arguments[b]:{};b%2?Pb(Object(c),!0).forEach(function(b){Rb(a,b,c[b])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(c)):Pb(Object(c)).forEach(function(b){Object.defineProperty(a,b,Object.getOwnPropertyDescriptor(c,b))})}return a}function Rb(a,b,c){return(b=function(a){var b=function(a,b){if("object"!=typeof a||null===a)return a;var c=a[Symbol.toPrimitive];if(void 0!==c){var d=c.call(a,b||"default");if("object"!=typeof d)return d;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===b?String:Number)(a)}(a,"string");return"symbol"==typeof b?b:String(b)}(b))in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}function Sb(a,b){return Ub(a)||function(a,b){var c=null==a?null:"undefined"!=typeof Symbol&&a[Symbol.iterator]||a["@@iterator"];if(null!=c){var d,e,f,g,h=[],i=!0,j=!1;try{if(f=(c=c.call(a)).next,0===b){if(Object(c)!==c)return;i=!1}else for(;!(i=(d=f.call(c)).done)&&(h.push(d.value),h.length!==b);i=!0);}catch(a){j=!0,e=a}finally{try{if(!i&&null!=c.return&&(g=c.return(),Object(g)!==g))return}finally{if(j)throw e}}return h}}(a,b)||Vb(a,b)||Xb()}function Tb(a){return Ub(a)||function(a){if("undefined"!=typeof Symbol&&null!=a[Symbol.iterator]||null!=a["@@iterator"])return Array.from(a)}(a)||Vb(a)||Xb()}function Ub(a){if(Array.isArray(a))return a}function Vb(a,b){if(a){if("string"==typeof a)return Wb(a,b);var c=Object.prototype.toString.call(a).slice(8,-1);return"Object"===c&&a.constructor&&(c=a.constructor.name),"Map"===c||"Set"===c?Array.from(a):"Arguments"===c||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(c)?Wb(a,b):void 0}}function Wb(a,b){(null==b||b>a.length)&&(b=a.length);for(var c=0,d=new Array(b);c<b;c++)d[c]=a[c];return d}function Xb(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Yb(a,b){var c="undefined"!=typeof Symbol&&a[Symbol.iterator]||a["@@iterator"];if(!c){if(Array.isArray(a)||(c=Vb(a))||b&&a&&"number"==typeof a.length){c&&(a=c);var d=0,e=function(){};return{s:e,n:function(){return d>=a.length?{done:!0}:{done:!1,value:a[d++]}},e:function(a){throw a},f:e}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var f,g=!0,h=!1;return{s:function(){c=c.call(a)},n:function(){var a=c.next();return g=a.done,a},e:function(a){h=!0,f=a},f:function(){try{g||null==c.return||c.return()}finally{if(h)throw f}}}}var Zb=/#/g,$b=/&/g,_b=/=/g,ac=/\+/g,bc=/%5e/gi,cc=/%60/gi,dc=/%7c/gi,ec=/%20/gi;function fc(a){return(b="string"==typeof a?a:JSON.stringify(a),encodeURI(""+b).replace(dc,"|")).replace(ac,"%2B").replace(ec,"+").replace(Zb,"%23").replace($b,"%26").replace(cc,"`").replace(bc,"^");var b}function gc(a){return fc(a).replace(_b,"%3D")}function hc(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";try{return decodeURIComponent(""+a)}catch(b){return""+a}}function ic(a){return hc(a.replace(ac," "))}function jc(a){return Object.keys(a).filter(function(b){return void 0!==a[b]}).map(function(b){return c=b,"number"!=typeof(d=a[b])&&"boolean"!=typeof d||(d=String(d)),d?Array.isArray(d)?d.map(function(a){return"".concat(gc(c),"=").concat(fc(a))}).join("&"):"".concat(gc(c),"=").concat(fc(d)):gc(c);var c,d}).join("&")}var kc=/^\w{2,}:([/\\]{1,2})/,lc=/^\w{2,}:([/\\]{2})?/,mc=/^([/\\]\s*){2,}[^/\\]/;function nc(a){var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return"boolean"==typeof b&&(b={acceptRelative:b}),b.strict?kc.test(a):lc.test(a)||!!b.acceptRelative&&mc.test(a)}var oc=/\/$|\/\?/;function pc(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",b=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return b?oc.test(a):a.endsWith("/")}function qc(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",b=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!b)return a.endsWith("/")?a:a+"/";if(pc(a,!0))return a||"/";var c=a.split("?"),d=Tb(c),e=d[0],f=d.slice(1);return e+"/"+(f.length>0?"?".concat(f.join("?")):"")}function rc(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return a.startsWith("/")}function sc(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return(rc(a)?a.slice(1):a)||"/"}function tc(a,b){var c=function a(){var b=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",c=arguments.length>1?arguments[1]:void 0;if(!nc(b,{acceptRelative:!0}))return c?a(c+b):vc(b);var d=(b.replace(/\\/g,"/").match(/([^/:]+:)?\/\/([^/@]+@)?(.*)/)||[]).splice(1),e=Sb(d,3),f=e[0],g=void 0===f?"":f,h=e[1],i=e[2],j=void 0===i?"":i,k=(j.match(/([^#/?]*)(.*)?/)||[]).splice(1),l=Sb(k,2),m=l[0],n=void 0===m?"":m,o=l[1],p=void 0===o?"":o,q=vc(p.replace(/\/(?=[A-Za-z]:)/,"")),r=q.pathname,s=q.search,t=q.hash;return{protocol:g,auth:h?h.slice(0,Math.max(0,h.length-1)):"",host:n,pathname:r,search:s,hash:t}}(a),d=Qb(Qb({},function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",b={};"?"===a[0]&&(a=a.slice(1));var c,d=Yb(a.split("&"));try{for(d.s();!(c=d.n()).done;){var e=c.value,f=e.match(/([^=]+)=?(.*)/)||[];if(!(f.length<2)){var g=hc(f[1]);if("__proto__"!==g&&"constructor"!==g){var h=ic(f[2]||"");void 0!==b[g]?Array.isArray(b[g])?b[g].push(h):b[g]=[b[g],h]:b[g]=h}}}}catch(a){d.e(a)}finally{d.f()}return b}(c.search)),b);return c.search=jc(d),function(a){var b=a.pathname+(a.search?(a.search.startsWith("?")?"":"?")+a.search:"")+a.hash;if(!a.protocol)return b;return a.protocol+"//"+(a.auth?a.auth+"@":"")+a.host+b}(c)}function uc(a){return a&&"/"!==a}function vc(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",b=(a.match(/([^#?]*)(\?[^#]*)?(#.*)?/)||[]).splice(1),c=Sb(b,3),d=c[0],e=void 0===d?"":d,f=c[1],g=void 0===f?"":f,h=c[2],i=void 0===h?"":h;return{pathname:e,search:g,hash:i}}var wc,xc=function(){function a(a){void 0===a&&(a="/api/v1"),this.baseUrl=a,this.requests=new Map,this.abortControllers=new Map}return a.prototype.get=function(a){return e(this,void 0,void 0,function(){var b,c,d,e,g;return f(this,function(f){return b=a.path,c=a.params,d=a.abortKey,e=a.cancellable,g=tc(this.getRequestUrl(b),c||{}),[2,this.request(g,{method:"GET",requestSalt:d&&c?JSON.stringify(c[d]):void 0,cancellable:e})]})})},a.prototype.post=function(a){return e(this,void 0,void 0,function(){var b,c,d,e,g;return f(this,function(f){return b=a.path,c=a.data,d=a.abortKey,e=a.cancellable,g=this.getRequestUrl(b),[2,this.request(g,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(c),requestSalt:d&&c?JSON.stringify(c[d]):void 0,cancellable:e})]})})},a.prototype.request=function(a,b){var d=this,e=b.cancellable,f=b.requestSalt,g=b.method,h=b.body,i=[g,a,null!=f?f:JSON.stringify(h)].join(":"),j=this.abortControllers.get(i),k=new AbortController,l=new Promise(function(e,f){fetch(a,c(c({},b),{signal:k.signal})).then(function(a){return a.ok||f(a.status),a.json()}).then(function(a){200!==a.status&&f(a.status),e(a.body)}).catch(function(a){var b=d.requests.get(i);k.signal.aborted&&b&&e(b),f(a)})});return this.requests.set(i,l),this.abortControllers.set(i,k),e&&(null==j||j.abort()),l},a.prototype.getRequestUrl=function(a){return function(a){for(var b=a||"",c=arguments.length,d=new Array(c>1?c-1:0),e=1;e<c;e++)d[e-1]=arguments[e];var f,g=Yb(d.filter(function(a){return uc(a)}));try{for(g.s();!(f=g.n()).done;){var h=f.value;b=b?qc(b)+sc(h):h}}catch(a){g.e(a)}finally{g.f()}return b}(this.baseUrl,a)},a}();!function(a){a.SuccessfullySaved="successfully-saved",a.UnknownError="unknown-error"}(wc||(wc={}));var yc,zc=wc,Ac=function(a){function g(){return null!==a&&a.apply(this,arguments)||this}return function(a,c){if("function"!=typeof c&&null!==c)throw new TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=a}b(a,c),a.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}(g,a),g.prototype.fetchLastVotedDate=function(a){return e(this,void 0,void 0,function(){var b,e;return f(this,function(f){switch(f.label){case 0:return f.trys.push([0,2,,3]),a.without_config,b=a.survey_id,e=d(a,["without_config","survey_id"]),[4,this.get({path:"survey/info",params:c({without_config:"1",survey_id:String(b)},e)})];case 1:return[2,Ob(f.sent().previous_answer)];case 2:return f.sent(),[2,NaN];case 3:return[2]}})})},g.prototype.fetchQuestions=function(a){return e(this,void 0,void 0,function(){var b,e,g,h;return f(this,function(f){switch(f.label){case 0:return f.trys.push([0,2,,3]),b=a.lang,e=void 0===b?"ru":b,a.without_config,g=a.survey_id,h=d(a,["lang","without_config","survey_id"]),[4,this.get({path:"survey/info",params:c({lang:e,survey_id:String(g)},h)})];case 1:return[2,f.sent().questions.map(function(a){return"stars"===a.type?c(c({},a),{options:a.options||[]}):a})];case 2:return f.sent(),[2,[]];case 3:return[2]}})})},g.prototype.saveAnswers=function(a){return e(this,void 0,void 0,function(){var b,d;return f(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),b=a.survey_id,d=Number(b),[4,this.post({path:"survey/answer",abortKey:"survey_id",cancellable:!0,data:c(c({},a),{survey_id:Number.isNaN(d)?b:d})})];case 1:return e.sent(),[2,zc.SuccessfullySaved];case 2:return e.sent(),[2,zc.UnknownError];case 3:return[2]}})})},g}(xc);new Ac,function(a){a.Update="feedback-loader_update",a.PassJigurda="feedback-loader_jigurda-pass",a.PassApi="feedback-loader_api-pass",a.FailApi="feedback-loader_api-fail",a.Show="feedback-loader_show",a.Close="feedback-loader_close",a.EnableDarkMode="feedback-loader_set-dark_on",a.DisableDarkMode="feedback-loader_set-dark_off"}(yc||(yc={}));var Bc=yc;function Cc(){var a=new Date;return a.setUTCHours(0,0,0,0),a.getTime()}function Dc(a,b){return Cc()-864e5*b>=a}var Ec=function(){function a(a,b){void 0===b&&(b={});var e=b.frameLoaderOptions,f=d(b,["frameLoaderOptions"]),g=f.email,h=f.clientId,i=f.apiBaseUrl;this.survey=a,this.surveyService=new Ac(i),this.options=Gb({},f),this.storage=new Hb(this.getUserId(),this.id),this.frameLoader=new Nb(this.id,c(c({},e),{email:g,clientId:h,internal:this.survey.internal}))}return Object.defineProperty(a.prototype,"id",{get:function(){return this.survey.surveyId},enumerable:!1,configurable:!0}),a.prototype.update=function(a){return void 0===a&&(a=!1),e(this,void 0,void 0,function(){return f(this,function(b){switch(b.label){case 0:return a?[4,this.show()]:[3,2];case 1:return b.sent(),[2,this.id];case 2:return this.checkFeature()?this.checkDelay()?this.checkLastShow()?[4,this.checkTriggerEvents()]:[2,Promise.reject("last_show_check_fail")]:[2,Promise.reject("delay_check_fail")]:[2,Promise.reject("feature_check_fail")];case 3:return b.sent()?(this.sendRadar(Bc.Update),this.checkJigurda()?(this.sendRadar(Bc.PassJigurda),this.options.dryRun?[2,Promise.reject("dry_run")]:[4,this.checkApi()]):[2,Promise.reject("jigurda_check_fail")]):[2,Promise.reject("trigger_events_check_fail")];case 4:return b.sent()?[4,this.show()]:(this.sendRadar(Bc.FailApi),[2,Promise.reject("api_check_fail")]);case 5:return b.sent(),this.sendRadar(Bc.PassApi),[2,this.id]}})})},a.prototype.close=function(){this.frameLoader.close(),this.sendRadar(Bc.Close)},a.prototype.setDarkTheme=function(a){this.frameLoader.setDarkTheme(a),this.sendRadar(a?Bc.EnableDarkMode:Bc.DisableDarkMode)},a.prototype.checkFeature=function(){var a=this.options.checkFeature;return!a||a(this.survey.feature)},a.prototype.checkDelay=function(){var a=this.storage.get("activeFrom");return null===a?(this.storage.set("activeFrom",Date.now()),!1):function(a,b){Jb(2,arguments);var c=Lb(a),d=Lb(b);return c.getTime()>d.getTime()}(new Date,function(a,b){Jb(2,arguments);var c=Lb(a).getTime(),d=Ib(b);return new Date(c+d)}(a,this.survey.delay))},a.prototype.checkLastShow=function(){var a=this.survey,b=a.repeatAfterDays,c=a.showAfterDays,d=void 0===c?b:c,e=this.storage.get("lastShow");return!d||!e||Dc(e,d)},a.prototype.checkJigurda=function(){var a=this.storage.get("lastCheck"),b=Cc();if(a===b)return!1;this.storage.set("lastCheck",b);var c=this.survey.permille;return function(a){var b=0,c=0;b^=-1;for(var d=0,e=a.length;d<e;d++)c=255&(b^a.charCodeAt(d)),b=b>>>8^"0x".concat("00000000 77073096 EE0E612C 990951BA 076DC419 706AF48F E963A535 9E6495A3 0EDB8832 79DCB8A4 E0D5E91E 97D2D988 09B64C2B 7EB17CBD E7B82D07 90BF1D91 1DB71064 6AB020F2 F3B97148 84BE41DE 1ADAD47D 6DDDE4EB F4D4B551 83D385C7 136C9856 646BA8C0 FD62F97A 8A65C9EC 14015C4F 63066CD9 FA0F3D63 8D080DF5 3B6E20C8 4C69105E D56041E4 A2677172 3C03E4D1 4B04D447 D20D85FD A50AB56B 35B5A8FA 42B2986C DBBBC9D6 ACBCF940 32D86CE3 45DF5C75 DCD60DCF ABD13D59 26D930AC 51DE003A C8D75180 BFD06116 21B4F4B5 56B3C423 CFBA9599 B8BDA50F 2802B89E 5F058808 C60CD9B2 B10BE924 2F6F7C87 58684C11 C1611DAB B6662D3D 76DC4190 01DB7106 98D220BC EFD5102A 71B18589 06B6B51F 9FBFE4A5 E8B8D433 7807C9A2 0F00F934 9609A88E E10E9818 7F6A0DBB 086D3D2D 91646C97 E6635C01 6B6B51F4 1C6C6162 856530D8 F262004E 6C0695ED 1B01A57B 8208F4C1 F50FC457 65B0D9C6 12B7E950 8BBEB8EA FCB9887C 62DD1DDF 15DA2D49 8CD37CF3 FBD44C65 4DB26158 3AB551CE A3BC0074 D4BB30E2 4ADFA541 3DD895D7 A4D1C46D D3D6F4FB 4369E96A 346ED9FC AD678846 DA60B8D0 44042D73 33031DE5 AA0A4C5F DD0D7CC9 5005713C 270241AA BE0B1010 C90C2086 5768B525 206F85B3 B966D409 CE61E49F 5EDEF90E 29D9C998 B0D09822 C7D7A8B4 59B33D17 2EB40D81 B7BD5C3B C0BA6CAD EDB88320 9ABFB3B6 03B6E20C 74B1D29A EAD54739 9DD277AF 04DB2615 73DC1683 E3630B12 94643B84 0D6D6A3E 7A6A5AA8 E40ECF0B 9309FF9D 0A00AE27 7D079EB1 F00F9344 8708A3D2 1E01F268 6906C2FE F762575D 806567CB 196C3671 6E6B06E7 FED41B76 89D32BE0 10DA7A5A 67DD4ACC F9B9DF6F 8EBEEFF9 17B7BE43 60B08ED5 D6D6A3E8 A1D1937E 38D8C2C4 4FDFF252 D1BB67F1 A6BC5767 3FB506DD 48B2364B D80D2BDA AF0A1B4C 36034AF6 41047A60 DF60EFC3 A867DF55 316E8EEF 4669BE79 CB61B38C BC66831A 256FD2A0 5268E236 CC0C7795 BB0B4703 220216B9 5505262F C5BA3BBE B2BD0B28 2BB45A92 5CB36A04 C2D7FFA7 B5D0CF31 2CD99E8B 5BDEAE1D 9B64C2B0 EC63F226 756AA39C 026D930A 9C0906A9 EB0E363F 72076785 05005713 95BF4A82 E2B87A14 7BB12BAE 0CB61B38 92D28E9B E5D5BE0D 7CDCEFB7 0BDBDF21 86D3D2D4 F1D4E242 68DDB3F8 1FDA836E 81BE16CD F6B9265B 6FB077E1 18B74777 88085AE6 FF0F6A70 66063BCA 11010B5C 8F659EFF F862AE69 616BFFD3 166CCF45 A00AE278 D70DD2EE 4E048354 3903B3C2 A7672661 D06016F7 4969474D 3E6E77DB AED16A4A D9D65ADC 40DF0B66 37D83BF0 A9BCAE53 DEBB9EC5 47B2CF7F 30B5FFE9 BDBDF21C CABAC28A 53B39330 24B4A3A6 BAD03605 CDD70693 54DE5729 23D967BF B3667A2E C4614AB8 5D681B02 2A6F2B94 B40BBE37 C30C8EA1 5A05DF1B 2D02EF8D".substr(9*c,8));return b=(-1^b)>>>0,b%=1e3}(this.getSaltedUser())<c},a.prototype.checkTriggerEvents=function(){return e(this,void 0,void 0,function(){var a,b;return f(this,function(c){return a=this.survey.triggerEvents,b=this.options.eventsLogger,a&&b?[2,a.reduce(function(a,c){return a.then(function(a){return a||b.check([c])})},Promise.resolve(!1))]:[2,!0]})})},a.prototype.checkApi=function(){return e(this,void 0,void 0,function(){var a,b,c,d;return f(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),(a=this.survey.repeatAfterDays)?(b=this.options,c=b.email,d=b.clientId,[4,this.surveyService.fetchLastVotedDate({survey_id:this.id,email:c,client_id:d})]):[2,!0];case 1:return[2,Dc(e.sent(),a)];case 2:return e.sent(),[2,!1];case 3:return[2]}})})},a.prototype.getSaltedUser=function(){return"".concat(this.getUserId()).concat(this.id).concat(Cc())},a.prototype.show=function(){return e(this,void 0,void 0,function(){return f(this,function(a){return this.frameLoader.open(),this.storage.set("lastShow",Cc()),this.sendRadar(Bc.Show),[2]})})},a.prototype.sendRadar=function(a){var b=this.options,c=b.radar,d=b.dryRun,e=this.survey.permille;null==c||c(a,{userId:this.getUserId(),permille:e,surveyId:this.id,dryRun:d})},a.prototype.getUserId=function(){var a,b=this.options,c=b.email,d=b.clientId;return null!==(a=null!=c?c:d)&&void 0!==a?a:""},a}(),Fc=function(){function a(a,b){void 0===b&&(b={});var d=this;this.activeSurveyId=null,this.isObserving=!1;var e=b.surveyLoaderOptions;this.surveys=a,this.surveyLoaders=this.surveys.map(function(a){return new Ec(a,c(c({},e),{frameLoaderOptions:c(c({},null==e?void 0:e.frameLoaderOptions),{onClose:function(){var a,b;null===(b=null===(a=null==e?void 0:e.frameLoaderOptions)||void 0===a?void 0:a.onClose)||void 0===b||b.call(a),d.resetActiveSurveyId()}})}))}),this.options=Gb({},b)}return a.getClientId=function(){var a=new Hb,b=a.get("clientId");return b||(b=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:21;return crypto.getRandomValues(new Uint8Array(a)).reduce(function(a,b){return a+=(b&=63)<36?b.toString(36):b<62?(b-26).toString(36).toUpperCase():b>62?"-":"_"},"")}(),a.set("clientId",b)),b},a.prototype.update=function(){return e(this,void 0,void 0,function(){var a,b,c,d,e,g=this;return f(this,function(f){return this.activeSurveyId||(a=this.options,b=a.forceShowSurveyId,c=a.checkBeforeUpdate,d=void 0===c?function(){return Promise.resolve()}:c,e=this.surveyLoaders.find(function(a){return a.id===b}),this.activeSurveyId=d().then(function(){return e?e.update(!0):g.surveyLoaders.reduce(function(a,b){return a.catch(function(){return b.update()})},Promise.reject())}),this.activeSurveyId.catch(function(){g.resetActiveSurveyId()})),[2,this.activeSurveyId]})})},a.prototype.close=function(){return e(this,void 0,void 0,function(){var a,b;return f(this,function(c){switch(c.label){case 0:return c.trys.push([0,2,,3]),[4,this.activeSurveyId];case 1:return a=c.sent(),null==(b=this.surveyLoaders.find(function(b){return b.id===a}))||b.close(),this.resetActiveSurveyId(),[3,3];case 2:return c.sent(),[3,3];case 3:return[2]}})})},a.prototype.setDarkTheme=function(a){this.surveyLoaders.forEach(function(b){b.setDarkTheme(a)})},a.prototype.observe=function(a){void 0===a&&(a=3e4),this.isObserving||(this.isObserving=!0,this.observerTick(a))},a.prototype.disconnect=function(){clearTimeout(this.observerTimeoutId),this.observerTimeoutId=void 0,this.isObserving=!1},a.prototype.isVisible=function(){return e(this,void 0,void 0,function(){return f(this,function(a){return this.activeSurveyId?[2,this.activeSurveyId.then(function(){return!0}).catch(function(){return!1})]:[2,!1]})})},a.prototype.forceShowSurvey=function(a){return e(this,void 0,void 0,function(){var b;return f(this,function(c){switch(c.label){case 0:return(b=this.surveyLoaders.find(function(b){return b.id===a}))?[4,this.close()]:[2,Promise.reject("survey_does_not_exist")];case 1:return c.sent(),this.activeSurveyId=b.update(!0),[2,this.activeSurveyId]}})})},a.prototype.observerTick=function(a){var b=this;this.update().catch(function(){}).finally(function(){b.isObserving&&(b.observerTimeoutId=setTimeout(function(){b.observerTick(a)},a))})},a.prototype.resetActiveSurveyId=function(){this.activeSurveyId=null},a}();a.default=Fc,Object.defineProperty(a,"__esModule",{value:!0})});var __assign=this&&this.__assign||function(){__assign=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++){b=arguments[c];for(var e in b)if(Object.prototype.hasOwnProperty.call(b,e))a[e]=b[e]}return a};return __assign.apply(this,arguments)};var __awaiter=this&&this.__awaiter||function(a,b,c,d){function e(a){return a instanceof c?a:new c(function(b){b(a)})}return new(c||(c=Promise))(function(c,f){function g(a){try{i(d.next(a))}catch(a){f(a)}}function h(a){try{i(d["throw"](a))}catch(a){f(a)}}function i(a){a.done?c(a.value):e(a.value).then(g,h)}i((d=d.apply(a,b||[])).next())})};var __generator=this&&this.__generator||function(a,b){var c={label:0,sent:function(){if(f[0]&1)throw f[1];return f[1]},trys:[],ops:[]},d,e,f,g;return g={next:h(0),throw:h(1),return:h(2)},typeof Symbol==="function"&&(g[Symbol.iterator]=function(){return this}),g;function h(a){return function(b){return i([a,b])}}function i(g){if(d)throw new TypeError("Generator is already executing.");while(c)try{if(d=1,e&&(f=g[0]&2?e["return"]:g[0]?e["throw"]||((f=e["return"])&&f.call(e),0):e.next)&&!(f=f.call(e,g[1])).done)return f;if(e=0,f)g=[g[0]&2,f.value];switch(g[0]){case 0:case 1:f=g;break;case 4:c.label++;return{value:g[1],done:false};case 5:c.label++;e=g[1];g=[0];continue;case 7:g=c.ops.pop();c.trys.pop();continue;default:if(!(f=c.trys,f=f.length>0&&f[f.length-1])&&(g[0]===6||g[0]===2)){c=0;continue}if(g[0]===3&&(!f||g[1]>f[0]&&g[1]<f[3])){c.label=g[1];break}if(g[0]===6&&c.label<f[1]){c.label=f[1];f=g;break}if(f&&c.label<f[2]){c.label=f[2];c.ops.push(g);break}if(f[2])c.ops.pop();c.trys.pop();continue}g=b.call(a,c)}catch(a){g=[6,a];e=0}finally{d=f=0}if(g[0]&5)throw g[1];return{value:g[0]?g[1]:void 0,done:true}}};var __importDefault=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};define("service/feedback",["require","exports","@mail/features","@mail/feedback-loader/EventsLogger","@mail/feedback-loader/FeedbackLoader","@mail/flags","@mail/xray","default-values","helpers/deferred","helpers/getCurrentTimestamp","service/promo"],function(require,exports,a,b,c,d,e,f,g,h,i){"use strict";Object.defineProperty(exports,"__esModule",{value:true});a=__importDefault(a);b=__importDefault(b);c=__importDefault(c);d=__importDefault(d);e=__importDefault(e);g=__importDefault(g);i=__importDefault(i);var j=function(){function j(d,g,h){var k=this;this.eventsLogger=new b.default;this.handleXraySend=function(a,b,c){var d=(f.CSAT_TRIGGERS.find(function(b){return b===null||b===void 0?void 0:b.radars.includes(a)})||{}).event;if(d){k.eventsLogger.push(d)}return{t:a,params:b,sendGa:c}};if(j.instance){return j.instance}j.instance=this;j.instanceDeferred.resolve(this);var l={};if(f.CSAT_ANIMATION){l={openedClassName:"notify-stack_iframe-open",loadedClassName:"notify-stack_iframe-load"}}this.feedbackLoader=new c.default(f.CSAT_SURVEYS,{forceShowSurveyId:f.CSAT_FORCE_SHOW_SURVEY_ID,surveyLoaderOptions:{email:d,dryRun:f.CSAT_DRY_RUN,radar:e.default.send,checkFeature:a.default.has,eventsLogger:this.eventsLogger,frameLoaderOptions:__assign({domain:f.CSAT_DOMAIN,darkTheme:g,theme:f.CSAT_THEME,styles:h?{position:"static",margin:"8px 0"}:{zIndex:"9001"},successHideTimeout:f.CSAT_SUCCESS_HIDE_TIMEOUT,rootElement:h},l)},checkBeforeUpdate:function(){return __awaiter(k,void 0,void 0,function(){return __generator(this,function(a){switch(a.label){case 0:return[4,i.default.isNotifyVisible()];case 1:if(a.sent()){return[2,Promise.reject("promo_notify_is_visible")]}return[2]}})})}})}j.prototype.init=function(){if(this.isDisabled()){return}e.default.addMiddleware(this.handleXraySend);this.feedbackLoader.observe(f.CSAT_TICK_TIMEOUT)};j.prototype.setDarkTheme=function(a){var b;(b=this.feedbackLoader)===null||b===void 0?void 0:b.setDarkTheme(a)};j.prototype.isVisible=function(){return this.feedbackLoader.isVisible()};j.prototype.forceShowSurvey=function(a){return this.feedbackLoader.forceShowSurvey(a)};j.prototype.isDisabled=function(){if(f.CSAT_DISABLED){return true}var a=d.default.get("octavius");var b=(0,h.getCurrentTimestamp)();return!!a&&a.isActive()&&a.getTimeDelta(b)<f.CSAT_AFTER_REG_DELAY_IN_SECONDS};j.instance=null;j.instanceDeferred=new g.default;return j}();exports.default=j});define("feast-tpl!app/feast-tpl!ui-block/letters-divider/letters-divider.html",["feast"],function(a){return a.smartParse('<div>\n\t<b:react-async\n\t\tcomponent="LettersDivider"\n\t\ttitle="{attrs.title}"\n\t\tcounter="{attrs.counter}"\n\t\tponyMode="{attrs.ponyMode}"\n\t\tcompact="{attrs.compact}"\n\t\tfit="{attrs.fit}"\n\t\tmeta="{attrs.meta}"\n\t\tid="{attrs.id}"\n\t/>\n</div>\n',"app/feast-tpl!ui-block/letters-divider/letters-divider.html")});define("feast-tpl!ui-block/letters-divider/letters-divider.html",["feast-tpl!app/feast-tpl!ui-block/letters-divider/letters-divider.html"],function(a){return a});var __importDefault=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};define("ui-block/letters-divider/letters-divider",["require","exports","feast","feast-tpl!./letters-divider.html","ui-block/react-async/react-async"],function(require,exports,a,b,c){"use strict";Object.defineProperty(exports,"__esModule",{value:true});a=__importDefault(a);b=__importDefault(b);c=__importDefault(c);exports.default=a.default.Block.extend({name:"letters-divider",template:b.default,blocks:{"react-async":c.default}})});!function(a,b){if("object"==typeof exports&&"object"==typeof module)module.exports=b(require("@mail/features"),require("@mail/flags"),require("@mail/operands"),require("@mail/vkui"),require("@mail/vkui/2kit"),require("@mail/xray"),require("Emitter"),require("RPC"),require("Transaction"),require("cfg"),require("cfgUser"),require("data-source/store/letter-action/actions"),require("data-source/store/letter-action/getters"),require("data-source/store/letter-action/types"),require("data-source/store/user/account/getters"),require("data-source/store/vk-overlay/actions"),require("data-source/store/vk-overlay/getters"),require("data-source/store/vk-overlay/state"),require("data-source/store/vk-overlay/types"),require("data-source/utils/letter-list-virtualization"),require("default-values"),require("feast"),require("feast-mod/correspondents"),require("feast-mod/letter-date"),require("feast-mod/utils"),require("helpers/aboutAd"),require("helpers/advert-vis-check"),require("helpers/allread-button-visible"),require("helpers/browser"),require("helpers/date-range"),require("helpers/get-adaptive"),require("helpers/get-avatar-path"),require("helpers/get-go-to-action-display-mode"),require("helpers/get-selected-stats"),require("helpers/languages"),require("helpers/letter"),require("helpers/metathreads"),require("helpers/metrics/performance"),require("helpers/opener"),require("helpers/plural"),require("helpers/querystring-add"),require("helpers/radar-utils"),require("helpers/rb"),require("helpers/smime-attachments-metrics"),require("helpers/subscribe-notify"),require("icons"),require("lazy.modules"),require("logger"),require("mail/Folder"),require("mail/Message"),require("mail/Thread"),require("mail/User"),require("mail/actions/ContactSuggests"),require("mail/getters/MessageMeta"),require("mediator/folders-navigation/utils"),require("mediator/layout-manager"),require("mediator/layout-manager/vars"),require("mediator/marusia-manager"),require("mediator/todo-manager/consts"),require("mediator/todo-manager/todo-manager"),require("mediator/user-info"),require("mobx"),require("mobx-react"),require("mobx-state-tree"),require("models/adv-letter/adv-letter"),require("models/bait-letter/bait-letter"),require("models/letters-list-divider/letters-list-divider"),require("models/promo-block-letter/promo-block-letter"),require("models/search-action-letter/search-action-letter"),require("models/spec-project-letter/spec-project-letter"),require("models/spinner-letter/spinner-letter"),require("models/tip-letter/tip-letter"),require("octavius-public/service/vkMessengerLoader"),require("prop-types"),require("react"),require("react-dom"),require("router"),require("service/auth"),require("service/emoji"),require("service/feedback"),require("service/fishing"),require("service/getModule"),require("service/layer"),require("service/notify"),require("service/promo"),require("service/radars/index"),require("service/search-attaches/attachesList"),require("service/search-attaches/getAttaches"),require("service/search-attaches/utils"),require("service/search-attaches/viewModes"),require("service/secure-folder"),require("service/smokescreen"),require("service/storage"),require("service/themes.setup"),require("state-tree/search-operand/utils"),require("state-tree/search-response/search-response"),require("state-tree/search/utils"),require("ui-block/attach-list/attach-list"),require("ui-block/avatar/avatar"),require("ui-block/button2/button2"),require("ui-block/calendar-button/calendar-button"),require("ui-block/category-feedback/category-feedback"),require("ui-block/checkbox/checkbox"),require("ui-block/contextmenu-folder/contextmenu-folder"),require("ui-block/dataset-letters/dataset-letters"),require("ui-block/dataset/dataset"),require("ui-block/delimeter/delimeter"),require("ui-block/discounts/discounts"),require("ui-block/dropdown-actions/dropdown-actions"),require("ui-block/html-parser/html-parser"),require("ui-block/ico/ico"),require("ui-block/letter-blockquote/letter-blockquote"),require("ui-block/letter-body-amp/letter-body-amp"),require("ui-block/letter-body/letter-body"),require("ui-block/letter-calendar/letter-calendar"),require("ui-block/letter-category/letter-category"),require("ui-block/letter-confirm-receipt/letter-confirm-receipt"),require("ui-block/letter-contact/letter-contact"),require("ui-block/letter-list-item-adv/letter-list-item-adv"),require("ui-block/letter-list-item-placeholder/letter-list-item-placeholder"),require("ui-block/letter-list-item/letter-list-item"),require("ui-block/letter-meta/letter-meta"),require("ui-block/letter-status2/letter-status2"),require("ui-block/letter-tooltip/letter-tooltip"),require("ui-block/letter/letter"),require("ui-block/letters-divider/letters-divider"),require("ui-block/list-letter-attach-status-preview/list-letter-attach-status-preview"),require("ui-block/list-letter-attach-status/list-letter-attach-status"),require("ui-block/list-letter-badge/list-letter-badge"),require("ui-block/list-letter-bait/list-letter-bait"),require("ui-block/list-letter-common/list-letter-abstract"),require("ui-block/list-letter-common/list-letter-abstract-payment-die"),require("ui-block/list-letter-folder/list-letter-folder"),require("ui-block/list-letter-height-compensation/list-letter-height-compensation"),require("ui-block/list-letter-order/list-letter-abstract-order"),require("ui-block/list-letter-order/list-letter-order"),require("ui-block/list-letter-payment-button/list-letter-payment-button"),require("ui-block/list-letter-payment-die/list-letter-payment-die"),require("ui-block/list-letter-payment-universal-die/list-letter-payment-universal-die"),require("ui-block/list-letter-preview-action/list-letter-preview-action"),require("ui-block/list-letter-preview-attaches/list-letter-preview-attaches"),require("ui-block/list-letter-preview-stub/list-letter-preview-stub"),require("ui-block/list-letter-read-status/list-letter-read-status"),require("ui-block/list-letter-schedule-status/list-letter-schedule-status"),require("ui-block/list-letter-skeleton/list-letter-skeleton"),require("ui-block/list-letter-snippet/list-letter-snippet"),require("ui-block/list-letter-spinner/list-letter-spinner"),require("ui-block/list-letter-subject/list-letter-subject"),require("ui-block/list-letter-tip/list-letter-tip"),require("ui-block/list-letter-unsubscribe/list-letter-unsubscribe"),require("ui-block/list-letter-welcome/list-letter-welcome"),require("ui-block/marusia-read-letter-button/marusia-read-letter-button"),require("ui-block/metathread-footer/metathread-footer"),require("ui-block/metathread-head-common/metathread-head-common"),require("ui-block/metathread-head-compact-expanded/metathread-head-compact-expanded"),require("ui-block/metathread-head-compact/metathread-head-compact"),require("ui-block/metathread/metathread"),require("ui-block/nav-folders/nav-folders"),require("ui-block/notification-badge/notification-badge"),require("ui-block/octopus/octopus"),require("ui-block/portal-menu-element/portal-menu-element"),require("ui-block/portal-menu/portal-menu"),require("ui-block/promo-block-letter/promo-block-letter"),require("ui-block/promo-domain-die/promo-domain-die"),require("ui-block/search-panel-button/search-panel-button"),require("ui-block/search-panel/search-panel"),require("ui-block/spec-project-letter/spec-project-letter"),require("ui-block/swipeable/swipeable"),require("ui-block/thread/thread"),require("ui-block/translator/translator"),require("utils/util"));else if("function"==typeof define&&define.amd)define("ui-react",["@mail/features","@mail/flags","@mail/operands","@mail/vkui","@mail/vkui/2kit","@mail/xray","Emitter","RPC","Transaction","cfg","cfgUser","data-source/store/letter-action/actions","data-source/store/letter-action/getters","data-source/store/letter-action/types","data-source/store/user/account/getters","data-source/store/vk-overlay/actions","data-source/store/vk-overlay/getters","data-source/store/vk-overlay/state","data-source/store/vk-overlay/types","data-source/utils/letter-list-virtualization","default-values","feast","feast-mod/correspondents","feast-mod/letter-date","feast-mod/utils","helpers/aboutAd","helpers/advert-vis-check","helpers/allread-button-visible","helpers/browser","helpers/date-range","helpers/get-adaptive","helpers/get-avatar-path","helpers/get-go-to-action-display-mode","helpers/get-selected-stats","helpers/languages","helpers/letter","helpers/metathreads","helpers/metrics/performance","helpers/opener","helpers/plural","helpers/querystring-add","helpers/radar-utils","helpers/rb","helpers/smime-attachments-metrics","helpers/subscribe-notify","icons","lazy.modules","logger","mail/Folder","mail/Message","mail/Thread","mail/User","mail/actions/ContactSuggests","mail/getters/MessageMeta","mediator/folders-navigation/utils","mediator/layout-manager","mediator/layout-manager/vars","mediator/marusia-manager","mediator/todo-manager/consts","mediator/todo-manager/todo-manager","mediator/user-info","mobx","mobx-react","mobx-state-tree","models/adv-letter/adv-letter","models/bait-letter/bait-letter","models/letters-list-divider/letters-list-divider","models/promo-block-letter/promo-block-letter","models/search-action-letter/search-action-letter","models/spec-project-letter/spec-project-letter","models/spinner-letter/spinner-letter","models/tip-letter/tip-letter","octavius-public/service/vkMessengerLoader","prop-types","react","react-dom","router","service/auth","service/emoji","service/feedback","service/fishing","service/getModule","service/layer","service/notify","service/promo","service/radars/index","service/search-attaches/attachesList","service/search-attaches/getAttaches","service/search-attaches/utils","service/search-attaches/viewModes","service/secure-folder","service/smokescreen","service/storage","service/themes.setup","state-tree/search-operand/utils","state-tree/search-response/search-response","state-tree/search/utils","ui-block/attach-list/attach-list","ui-block/avatar/avatar","ui-block/button2/button2","ui-block/calendar-button/calendar-button","ui-block/category-feedback/category-feedback","ui-block/checkbox/checkbox","ui-block/contextmenu-folder/contextmenu-folder","ui-block/dataset-letters/dataset-letters","ui-block/dataset/dataset","ui-block/delimeter/delimeter","ui-block/discounts/discounts","ui-block/dropdown-actions/dropdown-actions","ui-block/html-parser/html-parser","ui-block/ico/ico","ui-block/letter-blockquote/letter-blockquote","ui-block/letter-body-amp/letter-body-amp","ui-block/letter-body/letter-body","ui-block/letter-calendar/letter-calendar","ui-block/letter-category/letter-category","ui-block/letter-confirm-receipt/letter-confirm-receipt","ui-block/letter-contact/letter-contact","ui-block/letter-list-item-adv/letter-list-item-adv","ui-block/letter-list-item-placeholder/letter-list-item-placeholder","ui-block/letter-list-item/letter-list-item","ui-block/letter-meta/letter-meta","ui-block/letter-status2/letter-status2","ui-block/letter-tooltip/letter-tooltip","ui-block/letter/letter","ui-block/letters-divider/letters-divider","ui-block/list-letter-attach-status-preview/list-letter-attach-status-preview","ui-block/list-letter-attach-status/list-letter-attach-status","ui-block/list-letter-badge/list-letter-badge","ui-block/list-letter-bait/list-letter-bait","ui-block/list-letter-common/list-letter-abstract","ui-block/list-letter-common/list-letter-abstract-payment-die","ui-block/list-letter-folder/list-letter-folder","ui-block/list-letter-height-compensation/list-letter-height-compensation","ui-block/list-letter-order/list-letter-abstract-order","ui-block/list-letter-order/list-letter-order","ui-block/list-letter-payment-button/list-letter-payment-button","ui-block/list-letter-payment-die/list-letter-payment-die","ui-block/list-letter-payment-universal-die/list-letter-payment-universal-die","ui-block/list-letter-preview-action/list-letter-preview-action","ui-block/list-letter-preview-attaches/list-letter-preview-attaches","ui-block/list-letter-preview-stub/list-letter-preview-stub","ui-block/list-letter-read-status/list-letter-read-status","ui-block/list-letter-schedule-status/list-letter-schedule-status","ui-block/list-letter-skeleton/list-letter-skeleton","ui-block/list-letter-snippet/list-letter-snippet","ui-block/list-letter-spinner/list-letter-spinner","ui-block/list-letter-subject/list-letter-subject","ui-block/list-letter-tip/list-letter-tip","ui-block/list-letter-unsubscribe/list-letter-unsubscribe","ui-block/list-letter-welcome/list-letter-welcome","ui-block/marusia-read-letter-button/marusia-read-letter-button","ui-block/metathread-footer/metathread-footer","ui-block/metathread-head-common/metathread-head-common","ui-block/metathread-head-compact-expanded/metathread-head-compact-expanded","ui-block/metathread-head-compact/metathread-head-compact","ui-block/metathread/metathread","ui-block/nav-folders/nav-folders","ui-block/notification-badge/notification-badge","ui-block/octopus/octopus","ui-block/portal-menu-element/portal-menu-element","ui-block/portal-menu/portal-menu","ui-block/promo-block-letter/promo-block-letter","ui-block/promo-domain-die/promo-domain-die","ui-block/search-panel-button/search-panel-button","ui-block/search-panel/search-panel","ui-block/spec-project-letter/spec-project-letter","ui-block/swipeable/swipeable","ui-block/thread/thread","ui-block/translator/translator","utils/util"],b);else{var c="object"==typeof exports?b(require("@mail/features"),require("@mail/flags"),require("@mail/operands"),require("@mail/vkui"),require("@mail/vkui/2kit"),require("@mail/xray"),require("Emitter"),require("RPC"),require("Transaction"),require("cfg"),require("cfgUser"),require("data-source/store/letter-action/actions"),require("data-source/store/letter-action/getters"),require("data-source/store/letter-action/types"),require("data-source/store/user/account/getters"),require("data-source/store/vk-overlay/actions"),require("data-source/store/vk-overlay/getters"),require("data-source/store/vk-overlay/state"),require("data-source/store/vk-overlay/types"),require("data-source/utils/letter-list-virtualization"),require("default-values"),require("feast"),require("feast-mod/correspondents"),require("feast-mod/letter-date"),require("feast-mod/utils"),require("helpers/aboutAd"),require("helpers/advert-vis-check"),require("helpers/allread-button-visible"),require("helpers/browser"),require("helpers/date-range"),require("helpers/get-adaptive"),require("helpers/get-avatar-path"),require("helpers/get-go-to-action-display-mode"),require("helpers/get-selected-stats"),require("helpers/languages"),require("helpers/letter"),require("helpers/metathreads"),require("helpers/metrics/performance"),require("helpers/opener"),require("helpers/plural"),require("helpers/querystring-add"),require("helpers/radar-utils"),require("helpers/rb"),require("helpers/smime-attachments-metrics"),require("helpers/subscribe-notify"),require("icons"),require("lazy.modules"),require("logger"),require("mail/Folder"),require("mail/Message"),require("mail/Thread"),require("mail/User"),require("mail/actions/ContactSuggests"),require("mail/getters/MessageMeta"),require("mediator/folders-navigation/utils"),require("mediator/layout-manager"),require("mediator/layout-manager/vars"),require("mediator/marusia-manager"),require("mediator/todo-manager/consts"),require("mediator/todo-manager/todo-manager"),require("mediator/user-info"),require("mobx"),require("mobx-react"),require("mobx-state-tree"),require("models/adv-letter/adv-letter"),require("models/bait-letter/bait-letter"),require("models/letters-list-divider/letters-list-divider"),require("models/promo-block-letter/promo-block-letter"),require("models/search-action-letter/search-action-letter"),require("models/spec-project-letter/spec-project-letter"),require("models/spinner-letter/spinner-letter"),require("models/tip-letter/tip-letter"),require("octavius-public/service/vkMessengerLoader"),require("prop-types"),require("react"),require("react-dom"),require("router"),require("service/auth"),require("service/emoji"),require("service/feedback"),require("service/fishing"),require("service/getModule"),require("service/layer"),require("service/notify"),require("service/promo"),require("service/radars/index"),require("service/search-attaches/attachesList"),require("service/search-attaches/getAttaches"),require("service/search-attaches/utils"),require("service/search-attaches/viewModes"),require("service/secure-folder"),require("service/smokescreen"),require("service/storage"),require("service/themes.setup"),require("state-tree/search-operand/utils"),require("state-tree/search-response/search-response"),require("state-tree/search/utils"),require("ui-block/attach-list/attach-list"),require("ui-block/avatar/avatar"),require("ui-block/button2/button2"),require("ui-block/calendar-button/calendar-button"),require("ui-block/category-feedback/category-feedback"),require("ui-block/checkbox/checkbox"),require("ui-block/contextmenu-folder/contextmenu-folder"),require("ui-block/dataset-letters/dataset-letters"),require("ui-block/dataset/dataset"),require("ui-block/delimeter/delimeter"),require("ui-block/discounts/discounts"),require("ui-block/dropdown-actions/dropdown-actions"),require("ui-block/html-parser/html-parser"),require("ui-block/ico/ico"),require("ui-block/letter-blockquote/letter-blockquote"),require("ui-block/letter-body-amp/letter-body-amp"),require("ui-block/letter-body/letter-body"),require("ui-block/letter-calendar/letter-calendar"),require("ui-block/letter-category/letter-category"),require("ui-block/letter-confirm-receipt/letter-confirm-receipt"),require("ui-block/letter-contact/letter-contact"),require("ui-block/letter-list-item-adv/letter-list-item-adv"),require("ui-block/letter-list-item-placeholder/letter-list-item-placeholder"),require("ui-block/letter-list-item/letter-list-item"),require("ui-block/letter-meta/letter-meta"),require("ui-block/letter-status2/letter-status2"),require("ui-block/letter-tooltip/letter-tooltip"),require("ui-block/letter/letter"),require("ui-block/letters-divider/letters-divider"),require("ui-block/list-letter-attach-status-preview/list-letter-attach-status-preview"),require("ui-block/list-letter-attach-status/list-letter-attach-status"),require("ui-block/list-letter-badge/list-letter-badge"),require("ui-block/list-letter-bait/list-letter-bait"),require("ui-block/list-letter-common/list-letter-abstract"),require("ui-block/list-letter-common/list-letter-abstract-payment-die"),require("ui-block/list-letter-folder/list-letter-folder"),require("ui-block/list-letter-height-compensation/list-letter-height-compensation"),require("ui-block/list-letter-order/list-letter-abstract-order"),require("ui-block/list-letter-order/list-letter-order"),require("ui-block/list-letter-payment-button/list-letter-payment-button"),require("ui-block/list-letter-payment-die/list-letter-payment-die"),require("ui-block/list-letter-payment-universal-die/list-letter-payment-universal-die"),require("ui-block/list-letter-preview-action/list-letter-preview-action"),require("ui-block/list-letter-preview-attaches/list-letter-preview-attaches"),require("ui-block/list-letter-preview-stub/list-letter-preview-stub"),require("ui-block/list-letter-read-status/list-letter-read-status"),require("ui-block/list-letter-schedule-status/list-letter-schedule-status"),require("ui-block/list-letter-skeleton/list-letter-skeleton"),require("ui-block/list-letter-snippet/list-letter-snippet"),require("ui-block/list-letter-spinner/list-letter-spinner"),require("ui-block/list-letter-subject/list-letter-subject"),require("ui-block/list-letter-tip/list-letter-tip"),require("ui-block/list-letter-unsubscribe/list-letter-unsubscribe"),require("ui-block/list-letter-welcome/list-letter-welcome"),require("ui-block/marusia-read-letter-button/marusia-read-letter-button"),require("ui-block/metathread-footer/metathread-footer"),require("ui-block/metathread-head-common/metathread-head-common"),require("ui-block/metathread-head-compact-expanded/metathread-head-compact-expanded"),require("ui-block/metathread-head-compact/metathread-head-compact"),require("ui-block/metathread/metathread"),require("ui-block/nav-folders/nav-folders"),require("ui-block/notification-badge/notification-badge"),require("ui-block/octopus/octopus"),require("ui-block/portal-menu-element/portal-menu-element"),require("ui-block/portal-menu/portal-menu"),require("ui-block/promo-block-letter/promo-block-letter"),require("ui-block/promo-domain-die/promo-domain-die"),require("ui-block/search-panel-button/search-panel-button"),require("ui-block/search-panel/search-panel"),require("ui-block/spec-project-letter/spec-project-letter"),require("ui-block/swipeable/swipeable"),require("ui-block/thread/thread"),require("ui-block/translator/translator"),require("utils/util")):b(a["@mail/features"],a["@mail/flags"],a["@mail/operands"],a["@mail/vkui"],a["@mail/vkui/2kit"],a["@mail/xray"],a.Emitter,a.RPC,a.Transaction,a.cfg,a.cfgUser,a["data-source/store/letter-action/actions"],a["data-source/store/letter-action/getters"],a["data-source/store/letter-action/types"],a["data-source/store/user/account/getters"],a["data-source/store/vk-overlay/actions"],a["data-source/store/vk-overlay/getters"],a["data-source/store/vk-overlay/state"],a["data-source/store/vk-overlay/types"],a["data-source/utils/letter-list-virtualization"],a["default-values"],a.feast,a["feast-mod/correspondents"],a["feast-mod/letter-date"],a["feast-mod/utils"],a["helpers/aboutAd"],a["helpers/advert-vis-check"],a["helpers/allread-button-visible"],a["helpers/browser"],a["helpers/date-range"],a["helpers/get-adaptive"],a["helpers/get-avatar-path"],a["helpers/get-go-to-action-display-mode"],a["helpers/get-selected-stats"],a["helpers/languages"],a["helpers/letter"],a["helpers/metathreads"],a["helpers/metrics/performance"],a["helpers/opener"],a["helpers/plural"],a["helpers/querystring-add"],a["helpers/radar-utils"],a["helpers/rb"],a["helpers/smime-attachments-metrics"],a["helpers/subscribe-notify"],a.icons,a["lazy.modules"],a.logger,a["mail/Folder"],a["mail/Message"],a["mail/Thread"],a["mail/User"],a["mail/actions/ContactSuggests"],a["mail/getters/MessageMeta"],a["mediator/folders-navigation/utils"],a["mediator/layout-manager"],a["mediator/layout-manager/vars"],a["mediator/marusia-manager"],a["mediator/todo-manager/consts"],a["mediator/todo-manager/todo-manager"],a["mediator/user-info"],a.mobx,a["mobx-react"],a["mobx-state-tree"],a["models/adv-letter/adv-letter"],a["models/bait-letter/bait-letter"],a["models/letters-list-divider/letters-list-divider"],a["models/promo-block-letter/promo-block-letter"],a["models/search-action-letter/search-action-letter"],a["models/spec-project-letter/spec-project-letter"],a["models/spinner-letter/spinner-letter"],a["models/tip-letter/tip-letter"],a["octavius-public/service/vkMessengerLoader"],a["prop-types"],a.react,a["react-dom"],a.router,a["service/auth"],a["service/emoji"],a["service/feedback"],a["service/fishing"],a["service/getModule"],a["service/layer"],a["service/notify"],a["service/promo"],a["service/radars/index"],a["service/search-attaches/attachesList"],a["service/search-attaches/getAttaches"],a["service/search-attaches/utils"],a["service/search-attaches/viewModes"],a["service/secure-folder"],a["service/smokescreen"],a["service/storage"],a["service/themes.setup"],a["state-tree/search-operand/utils"],a["state-tree/search-response/search-response"],a["state-tree/search/utils"],a["ui-block/attach-list/attach-list"],a["ui-block/avatar/avatar"],a["ui-block/button2/button2"],a["ui-block/calendar-button/calendar-button"],a["ui-block/category-feedback/category-feedback"],a["ui-block/checkbox/checkbox"],a["ui-block/contextmenu-folder/contextmenu-folder"],a["ui-block/dataset-letters/dataset-letters"],a["ui-block/dataset/dataset"],a["ui-block/delimeter/delimeter"],a["ui-block/discounts/discounts"],a["ui-block/dropdown-actions/dropdown-actions"],a["ui-block/html-parser/html-parser"],a["ui-block/ico/ico"],a["ui-block/letter-blockquote/letter-blockquote"],a["ui-block/letter-body-amp/letter-body-amp"],a["ui-block/letter-body/letter-body"],a["ui-block/letter-calendar/letter-calendar"],a["ui-block/letter-category/letter-category"],a["ui-block/letter-confirm-receipt/letter-confirm-receipt"],a["ui-block/letter-contact/letter-contact"],a["ui-block/letter-list-item-adv/letter-list-item-adv"],a["ui-block/letter-list-item-placeholder/letter-list-item-placeholder"],a["ui-block/letter-list-item/letter-list-item"],a["ui-block/letter-meta/letter-meta"],a["ui-block/letter-status2/letter-status2"],a["ui-block/letter-tooltip/letter-tooltip"],a["ui-block/letter/letter"],a["ui-block/letters-divider/letters-divider"],a["ui-block/list-letter-attach-status-preview/list-letter-attach-status-preview"],a["ui-block/list-letter-attach-status/list-letter-attach-status"],a["ui-block/list-letter-badge/list-letter-badge"],a["ui-block/list-letter-bait/list-letter-bait"],a["ui-block/list-letter-common/list-letter-abstract"],a["ui-block/list-letter-common/list-letter-abstract-payment-die"],a["ui-block/list-letter-folder/list-letter-folder"],a["ui-block/list-letter-height-compensation/list-letter-height-compensation"],a["ui-block/list-letter-order/list-letter-abstract-order"],a["ui-block/list-letter-order/list-letter-order"],a["ui-block/list-letter-payment-button/list-letter-payment-button"],a["ui-block/list-letter-payment-die/list-letter-payment-die"],a["ui-block/list-letter-payment-universal-die/list-letter-payment-universal-die"],a["ui-block/list-letter-preview-action/list-letter-preview-action"],a["ui-block/list-letter-preview-attaches/list-letter-preview-attaches"],a["ui-block/list-letter-preview-stub/list-letter-preview-stub"],a["ui-block/list-letter-read-status/list-letter-read-status"],a["ui-block/list-letter-schedule-status/list-letter-schedule-status"],a["ui-block/list-letter-skeleton/list-letter-skeleton"],a["ui-block/list-letter-snippet/list-letter-snippet"],a["ui-block/list-letter-spinner/list-letter-spinner"],a["ui-block/list-letter-subject/list-letter-subject"],a["ui-block/list-letter-tip/list-letter-tip"],a["ui-block/list-letter-unsubscribe/list-letter-unsubscribe"],a["ui-block/list-letter-welcome/list-letter-welcome"],a["ui-block/marusia-read-letter-button/marusia-read-letter-button"],a["ui-block/metathread-footer/metathread-footer"],a["ui-block/metathread-head-common/metathread-head-common"],a["ui-block/metathread-head-compact-expanded/metathread-head-compact-expanded"],a["ui-block/metathread-head-compact/metathread-head-compact"],a["ui-block/metathread/metathread"],a["ui-block/nav-folders/nav-folders"],a["ui-block/notification-badge/notification-badge"],a["ui-block/octopus/octopus"],a["ui-block/portal-menu-element/portal-menu-element"],a["ui-block/portal-menu/portal-menu"],a["ui-block/promo-block-letter/promo-block-letter"],a["ui-block/promo-domain-die/promo-domain-die"],a["ui-block/search-panel-button/search-panel-button"],a["ui-block/search-panel/search-panel"],a["ui-block/spec-project-letter/spec-project-letter"],a["ui-block/swipeable/swipeable"],a["ui-block/thread/thread"],a["ui-block/translator/translator"],a["utils/util"]);for(var d in c)("object"==typeof exports?exports:a)[d]=c[d]}}(self,function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,_,$,aa,ba,ca,da,ea,fa,ga,ha,ia,ja,ka,la,ma,na,oa,pa,qa,ra,sa,ta,ua,va,wa,xa,ya,za,Aa,Ba,Ca,Da,Ea,Fa,Ga,Ha,Ia,Ja,Ka,La,Ma,Na,Oa,Pa,Qa,Ra,Sa,Ta,Ua,Va,Wa,Xa,Ya,Za,$a,_a,ab,bb,cb,db,eb,fb,gb,hb,ib,jb,kb,lb,mb,nb,ob,pb,qb,rb,sb,tb,ub,vb,wb,xb,yb,zb,Ab,Bb,Cb,Db,Eb,Fb,Gb,Hb,Ib,Jb,Kb,Lb,Mb,Nb,Ob,Pb,Qb,Rb,Sb,Tb,Ub,Vb,Wb,Xb,Yb,Zb,$b,_b,ac,bc,cc,dc,ec,fc,gc,hc,ic){return function(){var jc,kc,lc={5857:function(a,b,c){!function(a){"use strict";var b=function(a,c){return(b=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])})(a,c)},d=function(){return(d=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++)for(var e in b=arguments[c])Object.prototype.hasOwnProperty.call(b,e)&&(a[e]=b[e]);return a}).apply(this,arguments)};function e(a,b,c,d){return new(c=c||Promise)(function(e,f){function g(a){try{i(d.next(a))}catch(a){f(a)}}function h(a){try{i(d.throw(a))}catch(a){f(a)}}function i(a){var b;a.done?e(a.value):((b=a.value)instanceof c?b:new c(function(a){a(b)})).then(g,h)}i((d=d.apply(a,b||[])).next())})}function f(a,b){var c,d,e,f={label:0,sent:function(){if(1&e[0])throw e[1];return e[1]},trys:[],ops:[]},g={next:h(0),throw:h(1),return:h(2)};return"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function h(g){return function(h){return function(g){if(c)throw new TypeError("Generator is already executing.");for(;f;)try{if(c=1,d&&(e=2&g[0]?d.return:g[0]?d.throw||((e=d.return)&&e.call(d),0):d.next)&&!(e=e.call(d,g[1])).done)return e;switch(d=0,e&&(g=[2&g[0],e.value]),g[0]){case 0:case 1:e=g;break;case 4:return f.label++,{value:g[1],done:!1};case 5:f.label++,d=g[1],g=[0];continue;case 7:g=f.ops.pop(),f.trys.pop();continue;default:if(!(e=0<(e=f.trys).length&&e[e.length-1])&&(6===g[0]||2===g[0])){f=0;continue}if(3===g[0]&&(!e||g[1]>e[0]&&g[1]<e[3])){f.label=g[1];break}if(6===g[0]&&f.label<e[1]){f.label=e[1],e=g;break}if(e&&f.label<e[2]){f.label=e[2],f.ops.push(g);break}e[2]&&f.ops.pop(),f.trys.pop();continue}g=b.call(a,f)}catch(a){g=[6,a],d=0}finally{c=e=0}if(5&g[0])throw g[1];return{value:g[0]?g[1]:void 0,done:!0}}([g,h])}}}function g(a,b,c){if(c||2===arguments.length)for(var d,e=0,f=b.length;e<f;e++)!d&&e in b||((d=d||Array.prototype.slice.call(b,0,e))[e]=b[e]);return a.concat(d||Array.prototype.slice.call(b))}var h=(i.prototype.add=function(a,b){this.hash[a]=b},i.prototype.remove=function(a){delete this.hash[a]},i.prototype.get=function(a){return this.hash[a]},i.prototype.has=function(a){return!!this.hash[a]},i.prototype.clear=function(){this.hash={}},i.prototype.values=function(){return Object.values(this.hash)},i);function i(){this.hash={}}var j,k=(function(a,c){if("function"!=typeof c&&null!==c)throw new TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=a}b(a,c),a.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}(l,j=h),l.prototype.add=function(a,b){j.prototype.add.call(this,a.toLowerCase(),b)},l.prototype.remove=function(a){j.prototype.remove.call(this,a.toLowerCase())},l.prototype.get=function(a){return j.prototype.get.call(this,a.toLowerCase())},l.prototype.has=function(a){return j.prototype.has.call(this,a.toLowerCase())},l);function l(){return null!==j&&j.apply(this,arguments)||this}var m,n={"\\":"ё","`":"ё",q:"й",w:"ц",e:"у",r:"к",t:"е",y:"н",u:"г",i:"ш",o:"щ",p:"з","[":"х","]":"ъ",a:"ф",s:"ы",d:"в",f:"а",g:"п",h:"р",j:"о",k:"л",l:"д",";":"ж","'":"э",z:"я",x:"ч",c:"с",v:"м",b:"и",n:"т",m:"ь",",":"б",".":"ю","ё":"`","й":"q","ц":"w","у":"e","к":"r","е":"t","н":"y","г":"u","ш":"i","щ":"o","з":"p","х":"[","ъ":"]","ф":"a","ы":"s","в":"d","а":"f","п":"g","р":"h","о":"j","л":"k","д":"l","ж":";","э":"'","я":"z","ч":"x","с":"c","м":"v","и":"b","т":"n","ь":"m","б":",","ю":"."},o="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==c.g?c.g:"undefined"!=typeof self?self:{},p=(function(a){Object.defineProperty(a,"__esModule",{value:!0});var b="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==o?o:"undefined"!=typeof self?self:{};function c(a,b){return a(b={exports:{}},b.exports),b.exports}function d(a){try{return!!a()}catch(a){return!0}}function e(a,b){return{enumerable:!(1&a),configurable:!(2&a),writable:!(4&a),value:b}}function f(a){return E.call(a).slice(8,-1)}function g(a){if(null==a)throw TypeError("Can't call method on "+a);return a}function h(a){return G(g(a))}function i(a){return"object"==typeof a?null!==a:"function"==typeof a}function j(a,b){if(!i(a))return a;var c,d;if(b&&"function"==typeof(c=a.toString)&&!i(d=c.call(a)))return d;if("function"==typeof(c=a.valueOf)&&!i(d=c.call(a)))return d;if(!b&&"function"==typeof(c=a.toString)&&!i(d=c.call(a)))return d;throw TypeError("Can't convert object to primitive value")}function k(a,b){return H.call(a,b)}function l(a){return J?I.createElement(a):{}}function m(a){if(!i(a))throw TypeError(String(a)+" is not an object");return a}function n(a,b){try{P(z,a,b)}catch(c){z[a]=b}return b}function p(a){return"Symbol("+String(void 0===a?"":a)+")_"+(++S+T).toString(36)}var q,r,s,t,u,v,w,x,y="object",z=(B=function(a){return a&&a.Math==Math&&a})(typeof globalThis==y&&globalThis)||B(typeof window==y&&window)||B(typeof self==y&&self)||B(typeof b==y&&b)||Function("return this")(),A=!d(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}),B={}.propertyIsEnumerable,C=Object.getOwnPropertyDescriptor,D={f:C&&!B.call({1:2},1)?function(a){return!!(a=C(this,a))&&a.enumerable}:B},E={}.toString,F="".split,G=d(function(){return!Object("z").propertyIsEnumerable(0)})?function(a){return"String"==f(a)?F.call(a,""):Object(a)}:Object,H={}.hasOwnProperty,I=z.document,J=i(I)&&i(I.createElement),K=!A&&!d(function(){return 7!=Object.defineProperty(l("div"),"a",{get:function(){return 7}}).a}),L=Object.getOwnPropertyDescriptor,M={f:A?L:function(a,b){if(a=h(a),b=j(b,!0),K)try{return L(a,b)}catch(a){}if(k(a,b))return e(!D.f.call(a,b),a[b])}},N=Object.defineProperty,O={f:A?N:function(a,b,c){if(m(a),b=j(b,!0),m(c),K)try{return N(a,b,c)}catch(a){}if("get"in c||"set"in c)throw TypeError("Accessors not supported");return"value"in c&&(a[b]=c.value),a}},P=A?function(a,b,c){return O.f(a,b,e(1,c))}:function(a,b,c){return a[b]=c,a},Q=c(function(a){var b="__core-js_shared__",c=z[b]||n(b,{});(a.exports=function(a,b){return c[a]||(c[a]=void 0!==b?b:{})})("versions",[]).push({version:"3.2.1",mode:"global",copyright:"© 2019 Denis Pushkarev (zloirock.ru)"})}),R=Q("native-function-to-string",Function.toString),S=(b="function"==typeof(y=z.WeakMap)&&/native code/.test(R.call(y)),0),T=Math.random(),U=Q("keys"),V=(B=function(a){return U[a]||(U[a]=p(a))},{});function W(a){return"function"==typeof a?a:void 0}function X(a){return isNaN(a=+a)?0:(0<a?ea:da)(a)}function Y(a){return 0<a?fa(X(a),9007199254740991):0}function Z(a,b){var c,d=h(a),e=0,f=[];for(c in d)!k(V,c)&&k(d,c)&&f.push(c);for(;b.length>e;)k(d,c=b[e++])&&(~ia(f,c)||f.push(c));return f}function _(a){if("function"!=typeof a)throw TypeError(String(a)+" is not a function");return a}function $(a,b,c){if(_(a),void 0===b)return a;switch(c){case 0:return function(){return a.call(b)};case 1:return function(c){return a.call(b,c)};case 2:return function(c,d){return a.call(b,c,d)};case 3:return function(c,d,e){return a.call(b,c,d,e)}}return function(){return a.apply(b,arguments)}}y=z.WeakMap,w=b?(q=new y,r=q.get,s=q.has,t=q.set,u=function(a,b){return t.call(q,a,b),b},v=function(a){return r.call(q,a)||{}},function(a){return s.call(q,a)}):(x=B("state"),V[x]=!0,u=function(a,b){return P(a,x,b),b},v=function(a){return k(a,x)?a[x]:{}},function(a){return k(a,x)});var aa={set:u,get:v,has:w,enforce:function(a){return w(a)?v(a):u(a,{})},getterFor:function(a){return function(b){var c;if(!i(b)||(c=v(b)).type!==a)throw TypeError("Incompatible receiver, "+a+" required");return c}}},ba=c(function(a){var b=aa.get,c=aa.enforce,d=String(R).split("toString");Q("inspectSource",function(a){return R.call(a)}),(a.exports=function(a,b,e,f){var g=!!f&&!!f.unsafe,h=!!f&&!!f.enumerable;f=!!f&&!!f.noTargetGet,"function"==typeof e&&("string"!=typeof b||k(e,"name")||P(e,"name",b),c(e).source=d.join("string"==typeof b?b:"")),a!==z?(g?!f&&a[b]&&(h=!0):delete a[b],h?a[b]=e:P(a,b,e)):h?a[b]=e:n(b,e)})(Function.prototype,"toString",function(){return"function"==typeof this&&b(this).source||R.call(this)})}),ca=z,da=(b=function(a,b){return arguments.length<2?W(ca[a])||W(z[a]):ca[a]&&ca[a][b]||z[a]&&z[a][b]},Math.ceil),ea=Math.floor,fa=Math.min,ga=Math.max,ha=Math.min,ia=((y=function(a){return function(b,c,d){var e,f=h(b),g=Y(f.length),i=function(a,b){return(a=X(a))<0?ga(a+b,0):ha(a,b)}(d,g);if(a&&c!=c){for(;i<g;)if((e=f[i++])!=e)return!0}else for(;i<g;i++)if((a||i in f)&&f[i]===c)return a||i||0;return!a&&-1}})(!0),y(!1)),ja=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],ka=ja.concat("length","prototype"),la={f:Object.getOwnPropertyNames||function(a){return Z(a,ka)}},ma={f:Object.getOwnPropertySymbols},na=b("Reflect","ownKeys")||function(a){var b=la.f(m(a)),c=ma.f;return c?b.concat(c(a)):b},oa=/#|\.prototype\./,pa=(y=function(a,b){return(a=qa[pa(a)])==sa||a!=ra&&("function"==typeof b?d(b):!!b)}).normalize=function(a){return String(a).replace(oa,".").toLowerCase()},qa=y.data={},ra=y.NATIVE="N",sa=y.POLYFILL="P",ta=y,ua=M.f,va=Array.isArray||function(a){return"Array"==f(a)},wa=function(a,b,c,d,e,f,g,h){for(var i,j=e,k=0,l=!!g&&$(g,h,3);k<d;){if(k in c){if(i=l?l(c[k],k,b):c[k],0<f&&va(i))j=wa(a,b,i,Y(i.length),j,f-1)-1;else{if(9007199254740991<=j)throw TypeError("Exceed the acceptable array length");a[j]=i}j++}k++}return j},xa=wa,ya=!!Object.getOwnPropertySymbols&&!d(function(){return!String(Symbol())}),za=z.Symbol,Aa=Q("wks"),Ba=(y=function(a){return Aa[a]||(Aa[a]=ya&&za[a]||(ya?za:p)("Symbol."+a))})("species");function Ca(){}!function(a,b){var c,d,e,f=a.target,g=a.global,h=a.stat,i=g?z:h?z[f]||n(f,{}):(z[f]||{}).prototype;if(i)for(c in b){if(d=b[c],e=a.noTargetGet?(e=ua(i,c))&&e.value:i[c],!ta(g?c:f+(h?".":"#")+c,a.forced)&&void 0!==e){if(typeof d==typeof e)continue;!function(a,b){for(var c=na(b),d=O.f,e=M.f,f=0;f<c.length;f++){var g=c[f];k(a,g)||d(a,g,e(b,g))}}(d,e)}(a.sham||e&&e.sham)&&P(d,"sham",!0),ba(i,c,d,a)}}({target:"Array",proto:!0},{flatMap:function(a,b){var c,d,e,f=Object(g(this)),h=Y(f.length);return _(a),d=0,va(c=f)&&("function"==typeof(e=c.constructor)&&(e===Array||va(e.prototype))||i(e)&&null===(e=e[Ba]))&&(e=void 0),(d=new(void 0===e?Array:e)(0===d?0:d)).length=xa(d,f,f,h,0,1,a,1<arguments.length?b:void 0),d}});var Da=Object.keys||function(a){return Z(a,ja)},Ea=A?Object.defineProperties:function(a,b){m(a);for(var c,d=Da(b),e=d.length,f=0;f<e;)O.f(a,c=d[f++],b[c]);return a},Fa=b("document","documentElement"),Ga=B("IE_PROTO"),Ha="prototype",Ia=function(){var a=l("iframe"),b=ja.length;for(a.style.display="none",Fa.appendChild(a),a.src=String("javascript:"),(a=a.contentWindow.document).open(),a.write("<script>document.F=Object<\/script>"),a.close(),Ia=a.F;b--;)delete Ia[Ha][ja[b]];return Ia()};B=Object.create||function(a,b){var c;return null!==a?(Ca[Ha]=m(a),c=new Ca,Ca[Ha]=null,c[Ga]=a):c=Ia(),void 0===b?c:Ea(c,b)},V[Ga]=!0;var Ja=y("unscopables"),Ka=Array.prototype;null==Ka[Ja]&&P(Ka,Ja,B(null)),Ka[Ja].flatMap=!0,$(Function.call,z.Array.prototype.flatMap,void 0),B={cyrillicToLatin:{"а":["a"],"б":["b"],"в":["v"],"г":["g"],"д":["d"],"е":["je","ye","e"],"ё":["jo","yo"],"ж":["zh"],"з":["s","z"],"и":["i"],"ия":["ia"],"й":["jj","g","i","j","y"],"йе":["ye"],"йо":["yo"],"йу":["yu"],"йя":["ya"],"к":["c","k"],"кс":["x"],"л":["l"],"м":["m"],"н":["n"],"о":["o"],"п":["p"],"р":["r"],"с":["s"],"т":["t"],"у":["u"],"ф":["ph","f"],"х":["kh","h"],"ц":["c","ts"],"ч":["ch"],"ш":["sch","sh"],"щ":["shch","sch","shh"],"ъ":['"'],"ы":["i","y"],"ь":["'"],"э":["eh"],"ю":["u","ju","yu"],"я":["ja","ya","y"]},latinToCyrillic:{a:["а"],b:["б"],c:["к"],ch:["ч"],d:["д"],e:["е"],f:["ф"],g:["г","й"],h:["х"],i:["и","й","ы"],ia:["ия"],j:["й"],ja:["йя","я"],je:["е"],jo:["ё"],ju:["ю"],k:["к"],kh:["х"],l:["л"],m:["м"],n:["н"],o:["о"],p:["п"],r:["р"],s:["з","с"],sch:["ш","щ"],sh:["ш"],shch:["щ"],shh:["щ"],t:["т"],ts:["ц"],u:["у","ю"],v:["в"],x:["кс"],y:["ий","й","ы","я"],ya:["йя","я"],ye:["е"],yo:["ё"],yu:["ю"],z:["з"],zh:["ж"]}},a.default=function(a,b){return void 0===b&&(b=null),function(c){for(var d={"":[""]},e=Math.max.apply(Math,Object.keys(a).map(function(a){return a.length})),f=0;f<c.length;f++)for(var g=0;g<e&&"break"!==function(e){if(f-e<0)return"break";var g=c.slice(f-e,f+1),h=a[g];if(e=c.slice(0,f+1),!h)return 1===g.length&&(d[e]=d[e.slice(0,-1)].map(function(a){return a+g})),"break";var i=d[c.slice(0,f-g.length+1)];i=null!==b&&i.length<b?h.flatMap(function(a){return i.map(function(b){return b+a})}):i.map(function(a){return a+g}),d[e]=(d[e]||[]).concat(i)}(g);g++);return d[c]}},a.maps=B}((m={path:void 0,exports:{},require:function(a,b){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(null==b&&m.path)}}).exports),m.exports),q=function(a){return a&&a.__esModule&&Object.prototype.hasOwnProperty.call(a,"default")?a.default:a}(p),r=p.maps.cyrillicToLatin,s=p.maps.latinToCyrillic,t=q(r,1e3),u=q(s,1e3);function v(a,b){return b.length&&b.split("").some(function(b){return!!a[b]})}function w(a,b){return{id:a.id,email:a.email,avatar:b(a),description:a.display_name?a.email:null,title:a.display_name||a.email}}function x(a){var b=this;this._state={searchValue:"",options:[],selected:[],searchWords:[],error:null},this._selected=new k,this.memCache=new h,this.searchWordsMemCache=new h,this._select=function(a){b._selected.add(a.email,d({},a))};var c=void 0===(m=a.limit)?10:m,g=a.avatarMapper,i=a.jssdkMethodContactSuggest,j=a.onStateChange,l=a.labelSuggestIcon,m=a.mapLabelOptionToDescription;a=void 0===(a=a.defaultSelected)?[]:a,this.config={labelSuggestIcon:l,onStateChange:j,jssdkMethodContactSuggest:i,avatarMapper:g,limit:c,mapLabelOptionToDescription:m,defaultSelected:a},a.forEach(this._select),this.debouncedJssdkMethod=function(a,b,c){var d=null,e=null;return function(){for(var f=this,g=[],h=0;h<arguments.length;h++)g[h]=arguments[h];var i;return d&&(e(),clearTimeout(d)),i=b,new Promise(function(a,b){d=setTimeout(a,i),e=b}).then(function(){return d=null,a.apply(f,g)}).catch(function(){return c})}}(function(a,c){return void 0===c&&(c=b.config.limit),e(b,void 0,void 0,function(){var b,e,g;return f(this,function(f){switch(f.label){case 0:return[4,this.config.jssdkMethodContactSuggest.execute({limit:c,search:a})];case 1:return b=f.sent(),g=b.result,e=g.contacts,g=g.labels,e=e.length,g=g.length,g=Math.max(e,g),[2,d(d({},b),{canBeReplenished:g>=this.config.limit*Math.ceil(g/this.config.limit)})]}})})},150,{result:{contacts:[],labels:[]},uncache:!0}),this.searchWordsMemCache.add("",[]),this.search()}Object.defineProperty(x.prototype,"state",{get:function(){return d(d({},this._state),{selected:Array.from(this._selected.values())})},enumerable:!1,configurable:!0}),x.prototype.setState=function(a){this._state=d(d({},this._state),a),this.config.onStateChange(a)},x.prototype.search=function(){return e(this,void 0,void 0,function(){var a,b,c,d,e;return f(this,function(f){switch(f.label){case 0:d=this.state.searchValue,f.label=1;case 1:return(f.trys.push([1,6,,7]),c=this.memCache.get(d))?[3,3]:(e=this.debouncedJssdkMethod(d,2*this.config.limit),this.memCache.add(d,e),[4,e]);case 2:return(a=f.sent()).uncache&&this.memCache.remove(d),[3,5];case 3:return[4,c];case 4:a=f.sent(),f.label=5;case 5:return[3,7];case 6:return b=f.sent(),this.setState({error:new Error('[addressbook-suggests]: "'.concat(b,'"'))}),[3,7];case 7:return this.state.searchValue!==d?[2]:(e=this.formatSuggestsWithFilteredAmount(a),c=e.options,b=e.filteredContactsAmount,d=e.filteredLabelsAmount,this.setState({options:c}),e=a.result,c=e.contacts,e=e.labels,c=c.length,e=e.length,d=Math.max(c-b,e-d)<=this.config.limit,a.canBeReplenished&&d?(e=Math.max(c,e)+this.config.limit,[4,this.replenishCache(this.state.searchValue,e)]):[3,9]);case 8:f.sent(),f.label=9;case 9:return[2]}})})},x.prototype.formatSuggestsWithFilteredAmount=function(a){var b,c,e=this,f=(i=a.result).contacts,h=i.labels,i=(b=function(a){return a.email.toLowerCase()},c={},f.forEach(function(a){c[b(a)]=a}),a=Object.values(c).filter(function(a){return!e._selected.has(a.email)}).map(function(a){return a=w(a,a=e.config.avatarMapper),d(d({},a),{contacts:[a]})}),h.filter(function(a){return a.contacts.length}).filter(function(a){return!a.contacts.every(function(a){return e._selected.has(a.email)})}).map(function(a){return b=a,c=e.config.labelSuggestIcon,f=e.config.avatarMapper,a=e.config.mapLabelOptionToDescription,{title:b.name,description:a(b),icon:c,id:b.id,contacts:b.contacts.map(function(a){return d({},w(a,f))})};var b,c,f}));return{options:g(g([],a.slice(0,this.config.limit),!0),i.slice(0,this.config.limit),!0),filteredContactsAmount:f.length-a.length,filteredLabelsAmount:h.length-i.length}},x.prototype.replenishCache=function(a,b){this.memCache.add(a,this.debouncedJssdkMethod(a,b))},x.prototype.changeValidity=function(a,b){this._selected.add(a.email,d(d({},a),{invalid:!b})),this.setState({selected:this.state.selected})},x.prototype.select=function(a){a.contacts.forEach(this._select),this.setState({selected:this.state.selected,searchValue:"",searchWords:[]}),this.search()},x.prototype.deselect=function(a){this._selected.remove(a.email),this.setState({selected:this.state.selected}),this.search()},x.prototype.changeSearchValue=function(a){var b,c,d=this.searchWordsMemCache.get(a);d||(d=g([a,a.toLocaleLowerCase().split("").map(function(a){var b;return null!==(b=n[a])&&void 0!==b?b:a}).join("")],(b=a).length?v(s,b)?null!=(c=u(b.toLocaleLowerCase()))?c:[]:v(r,b)&&null!=(c=t(b.toLocaleLowerCase()))?c:[]:[],!0),this.searchWordsMemCache.add(a,d)),this.setState({searchValue:a,searchWords:d}),this.search()},x.prototype.selectEmail=function(a){var b=a.email,c=a.isEmailValid;a=a.name,this._selected.has(b)?this.setState({searchWords:[],searchValue:"",options:[]}):(c={id:b,email:b,title:a,avatar:c?this.config.avatarMapper({display_name:b,email:b,id:b}):"",invalid:!c},this._selected.add(b,d({},c)),this.setState({selected:this.state.selected,searchValue:""}),this.search())},x.prototype.clearMemCache=function(){this.memCache.clear(),this.searchWordsMemCache.clear(),this._selected.clear()},x.prototype.clearError=function(){this.setState({error:null})},q=x,a.Suggests=q,Object.defineProperty(a,"__esModule",{value:!0})}(b)},32:function(a,b){!function(a){"use strict";var b="ªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԧԱ-Ֆՙա-ևא-תװ-ײؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘࢠࢢ-ࢬऄ-हऽॐक़-ॡॱ-ॷॹ-ॿঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-ళవ-హఽౘౙౠౡಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೞೠೡೱೲഅ-ഌഎ-ഐഒ-ഺഽൎൠൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆก-ะาำเ-ๆກຂຄງຈຊຍດ-ທນ-ຟມ-ຣລວສຫອ-ະາຳຽເ-ໄໆໜ-ໟༀཀ-ཇཉ-ཬྈ-ྌက-ဪဿၐ-ၕၚ-ၝၡၥၦၮ-ၰၵ-ႁႎႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏼᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᜀ-ᜌᜎ-ᜑᜠ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰក-ឳៗៜᠠ-ᡷᢀ-ᢨᢪᢰ-ᣵᤀ-ᤜᥐ-ᥭᥰ-ᥴᦀ-ᦫᧁ-ᧇᨀ-ᨖᨠ-ᩔᪧᬅ-ᬳᭅ-ᭋᮃ-ᮠᮮᮯᮺ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᳩ-ᳬᳮ-ᳱᳵᳶᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℹℼ-ℿⅅ-ⅉⅎↃↄⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳮⳲⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞⸯ々〆〱-〵〻〼ぁ-ゖゝ-ゟァ-ヺー-ヿㄅ-ㄭㄱ-ㆎㆠ-ㆺㇰ-ㇿ㐀-䶵一-鿌ꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚗꚠ-ꛥꜗ-ꜟꜢ-ꞈꞋ-ꞎꞐ-ꞓꞠ-Ɦꟸ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꨀ-ꨨꩀ-ꩂꩄ-ꩋꩠ-ꩶꩺꪀ-ꪯꪱꪵꪶꪹ-ꪽꫀꫂꫛ-ꫝꫠ-ꫪꫲ-ꫴꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꯀ-ꯢ가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ",c=new RegExp('([\\-\\w.+!#$%&"*=/?\\^_`|~{}]+)@([\\w.а-яё\\-'+b+"]+)\\.[\\wа-яё"+b+"]+"),d=new RegExp("['\"]?(.*?)['\"]?\\s*(?:<|&lt;)("+c.source+")(?:>|&gt;)$"),e=new RegExp("['\"]?(.*?)['\"]?\\s+(?:<|&lt;)("+c.source+")(?:>|&gt;)$"),f=new RegExp('([,;])(?=(?:[^"]*"[^"]*")*[^"]*$)'),g=new RegExp("^[,;]$"),h=new RegExp("[,;]"),i={UNICODE:b,RE_EMAIL:c,RE_NAME_AND_EMAIL_IN_LTGT:d,RE_NAME_AND_EMAIL_IN_LTGT_WITH_SPACE:e,RE_SPLIT_BY_COMMA_SEMI_OUTSIDE_QUOTES:f,RE_SPLIT_BY_COMMA_SEMI_OUTSIDE_QUOTES_2:/[,;](?=(?:[^"]*"[^\]*")*[^"]*$))/,RE_IS_SPLITTER:g,RE_HAS_SPLITTER:h};function j(a){return!!a.match(i.RE_EMAIL)}function k(a){if(!a)return"";var b=a.match(i.RE_NAME_AND_EMAIL_IN_LTGT);return b?b[2]:a}function l(a){if(!a)return"";var b=a.match(i.RE_NAME_AND_EMAIL_IN_LTGT);return b?b[1]:a}function m(a){var b={valid:!1,str:a,name:"",email:"",newLabel:null},c=a.match(i.RE_EMAIL),d=c?c[0]:a,e=a;if(j(a)){if(k(a)===a&&a!==d&&a.match(/\s|"/)){for(var f=a.length,g=Math.max(a.lastIndexOf(" "),a.lastIndexOf('"'))+1,h=!1;!h;){if(a.substring(g,f).match(i.RE_EMAIL))h=!0;else{if(" "===a.charAt(g-1))f=g;g=a.substring(0,g-1).lastIndexOf(" ")+1}if(f<=0)break}if(h){var m=a.substring(0,g).replace(/(^\s+|\s+$)/g,"");if(m.length>0||f<a.length){if(f<a.length)b.newLabel=a.substring(f);b.str=a=m+" <"+a.substring(g,f).replace(/[<>\s]/g,"")+">"}}}if(d!==a)if((e=l(a).replace(/(^\s+|\s+$)/g,"")).length>0&&e!==a){if(d=k(a),b.valid=!0,b.name=e,b.email=d,!a.match(i.RE_NAME_AND_EMAIL_IN_LTGT_WITH_SPACE))b.str=a.match(/^\s*"/)?'"'+e+'" <'+d+">":e+" <"+d+">";else if(e===d)b.str=d}else if(0===e.length)b.valid=!0,b.str=b.email=d,b.name="";else if(a.replace(i.RE_EMAIL,"").match(/^["'<>()]+$/))b.valid=!0,b.str=b.email=d,b.name="";else b.str=a,b.name=b.email="",b.valid=!1;else b.valid=!0,b.str=b.email=d,b.name=""}return b}a.checkTextValidity=m,a.contactToString=function(a,b){if(void 0===b)b=/,/;var c=a.email,d=a.name,e=new RegExp(b.source);return d?e.test(d)?'"'+d+'" <'+c+">":d+" <"+c+">":c},a.hasEmail=j,a.suggestToEmail=k,a.suggestToName=l,a.shouldEscapeName=function(a){return i.RE_HAS_SPLITTER.test(a)},a.getCorrespondentsFromString=function(a){if(!a)return[];var b=a.split(i.RE_SPLIT_BY_COMMA_SEMI_OUTSIDE_QUOTES);b=b.map(function(a){return a.split(/\s+/)}).reduce(function(a,b){return a.concat(b)},[]);var c,d,e=1,f=[];if((b=b.filter(function(a){return!/^\s*$/.test(a)})).forEach(function(a){var b,g;switch(e){case 1:if(j(a))c=0,b=m(a);else c=2,g=a;break;case 0:if(i.RE_IS_SPLITTER.test(a)){c=1;break}if(j(a)){b=m(a);break}c=2,g=a;break;case 2:if(i.RE_IS_SPLITTER.test(a)){c=1;break}b=m(g=d+" "+a),c=b.valid?0:2}switch(c){case 2:d=g;break;case 1:if(d)f.push({email:d,valid:!1});d="";break;case 0:d="";var h=b.email,k=b.name,l=b.valid,n=b.str;f.push(l?{email:h,name:k?k:void 0}:{email:n,valid:!1})}e=c}),d)f.push({email:d,valid:!1});return f},Object.defineProperty(a,"__esModule",{value:!0})}(b)},3639:function(a,b,c){var d,e,f=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};d=[c,b,c(7764),c(4182),c(5163),c(2435),c(4063)],void 0===(e=function(a,b,c,d,e,g,h){"use strict";function i(a,b){return{configurable:!1,enumerable:!1,value:{subscribe:function(c){return a.subscribe(!b?c:function(a){if(a.state===b)c(a)})}}}}Object.defineProperty(b,"__esModule",{value:!0}),b.createGlobalAction=b.anyOf=void 0,c=f(c),h=f(h),Object.defineProperty(b,"anyOf",{enumerable:!0,get:function(){return d.anyOf}});var j=new Map,k=function(){return null};b.createGlobalAction=function(a,b,f){if(void 0===f)f={};var l=[],m=(0,d.createSubject)(),n=f.unhandledRejection;function o(d){if(f.dedup&&l.length){var i=function(a,b){for(var c=0,d=a;c<d.length;c++){var e=d[c],f=e.action.meta;if(f.arg===b)return e;if(f.arg&&b)try{if((0,h.default)(f.arg,b))return e}catch(a){}}}(l,d);if(i)return i}var o,p,q=(0,g.lazyValue)(function(){return Math.random().toString()}),r={type:a,state:"pending",payload:void 0,error:null,meta:{get uid(){return q()},arg:d,aborted:!1}},s=r,t=function(a){var b=a.state,c=l.indexOf(y);if(c>-1)l.splice(c,1);u&&u["fulfilled"===b?"commit":"rollback"](),m.dispatch(r)},u=f.transaction&&c.default.start(),v=new Promise(function(a,b){p=(0,g.lazyValue)(function(){var a=new e.AbortCtrl;return a.signal.addEventListener("abort",function(){o=o||new Error("Aborted"),b(o)}),a})}),w=function(a,b){if(null==a)return new Promise(function(a){return a(b())});if(!j.has(a))j.set(a,Promise.resolve());var c=j.get(a).then(function(){return b()});return j.set(a,c.catch(k)),c}(f.queue,function(){return b(d,{get uid(){return q()},get signal(){return p().signal}})}),x=Promise.race([v,w]).catch(function(a){return n?n(a):Promise.reject(a)}).then(function(a){return s.payload=a,s.state="fulfilled",t(r),r}).catch(function(a){return s.error=a,s.state="rejected",s.meta.aborted=!!o,t(r),Promise.reject(r)}),y=Object.defineProperties(x,{type:{configurable:!1,enumerable:!1,value:a},state:{configurable:!1,enumerable:!1,get:function(){return r.state}},action:{configurable:!1,enumerable:!1,value:r},abort:{configurable:!1,enumerable:!1,value:function(a){o=a,p().abort()}}});return l.push(y),m.dispatch(r),y}return Object.defineProperties(o,{type:{writable:!1,configurable:!1,value:a},activeList:{writable:!1,configurable:!1,value:l},any:i(m),pending:i(m,"pending"),rejected:i(m,"rejected"),fulfilled:i(m,"fulfilled")}),o}}.apply(b,d))||(a.exports=e)},4004:function(a,b,c){var d,e;d=[c,b,c(8156),c(4580)],void 0===(e=function(a,b,c,d){"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.useGlobalActionSubscribe=b.useGlobalActionDispatch=b.useGlobalAction=void 0,b.useGlobalAction=function(a,b){var e=(0,c.useReducer)(function(a){return a+1},0)[1],f=(0,d.useMemoArg)(b),g=(0,c.useMemo)(function(){return a(b)},[f]);return(0,c.useEffect)(function(){var a=g,b=function(){if(a===g)e()};return a.then(b,b),function(){if("pending"===a.action.state)a.abort(new Error("Unmount"))}},[g]),[g.action,g]},b.useGlobalActionDispatch=function(a){var b=(0,c.useRef)(null),d=(0,c.useReducer)(function(a){return a+1},0)[1],e=a,f=(0,c.useCallback)(function(a){return e(a).catch(function(a){b.current=a.error,d()})},[e]);return(0,c.useEffect)(function(){var a=e.activeList.length;return e.any.subscribe(function(){var b=e.activeList.length;if(a!==b)a=b,d()})},[e]),[f,{loading:e.activeList.length>0,error:b.current,active:e.activeList.length}]},b.useGlobalActionSubscribe=function(a,b){var d=(0,c.useRef)(b);d.current=b,(0,c.useEffect)(function(){return a.any.subscribe(function(a){var b=d.current;if(b)if("function"==typeof b)b(a);else if(b[a.state])b[a.state](a)})},[a])}}.apply(b,d))||(a.exports=e)},8163:function(a,b,c){var d,e;d=[c,b,c(4004),c(7136),c(7323),c(4580)],void 0===(e=function(a,b,c,d,e,f){"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.useMemoArg=b.useGlobalStateSelector=b.useGlobalState=b.useGlobalActionDispatch=b.useGlobalAction=void 0,Object.defineProperty(b,"useGlobalAction",{enumerable:!0,get:function(){return c.useGlobalAction}}),Object.defineProperty(b,"useGlobalActionDispatch",{enumerable:!0,get:function(){return c.useGlobalActionDispatch}}),Object.defineProperty(b,"useGlobalState",{enumerable:!0,get:function(){return d.useGlobalState}}),Object.defineProperty(b,"useGlobalStateSelector",{enumerable:!0,get:function(){return e.useGlobalStateSelector}}),Object.defineProperty(b,"useMemoArg",{enumerable:!0,get:function(){return f.useMemoArg}})}.apply(b,d))||(a.exports=e)},7323:function(a,b,c){var d,e;d=[c,b,c(8156)],void 0===(e=function(a,b,c){"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.useGlobalStateSelector=void 0,b.useGlobalStateSelector=function(a){var b=(0,c.useReducer)(function(a){return a+1},0)[1];return(0,c.useEffect)(function(){return"deps"in a?function(a,b){var c=a.map(function(a){return a.state.subscribe(b)});return function(){c.forEach(function(a){return a()})}}(a.deps,b):a.state.subscribe(b)},[a]),a()}}.apply(b,d))||(a.exports=e)},7136:function(a,b,c){var d,e;d=[c,b,c(8156)],void 0===(e=function(a,b,c){"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.useGlobalState=void 0,b.useGlobalState=function(a){var b=(0,c.useReducer)(function(a){return a+1},0)[1],d=(0,c.useCallback)(a.set,[a]);return(0,c.useEffect)(function(){return a.subscribe(b)},[a]),[a.get(),d]}}.apply(b,d))||(a.exports=e)},4580:function(a,b,c){var d,e,f=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};d=[c,b,c(8156),c(8252)],void 0===(e=function(a,b,c,d){"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.useMemoArg=void 0,d=f(d),b.useMemoArg=function(a){var b=(0,c.useRef)(a);if(b.current!==a&&!(0,d.default)(b.current,a))b.current=a;return b.current}}.apply(b,d))||(a.exports=e)},4182:function(a,b,c){var d;void 0===(d=function(a,b){"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.anyOf=b.createSubject=b.Subject=void 0;var c=function(){function a(){this.store=new Set}return a.prototype.on=function(a,b){var c=this;return a.subscribe(function(a){b(a,c)})},a.prototype.subscribe=function(a){var b=this;return this.store.add(a),function(){b.store.delete(a)}},a.prototype.dispatch=function(a){this.store.forEach(function(b){try{b(a)}catch(a){console.error(a)}})},a.prototype.clearSubscribers=function(){this.store.clear()},a}();b.Subject=c,b.createSubject=function(){return new c},b.anyOf=function(){for(var a=[],b=0;b<arguments.length;b++)a[b]=arguments[b];return{subscribe:function(b){var c=a.map(function(a){return a.subscribe(b)});return function(){c.forEach(function(a){return a()}),c.length=0}}}}}.apply(b,[c,b]))||(a.exports=d)},5163:function(a,b,c){var d;void 0===(d=function(a,b){"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.AbortCtrl=void 0;var c=function(){function a(){this.signal={aborted:!1,reason:null,addEventListener:function(){},dispatchEvent:function(){return!1},onabort:function(){},throwIfAborted:function(){},removeEventListener:function(){}}}return a.prototype.abort=function(){throw new Error("AbortController not implemented, use polyfill")},a}();b.AbortCtrl="undefined"!=typeof AbortController?AbortController:c}.apply(b,[c,b]))||(a.exports=d)},2435:function(a,b,c){var d;void 0===(d=function(a,b){"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.lazyValue=void 0,b.lazyValue=function(a){var b,c=!1;return function(){if(!c)c=!0,b=a();return b}}}.apply(b,[c,b]))||(a.exports=d)},8182:function(a,b,c){var d,e,f,g,h;window,a.exports=(d=c(8156),e=c(3613),f=c(5264),g=c(7386),h=c(259),function(a){var b={};function c(d){if(b[d])return b[d].exports;var e=b[d]={i:d,l:!1,exports:{}};return a[d].call(e.exports,e,e.exports,c),e.l=!0,e.exports}return c.m=a,c.c=b,c.d=function(a,b,d){c.o(a,b)||Object.defineProperty(a,b,{enumerable:!0,get:d})},c.r=function(a){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(a,"__esModule",{value:!0})},c.t=function(a,b){if(1&b&&(a=c(a)),8&b)return a;if(4&b&&"object"==typeof a&&a&&a.__esModule)return a;var d=Object.create(null);if(c.r(d),Object.defineProperty(d,"default",{enumerable:!0,value:a}),2&b&&"string"!=typeof a)for(var e in a)c.d(d,e,function(b){return a[b]}.bind(null,e));return d},c.n=function(a){var b=a&&a.__esModule?function(){return a.default}:function(){return a};return c.d(b,"a",b),b},c.o=function(a,b){return Object.prototype.hasOwnProperty.call(a,b)},c.p="",c(c.s=18)}([function(a,b,c){a.exports=c(16)()},function(a,b){a.exports=function(a){if(void 0===a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}},function(a,b){a.exports=d},function(a,b){a.exports=e},function(a,b){a.exports=function(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}},function(a,b,c){var d;!function(){"use strict";var c={}.hasOwnProperty;function e(){for(var a=[],b=0;b<arguments.length;b++){var d=arguments[b];if(d){var f=typeof d;if("string"===f||"number"===f)a.push(d);else if(Array.isArray(d)&&d.length){var g=e.apply(null,d);g&&a.push(g)}else if("object"===f)for(var h in d)c.call(d,h)&&d[h]&&a.push(h)}}return a.join(" ")}void 0!==a&&a.exports?(e.default=e,a.exports=e):void 0===(d=function(){return e}.apply(b,[]))||(a.exports=d)}()},function(a,b){a.exports=function(a,b){a.prototype=Object.create(b.prototype),a.prototype.constructor=a,a.__proto__=b}},function(a,b){a.exports=f},function(a,b,c){a.exports={portal:"C1JcIBcWcTdcYM1za7uy_",portalHidden:"_122QSUOT_xe0FKyL2fPauR",portalAnimate:"_16qUW3nm7QvAptwXh0NdIW",portalAnimFadeIn:"_3OMwGrjuHj5sV3IOi_dVuc"}},function(a,b){a.exports=g},function(a,b){a.exports=h},function(a,b,c){a.exports={smartOperand:"_2wGrB8FFYYBU4-b5K8PpVj"}},function(a,b,c){a.exports={placement:"DmeDMXQdGY5zHGcBWxsBR"}},function(a,b,c){a.exports={suggest:"_1Z3XJDfSWsIGB-d2PoNVn-"}},function(a,b){function c(){return a.exports=c=Object.assign||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a},c.apply(this,arguments)}a.exports=c},function(a,b,c){a.exports={smartInput:"AFnpgR9oCbJwHlYBFuZC0"}},function(a,b,c){"use strict";var d=c(17);function e(){}a.exports=function(){function a(a,b,c,e,f,g){if(g!==d){var h=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw h.name="Invariant Violation",h}}function b(){return a}a.isRequired=a;var c={array:a,bool:a,func:a,number:a,object:a,string:a,symbol:a,any:a,arrayOf:b,element:a,instanceOf:b,node:a,objectOf:b,oneOf:b,oneOfType:b,shape:b,exact:b};return c.checkPropTypes=e,c.PropTypes=c,c}},function(a,b,c){"use strict";a.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(a,b,c){"use strict";c.r(b);var d=c(3),e={CLEAR:"clear",PUSH:"push",POP:"pop",SET_OPERAND_FLAGS:"setOperandFlags",STOP_EDITING_AND_ACTIVATE_PREV:"stopEditingAndActivatePrev",STOP_EDITING_AND_ACTIVATE_NEXT:"stopEditingAndActivateNext",DEACTIVATE_ALL:"deactivateAll",REMOVE_AND_DEACTIVATE_ALL:"removeAndDeactivateAll",SPLICE:"splice"};function f(a){var b=function(a){return d.types.model("PlacementModel",{operand:d.types.maybe(a),active:!1,editing:!1,editable:!1,portal:!1}).actions(function(a){return{setActive:function(b){a.active=!!b},setEditing:function(b){a.editing=!!b},setEditable:function(b){a.editable=!!b},setPortal:function(b){a.portal=!!b}}})}(a);return d.types.model("SmartInputModel",{placements:d.types.optional(d.types.array(b),[]),lastPlacement:d.types.optional(b,{})}).views(function(a){return{get operands(){return a.placements.map(function(a){return a.operand})},get active(){return a.lastPlacement.active?a.placements.length:a.placements.findIndex(function(a){return a.active})},get activePortal(){return a.lastPlacement.active?a.placements.length:a.placements.findIndex(function(a){return a.active&&a.portal})},getTargetOrLastPlacement:function(b){return b>=0&&b<a.placements.length?a.placements[b]:a.lastPlacement}}}).actions(function(a){var b;return(b={})[e.CLEAR]=function(){a.placements.length=0},b[e.PUSH]=function(){var b=arguments;a.placements.push.apply(a.placements,Array.from({length:arguments.length},function(a,c){return{operand:b[c]}}))},b[e.POP]=function(){a.placements.pop()},b[e.REMOVE_AND_DEACTIVATE_ALL]=function(b){a[e.DEACTIVATE_ALL](),a.placements.splice(b,1)},b[e.SET_OPERAND_FLAGS]=function(b,c){var d=c.active,e=c.editing,f=a.getTargetOrLastPlacement(b);f.active=!!d,f.editing=!(!d||!e),d&&(b!==a.placements.length&&(a.lastPlacement.active=!1,a.lastPlacement.editing=!1),a.placements.forEach(function(a,c){c!==b&&(a.active=!1,a.editing=!1)}))},b[e.STOP_EDITING_AND_ACTIVATE_PREV]=function(){a[e.SET_OPERAND_FLAGS](a.active-1,{edit:!1,active:!0})},b[e.STOP_EDITING_AND_ACTIVATE_NEXT]=function(){var b=a.active+1;b>a.placements.length&&(b=0),a[e.SET_OPERAND_FLAGS](b,{edit:!1,active:!0})},b[e.DEACTIVATE_ALL]=function(){a.lastPlacement.active=!1,a.lastPlacement.editing=!1,a.placements.forEach(function(a){a.active=!1,a.editing=!1})},b[e.SPLICE]=function(b,c){for(var d=arguments.length,e=new Array(d>2?d-2:0),f=2;f<d;f++)e[f-2]=arguments[f];var g=e.map(function(a){return{operand:a}});a.placements.splice.apply(a.placements,[b,c].concat(g))},b})}var g,h=c(6),i=c.n(h),j=c(1),k=c.n(j),l=c(4),m=c.n(l),n=c(2),o=c.n(n),p=c(9),q=c.n(p),r=c(0),s=c.n(r),t=c(5),u=c.n(t),v=c(7),w=function(a,b){return a===b},x=function(a,b){var c;void 0===b&&(b=w);var d,e=[],f=!1,g=function(a,c){return b(a,e[c])};return function(){for(var b=arguments.length,h=new Array(b),i=0;i<b;i++)h[i]=arguments[i];return f&&c===this&&h.length===e.length&&h.every(g)?d:(d=a.apply(this,h),f=!0,c=this,e=h,d)}},y=c(10),z=c(11),A=c.n(z),B=u()(((g={})[A.a.smartOperand]=!0,g)),C=o.a.createElement("div",{className:B}),D={editable:s.a.bool,portal:s.a.bool,onEditingStart:s.a.func,onEditingStarted:s.a.func,onEditingEnd:s.a.func,onEditingEnded:s.a.func},E="onEditingStart";function F(a,b){return a&&"object"==typeof a&&void 0!==a.key?a.key:b}var G,H,I,J,K,L,M,N,O,P,Q,R,S=c(12),T=c.n(S),U=Object(v.observer)((I=H=function(a){function b(b){var c;return c=a.call(this,b)||this,m()(k()(k()(c)),"renderOptions",x(function(a,b,d,e,f,g,h){return{index:a,model:b,ref:d,active:e,editing:f,SmartOperand:c.SmartOperand,portalRef:g&&h}})),c.operandRef=o.a.createRef(),c.containerRef=o.a.createRef(),c.operandCallbacks={},c.scheduledInvocations=[],c.stopReactingOnEdit=void 0,c.handleClick=c.handleClick.bind(k()(k()(c))),c.handleSmartOperandReport=c.handleSmartOperandReport.bind(k()(k()(c))),c.callEditingEndCallback=c.callEditingEndCallback.bind(k()(k()(c))),c.SmartOperand=function(a){var b=function(b){return a(b),C};return b.displayName="SmartOperand",b.propTypes=D,b}(c.handleSmartOperandReport),c}i()(b,a);var c=b.prototype;return c.handleSmartOperandReport=function(a){var b=this.props.model;this.operandCallbacks=a,b.setEditable(a.editable),b.setPortal(a.portal)},c.handleClick=function(){var a=this.props,b=a.store,c=a.model,f=a.index;Object(d.applyAction)(b,{name:e.SET_OPERAND_FLAGS,args:[f,{active:!0,editing:c.editable}]}),c.editable&&this.callbackLifecycle(E)},c.isEditing=function(){var a=this.props.model;return a&&a.editing},c.callEditingEndCallback=function(){this.isEditing()||(this.stopReactingOnEdit(),this.stopReactingOnEdit=void 0,this.callbackLifecycle("onEditingEnd"))},c.callbackLifecycle=function(a){this.invokeOperandCallback(a),this.scheduleOperandCallback(a+"ed")},c.invokeOperandCallback=function(a){var b=this,c=this.operandCallbacks[a];switch("function"==typeof c&&c(),a){case E:if(this.stopReactingOnEdit)break;this.stopReactingOnEdit=Object(y.reaction)(function(){return b.isEditing()},this.callEditingEndCallback)}},c.scheduleOperandCallback=function(a){var b=this.props,c=b.model,d=b.index;if(c){var e=F(c.operand,d);this.scheduledInvocations.push({key:e,name:a})}},c.focus=function(){var a=this.operandRef.current;a.focus?a.focus():q.a.findDOMNode(a).focus()},c.componentDidUpdate=function(a,b,c){var d=this,e=this.props,f=e.model,g=e.index;f&&(this.scheduledInvocations.forEach(function(a){var b=a.key,c=a.name;b===F(f.operand,g)&&d.invokeOperandCallback(c)}),this.scheduledInvocations=[])},c.componentWillUnmount=function(){this.stopReactingOnEdit&&(this.stopReactingOnEdit(),this.stopReactingOnEdit=void 0)},c.render=function(){var a,b=this.props,c=b.style,d=b.className,e=b.store,f=b.model,g=b.index,h=b.operandRenderer,i=b.portalRef,j=u()(((a={})[T.a.placement]=!0,a[d]=void 0!==d,a)),k=h(f.operand,this.renderOptions(g,e,this.operandRef,f&&f.active,f&&f.editing,f&&f.active&&(f.editing||g===e.placements.length),i));return o.a.createElement("span",{ref:this.containerRef,style:c,className:j,onClick:this.handleClick},k)},b}(o.a.Component),m()(H,"displayName","Placement"),m()(H,"propTypes",{operandRenderer:s.a.func.isRequired,store:s.a.any,model:s.a.any,index:s.a.any,style:s.a.object,className:s.a.string,portalRef:s.a.any}),G=I))||G,V=c(13),W=c.n(V),X=Object(v.observer)((L=K=function(a){function b(b){var c;return(c=a.call(this,b)||this).suggestRef=o.a.createRef(),c}return i()(b,a),b.prototype.render=function(){var a,b=this.props,c=b.style,d=b.className,e=b.active,f=b.suggestRenderer,g=b.model,h=u()(((a={})[W.a.suggest]=!0,a[d]=void 0!==d,a)),i=f(g,{active:e,ref:this.suggestRef});return o.a.createElement("div",{className:h,style:c},i)},b}(o.a.Component),m()(K,"displayName","Suggest"),m()(K,"propTypes",{suggestRenderer:s.a.func.isRequired,model:s.a.any,active:s.a.bool,style:s.a.object,className:s.a.string}),J=L))||J,Y=c(14),Z=c.n(Y),_=c(8),$=c.n(_),aa=Object(v.observer)((O=N=function(a){function b(b){var c;return(c=a.call(this,b)||this).state={left:0,top:0,hide:!0,willAnimate:!1,animate:!1},c.handleRef=c.handleRef.bind(k()(k()(c))),c.handleWindowResize=c.handleWindowResize.bind(k()(k()(c))),c.handleWindowResizeStop=c.handleWindowResizeStop.bind(k()(k()(c))),c.repositioning=!1,c.repositionScheduled=!1,c}i()(b,a),b.getDerivedStateFromProps=function(a,b){var c=b.placementElement,d=a.model,e=a.placementRefs[d.activePortal];return!c&&e||c&&e&&c!==e?{hide:!0,willAnimate:!0,placementElement:e}:null};var c=b.prototype;return c.handleRef=function(a){this.containerRef=a,this.props.onRefRendered&&this.props.onRefRendered(a)},c.handleWindowResize=function(){var a=this.state.placementElement;if(a)return this.repositioning?void(this.repositionScheduled=!0):(this.repositioning=!0,this.reposition(a),void window.setTimeout(this.handleWindowResizeStop,50))},c.handleWindowResizeStop=function(){var a=this.state.placementElement;a&&(this.repositioning=!1,this.repositionScheduled&&this.reposition(a))},c.setTimeout=function(a,b){window.clearTimeout(this._timerId),this._timerId=window.setTimeout(a,b)},c.transition=function(a){var b=this,c=this.state,d=c.hide,e=c.willAnimate,f=c.placementElement;switch(a){case 1:f&&this.reposition(f),e&&(this.setState({willAnimate:!1,hide:!1,animate:!0}),this.setTimeout(function(){b.transition(0)},100));break;case 0:d||this.setState({animate:!1})}},c.reposition=function(a){var b=this.props.onSuggestReposition,c=a.containerRef.current;if(c){var d=c.getBoundingClientRect(),e=d.left,f=d.top+d.height;if(b){var g=b(e,f);"object"==typeof g&&(e=g.left,f=g.top)}this.left===e&&this.top===f||(this.left=e,this.top=f,this.setState({left:e,top:f}))}},c.isImmediatelyHidden=function(){return this.containerRef&&this.containerRef.classList.contains($.a.portalHidden),!0},c.immediatelySyncStateWithDOM=function(){var a=this.state.hide;a!==this.isImmediatelyHidden()&&(a?this.containerRef.classList.add($.a.portalHidden):this.containerRef.classList.remove($.a.portalHidden))},c.immediatelyHide=function(){this.containerRef&&this.containerRef.classList.add($.a.portalHidden)},c.componentDidMount=function(){window.addEventListener("resize",this.handleWindowResize),this.transition(1)},c.componentDidUpdate=function(a,b,c){this.transition(1)},c.componentWillUnmount=function(){window.removeEventListener("resize",this.handleWindowResize),window.clearTimeout(this._timerId)},c.render=function(){var a,b=this.props,c=b.style,d=b.className,e=b.model,f=this.state,g=f.left,h=f.top,i=f.hide,j=f.animate;e.activePortal;var k=u()(((a={})[$.a.portal]=!0,a[$.a.portalHidden]=i,a[$.a.portalAnimate]=j,a[d]=void 0!==d,a));return o.a.createElement("div",{ref:this.handleRef,className:k,style:Z()({left:g,top:h},c)})},b}(o.a.Component),m()(N,"displayName","Portal"),m()(N,"propTypes",{placementElement:s.a.any,style:s.a.object,className:s.a.string,onRefRendered:s.a.func,onSuggestReposition:s.a.func}),M=O))||M,ba=c(15),ca=c.n(ba),da=Object(v.observer)((R=Q=function(a){function b(b){var c;return c=a.call(this,b)||this,m()(k()(k()(c)),"placementRefHandlers",x(function(a){return Array.from({length:a+1},function(a,b){return c.handlePlacementRef.bind(k()(k()(c)),b)})})),c.state={},c.handleKeyDown=c.handleKeyDown.bind(k()(k()(c))),c.handleFocus=c.handleFocus.bind(k()(k()(c))),c.handleBlur=c.handleBlur.bind(k()(k()(c))),c.suggestComposedRenderer=c.suggestComposedRenderer.bind(k()(k()(c))),c.handlePortalRefRendered=c.handlePortalRefRendered.bind(k()(k()(c))),c.containerRef=o.a.createRef(),c.portalRef=o.a.createRef(),c.placementRefs={},c}i()(b,a);var c=b.prototype;return c.setupFocusAfterMove=function(a){var b=a.fromInput,c=this.props.model;c.lastPlacement.active?(Object(d.applyAction)(c,{name:e.SET_OPERAND_FLAGS,args:[c.active,{active:!0,editing:!0}]}),this.callbackLifecycle(c.active,E)):b&&this.containerRef.current.focus()},c.moveActiveOperandId=function(a,b){var c=b.cursor,f=b.fromInput,g=b.direction,h=this.props.model;(!f||f&&("prev"===g&&"start"===c||"next"===g&&"end"===c))&&(a.preventDefault(),Object(d.applyAction)(h,{name:"next"===g?e.STOP_EDITING_AND_ACTIVATE_NEXT:e.STOP_EDITING_AND_ACTIVATE_PREV}),this.setupFocusAfterMove({fromInput:f}))},c.invokeOperandCallback=function(a,b){var c=this.placementRefs[a];c&&c.invokeOperandCallback(b)},c.scheduleOperandCallback=function(a,b){var c=this.placementRefs[a];c&&c.scheduleOperandCallback(b)},c.callbackLifecycle=function(a,b){this.invokeOperandCallback(a,b),this.scheduleOperandCallback(a,b+"ed")},c.handleBackspace=function(a){var b=a.cursor,c=a.fromInput,f=this.props.model;c&&"start"===b&&f.active===f.placements.length&&Object(d.applyAction)(f,{name:e.POP})},c.handleEnter=function(a){var b=a.cursor,c=a.fromInput,f=this.props.model,g=f.getTargetOrLastPlacement(f.active);(!c||c&&"end"===b)&&(g.editing?Object(d.applyAction)(f,{name:e.STOP_EDITING_AND_ACTIVATE_NEXT}):(Object(d.applyAction)(f,{name:e.SET_OPERAND_FLAGS,args:[f.active,{active:!0,editing:g.editable}]}),g.editable&&this.callbackLifecycle(f.active,E)),this.setupFocusAfterMove({fromInput:c}))},c.handleArrowLeft=function(a,b){var c=b.cursor,d=b.fromInput;this.moveActiveOperandId(a,{cursor:c,fromInput:d,direction:"prev"})},c.handleArrowRight=function(a,b){var c=b.cursor,d=b.fromInput;this.moveActiveOperandId(a,{cursor:c,fromInput:d,direction:"next"})},c.handleKeyDown=function(a){var b=a.target,c="INPUT"===b.nodeName,d=0===b.selectionStart&&b.selectionStart===b.selectionEnd,e=b.selectionStart===(b.value||"").length&&b.selectionStart===b.selectionEnd,f="none";d?f="start":e&&(f="end");var g={cursor:f,fromInput:c};switch(a.keyCode){case 8:return this.handleBackspace(g);case 13:return this.handleEnter(g);case 37:return this.handleArrowLeft(a,g);case 39:return this.handleArrowRight(a,g)}},c.hasOwnFocus=function(){if(!this.props&&!this.containerRef||!this.containerRef.current)return!1;var a=document.activeElement,b=this.containerRef.current,c=this.state.portalRef;return a&&a!==window&&(a===b||b.contains(a)||c&&c.contains(a))},c.shouldBlur=function(){if(!this.props&&!this.containerRef||!this.containerRef.current)return!1;var a=document.activeElement,b=this.containerRef.current,c=this.state.portalRef;return!(a&&a!==window&&(b===a||b.contains(a)||c&&c.contains(a)))},c.handleFocus=function(){var a=this.portalRef.current;a&&a.immediatelySyncStateWithDOM()},c.handleBlur=function(){var a=this,b=this.portalRef.current;b&&b.immediatelyHide(),window.setTimeout(function(){if(a.shouldBlur()){var b=a.props.onBlur;a.props.model[e.DEACTIVATE_ALL](),b&&b()}},0)},c.focus=function(){var a=this.props.model,b=a.active,c=a.operands,d=this.placementRefs[b]||this.placementRefs[c.length];d&&d.focus()},c.blur=function(){if(this.hasOwnFocus()){var a=this.props.onBlur;this.props.model[e.DEACTIVATE_ALL](),a&&a(),document.activeElement&&document.activeElement.blur()}},c.handlePlacementRef=function(a,b){this.placementRefs[a]=b},c.handlePortalRefRendered=function(a){this.setState({portalRef:a})},c.suggestComposedRenderer=function(a,b){var c=this.props,d=c.model,e=c.inputRenderer,f=c.suggestRenderer,g=c.onSuggestShow,h=b.portalRef;return this.inputRef=b.ref,h&&"function"==typeof g&&g(),o.a.createElement(o.a.Fragment,null,e(a,b),h&&q.a.createPortal(o.a.createElement(X,{model:d,active:d.lastPlacement.active,suggestRenderer:f}),h))},c.render=function(){var a,b=this.props,c=b.className,d=b.style,e=b.placementClassName,f=b.placementStyle,g=b.operandRenderer,h=b.model,i=b.portal,j=b.onSuggestReposition,k=this.state.portalRef,l=h.placements,m=this.placementRefHandlers(l.length),n=u()(((a={})[ca.a.smartInput]=!0,a[c]=void 0!==c,a));return o.a.createElement("span",{ref:this.containerRef,style:d,className:n,onKeyDown:this.handleKeyDown,onFocus:this.handleFocus,onBlur:this.handleBlur,tabIndex:0},l.map(function(a,b){return o.a.createElement(U,{ref:m[b],key:F(a.operand,b),model:a,operand:a,portalRef:k,index:b,store:h,operandRenderer:g,style:f,className:e})}),o.a.createElement(U,{ref:m[l.length],model:h.lastPlacement,store:h,index:l.length,portalRef:k,operandRenderer:this.suggestComposedRenderer}),i&&q.a.createPortal(o.a.createElement(aa,{ref:this.portalRef,model:h,placementRefs:this.placementRefs,onRefRendered:this.handlePortalRefRendered,onSuggestReposition:j}),i))},b}(o.a.Component),m()(Q,"displayName","SmartInput"),m()(Q,"propTypes",{model:s.a.any.isRequired,operandRenderer:s.a.func.isRequired,inputRenderer:s.a.func.isRequired,suggestRenderer:s.a.func.isRequired,style:s.a.object,className:s.a.string,placementStyle:s.a.object,placementClassName:s.a.string,portal:s.a.any,onFocus:s.a.func,onBlur:s.a.func,onSuggestShow:s.a.func,onSuggestReposition:s.a.func}),P=R))||P;c.d(b,"createModel",function(){return f}),c.d(b,"SmartInputActions",function(){return e}),c.d(b,"SmartInput",function(){return da})}]))},8556:function(a,b){"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.Tag=void 0,function(a){a.Core="core",a.Global="gl",a.Self="self",a.Async="async",a.Ignore="ign",a.Known="known",a.API="api",a.Shared="shr",a.Ext="ext",a.ThirdParty="3rd",a.RB="rb",a.Unknown="unk"}(b.Tag||(b.Tag={}))},2204:function(a,b,c){"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.coreLoggerHMR=b.coreLoggerDispatchKnownError=b.coreLoggerDispatchAPIError=b.coreLoggerDispatchIgnoredError=b.coreLoggerDispatchSelfError=b.coreLoggerDispatchReactError=b.coreLoggerDispatchError=b.getCoreLogger=b.Tag=void 0;var d=c(8556);Object.defineProperty(b,"Tag",{enumerable:!0,get:function(){return d.Tag}});b.getCoreLogger=function(){return"undefined"!=typeof coreLogger?coreLogger:void 0};b.coreLoggerDispatchError=function(a,c,d){var e;null===(e=(0,b.getCoreLogger)())||void 0===e||e.dispatchError(a,c,d)};b.coreLoggerDispatchReactError=function(a,c,d){var e;null===(e=(0,b.getCoreLogger)())||void 0===e||e.dispatchReactError(a,c,d)};b.coreLoggerDispatchSelfError=function(a,c,e,f){(0,b.coreLoggerDispatchError)(c,e,{category:a,tag:d.Tag.Self,log:f})};b.coreLoggerDispatchIgnoredError=function(a,c,e,f){(0,b.coreLoggerDispatchError)(c,e,{category:a,tag:d.Tag.Ignore,log:f})};b.coreLoggerDispatchAPIError=function(a,c,e,f){(0,b.coreLoggerDispatchError)(c,e,{category:a,tag:d.Tag.API,log:f})};b.coreLoggerDispatchKnownError=function(a,c,e,f){(0,b.coreLoggerDispatchError)(c,e,{category:a,tag:d.Tag.Known,log:f})};b.coreLoggerHMR=function(a,c){var d=(0,b.getCoreLogger)();if(d){var e=d.errors.rules,f=d.errors.opts.errors,g=a.priority||[];if(e.set("clear"),f&&f.rules)e.set(f.rules),g.push.apply(g,[].concat(f.priority||Object.keys(f.rules)));if(c)e.set(c.rules),g.push.apply(g,c.priority||[]);e.set(a.rules),e.priority(g);try{d.pkg.v=process.env.PACKAGE_VERSION,localStorage.setItem(process.env.LOGGER_LS_PRESET_VER_KEY,process.env.PACKAGE_VERSION)}catch(a){}}}},5881:function(a,b,c){"use strict";var d=Object.create?function(a,b,c,d){if(void 0===d)d=c;var e=Object.getOwnPropertyDescriptor(b,c);if(!e||("get"in e?!b.__esModule:e.writable||e.configurable))e={enumerable:!0,get:function(){return b[c]}};Object.defineProperty(a,d,e)}:function(a,b,c,d){if(void 0===d)d=c;a[d]=b[c]},e=function(a,b){for(var c in a)if("default"!==c&&!Object.prototype.hasOwnProperty.call(b,c))d(b,a,c)};Object.defineProperty(b,"__esModule",{value:!0}),b.createScopeEntry=b.createLogEntry=b.createLogger=b.octoLogger=b.logger=void 0,e(c(2204),b);var f=c(1862);Object.defineProperty(b,"logger",{enumerable:!0,get:function(){return f.logger}}),Object.defineProperty(b,"octoLogger",{enumerable:!0,get:function(){return f.octoLogger}}),Object.defineProperty(b,"createLogger",{enumerable:!0,get:function(){return f.createLogger}}),Object.defineProperty(b,"createLogEntry",{enumerable:!0,get:function(){return f.createLogEntry}}),Object.defineProperty(b,"createScopeEntry",{enumerable:!0,get:function(){return f.createScopeEntry}})},6947:function(a,b,c){"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.browserFormat=b.resetFormatStyle=b.nodeFromat=b.createFormat=void 0;var d=c(6117),e=/:([^;]+)/g;function f(a,b){return function(c){return b(c,{base:a.level[c.level]||"",label:a.label[c.level]||""})}}b.createFormat=f,b.nodeFromat=f({level:{log:"[0m",info:"[34m",done:"[34m",warn:"[33m",error:"[31m",verbose:"[35m"},label:{log:"[4m",info:"[4m",done:"[4m",error:"[4m",warn:"[4m",verbose:"[4m"}},function(a,b){var c=[];if(null!=a.badge)c.push(a.badge);if(null!=a.label)c.push("".concat(b.base).concat(b.label).concat(a.label,"[0m"));if(null!=a.args)c.push.apply(c,a.args);if(null!==a.meta)c.push("".concat(a.meta.file,":").concat(a.meta.line,":").concat(a.meta.col));return c.push("[0m"),c});var g="text-decoration: underline; font-weight: bold;";function h(a){return a.replace(e,": inherit")}b.resetFormatStyle=h,b.browserFormat=f({level:{log:"color: #333;",info:"color: dodgerblue;",done:"color: #1aaa55;",warn:"color: orange;",error:"color: red;",verbose:"color: magenta;"},label:{log:g,info:g,done:g,warn:g,error:g,verbose:g}},function(a,b){var c=[],e=[],f=a.args;if(a.ts>0)e.push("%c[%s] "),c.push(b.base,(0,d.timeFormat)(a.ts));if(null!=a.badge)e.push("%s"),c.push(a.badge);if(null!=a.label)e.push("%c%s%c "),c.push(b.label+b.base,a.label,h(b.label));if(null!=f){var g=f.length;if(g>0){e.push("%c"),c.push(b.base);for(var i=0;i<g;i++){var j=f[i];e.push("".concat("string"==typeof j?"%s":"%o"," ")),c.push(j)}}}if(null!=a.meta)e.push("%s"),c.push("".concat(a.meta.file,":").concat(a.meta.line,":").concat(a.meta.col));return c.unshift(e.join("")),c})},1862:function(a,b,c){"use strict";var d=function(){return(d=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++)for(var e in b=arguments[c])if(Object.prototype.hasOwnProperty.call(b,e))a[e]=b[e];return a}).apply(this,arguments)};Object.defineProperty(b,"__esModule",{value:!0}),b.octoLogger=b.logger=b.createLogger=b.revertLoggerContext=b.switchLoggerContext=b.getLoggerContext=b.createScopeEntry=b.createLogEntry=b.isLogEntry=void 0;var e=c(7111),f=c(6117),g=c(5302),h=new Date,i=0;function j(a){return a&&3===a.length&&a[0]&&a[1]>0&&a[2]>0}function k(a){return{file:a[0],line:a[1],col:a[2]}}function l(a){return a&&void 0!==a.type&&void 0!==a.level}function m(a,b,c,d,e){return Object.defineProperty({cid:++i,ts:0,type:a,level:b,badge:c,label:d,args:e,meta:null,entries:[]},"parent",{writable:!0,enumerable:!1,value:null})}function n(a,b,c,d){return m(g.ENTRY,a,b,c,d)}function o(a,b,c,d){return m(g.SCOPE,a,b,c,d)}b.isLogEntry=l,b.createLogEntry=n,b.createScopeEntry=o;var p=null;function q(a,b){var c=function(b){return{add:function(){for(var c=[],d=0;d<arguments.length;d++)c[d]=arguments[d];var e,g=j(c[0])?k(c.shift()):null;if(l(c[0]))e=c[0];else e=n("log",null,null,c);if(null!==g)e.meta=g;if(a.time)e.ts=(0,f.now)();var h=b.parent;if(h){var i=(e.parent=h).entries.push(e);if(i>a.storeLast)h.entries.splice(0,1)}if(!0!==a.silent&&a.output)a.output(e);return e}}},e=o("info","🚧","#root",[{time:h,created:new Date}]),i={logger:null,parent:e},m=c(i),q=b({createEntry:n,logger:m});if(null==a.silent&&"undefined"!=typeof location)a.silent=!/^(about:|file:|https?:\/\/localhost\/)/.test("".concat(location));if(null==a.time)a.time=!0;if(null==a.storeLast)a.storeLast=1e3;return i.logger=m,["add","clear","scope","setup","entries","last","priny","m"].forEach(function(a){if(q.hasOwnProperty(a))throw new Error('[octoLogger] "'.concat(a,'" is a reserved identifier'))}),q.print=function(){if(function b(c){c.printed=!1,c.entries.forEach(function(c){if(c.printed=!1,a.output)a.output(c);if(c.type===g.SCOPE)b(c)})}(e),a.output)a.output(null)},q.add=function(){for(var a=[],b=0;b<arguments.length;b++)a[b]=arguments[b];return m.add.apply(m,a)},q.clear=function(){return e.entries.splice(0,e.entries.length)},q.setup=function(b){a=d(d({},a),b)},q.entries=function(){return e.entries},q.last=function(){return e.entries[e.entries.length-1]||null},q.scope=function d(e,f,g){var h=arguments,m=null;if(0===h.length)return this._scopeEntry;if(j(h[0]))m=k(h[0]),e=h[1],f=h[2],g=h[3];var q=h.length>2;if(null==g&&"function"==typeof f)g=f,q=!1;var r=[e];if(q)r.push(f);var s=l(e)?e:o("info",null,null,r);s.meta=m,i.logger.add(s);var t=c({parent:s,logger:null}),u=b({createEntry:n,logger:t});if(u.add=function(){return t.add.apply(t,arguments)},u.scope=d,u._scopeEntry=s,"function"==typeof g){var v=p,w=i.parent,x=i.logger;p={entry:s,scope:u,logger:t,options:a,scopeContext:i},i.parent=s,g(u),p=v,i.parent=w,i.logger=x}return u},q}b.getLoggerContext=function(){return p},b.switchLoggerContext=function(a,b){if(null===a)return p=null,null;var c=p,d=a.scope,e=a.scopeContext,f=null;if(p=a,a.scope=b,a.scopeContext)f=a.scopeContext.parent,a.scopeContext.parent=b.scope();return{activeContext:c,ctx:a,scope:d,scopeContext:e,scopeContextParent:f}},b.revertLoggerContext=function(a){var b=a.ctx,c=a.scopeContext;if(b.scope=a.scope,b.scopeContext=c,c)c.parent=a.scopeContextParent;p=a.activeContext},b.createLogger=q;var r={log:null,info:"❕ ",done:"✅ ",warn:"⚠️ ",error:"🛑 ",verbose:"🔎 "};b.logger=q({output:(0,e.universalOutput)()},function(a){var b=a.logger;return Object.keys(r).reduce(function(a,c){return a[c]=function(){for(var a=[],d=0;d<arguments.length;d++)a[d]=arguments[d];b.add(n(c,r[c]||null,null,a))},a},{})}),b.octoLogger=b.logger},5302:function(a,b){"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.SCOPE=b.ENTRY=void 0,b.ENTRY=1,b.SCOPE=2},7111:function(a,b,c){"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.universalOutput=b.browserOutput=b.nodeOutput=b.createOutput=void 0;var d=c(6947),e=c(5302);b.createOutput=function(a){var b=a.out,c=a.format,d=b.log,f={},g=[];return function a(h,i){if(null===h)return g.forEach(function(){b.groupEnd()}),void(g.length=0);var j=h.parent,k=g.length;if(!i||!h.printed){if(k>0){for(var l=k;l--&&g[l]!==j;)g[l].printed=!0,b.groupEnd();g.length=l+1}if(h.type===e.SCOPE)g.push(h),b.group.apply(b,c(h));else{if(!i&&j&&j.printed&&"#root"!==j.label)return void(f[j.cid]||(f[j.cid]=setTimeout(function(){g.forEach(function(){b.groupEnd()}),g.length=0;var d=[],e=j;do{d.unshift(e),e=e.parent}while(e&&"#root"!==e.label);d.forEach(function(a){b.group.apply(b,c(a))}),j.entries.forEach(function(b){a(b,!0)}),d.forEach(function(){b.groupEnd()})},0)));h.printed=!0,d.apply(b,c(h))}}}};b.nodeOutput=function(a){if(void 0===a)a={};return(0,b.createOutput)({out:a.out||console,format:a.format||d.nodeFromat})};b.browserOutput=function(a){if(void 0===a)a={};return(0,b.createOutput)({out:a.out||console,format:a.format||d.browserFormat})},b.universalOutput="undefined"==typeof self?b.nodeOutput:b.browserOutput},6117:function(a,b){"use strict";function c(a,b){var c=a<10?"0".concat(a):a;if(b>1&&a<100)c="0".concat(c);return c}Object.defineProperty(b,"__esModule",{value:!0}),b.timeFormat=b.zeroPad=b.now=void 0,b.now="undefined"!=typeof performance&&performance.now?function(){return performance.now()}:Date.now,b.zeroPad=c,b.timeFormat=function(a){var b=a/1e3;return"".concat(c(b/60%24|0),":").concat(c(b%60|0),".").concat(c(a%1e3|0,2))}},4184:function(a,b){var c;!function(){"use strict";var d={}.hasOwnProperty;function e(){for(var a=[],b=0;b<arguments.length;b++){var c=arguments[b];if(c){var f=typeof c;if("string"===f||"number"===f)a.push(c);else if(Array.isArray(c)&&c.length){var g=e.apply(null,c);if(g)a.push(g)}else if("object"===f)for(var h in c)if(d.call(c,h)&&c[h])a.push(h)}}return a.join(" ")}if(a.exports)e.default=e,a.exports=e;else if(1)void 0===(c=function(){return e}.apply(b,[]))||(a.exports=c)}()},4063:function(a){"use strict";a.exports=function a(b,c){if(b===c)return!0;if(b&&c&&"object"==typeof b&&"object"==typeof c){if(b.constructor!==c.constructor)return!1;var d,e,f;if(Array.isArray(b)){if((d=b.length)!=c.length)return!1;for(e=d;0!=e--;)if(!a(b[e],c[e]))return!1;return!0}if(b.constructor===RegExp)return b.source===c.source&&b.flags===c.flags;if(b.valueOf!==Object.prototype.valueOf)return b.valueOf()===c.valueOf();if(b.toString!==Object.prototype.toString)return b.toString()===c.toString();if((d=(f=Object.keys(b)).length)!==Object.keys(c).length)return!1;for(e=d;0!=e--;)if(!Object.prototype.hasOwnProperty.call(c,f[e]))return!1;for(e=d;0!=e--;){var g=f[e];if(!a(b[g],c[g]))return!1}return!0}return b!=b&&c!=c}},8252:function(a){"use strict";a.exports=function a(b,c){if(b===c)return!0;if(b&&c&&"object"==typeof b&&"object"==typeof c){if(b.constructor!==c.constructor)return!1;var d,e,f;if(Array.isArray(b)){if((d=b.length)!=c.length)return!1;for(e=d;0!=e--;)if(!a(b[e],c[e]))return!1;return!0}if(b.constructor===RegExp)return b.source===c.source&&b.flags===c.flags;if(b.valueOf!==Object.prototype.valueOf)return b.valueOf()===c.valueOf();if(b.toString!==Object.prototype.toString)return b.toString()===c.toString();if((d=(f=Object.keys(b)).length)!==Object.keys(c).length)return!1;for(e=d;0!=e--;)if(!Object.prototype.hasOwnProperty.call(c,f[e]))return!1;for(e=d;0!=e--;){var g=f[e];if("_owner"!==g||!b.$$typeof)if(!a(b[g],c[g]))return!1}return!0}return b!=b&&c!=c}},1793:function(a,b,c){!function(a){"use strict";function b(a,b,c){var d,e;if("m"===c)return b?"минута":"минуту";else return a+" "+(d=+a,e={ss:b?"секунда_секунды_секунд":"секунду_секунды_секунд",mm:b?"минута_минуты_минут":"минуту_минуты_минут",hh:"час_часа_часов",dd:"день_дня_дней",MM:"месяц_месяца_месяцев",yy:"год_года_лет"}[c].split("_"),d%10==1&&d%100!=11?e[0]:d%10>=2&&d%10<=4&&(d%100<10||d%100>=20)?e[1]:e[2])}var c=[/^янв/i,/^фев/i,/^мар/i,/^апр/i,/^ма[йя]/i,/^июн/i,/^июл/i,/^авг/i,/^сен/i,/^окт/i,/^ноя/i,/^дек/i];a.defineLocale("ru",{months:{format:"января_февраля_марта_апреля_мая_июня_июля_августа_сентября_октября_ноября_декабря".split("_"),standalone:"январь_февраль_март_апрель_май_июнь_июль_август_сентябрь_октябрь_ноябрь_декабрь".split("_")},monthsShort:{format:"янв._февр._мар._апр._мая_июня_июля_авг._сент._окт._нояб._дек.".split("_"),standalone:"янв._февр._март_апр._май_июнь_июль_авг._сент._окт._нояб._дек.".split("_")},weekdays:{standalone:"воскресенье_понедельник_вторник_среда_четверг_пятница_суббота".split("_"),format:"воскресенье_понедельник_вторник_среду_четверг_пятницу_субботу".split("_"),isFormat:/\[ ?[Вв] ?(?:прошлую|следующую|эту)? ?\] ?dddd/},weekdaysShort:"вс_пн_вт_ср_чт_пт_сб".split("_"),weekdaysMin:"вс_пн_вт_ср_чт_пт_сб".split("_"),monthsParse:c,longMonthsParse:c,shortMonthsParse:c,monthsRegex:/^(январ[ья]|янв\.?|феврал[ья]|февр?\.?|марта?|мар\.?|апрел[ья]|апр\.?|ма[йя]|июн[ья]|июн\.?|июл[ья]|июл\.?|августа?|авг\.?|сентябр[ья]|сент?\.?|октябр[ья]|окт\.?|ноябр[ья]|нояб?\.?|декабр[ья]|дек\.?)/i,monthsShortRegex:/^(январ[ья]|янв\.?|феврал[ья]|февр?\.?|марта?|мар\.?|апрел[ья]|апр\.?|ма[йя]|июн[ья]|июн\.?|июл[ья]|июл\.?|августа?|авг\.?|сентябр[ья]|сент?\.?|октябр[ья]|окт\.?|ноябр[ья]|нояб?\.?|декабр[ья]|дек\.?)/i,monthsStrictRegex:/^(январ[яь]|феврал[яь]|марта?|апрел[яь]|ма[яй]|июн[яь]|июл[яь]|августа?|сентябр[яь]|октябр[яь]|ноябр[яь]|декабр[яь])/i,monthsShortStrictRegex:/^(янв\.|февр?\.|мар[т.]|апр\.|ма[яй]|июн[ья.]|июл[ья.]|авг\.|сент?\.|окт\.|нояб?\.|дек\.)/i,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY г.",LLL:"D MMMM YYYY г., H:mm",LLLL:"dddd, D MMMM YYYY г., H:mm"},calendar:{sameDay:"[Сегодня в] LT",nextDay:"[Завтра в] LT",lastDay:"[Вчера в] LT",nextWeek:function(a){if(a.week()!==this.week())switch(this.day()){case 0:return"[В следующее] dddd [в] LT";case 1:case 2:case 4:return"[В следующий] dddd [в] LT";case 3:case 5:case 6:return"[В следующую] dddd [в] LT"}else if(2===this.day())return"[Во] dddd [в] LT";else return"[В] dddd [в] LT"},lastWeek:function(a){if(a.week()!==this.week())switch(this.day()){case 0:return"[В прошлое] dddd [в] LT";case 1:case 2:case 4:return"[В прошлый] dddd [в] LT";case 3:case 5:case 6:return"[В прошлую] dddd [в] LT"}else if(2===this.day())return"[Во] dddd [в] LT";else return"[В] dddd [в] LT"},sameElse:"L"},relativeTime:{future:"через %s",past:"%s назад",s:"несколько секунд",ss:b,m:b,mm:b,h:"час",hh:b,d:"день",dd:b,M:"месяц",MM:b,y:"год",yy:b},meridiemParse:/ночи|утра|дня|вечера/i,isPM:function(a){return/^(дня|вечера)$/.test(a)},meridiem:function(a,b,c){if(a<4)return"ночи";else if(a<12)return"утра";else if(a<17)return"дня";else return"вечера"},dayOfMonthOrdinalParse:/\d{1,2}-(й|го|я)/,ordinal:function(a,b){switch(b){case"M":case"d":case"DDD":return a+"-й";case"D":return a+"-го";case"w":case"W":return a+"-я";default:return a}},week:{dow:1,doy:4}})}(c(381))},8293:function(a,b,c){var d={"./ru":1793,"./ru.js":1793};function e(a){var b=f(a);return c(b)}function f(a){if(!c.o(d,a)){var b=new Error("Cannot find module '"+a+"'");throw b.code="MODULE_NOT_FOUND",b}return d[a]}e.keys=function(){return Object.keys(d)},e.resolve=f,a.exports=e,e.id=8293},381:function(a,b,c){(a=c.nmd(a)).exports=function(){"use strict";var b,d;function e(){return b.apply(null,arguments)}function f(a){return a instanceof Array||"[object Array]"===Object.prototype.toString.call(a)}function g(a){return null!=a&&"[object Object]"===Object.prototype.toString.call(a)}function h(a){return void 0===a}function i(a){return"number"==typeof a||"[object Number]"===Object.prototype.toString.call(a)}function j(a){return a instanceof Date||"[object Date]"===Object.prototype.toString.call(a)}function k(a,b){var c,d=[];for(c=0;c<a.length;++c)d.push(b(a[c],c));return d}function l(a,b){return Object.prototype.hasOwnProperty.call(a,b)}function m(a,b){for(var c in b)if(l(b,c))a[c]=b[c];if(l(b,"toString"))a.toString=b.toString;if(l(b,"valueOf"))a.valueOf=b.valueOf;return a}function n(a,b,c,d){return yb(a,b,c,d,!0).utc()}function o(a){if(null==a._pf)a._pf={empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],meridiem:null,rfc2822:!1,weekdayMismatch:!1};return a._pf}if(Array.prototype.some)d=Array.prototype.some;else d=function(a){for(var b=Object(this),c=b.length>>>0,d=0;d<c;d++)if(d in b&&a.call(this,b[d],d,b))return!0;return!1};function p(a){if(null==a._isValid){var b=o(a),c=d.call(b.parsedDateParts,function(a){return null!=a}),e=!isNaN(a._d.getTime())&&b.overflow<0&&!b.empty&&!b.invalidMonth&&!b.invalidWeekday&&!b.weekdayMismatch&&!b.nullInput&&!b.invalidFormat&&!b.userInvalidated&&(!b.meridiem||b.meridiem&&c);if(a._strict)e=e&&0===b.charsLeftOver&&0===b.unusedTokens.length&&void 0===b.bigHour;if(null==Object.isFrozen||!Object.isFrozen(a))a._isValid=e;else return e}return a._isValid}function q(a){var b=n(NaN);if(null!=a)m(o(b),a);else o(b).userInvalidated=!0;return b}var r=e.momentProperties=[];function s(a,b){var c,d,e;if(!h(b._isAMomentObject))a._isAMomentObject=b._isAMomentObject;if(!h(b._i))a._i=b._i;if(!h(b._f))a._f=b._f;if(!h(b._l))a._l=b._l;if(!h(b._strict))a._strict=b._strict;if(!h(b._tzm))a._tzm=b._tzm;if(!h(b._isUTC))a._isUTC=b._isUTC;if(!h(b._offset))a._offset=b._offset;if(!h(b._pf))a._pf=o(b);if(!h(b._locale))a._locale=b._locale;if(r.length>0)for(c=0;c<r.length;c++)if(!h(e=b[d=r[c]]))a[d]=e;return a}var t=!1;function u(a){if(s(this,a),this._d=new Date(null!=a._d?a._d.getTime():NaN),!this.isValid())this._d=new Date(NaN);if(!1===t)t=!0,e.updateOffset(this),t=!1}function v(a){return a instanceof u||null!=a&&null!=a._isAMomentObject}function w(a){if(a<0)return Math.ceil(a)||0;else return Math.floor(a)}function x(a){var b=+a,c=0;if(0!==b&&isFinite(b))c=w(b);return c}function y(a,b,c){var d,e=Math.min(a.length,b.length),f=Math.abs(a.length-b.length),g=0;for(d=0;d<e;d++)if(c&&a[d]!==b[d]||!c&&x(a[d])!==x(b[d]))g++;return g+f}function z(a){if(!1===e.suppressDeprecationWarnings&&"undefined"!=typeof console&&console.warn)console.warn("Deprecation warning: "+a)}function A(a,b){var c=!0;return m(function(){if(null!=e.deprecationHandler)e.deprecationHandler(null,a);if(c){for(var d,f=[],g=0;g<arguments.length;g++){if(d="","object"==typeof arguments[g]){for(var h in d+="\n["+g+"] ",arguments[0])d+=h+": "+arguments[0][h]+", ";d=d.slice(0,-2)}else d=arguments[g];f.push(d)}z(a+"\nArguments: "+Array.prototype.slice.call(f).join("")+"\n"+(new Error).stack),c=!1}return b.apply(this,arguments)},b)}var B,C={};function D(a,b){if(null!=e.deprecationHandler)e.deprecationHandler(a,b);if(!C[a])z(b),C[a]=!0}function E(a){return a instanceof Function||"[object Function]"===Object.prototype.toString.call(a)}function F(a,b){var c,d=m({},a);for(c in b)if(l(b,c))if(g(a[c])&&g(b[c]))d[c]={},m(d[c],a[c]),m(d[c],b[c]);else if(null!=b[c])d[c]=b[c];else delete d[c];for(c in a)if(l(a,c)&&!l(b,c)&&g(a[c]))d[c]=m({},d[c]);return d}function G(a){if(null!=a)this.set(a)}if(e.suppressDeprecationWarnings=!1,e.deprecationHandler=null,Object.keys)B=Object.keys;else B=function(a){var b,c=[];for(b in a)if(l(a,b))c.push(b);return c};var H={};function I(a,b){var c=a.toLowerCase();H[c]=H[c+"s"]=H[b]=a}function J(a){return"string"==typeof a?H[a]||H[a.toLowerCase()]:void 0}function K(a){var b,c,d={};for(c in a)if(l(a,c))if(b=J(c))d[b]=a[c];return d}var L={};function M(a,b){L[a]=b}function N(a,b,c){var d=""+Math.abs(a),e=b-d.length;return(a>=0?c?"+":"":"-")+Math.pow(10,Math.max(0,e)).toString().substr(1)+d}var O=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,P=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,Q={},R={};function S(a,b,c,d){var e=d;if("string"==typeof d)e=function(){return this[d]()};if(a)R[a]=e;if(b)R[b[0]]=function(){return N(e.apply(this,arguments),b[1],b[2])};if(c)R[c]=function(){return this.localeData().ordinal(e.apply(this,arguments),a)}}function T(a){if(a.match(/\[[\s\S]/))return a.replace(/^\[|\]$/g,"");else return a.replace(/\\/g,"")}function U(a,b){if(!a.isValid())return a.localeData().invalidDate();else return b=V(b,a.localeData()),Q[b]=Q[b]||function(a){var b,c,d=a.match(O);for(b=0,c=d.length;b<c;b++)if(R[d[b]])d[b]=R[d[b]];else d[b]=T(d[b]);return function(b){var e,f="";for(e=0;e<c;e++)f+=E(d[e])?d[e].call(b,a):d[e];return f}}(b),Q[b](a)}function V(a,b){var c=5;function d(a){return b.longDateFormat(a)||a}for(P.lastIndex=0;c>=0&&P.test(a);)a=a.replace(P,d),P.lastIndex=0,c-=1;return a}var W=/\d/,X=/\d\d/,Y=/\d{3}/,Z=/\d{4}/,_=/[+-]?\d{6}/,$=/\d\d?/,aa=/\d\d\d\d?/,ba=/\d\d\d\d\d\d?/,ca=/\d{1,3}/,da=/\d{1,4}/,ea=/[+-]?\d{1,6}/,fa=/\d+/,ga=/[+-]?\d+/,ha=/Z|[+-]\d\d:?\d\d/gi,ia=/Z|[+-]\d\d(?::?\d\d)?/gi,ja=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i,ka={};function la(a,b,c){ka[a]=E(b)?b:function(a,d){return a&&c?c:b}}function ma(a,b){if(!l(ka,a))return new RegExp(na(a.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(a,b,c,d,e){return b||c||d||e})));else return ka[a](b._strict,b._locale)}function na(a){return a.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}var oa={};function pa(a,b){var c,d=b;if("string"==typeof a)a=[a];if(i(b))d=function(a,c){c[b]=x(a)};for(c=0;c<a.length;c++)oa[a[c]]=d}function qa(a,b){pa(a,function(a,c,d,e){d._w=d._w||{},b(a,d._w,d,e)})}function ra(a,b,c){if(null!=b&&l(oa,a))oa[a](b,c._a,c,a)}function sa(a){return ta(a)?366:365}function ta(a){return a%4==0&&a%100!=0||a%400==0}S("Y",0,0,function(){var a=this.year();return a<=9999?""+a:"+"+a}),S(0,["YY",2],0,function(){return this.year()%100}),S(0,["YYYY",4],0,"year"),S(0,["YYYYY",5],0,"year"),S(0,["YYYYYY",6,!0],0,"year"),I("year","y"),M("year",1),la("Y",ga),la("YY",$,X),la("YYYY",da,Z),la("YYYYY",ea,_),la("YYYYYY",ea,_),pa(["YYYYY","YYYYYY"],0),pa("YYYY",function(a,b){b[0]=2===a.length?e.parseTwoDigitYear(a):x(a)}),pa("YY",function(a,b){b[0]=e.parseTwoDigitYear(a)}),pa("Y",function(a,b){b[0]=parseInt(a,10)}),e.parseTwoDigitYear=function(a){return x(a)+(x(a)>68?1900:2e3)};var ua,va=wa("FullYear",!0);function wa(a,b){return function(c){if(null!=c)return ya(this,a,c),e.updateOffset(this,b),this;else return xa(this,a)}}function xa(a,b){return a.isValid()?a._d["get"+(a._isUTC?"UTC":"")+b]():NaN}function ya(a,b,c){if(a.isValid()&&!isNaN(c))if("FullYear"===b&&ta(a.year())&&1===a.month()&&29===a.date())a._d["set"+(a._isUTC?"UTC":"")+b](c,a.month(),za(c,a.month()));else a._d["set"+(a._isUTC?"UTC":"")+b](c)}if(Array.prototype.indexOf)ua=Array.prototype.indexOf;else ua=function(a){var b;for(b=0;b<this.length;++b)if(this[b]===a)return b;return-1};function za(a,b){if(isNaN(a)||isNaN(b))return NaN;var c,d=(b%(c=12)+c)%c;return a+=(b-d)/12,1===d?ta(a)?29:28:31-d%7%2}S("M",["MM",2],"Mo",function(){return this.month()+1}),S("MMM",0,0,function(a){return this.localeData().monthsShort(this,a)}),S("MMMM",0,0,function(a){return this.localeData().months(this,a)}),I("month","M"),M("month",8),la("M",$),la("MM",$,X),la("MMM",function(a,b){return b.monthsShortRegex(a)}),la("MMMM",function(a,b){return b.monthsRegex(a)}),pa(["M","MM"],function(a,b){b[1]=x(a)-1}),pa(["MMM","MMMM"],function(a,b,c,d){var e=c._locale.monthsParse(a,d,c._strict);if(null!=e)b[1]=e;else o(c).invalidMonth=a});var Aa=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,Ba="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),Ca="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_");function Da(a,b,c){var d,e,f,g=a.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],d=0;d<12;++d)f=n([2e3,d]),this._shortMonthsParse[d]=this.monthsShort(f,"").toLocaleLowerCase(),this._longMonthsParse[d]=this.months(f,"").toLocaleLowerCase();if(c)if("MMM"===b)return-1!==(e=ua.call(this._shortMonthsParse,g))?e:null;else return-1!==(e=ua.call(this._longMonthsParse,g))?e:null;else if("MMM"===b)if(-1!==(e=ua.call(this._shortMonthsParse,g)))return e;else return-1!==(e=ua.call(this._longMonthsParse,g))?e:null;else if(-1!==(e=ua.call(this._longMonthsParse,g)))return e;else return-1!==(e=ua.call(this._shortMonthsParse,g))?e:null}function Ea(a,b){var c;if(!a.isValid())return a;if("string"==typeof b)if(/^\d+$/.test(b))b=x(b);else if(!i(b=a.localeData().monthsParse(b)))return a;return c=Math.min(a.date(),za(a.year(),b)),a._d["set"+(a._isUTC?"UTC":"")+"Month"](b,c),a}function Fa(a){if(null!=a)return Ea(this,a),e.updateOffset(this,!0),this;else return xa(this,"Month")}var Ga=ja,Ha=ja;function Ia(){function a(a,b){return b.length-a.length}var b,c,d=[],e=[],f=[];for(b=0;b<12;b++)c=n([2e3,b]),d.push(this.monthsShort(c,"")),e.push(this.months(c,"")),f.push(this.months(c,"")),f.push(this.monthsShort(c,""));for(d.sort(a),e.sort(a),f.sort(a),b=0;b<12;b++)d[b]=na(d[b]),e[b]=na(e[b]);for(b=0;b<24;b++)f[b]=na(f[b]);this._monthsRegex=new RegExp("^("+f.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+e.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+d.join("|")+")","i")}function Ja(a,b,c,d,e,f,g){var h=new Date(a,b,c,d,e,f,g);if(a<100&&a>=0&&isFinite(h.getFullYear()))h.setFullYear(a);return h}function Ka(a){var b=new Date(Date.UTC.apply(null,arguments));if(a<100&&a>=0&&isFinite(b.getUTCFullYear()))b.setUTCFullYear(a);return b}function La(a,b,c){var d=7+b-c;return-(7+Ka(a,0,d).getUTCDay()-b)%7+d-1}function Ma(a,b,c,d,e){var f,g,h=1+7*(b-1)+(7+c-d)%7+La(a,d,e);if(h<=0)g=sa(f=a-1)+h;else if(h>sa(a))f=a+1,g=h-sa(a);else f=a,g=h;return{year:f,dayOfYear:g}}function Na(a,b,c){var d,e,f=La(a.year(),b,c),g=Math.floor((a.dayOfYear()-f-1)/7)+1;if(g<1)d=g+Oa(e=a.year()-1,b,c);else if(g>Oa(a.year(),b,c))d=g-Oa(a.year(),b,c),e=a.year()+1;else e=a.year(),d=g;return{week:d,year:e}}function Oa(a,b,c){var d=La(a,b,c),e=La(a+1,b,c);return(sa(a)-d+e)/7}S("w",["ww",2],"wo","week"),S("W",["WW",2],"Wo","isoWeek"),I("week","w"),I("isoWeek","W"),M("week",5),M("isoWeek",5),la("w",$),la("ww",$,X),la("W",$),la("WW",$,X),qa(["w","ww","W","WW"],function(a,b,c,d){b[d.substr(0,1)]=x(a)}),S("d",0,"do","day"),S("dd",0,0,function(a){return this.localeData().weekdaysMin(this,a)}),S("ddd",0,0,function(a){return this.localeData().weekdaysShort(this,a)}),S("dddd",0,0,function(a){return this.localeData().weekdays(this,a)}),S("e",0,0,"weekday"),S("E",0,0,"isoWeekday"),I("day","d"),I("weekday","e"),I("isoWeekday","E"),M("day",11),M("weekday",11),M("isoWeekday",11),la("d",$),la("e",$),la("E",$),la("dd",function(a,b){return b.weekdaysMinRegex(a)}),la("ddd",function(a,b){return b.weekdaysShortRegex(a)}),la("dddd",function(a,b){return b.weekdaysRegex(a)}),qa(["dd","ddd","dddd"],function(a,b,c,d){var e=c._locale.weekdaysParse(a,d,c._strict);if(null!=e)b.d=e;else o(c).invalidWeekday=a}),qa(["d","e","E"],function(a,b,c,d){b[d]=x(a)});var Pa="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),Qa="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),Ra="Su_Mo_Tu_We_Th_Fr_Sa".split("_");function Sa(a,b,c){var d,e,f,g=a.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],d=0;d<7;++d)f=n([2e3,1]).day(d),this._minWeekdaysParse[d]=this.weekdaysMin(f,"").toLocaleLowerCase(),this._shortWeekdaysParse[d]=this.weekdaysShort(f,"").toLocaleLowerCase(),this._weekdaysParse[d]=this.weekdays(f,"").toLocaleLowerCase();if(c)if("dddd"===b)return-1!==(e=ua.call(this._weekdaysParse,g))?e:null;else if("ddd"===b)return-1!==(e=ua.call(this._shortWeekdaysParse,g))?e:null;else return-1!==(e=ua.call(this._minWeekdaysParse,g))?e:null;else if("dddd"===b){if(-1!==(e=ua.call(this._weekdaysParse,g)))return e;if(-1!==(e=ua.call(this._shortWeekdaysParse,g)))return e;else return-1!==(e=ua.call(this._minWeekdaysParse,g))?e:null}else if("ddd"===b){if(-1!==(e=ua.call(this._shortWeekdaysParse,g)))return e;if(-1!==(e=ua.call(this._weekdaysParse,g)))return e;else return-1!==(e=ua.call(this._minWeekdaysParse,g))?e:null}else{if(-1!==(e=ua.call(this._minWeekdaysParse,g)))return e;if(-1!==(e=ua.call(this._weekdaysParse,g)))return e;else return-1!==(e=ua.call(this._shortWeekdaysParse,g))?e:null}}var Ta=ja,Ua=ja,Va=ja;function Wa(){function a(a,b){return b.length-a.length}var b,c,d,e,f,g=[],h=[],i=[],j=[];for(b=0;b<7;b++)c=n([2e3,1]).day(b),d=this.weekdaysMin(c,""),e=this.weekdaysShort(c,""),f=this.weekdays(c,""),g.push(d),h.push(e),i.push(f),j.push(d),j.push(e),j.push(f);for(g.sort(a),h.sort(a),i.sort(a),j.sort(a),b=0;b<7;b++)h[b]=na(h[b]),i[b]=na(i[b]),j[b]=na(j[b]);this._weekdaysRegex=new RegExp("^("+j.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+i.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+h.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+g.join("|")+")","i")}function Xa(){return this.hours()%12||12}function Ya(a,b){S(a,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),b)})}function Za(a,b){return b._meridiemParse}S("H",["HH",2],0,"hour"),S("h",["hh",2],0,Xa),S("k",["kk",2],0,function(){return this.hours()||24}),S("hmm",0,0,function(){return""+Xa.apply(this)+N(this.minutes(),2)}),S("hmmss",0,0,function(){return""+Xa.apply(this)+N(this.minutes(),2)+N(this.seconds(),2)}),S("Hmm",0,0,function(){return""+this.hours()+N(this.minutes(),2)}),S("Hmmss",0,0,function(){return""+this.hours()+N(this.minutes(),2)+N(this.seconds(),2)}),Ya("a",!0),Ya("A",!1),I("hour","h"),M("hour",13),la("a",Za),la("A",Za),la("H",$),la("h",$),la("k",$),la("HH",$,X),la("hh",$,X),la("kk",$,X),la("hmm",aa),la("hmmss",ba),la("Hmm",aa),la("Hmmss",ba),pa(["H","HH"],3),pa(["k","kk"],function(a,b,c){var d=x(a);b[3]=24===d?0:d}),pa(["a","A"],function(a,b,c){c._isPm=c._locale.isPM(a),c._meridiem=a}),pa(["h","hh"],function(a,b,c){b[3]=x(a),o(c).bigHour=!0}),pa("hmm",function(a,b,c){var d=a.length-2;b[3]=x(a.substr(0,d)),b[4]=x(a.substr(d)),o(c).bigHour=!0}),pa("hmmss",function(a,b,c){var d=a.length-4,e=a.length-2;b[3]=x(a.substr(0,d)),b[4]=x(a.substr(d,2)),b[5]=x(a.substr(e)),o(c).bigHour=!0}),pa("Hmm",function(a,b,c){var d=a.length-2;b[3]=x(a.substr(0,d)),b[4]=x(a.substr(d))}),pa("Hmmss",function(a,b,c){var d=a.length-4,e=a.length-2;b[3]=x(a.substr(0,d)),b[4]=x(a.substr(d,2)),b[5]=x(a.substr(e))});var $a,_a=wa("Hours",!0),ab={calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},longDateFormat:{LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},invalidDate:"Invalid date",ordinal:"%d",dayOfMonthOrdinalParse:/\d{1,2}/,relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},months:Ba,monthsShort:Ca,week:{dow:0,doy:6},weekdays:Pa,weekdaysMin:Ra,weekdaysShort:Qa,meridiemParse:/[ap]\.?m?\.?/i},bb={},cb={};function db(a){return a?a.toLowerCase().replace("_","-"):a}function eb(b){var d=null;if(!bb[b]&&a&&a.exports)try{d=$a._abbr,c(8293)("./"+b),fb(d)}catch(a){}return bb[b]}function fb(a,b){var c;if(a){if(h(b))c=hb(a);else c=gb(a,b);if(c)$a=c;else if("undefined"!=typeof console&&console.warn)console.warn("Locale "+a+" not found. Did you forget to load it?")}return $a._abbr}function gb(a,b){if(null!==b){var c,d=ab;if(b.abbr=a,null!=bb[a])D("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),d=bb[a]._config;else if(null!=b.parentLocale)if(null!=bb[b.parentLocale])d=bb[b.parentLocale]._config;else if(null!=(c=eb(b.parentLocale)))d=c._config;else{if(!cb[b.parentLocale])cb[b.parentLocale]=[];return cb[b.parentLocale].push({name:a,config:b}),null}if(bb[a]=new G(F(d,b)),cb[a])cb[a].forEach(function(a){gb(a.name,a.config)});return fb(a),bb[a]}else return delete bb[a],null}function hb(a){var b;if(a&&a._locale&&a._locale._abbr)a=a._locale._abbr;if(!a)return $a;if(!f(a)){if(b=eb(a))return b;a=[a]}return function(a){for(var b,c,d,e,f=0;f<a.length;){for(b=(e=db(a[f]).split("-")).length,c=(c=db(a[f+1]))?c.split("-"):null;b>0;){if(d=eb(e.slice(0,b).join("-")))return d;if(c&&c.length>=b&&y(e,c,!0)>=b-1)break;b--}f++}return $a}(a)}function ib(a){var b,c=a._a;if(c&&-2===o(a).overflow){if(b=c[1]<0||c[1]>11?1:c[2]<1||c[2]>za(c[0],c[1])?2:c[3]<0||c[3]>24||24===c[3]&&(0!==c[4]||0!==c[5]||0!==c[6])?3:c[4]<0||c[4]>59?4:c[5]<0||c[5]>59?5:c[6]<0||c[6]>999?6:-1,o(a)._overflowDayOfYear&&(b<0||b>2))b=2;if(o(a)._overflowWeeks&&-1===b)b=7;if(o(a)._overflowWeekday&&-1===b)b=8;o(a).overflow=b}return a}function jb(a,b,c){if(null!=a)return a;if(null!=b)return b;else return c}function kb(a){var b,c,d,f,g,h=[];if(!a._d){if(d=function(a){var b=new Date(e.now());if(a._useUTC)return[b.getUTCFullYear(),b.getUTCMonth(),b.getUTCDate()];else return[b.getFullYear(),b.getMonth(),b.getDate()]}(a),a._w&&null==a._a[2]&&null==a._a[1])!function(a){var b,c,d,e,f,g,h,i;if(null!=(b=a._w).GG||null!=b.W||null!=b.E){if(f=1,g=4,c=jb(b.GG,a._a[0],Na(zb(),1,4).year),d=jb(b.W,1),(e=jb(b.E,1))<1||e>7)i=!0}else{f=a._locale._week.dow,g=a._locale._week.doy;var j=Na(zb(),f,g);if(c=jb(b.gg,a._a[0],j.year),d=jb(b.w,j.week),null!=b.d){if((e=b.d)<0||e>6)i=!0}else if(null!=b.e){if(e=b.e+f,b.e<0||b.e>6)i=!0}else e=f}if(d<1||d>Oa(c,f,g))o(a)._overflowWeeks=!0;else if(null!=i)o(a)._overflowWeekday=!0;else h=Ma(c,d,e,f,g),a._a[0]=h.year,a._dayOfYear=h.dayOfYear}(a);if(null!=a._dayOfYear){if(g=jb(a._a[0],d[0]),a._dayOfYear>sa(g)||0===a._dayOfYear)o(a)._overflowDayOfYear=!0;c=Ka(g,0,a._dayOfYear),a._a[1]=c.getUTCMonth(),a._a[2]=c.getUTCDate()}for(b=0;b<3&&null==a._a[b];++b)a._a[b]=h[b]=d[b];for(;b<7;b++)a._a[b]=h[b]=null==a._a[b]?2===b?1:0:a._a[b];if(24===a._a[3]&&0===a._a[4]&&0===a._a[5]&&0===a._a[6])a._nextDay=!0,a._a[3]=0;if(a._d=(a._useUTC?Ka:Ja).apply(null,h),f=a._useUTC?a._d.getUTCDay():a._d.getDay(),null!=a._tzm)a._d.setUTCMinutes(a._d.getUTCMinutes()-a._tzm);if(a._nextDay)a._a[3]=24;if(a._w&&void 0!==a._w.d&&a._w.d!==f)o(a).weekdayMismatch=!0}}var lb=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,mb=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,nb=/Z|[+-]\d\d(?::?\d\d)?/,ob=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/]],pb=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],qb=/^\/?Date\((\-?\d+)/i;function rb(a){var b,c,d,e,f,g,h=a._i,i=lb.exec(h)||mb.exec(h);if(i){for(o(a).iso=!0,b=0,c=ob.length;b<c;b++)if(ob[b][1].exec(i[1])){e=ob[b][0],d=!1!==ob[b][2];break}if(null==e)return void(a._isValid=!1);if(i[3]){for(b=0,c=pb.length;b<c;b++)if(pb[b][1].exec(i[3])){f=(i[2]||" ")+pb[b][0];break}if(null==f)return void(a._isValid=!1)}if(!d&&null!=f)return void(a._isValid=!1);if(i[4])if(nb.exec(i[4]))g="Z";else return void(a._isValid=!1);a._f=e+(f||"")+(g||""),wb(a)}else a._isValid=!1}var sb=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/;function tb(a){var b=parseInt(a,10);if(b<=49)return 2e3+b;else if(b<=999)return 1900+b;return b}var ub={UT:0,GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};function vb(a){var b=sb.exec(a._i.replace(/\([^)]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim());if(b){var c=function(a,b,c,d,e,f){var g=[tb(a),Ca.indexOf(b),parseInt(c,10),parseInt(d,10),parseInt(e,10)];if(f)g.push(parseInt(f,10));return g}(b[4],b[3],b[2],b[5],b[6],b[7]);if(!function(a,b,c){if(a)if(Qa.indexOf(a)!==new Date(b[0],b[1],b[2]).getDay())return o(c).weekdayMismatch=!0,c._isValid=!1,!1;return!0}(b[1],c,a))return;a._a=c,a._tzm=function(a,b,c){if(a)return ub[a];else if(b)return 0;else{var d=parseInt(c,10),e=d%100;return(d-e)/100*60+e}}(b[8],b[9],b[10]),a._d=Ka.apply(null,a._a),a._d.setUTCMinutes(a._d.getUTCMinutes()-a._tzm),o(a).rfc2822=!0}else a._isValid=!1}function wb(a){if(a._f!==e.ISO_8601)if(a._f!==e.RFC_2822){a._a=[],o(a).empty=!0;var b,c,d,f,g,h=""+a._i,i=h.length,j=0;for(d=V(a._f,a._locale).match(O)||[],b=0;b<d.length;b++){if(f=d[b],c=(h.match(ma(f,a))||[])[0]){if((g=h.substr(0,h.indexOf(c))).length>0)o(a).unusedInput.push(g);h=h.slice(h.indexOf(c)+c.length),j+=c.length}if(R[f]){if(c)o(a).empty=!1;else o(a).unusedTokens.push(f);ra(f,c,a)}else if(a._strict&&!c)o(a).unusedTokens.push(f)}if(o(a).charsLeftOver=i-j,h.length>0)o(a).unusedInput.push(h);if(a._a[3]<=12&&!0===o(a).bigHour&&a._a[3]>0)o(a).bigHour=void 0;o(a).parsedDateParts=a._a.slice(0),o(a).meridiem=a._meridiem,a._a[3]=function(a,b,c){var d;if(null==c)return b;if(null!=a.meridiemHour)return a.meridiemHour(b,c);else if(null!=a.isPM){if((d=a.isPM(c))&&b<12)b+=12;if(!d&&12===b)b=0;return b}else return b}(a._locale,a._a[3],a._meridiem),kb(a),ib(a)}else vb(a);else rb(a)}function xb(a){var b=a._i,c=a._f;if(a._locale=a._locale||hb(a._l),null===b||void 0===c&&""===b)return q({nullInput:!0});if("string"==typeof b)a._i=b=a._locale.preparse(b);if(v(b))return new u(ib(b));else if(j(b))a._d=b;else if(f(c))!function(a){var b,c,d,e,f;if(0===a._f.length)return o(a).invalidFormat=!0,void(a._d=new Date(NaN));for(e=0;e<a._f.length;e++){if(f=0,b=s({},a),null!=a._useUTC)b._useUTC=a._useUTC;if(b._f=a._f[e],wb(b),p(b))if(f+=o(b).charsLeftOver,f+=10*o(b).unusedTokens.length,o(b).score=f,null==d||f<d)d=f,c=b}m(a,c||b)}(a);else if(c)wb(a);else!function(a){var b=a._i;if(h(b))a._d=new Date(e.now());else if(j(b))a._d=new Date(b.valueOf());else if("string"==typeof b)!function(a){var b=qb.exec(a._i);if(null===b){if(rb(a),!1===a._isValid)if(delete a._isValid,vb(a),!1===a._isValid)delete a._isValid,e.createFromInputFallback(a)}else a._d=new Date(+b[1])}(a);else if(f(b))a._a=k(b.slice(0),function(a){return parseInt(a,10)}),kb(a);else if(g(b))!function(a){if(!a._d){var b=K(a._i);a._a=k([b.year,b.month,b.day||b.date,b.hour,b.minute,b.second,b.millisecond],function(a){return a&&parseInt(a,10)}),kb(a)}}(a);else if(i(b))a._d=new Date(b);else e.createFromInputFallback(a)}(a);if(!p(a))a._d=null;return a}function yb(a,b,c,d,e){var h={};if(!0===c||!1===c)d=c,c=void 0;if(g(a)&&function(a){if(Object.getOwnPropertyNames)return 0===Object.getOwnPropertyNames(a).length;else{var b;for(b in a)if(a.hasOwnProperty(b))return!1;return!0}}(a)||f(a)&&0===a.length)a=void 0;return h._isAMomentObject=!0,h._useUTC=h._isUTC=e,h._l=c,h._i=a,h._f=b,h._strict=d,function(a){var b=new u(ib(xb(a)));if(b._nextDay)b.add(1,"d"),b._nextDay=void 0;return b}(h)}function zb(a,b,c,d){return yb(a,b,c,d,!1)}e.createFromInputFallback=A("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged and will be removed in an upcoming major release. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(a){a._d=new Date(a._i+(a._useUTC?" UTC":""))}),e.ISO_8601=function(){},e.RFC_2822=function(){};var Ab=A("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var a=zb.apply(null,arguments);if(this.isValid()&&a.isValid())return a<this?this:a;else return q()}),Bb=A("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var a=zb.apply(null,arguments);if(this.isValid()&&a.isValid())return a>this?this:a;else return q()});function Cb(a,b){var c,d;if(1===b.length&&f(b[0]))b=b[0];if(!b.length)return zb();for(c=b[0],d=1;d<b.length;++d)if(!b[d].isValid()||b[d][a](c))c=b[d];return c}var Db=["year","quarter","month","week","day","hour","minute","second","millisecond"];function Eb(a){var b=K(a),c=b.year||0,d=b.quarter||0,e=b.month||0,f=b.week||0,g=b.day||0,h=b.hour||0,i=b.minute||0,j=b.second||0,k=b.millisecond||0;this._isValid=function(a){for(var b in a)if(-1===ua.call(Db,b)||null!=a[b]&&isNaN(a[b]))return!1;for(var c=!1,d=0;d<Db.length;++d)if(a[Db[d]]){if(c)return!1;if(parseFloat(a[Db[d]])!==x(a[Db[d]]))c=!0}return!0}(b),this._milliseconds=+k+1e3*j+6e4*i+1e3*h*60*60,this._days=+g+7*f,this._months=+e+3*d+12*c,this._data={},this._locale=hb(),this._bubble()}function Fb(a){return a instanceof Eb}function Gb(a){if(a<0)return-1*Math.round(-1*a);else return Math.round(a)}function Hb(a,b){S(a,0,0,function(){var a=this.utcOffset(),c="+";if(a<0)a=-a,c="-";return c+N(~~(a/60),2)+b+N(~~a%60,2)})}Hb("Z",":"),Hb("ZZ",""),la("Z",ia),la("ZZ",ia),pa(["Z","ZZ"],function(a,b,c){c._useUTC=!0,c._tzm=Jb(ia,a)});var Ib=/([\+\-]|\d\d)/gi;function Jb(a,b){var c=(b||"").match(a);if(null===c)return null;var d=((c[c.length-1]||[])+"").match(Ib)||["-",0,0],e=60*d[1]+x(d[2]);return 0===e?0:"+"===d[0]?e:-e}function Kb(a,b){var c,d;if(b._isUTC)return c=b.clone(),d=(v(a)||j(a)?a.valueOf():zb(a).valueOf())-c.valueOf(),c._d.setTime(c._d.valueOf()+d),e.updateOffset(c,!1),c;else return zb(a).local()}function Lb(a){return 15*-Math.round(a._d.getTimezoneOffset()/15)}function Mb(){return this.isValid()?this._isUTC&&0===this._offset:!1}e.updateOffset=function(){};var Nb=/^(\-|\+)?(?:(\d*)[. ])?(\d+)\:(\d+)(?:\:(\d+)(\.\d*)?)?$/,Ob=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function Pb(a,b){var c,d,e,f=a,g=null;if(Fb(a))f={ms:a._milliseconds,d:a._days,M:a._months};else if(i(a))if(f={},b)f[b]=a;else f.milliseconds=a;else if(g=Nb.exec(a))c="-"===g[1]?-1:1,f={y:0,d:x(g[2])*c,h:x(g[3])*c,m:x(g[4])*c,s:x(g[5])*c,ms:x(Gb(1e3*g[6]))*c};else if(g=Ob.exec(a))c="-"===g[1]?-1:"+"===g[1]?1:1,f={y:Qb(g[2],c),M:Qb(g[3],c),w:Qb(g[4],c),d:Qb(g[5],c),h:Qb(g[6],c),m:Qb(g[7],c),s:Qb(g[8],c)};else if(null==f)f={};else if("object"==typeof f&&("from"in f||"to"in f))e=function(a,b){var c;if(!a.isValid()||!b.isValid())return{milliseconds:0,months:0};if(b=Kb(b,a),a.isBefore(b))c=Rb(a,b);else(c=Rb(b,a)).milliseconds=-c.milliseconds,c.months=-c.months;return c}(zb(f.from),zb(f.to)),(f={}).ms=e.milliseconds,f.M=e.months;if(d=new Eb(f),Fb(a)&&l(a,"_locale"))d._locale=a._locale;return d}function Qb(a,b){var c=a&&parseFloat(a.replace(",","."));return(isNaN(c)?0:c)*b}function Rb(a,b){var c={milliseconds:0,months:0};if(c.months=b.month()-a.month()+12*(b.year()-a.year()),a.clone().add(c.months,"M").isAfter(b))--c.months;return c.milliseconds=+b-+a.clone().add(c.months,"M"),c}function Sb(a,b){return function(c,d){var e;if(null!==d&&!isNaN(+d))D(b,"moment()."+b+"(period, number) is deprecated. Please use moment()."+b+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),e=c,c=d,d=e;return Tb(this,Pb(c="string"==typeof c?+c:c,d),a),this}}function Tb(a,b,c,d){var f=b._milliseconds,g=Gb(b._days),h=Gb(b._months);if(a.isValid()){if(d=null==d?!0:d,h)Ea(a,xa(a,"Month")+h*c);if(g)ya(a,"Date",xa(a,"Date")+g*c);if(f)a._d.setTime(a._d.valueOf()+f*c);if(d)e.updateOffset(a,g||h)}}Pb.fn=Eb.prototype,Pb.invalid=function(){return Pb(NaN)};var Ub=Sb(1,"add"),Vb=Sb(-1,"subtract");function Wb(a,b){var c,d=12*(b.year()-a.year())+(b.month()-a.month()),e=a.clone().add(d,"months");if(b-e<0)c=(b-e)/(e-a.clone().add(d-1,"months"));else c=(b-e)/(a.clone().add(d+1,"months")-e);return-(d+c)||0}function Xb(a){var b;if(void 0===a)return this._locale._abbr;else{if(null!=(b=hb(a)))this._locale=b;return this}}e.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",e.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";var Yb=A("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(a){if(void 0===a)return this.localeData();else return this.locale(a)});function Zb(){return this._locale}function $b(a,b){S(0,[a,a.length],0,b)}function _b(a,b,c,d,e){var f;if(null==a)return Na(this,d,e).year;else{if(b>(f=Oa(a,d,e)))b=f;return ac.call(this,a,b,c,d,e)}}function ac(a,b,c,d,e){var f=Ma(a,b,c,d,e),g=Ka(f.year,0,f.dayOfYear);return this.year(g.getUTCFullYear()),this.month(g.getUTCMonth()),this.date(g.getUTCDate()),this}S(0,["gg",2],0,function(){return this.weekYear()%100}),S(0,["GG",2],0,function(){return this.isoWeekYear()%100}),$b("gggg","weekYear"),$b("ggggg","weekYear"),$b("GGGG","isoWeekYear"),$b("GGGGG","isoWeekYear"),I("weekYear","gg"),I("isoWeekYear","GG"),M("weekYear",1),M("isoWeekYear",1),la("G",ga),la("g",ga),la("GG",$,X),la("gg",$,X),la("GGGG",da,Z),la("gggg",da,Z),la("GGGGG",ea,_),la("ggggg",ea,_),qa(["gggg","ggggg","GGGG","GGGGG"],function(a,b,c,d){b[d.substr(0,2)]=x(a)}),qa(["gg","GG"],function(a,b,c,d){b[d]=e.parseTwoDigitYear(a)}),S("Q",0,"Qo","quarter"),I("quarter","Q"),M("quarter",7),la("Q",W),pa("Q",function(a,b){b[1]=3*(x(a)-1)}),S("D",["DD",2],"Do","date"),I("date","D"),M("date",9),la("D",$),la("DD",$,X),la("Do",function(a,b){return a?b._dayOfMonthOrdinalParse||b._ordinalParse:b._dayOfMonthOrdinalParseLenient}),pa(["D","DD"],2),pa("Do",function(a,b){b[2]=x(a.match($)[0])});var bc=wa("Date",!0);S("DDD",["DDDD",3],"DDDo","dayOfYear"),I("dayOfYear","DDD"),M("dayOfYear",4),la("DDD",ca),la("DDDD",Y),pa(["DDD","DDDD"],function(a,b,c){c._dayOfYear=x(a)}),S("m",["mm",2],0,"minute"),I("minute","m"),M("minute",14),la("m",$),la("mm",$,X),pa(["m","mm"],4);var cc=wa("Minutes",!1);S("s",["ss",2],0,"second"),I("second","s"),M("second",15),la("s",$),la("ss",$,X),pa(["s","ss"],5);var dc,ec=wa("Seconds",!1);for(S("S",0,0,function(){return~~(this.millisecond()/100)}),S(0,["SS",2],0,function(){return~~(this.millisecond()/10)}),S(0,["SSS",3],0,"millisecond"),S(0,["SSSS",4],0,function(){return 10*this.millisecond()}),S(0,["SSSSS",5],0,function(){return 100*this.millisecond()}),S(0,["SSSSSS",6],0,function(){return 1e3*this.millisecond()}),S(0,["SSSSSSS",7],0,function(){return 1e4*this.millisecond()}),S(0,["SSSSSSSS",8],0,function(){return 1e5*this.millisecond()}),S(0,["SSSSSSSSS",9],0,function(){return 1e6*this.millisecond()}),I("millisecond","ms"),M("millisecond",16),la("S",ca,W),la("SS",ca,X),la("SSS",ca,Y),dc="SSSS";dc.length<=9;dc+="S")la(dc,fa);function fc(a,b){b[6]=x(1e3*("0."+a))}for(dc="S";dc.length<=9;dc+="S")pa(dc,fc);var gc=wa("Milliseconds",!1);S("z",0,0,"zoneAbbr"),S("zz",0,0,"zoneName");var hc=u.prototype;function ic(a){return a}hc.add=Ub,hc.calendar=function(a,b){var c=a||zb(),d=Kb(c,this).startOf("day"),f=e.calendarFormat(this,d)||"sameElse",g=b&&(E(b[f])?b[f].call(this,c):b[f]);return this.format(g||this.localeData().calendar(f,this,zb(c)))},hc.clone=function(){return new u(this)},hc.diff=function(a,b,c){var d,e,f;if(!this.isValid())return NaN;if(!(d=Kb(a,this)).isValid())return NaN;switch(e=6e4*(d.utcOffset()-this.utcOffset()),b=J(b)){case"year":f=Wb(this,d)/12;break;case"month":f=Wb(this,d);break;case"quarter":f=Wb(this,d)/3;break;case"second":f=(this-d)/1e3;break;case"minute":f=(this-d)/6e4;break;case"hour":f=(this-d)/36e5;break;case"day":f=(this-d-e)/864e5;break;case"week":f=(this-d-e)/6048e5;break;default:f=this-d}return c?f:w(f)},hc.endOf=function(a){if(void 0===(a=J(a))||"millisecond"===a)return this;if("date"===a)a="day";return this.startOf(a).add(1,"isoWeek"===a?"week":a).subtract(1,"ms")},hc.format=function(a){if(!a)a=this.isUtc()?e.defaultFormatUtc:e.defaultFormat;var b=U(this,a);return this.localeData().postformat(b)},hc.from=function(a,b){if(this.isValid()&&(v(a)&&a.isValid()||zb(a).isValid()))return Pb({to:this,from:a}).locale(this.locale()).humanize(!b);else return this.localeData().invalidDate()},hc.fromNow=function(a){return this.from(zb(),a)},hc.to=function(a,b){if(this.isValid()&&(v(a)&&a.isValid()||zb(a).isValid()))return Pb({from:this,to:a}).locale(this.locale()).humanize(!b);else return this.localeData().invalidDate()},hc.toNow=function(a){return this.to(zb(),a)},hc.get=function(a){if(E(this[a=J(a)]))return this[a]();else return this},hc.invalidAt=function(){return o(this).overflow},hc.isAfter=function(a,b){var c=v(a)?a:zb(a);if(!this.isValid()||!c.isValid())return!1;if("millisecond"===(b=J(!h(b)?b:"millisecond")))return this.valueOf()>c.valueOf();else return c.valueOf()<this.clone().startOf(b).valueOf()},hc.isBefore=function(a,b){var c=v(a)?a:zb(a);if(!this.isValid()||!c.isValid())return!1;if("millisecond"===(b=J(!h(b)?b:"millisecond")))return this.valueOf()<c.valueOf();else return this.clone().endOf(b).valueOf()<c.valueOf()},hc.isBetween=function(a,b,c,d){return("("===(d=d||"()")[0]?this.isAfter(a,c):!this.isBefore(a,c))&&(")"===d[1]?this.isBefore(b,c):!this.isAfter(b,c))},hc.isSame=function(a,b){var c,d=v(a)?a:zb(a);if(!this.isValid()||!d.isValid())return!1;if("millisecond"===(b=J(b||"millisecond")))return this.valueOf()===d.valueOf();else return c=d.valueOf(),this.clone().startOf(b).valueOf()<=c&&c<=this.clone().endOf(b).valueOf()},hc.isSameOrAfter=function(a,b){return this.isSame(a,b)||this.isAfter(a,b)},hc.isSameOrBefore=function(a,b){return this.isSame(a,b)||this.isBefore(a,b)},hc.isValid=function(){return p(this)},hc.lang=Yb,hc.locale=Xb,hc.localeData=Zb,hc.max=Bb,hc.min=Ab,hc.parsingFlags=function(){return m({},o(this))},hc.set=function(a,b){if("object"==typeof a)for(var c=function(a){var b=[];for(var c in a)b.push({unit:c,priority:L[c]});return b.sort(function(a,b){return a.priority-b.priority}),b}(a=K(a)),d=0;d<c.length;d++)this[c[d].unit](a[c[d].unit]);else if(E(this[a=J(a)]))return this[a](b);return this},hc.startOf=function(a){switch(a=J(a)){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":case"date":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}if("week"===a)this.weekday(0);if("isoWeek"===a)this.isoWeekday(1);if("quarter"===a)this.month(3*Math.floor(this.month()/3));return this},hc.subtract=Vb,hc.toArray=function(){var a=this;return[a.year(),a.month(),a.date(),a.hour(),a.minute(),a.second(),a.millisecond()]},hc.toObject=function(){var a=this;return{years:a.year(),months:a.month(),date:a.date(),hours:a.hours(),minutes:a.minutes(),seconds:a.seconds(),milliseconds:a.milliseconds()}},hc.toDate=function(){return new Date(this.valueOf())},hc.toISOString=function(a){if(!this.isValid())return null;var b=!0!==a,c=b?this.clone().utc():this;if(c.year()<0||c.year()>9999)return U(c,b?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ");if(E(Date.prototype.toISOString))if(b)return this.toDate().toISOString();else return new Date(this.valueOf()+60*this.utcOffset()*1e3).toISOString().replace("Z",U(c,"Z"));return U(c,b?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")},hc.inspect=function(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var a="moment",b="";if(!this.isLocal())a=0===this.utcOffset()?"moment.utc":"moment.parseZone",b="Z";var c="["+a+'("]',d=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",e=b+'[")]';return this.format(c+d+"-MM-DD[T]HH:mm:ss.SSS"+e)},hc.toJSON=function(){return this.isValid()?this.toISOString():null},hc.toString=function(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},hc.unix=function(){return Math.floor(this.valueOf()/1e3)},hc.valueOf=function(){return this._d.valueOf()-6e4*(this._offset||0)},hc.creationData=function(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}},hc.year=va,hc.isLeapYear=function(){return ta(this.year())},hc.weekYear=function(a){return _b.call(this,a,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)},hc.isoWeekYear=function(a){return _b.call(this,a,this.isoWeek(),this.isoWeekday(),1,4)},hc.quarter=hc.quarters=function(a){return null==a?Math.ceil((this.month()+1)/3):this.month(3*(a-1)+this.month()%3)},hc.month=Fa,hc.daysInMonth=function(){return za(this.year(),this.month())},hc.week=hc.weeks=function(a){var b=this.localeData().week(this);return null==a?b:this.add(7*(a-b),"d")},hc.isoWeek=hc.isoWeeks=function(a){var b=Na(this,1,4).week;return null==a?b:this.add(7*(a-b),"d")},hc.weeksInYear=function(){var a=this.localeData()._week;return Oa(this.year(),a.dow,a.doy)},hc.isoWeeksInYear=function(){return Oa(this.year(),1,4)},hc.date=bc,hc.day=hc.days=function(a){if(!this.isValid())return null!=a?this:NaN;var b=this._isUTC?this._d.getUTCDay():this._d.getDay();if(null!=a)return a=function(a,b){if("string"!=typeof a)return a;if(!isNaN(a))return parseInt(a,10);if("number"==typeof(a=b.weekdaysParse(a)))return a;else return null}(a,this.localeData()),this.add(a-b,"d");else return b},hc.weekday=function(a){if(!this.isValid())return null!=a?this:NaN;var b=(this.day()+7-this.localeData()._week.dow)%7;return null==a?b:this.add(a-b,"d")},hc.isoWeekday=function(a){if(!this.isValid())return null!=a?this:NaN;if(null!=a){var b=function(a,b){if("string"==typeof a)return b.weekdaysParse(a)%7||7;else return isNaN(a)?null:a}(a,this.localeData());return this.day(this.day()%7?b:b-7)}else return this.day()||7},hc.dayOfYear=function(a){var b=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==a?b:this.add(a-b,"d")},hc.hour=hc.hours=_a,hc.minute=hc.minutes=cc,hc.second=hc.seconds=ec,hc.millisecond=hc.milliseconds=gc,hc.utcOffset=function(a,b,c){var d,f=this._offset||0;if(!this.isValid())return null!=a?this:NaN;if(null!=a){if("string"==typeof a){if(null===(a=Jb(ia,a)))return this}else if(Math.abs(a)<16&&!c)a*=60;if(!this._isUTC&&b)d=Lb(this);if(this._offset=a,this._isUTC=!0,null!=d)this.add(d,"m");if(f!==a)if(!b||this._changeInProgress)Tb(this,Pb(a-f,"m"),1,!1);else if(!this._changeInProgress)this._changeInProgress=!0,e.updateOffset(this,!0),this._changeInProgress=null;return this}else return this._isUTC?f:Lb(this)},hc.utc=function(a){return this.utcOffset(0,a)},hc.local=function(a){if(this._isUTC)if(this.utcOffset(0,a),this._isUTC=!1,a)this.subtract(Lb(this),"m");return this},hc.parseZone=function(){if(null!=this._tzm)this.utcOffset(this._tzm,!1,!0);else if("string"==typeof this._i){var a=Jb(ha,this._i);if(null!=a)this.utcOffset(a);else this.utcOffset(0,!0)}return this},hc.hasAlignedHourOffset=function(a){if(!this.isValid())return!1;else return a=a?zb(a).utcOffset():0,(this.utcOffset()-a)%60==0},hc.isDST=function(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()},hc.isLocal=function(){return this.isValid()?!this._isUTC:!1},hc.isUtcOffset=function(){return this.isValid()?this._isUTC:!1},hc.isUtc=Mb,hc.isUTC=Mb,hc.zoneAbbr=function(){return this._isUTC?"UTC":""},hc.zoneName=function(){return this._isUTC?"Coordinated Universal Time":""},hc.dates=A("dates accessor is deprecated. Use date instead.",bc),hc.months=A("months accessor is deprecated. Use month instead",Fa),hc.years=A("years accessor is deprecated. Use year instead",va),hc.zone=A("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",function(a,b){if(null!=a){if("string"!=typeof a)a=-a;return this.utcOffset(a,b),this}else return-this.utcOffset()}),hc.isDSTShifted=A("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",function(){if(!h(this._isDSTShifted))return this._isDSTShifted;var a={};if(s(a,this),(a=xb(a))._a){var b=a._isUTC?n(a._a):zb(a._a);this._isDSTShifted=this.isValid()&&y(a._a,b.toArray())>0}else this._isDSTShifted=!1;return this._isDSTShifted});var jc=G.prototype;function kc(a,b,c,d){var e=hb(),f=n().set(d,b);return e[c](f,a)}function lc(a,b,c){if(i(a))b=a,a=void 0;if(a=a||"",null!=b)return kc(a,b,c,"month");var d,e=[];for(d=0;d<12;d++)e[d]=kc(a,d,c,"month");return e}function mc(a,b,c,d){if("boolean"==typeof a){if(i(b))c=b,b=void 0;b=b||""}else{if(c=b=a,a=!1,i(b))c=b,b=void 0;b=b||""}var e,f=hb(),g=a?f._week.dow:0;if(null!=c)return kc(b,(c+g)%7,d,"day");var h=[];for(e=0;e<7;e++)h[e]=kc(b,(e+g)%7,d,"day");return h}jc.calendar=function(a,b,c){var d=this._calendar[a]||this._calendar.sameElse;return E(d)?d.call(b,c):d},jc.longDateFormat=function(a){var b=this._longDateFormat[a],c=this._longDateFormat[a.toUpperCase()];if(b||!c)return b;else return this._longDateFormat[a]=c.replace(/MMMM|MM|DD|dddd/g,function(a){return a.slice(1)}),this._longDateFormat[a]},jc.invalidDate=function(){return this._invalidDate},jc.ordinal=function(a){return this._ordinal.replace("%d",a)},jc.preparse=ic,jc.postformat=ic,jc.relativeTime=function(a,b,c,d){var e=this._relativeTime[c];return E(e)?e(a,b,c,d):e.replace(/%d/i,a)},jc.pastFuture=function(a,b){var c=this._relativeTime[a>0?"future":"past"];return E(c)?c(b):c.replace(/%s/i,b)},jc.set=function(a){var b,c;for(c in a)if(E(b=a[c]))this[c]=b;else this["_"+c]=b;this._config=a,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)},jc.months=function(a,b){if(!a)return f(this._months)?this._months:this._months.standalone;else return f(this._months)?this._months[a.month()]:this._months[(this._months.isFormat||Aa).test(b)?"format":"standalone"][a.month()]},jc.monthsShort=function(a,b){if(!a)return f(this._monthsShort)?this._monthsShort:this._monthsShort.standalone;else return f(this._monthsShort)?this._monthsShort[a.month()]:this._monthsShort[Aa.test(b)?"format":"standalone"][a.month()]},jc.monthsParse=function(a,b,c){var d,e,f;if(this._monthsParseExact)return Da.call(this,a,b,c);if(!this._monthsParse)this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[];for(d=0;d<12;d++){if(e=n([2e3,d]),c&&!this._longMonthsParse[d])this._longMonthsParse[d]=new RegExp("^"+this.months(e,"").replace(".","")+"$","i"),this._shortMonthsParse[d]=new RegExp("^"+this.monthsShort(e,"").replace(".","")+"$","i");if(!c&&!this._monthsParse[d])f="^"+this.months(e,"")+"|^"+this.monthsShort(e,""),this._monthsParse[d]=new RegExp(f.replace(".",""),"i");if(c&&"MMMM"===b&&this._longMonthsParse[d].test(a))return d;else if(c&&"MMM"===b&&this._shortMonthsParse[d].test(a))return d;else if(!c&&this._monthsParse[d].test(a))return d}},jc.monthsRegex=function(a){if(this._monthsParseExact){if(!l(this,"_monthsRegex"))Ia.call(this);if(a)return this._monthsStrictRegex;else return this._monthsRegex}else{if(!l(this,"_monthsRegex"))this._monthsRegex=Ha;return this._monthsStrictRegex&&a?this._monthsStrictRegex:this._monthsRegex}},jc.monthsShortRegex=function(a){if(this._monthsParseExact){if(!l(this,"_monthsRegex"))Ia.call(this);if(a)return this._monthsShortStrictRegex;else return this._monthsShortRegex}else{if(!l(this,"_monthsShortRegex"))this._monthsShortRegex=Ga;return this._monthsShortStrictRegex&&a?this._monthsShortStrictRegex:this._monthsShortRegex}},jc.week=function(a){return Na(a,this._week.dow,this._week.doy).week},jc.firstDayOfYear=function(){return this._week.doy},jc.firstDayOfWeek=function(){return this._week.dow},jc.weekdays=function(a,b){if(!a)return f(this._weekdays)?this._weekdays:this._weekdays.standalone;else return f(this._weekdays)?this._weekdays[a.day()]:this._weekdays[this._weekdays.isFormat.test(b)?"format":"standalone"][a.day()]},jc.weekdaysMin=function(a){return a?this._weekdaysMin[a.day()]:this._weekdaysMin},jc.weekdaysShort=function(a){return a?this._weekdaysShort[a.day()]:this._weekdaysShort},jc.weekdaysParse=function(a,b,c){var d,e,f;if(this._weekdaysParseExact)return Sa.call(this,a,b,c);if(!this._weekdaysParse)this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[];for(d=0;d<7;d++){if(e=n([2e3,1]).day(d),c&&!this._fullWeekdaysParse[d])this._fullWeekdaysParse[d]=new RegExp("^"+this.weekdays(e,"").replace(".",".?")+"$","i"),this._shortWeekdaysParse[d]=new RegExp("^"+this.weekdaysShort(e,"").replace(".",".?")+"$","i"),this._minWeekdaysParse[d]=new RegExp("^"+this.weekdaysMin(e,"").replace(".",".?")+"$","i");if(!this._weekdaysParse[d])f="^"+this.weekdays(e,"")+"|^"+this.weekdaysShort(e,"")+"|^"+this.weekdaysMin(e,""),this._weekdaysParse[d]=new RegExp(f.replace(".",""),"i");if(c&&"dddd"===b&&this._fullWeekdaysParse[d].test(a))return d;else if(c&&"ddd"===b&&this._shortWeekdaysParse[d].test(a))return d;else if(c&&"dd"===b&&this._minWeekdaysParse[d].test(a))return d;else if(!c&&this._weekdaysParse[d].test(a))return d}},jc.weekdaysRegex=function(a){if(this._weekdaysParseExact){if(!l(this,"_weekdaysRegex"))Wa.call(this);if(a)return this._weekdaysStrictRegex;else return this._weekdaysRegex}else{if(!l(this,"_weekdaysRegex"))this._weekdaysRegex=Ta;return this._weekdaysStrictRegex&&a?this._weekdaysStrictRegex:this._weekdaysRegex}},jc.weekdaysShortRegex=function(a){if(this._weekdaysParseExact){if(!l(this,"_weekdaysRegex"))Wa.call(this);if(a)return this._weekdaysShortStrictRegex;else return this._weekdaysShortRegex}else{if(!l(this,"_weekdaysShortRegex"))this._weekdaysShortRegex=Ua;return this._weekdaysShortStrictRegex&&a?this._weekdaysShortStrictRegex:this._weekdaysShortRegex}},jc.weekdaysMinRegex=function(a){if(this._weekdaysParseExact){if(!l(this,"_weekdaysRegex"))Wa.call(this);if(a)return this._weekdaysMinStrictRegex;else return this._weekdaysMinRegex}else{if(!l(this,"_weekdaysMinRegex"))this._weekdaysMinRegex=Va;return this._weekdaysMinStrictRegex&&a?this._weekdaysMinStrictRegex:this._weekdaysMinRegex}},jc.isPM=function(a){return"p"===(a+"").toLowerCase().charAt(0)},jc.meridiem=function(a,b,c){if(a>11)return c?"pm":"PM";else return c?"am":"AM"},fb("en",{dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(a){var b=a%10;return a+(1===x(a%100/10)?"th":1===b?"st":2===b?"nd":3===b?"rd":"th")}}),e.lang=A("moment.lang is deprecated. Use moment.locale instead.",fb),e.langData=A("moment.langData is deprecated. Use moment.localeData instead.",hb);var nc=Math.abs;function oc(a,b,c,d){var e=Pb(b,c);return a._milliseconds+=d*e._milliseconds,a._days+=d*e._days,a._months+=d*e._months,a._bubble()}function pc(a){if(a<0)return Math.floor(a);else return Math.ceil(a)}function qc(a){return 4800*a/146097}function rc(a){return 146097*a/4800}function sc(a){return function(){return this.as(a)}}var tc=sc("ms"),uc=sc("s"),vc=sc("m"),wc=sc("h"),xc=sc("d"),yc=sc("w"),zc=sc("M"),Ac=sc("y");function Bc(a){return function(){return this.isValid()?this._data[a]:NaN}}var Cc=Bc("milliseconds"),Dc=Bc("seconds"),Ec=Bc("minutes"),Fc=Bc("hours"),Gc=Bc("days"),Hc=Bc("months"),Ic=Bc("years"),Jc=Math.round,Kc={ss:44,s:45,m:45,h:22,d:26,M:11};function Lc(a,b,c,d,e){return e.relativeTime(b||1,!!c,a,d)}var Mc=Math.abs;function Nc(a){return(a>0)-(a<0)||+a}function Oc(){if(!this.isValid())return this.localeData().invalidDate();var a,b,c=Mc(this._milliseconds)/1e3,d=Mc(this._days),e=Mc(this._months);a=w(c/60),b=w(a/60),c%=60,a%=60;var f=w(e/12),g=e%=12,h=d,i=b,j=a,k=c?c.toFixed(3).replace(/\.?0+$/,""):"",l=this.asSeconds();if(!l)return"P0D";var m=l<0?"-":"",n=Nc(this._months)!==Nc(l)?"-":"",o=Nc(this._days)!==Nc(l)?"-":"",p=Nc(this._milliseconds)!==Nc(l)?"-":"";return m+"P"+(f?n+f+"Y":"")+(g?n+g+"M":"")+(h?o+h+"D":"")+(i||j||k?"T":"")+(i?p+i+"H":"")+(j?p+j+"M":"")+(k?p+k+"S":"")}var Pc=Eb.prototype;return Pc.isValid=function(){return this._isValid},Pc.abs=function(){var a=this._data;return this._milliseconds=nc(this._milliseconds),this._days=nc(this._days),this._months=nc(this._months),a.milliseconds=nc(a.milliseconds),a.seconds=nc(a.seconds),a.minutes=nc(a.minutes),a.hours=nc(a.hours),a.months=nc(a.months),a.years=nc(a.years),this},Pc.add=function(a,b){return oc(this,a,b,1)},Pc.subtract=function(a,b){return oc(this,a,b,-1)},Pc.as=function(a){if(!this.isValid())return NaN;var b,c,d=this._milliseconds;if("month"===(a=J(a))||"year"===a)return b=this._days+d/864e5,c=this._months+qc(b),"month"===a?c:c/12;else switch(b=this._days+Math.round(rc(this._months)),a){case"week":return b/7+d/6048e5;case"day":return b+d/864e5;case"hour":return 24*b+d/36e5;case"minute":return 1440*b+d/6e4;case"second":return 86400*b+d/1e3;case"millisecond":return Math.floor(864e5*b)+d;default:throw new Error("Unknown unit "+a)}},Pc.asMilliseconds=tc,Pc.asSeconds=uc,Pc.asMinutes=vc,Pc.asHours=wc,Pc.asDays=xc,Pc.asWeeks=yc,Pc.asMonths=zc,Pc.asYears=Ac,Pc.valueOf=function(){if(!this.isValid())return NaN;else return this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*x(this._months/12)},Pc._bubble=function(){var a,b,c,d,e,f=this._milliseconds,g=this._days,h=this._months,i=this._data;if(!(f>=0&&g>=0&&h>=0||f<=0&&g<=0&&h<=0))f+=864e5*pc(rc(h)+g),g=0,h=0;return i.milliseconds=f%1e3,a=w(f/1e3),i.seconds=a%60,b=w(a/60),i.minutes=b%60,c=w(b/60),i.hours=c%24,g+=w(c/24),e=w(qc(g)),h+=e,g-=pc(rc(e)),d=w(h/12),h%=12,i.days=g,i.months=h,i.years=d,this},Pc.clone=function(){return Pb(this)},Pc.get=function(a){return a=J(a),this.isValid()?this[a+"s"]():NaN},Pc.milliseconds=Cc,Pc.seconds=Dc,Pc.minutes=Ec,Pc.hours=Fc,Pc.days=Gc,Pc.weeks=function(){return w(this.days()/7)},Pc.months=Hc,Pc.years=Ic,Pc.humanize=function(a){if(!this.isValid())return this.localeData().invalidDate();var b=this.localeData(),c=function(a,b,c){var d=Pb(a).abs(),e=Jc(d.as("s")),f=Jc(d.as("m")),g=Jc(d.as("h")),h=Jc(d.as("d")),i=Jc(d.as("M")),j=Jc(d.as("y")),k=e<=Kc.ss&&["s",e]||e<Kc.s&&["ss",e]||f<=1&&["m"]||f<Kc.m&&["mm",f]||g<=1&&["h"]||g<Kc.h&&["hh",g]||h<=1&&["d"]||h<Kc.d&&["dd",h]||i<=1&&["M"]||i<Kc.M&&["MM",i]||j<=1&&["y"]||["yy",j];return k[2]=b,k[3]=+a>0,k[4]=c,Lc.apply(null,k)}(this,!a,b);if(a)c=b.pastFuture(+this,c);return b.postformat(c)},Pc.toISOString=Oc,Pc.toString=Oc,Pc.toJSON=Oc,Pc.locale=Xb,Pc.localeData=Zb,Pc.toIsoString=A("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",Oc),Pc.lang=Yb,S("X",0,0,"unix"),S("x",0,0,"valueOf"),la("x",ga),la("X",/[+-]?\d+(\.\d{1,3})?/),pa("X",function(a,b,c){c._d=new Date(1e3*parseFloat(a,10))}),pa("x",function(a,b,c){c._d=new Date(x(a))}),e.version="2.21.0",b=zb,e.fn=hc,e.min=function(){var a=[].slice.call(arguments,0);return Cb("isBefore",a)},e.max=function(){var a=[].slice.call(arguments,0);return Cb("isAfter",a)},e.now=function(){return Date.now?Date.now():+new Date},e.utc=n,e.unix=function(a){return zb(1e3*a)},e.months=function(a,b){return lc(a,b,"months")},e.isDate=j,e.locale=fb,e.invalid=q,e.duration=Pb,e.isMoment=v,e.weekdays=function(a,b,c){return mc(a,b,c,"weekdays")},e.parseZone=function(){return zb.apply(null,arguments).parseZone()},e.localeData=hb,e.isDuration=Fb,e.monthsShort=function(a,b){return lc(a,b,"monthsShort")},e.weekdaysMin=function(a,b,c){return mc(a,b,c,"weekdaysMin")},e.defineLocale=gb,e.updateLocale=function(a,b){if(null!=b){var c,d,e=ab;if(null!=(d=eb(a)))e=d._config;b=F(e,b),(c=new G(b)).parentLocale=bb[a],bb[a]=c,fb(a)}else if(null!=bb[a])if(null!=bb[a].parentLocale)bb[a]=bb[a].parentLocale;else if(null!=bb[a])delete bb[a];return bb[a]},e.locales=function(){return B(bb)},e.weekdaysShort=function(a,b,c){return mc(a,b,c,"weekdaysShort")},e.normalizeUnits=J,e.relativeTimeRounding=function(a){if(void 0===a)return Jc;if("function"==typeof a)return Jc=a,!0;else return!1},e.relativeTimeThreshold=function(a,b){if(void 0===Kc[a])return!1;if(void 0===b)return Kc[a];if(Kc[a]=b,"s"===a)Kc.ss=b-1;return!0},e.calendarFormat=function(a,b){var c=a.diff(b,"days",!0);return c<-6?"sameElse":c<-1?"lastWeek":c<0?"lastDay":c<1?"sameDay":c<2?"nextDay":c<7?"nextWeek":"sameElse"},e.prototype=hc,e.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"YYYY-[W]WW",MONTH:"YYYY-MM"},e}()},8276:function(a,b,c){"use strict";c.d(b,{Z:function(){return i}});var d=c(7406),e=c(8156),f=c.n(e),g=d.TwoKitTheming.createUseStyles(function(a){var b=a.x3,c=a.x4,d=a.x5;return{titleBlock:{paddingBottom:c.value},spacer:{width:b.value},buttonsBlock:{paddingTop:d.value,display:"flex"}}}),h={fakeDoorTitle:i18n("Функция вот-вот появится"),fakeDoorMessage:i18n("Спасибо за ваш интерес! Мы обязательно сообщим, когда всё будет готово"),close:i18n("Понятно")},i=function(a){var b=a.onClose,c=g(a);return f().createElement(d.Popup,{show:!0,width:"var(--vkui--size_popup_small--regular)"},f().createElement(d.Panel,{popup:!0,closable:!0,onClose:b},f().createElement("div",{className:c.titleBlock},f().createElement(d.Text,{mode:"h3"},h.fakeDoorTitle)),f().createElement("div",null,f().createElement("span",null,h.fakeDoorMessage)),f().createElement("div",{className:c.buttonsBlock},f().createElement(d.Button,{primary:!0,testId:"submit",onClick:b},h.close))))}},7747:function(a,b,c){"use strict";c.d(b,{j:function(){return k}});var d,e,f=c(8156),g=c.n(f),h=function(){return(h=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++)for(var e in b=arguments[c])if(Object.prototype.hasOwnProperty.call(b,e))a[e]=b[e];return a}).apply(this,arguments)};var i={},j=new Proxy(function(a){var b=a.children,c=g().useReducer(function(a){return a+1},0)[1];if(g().useEffect(function(){if(!d)(function(){if(e)return e;var a=new Promise(function(a,b){try{window.require(["@mail/vkui"],function(b){d=b,a(b)},function(a){b(a)})}catch(a){b(a)}});return e=a,a.catch(function(a){throw e=void 0,a})})().then(function(){c()})},[]),d)return b(d);else return null},{get:function(a,b){var c,e;if(b in a)return a[b];else return null!==(c=i[b])&&void 0!==c?c:i[b]=null!==(e=null==d?void 0:d[b])&&void 0!==e?e:function(c){return g().createElement(a,null,function(a){var d=a[b];return g().createElement(d,h({},c))})}}});b.Z=j;var k=j},7916:function(a,b,c){"use strict";c.d(b,{Uo:function(){return J},gw:function(){return H},lt:function(){return I}});var d=c(7406),e=c(1373),f=c.n(e),g=c(769),h=c.n(g),i=c(4184),j=c.n(i),k=c(5041),l=c(8156),m=c.n(l),n=c(1791),o=c(7747),p=c(9775),q="_2BC9h-HzDLOHFW_e0qGwaZ",r="_19-4F1HRAiXz8UPMcjfIGv",s="_3YeaRM319UbriPAoOrzHho",t="_1xOOk2igN8UDdp54getghd",u="_2t77xkKF16RsxChg_On2En",v="_1JiOgaMmCzoMlb7kfruu0f",w="_1hTrxO3EPjmh9sbb-SCzqm",x="_1mwU-o9PrmYmygri82D0LW",y="_3WJ4a5i2Ltgmqophq0-UMN",z="_15b3li2iVPWeR0MwiT03sJ",A="h58tG7PkYo6hehzjyWQnE",B="_3glBkbn5WnP2xbyPAUlZ41",C=function(a){var b=a.isDarkMode,c=a.banner;return m().createElement(o.Z,null,function(a){var d=a.Headline,e=a.Subhead,g=a.Spacing;return m().createElement("div",{className:v,"data-qa-id":(0,p.qa)("banner-bell")},m().createElement("a",{className:x,href:c.link,onClick:function(){return a=c.bannerid,void f().send("bell-click-point",{dwh:{id:a}});var a},target:"_blank",rel:"noreferrer"},m().createElement("div",{className:w},m().createElement(d,{level:"1",weight:"2",className:y},c.title),m().createElement(g,{size:4}),m().createElement(e,{className:z},c.text)),m().createElement("div",{className:A},m().createElement("img",{className:B,src:b?c.imageDark:c.image,alt:c.title}))))})},D=c(6792),E=function(a){var b=a.newFeatures,c=(0,D.C)({name:"new-features-dropdown",mediators:["themes-manager"]})[0].darkMode;return m().createElement(o.Z,null,function(a){var d=a.Title,e=a.Spacing,f=a.Headline;return m().createElement("div",{className:t,"data-qa-id":(0,p.qa)("dropdown-new-features-bell")},m().createElement(d,{level:"2"},i18n("Что нового в Почте")),m().createElement(e,{size:8}),b.map(function(a){return m().createElement(C,{banner:a,key:a.bannerid,isDarkMode:c})}),(null==b?void 0:b.length)===n.NEW_FEATURES_SHOW_COUNT&&m().createElement("a",{className:u,href:n.NEW_FEATURES_LANDING_HREF,target:"_blank",rel:"noreferrer"},m().createElement(f,{level:"1",weight:"2"},i18n("Посмотреть все"))))})},F=c(1936),G=c.n(F),H=h().get("newFeatures")||[],I=h().get("newFeaturesCount")||0,J=function(a){var b,c=a.className,e=a.isBottomRight,g=function(){var a=(0,l.useState)(function(){var a=G().get("octavius-bell-pimple");return!!a&&!a.state}),b=a[0],c=a[1],d=(0,l.useCallback)(function(){if(b)c(!1),G().get("octavius-bell-pimple").save({state:!0})},[b]);return{isShowPimple:b,hidePimple:d}}(),h=g.isShowPimple,i=g.hidePimple,n=(0,l.useState)(!1),o=n[0],t=n[1];(0,l.useEffect)(function(){f().send("bell-shown")},[]),(0,l.useEffect)(function(){if(h)f().send("pimple-shown")},[h]);var u=(0,l.useCallback)(function(){i(),f().send("bell-click",{dwh:{ids:H.map(function(a){return a.bannerid})}})},[i]);return m().createElement("div",{className:c},m().createElement(d.Dropdown,{placement:e?"bottomRight":"bottom",onChangeExpandState:t,pureOverlay:!0,overlay:function(){return m().createElement(E,{newFeatures:H})}},m().createElement("div",{className:j()(q,(b={},b[r]=o,b)),onClick:u,"data-qa-id":(0,p.qa)("bell"),title:i18n("Последние обновления")},m().createElement(d.Icon,{icon:k.NAVIGATION_NOTIFICATION}),h&&m().createElement("div",{className:s,"data-qa-id":(0,p.qa)("bell-pimple")}))))}},8609:function(a,b,c){"use strict";c.r(b),c.d(b,{Widget:function(){return R},default:function(){return S}});var d=c(7406),e=c(7050),f=c.n(e),g=c(4184),h=c.n(g),i=c(1791),j=c(5041),k=c(8156),l=c.n(k),m="_1dp6ZzXtxVVHJ7u7IEkCn5",n="_1pgjaTGZX34bEpaIDsiQbx",o="_3Hkwn1OHteHQp_9zxLBED8",p="tueyQPxe-WEgPHVvJEtGN",q="_2ir0smdfagYUzNdwOCCbku",r=c(8078),s=function(a,b){var c=(0,k.useState)(a),d=c[0],e=c[1],f=(0,k.useRef)(d);f.current=d;var g=(0,k.useRef)(a);g.current=a;var h=(0,k.useRef)(b);return h.current=b,(0,k.useEffect)(function(){return function(a,b){var c=b(),d=new Date,e=function(){a(),c=b(),d=new Date,f=window.setTimeout(e,c)},f=window.setTimeout(e,c),g=function(){if("hidden"!==document.visibilityState){window.clearTimeout(f);var a=new Date;if(+d<=+a&&+a<=+d+c)c-=+a-+d,d=a,f=window.setTimeout(e,c);else e()}};return document.addEventListener("visibilitychange",g),function(){window.clearTimeout(f),document.removeEventListener("visibilitychange",g)}}(function(){var a=g.current();if(a!==f.current)e(a),f.current=a},function(){return h.current()})},[]),d},t=function(){return s(function(){return new Date},function(){var a=new Date,b=new Date(a);return b.setDate(b.getDate()+1),b.setHours(0,0,1,0),+b-+a})},u=function(){return(0,r.capitalize)((0,r.formatDate)(new Date,[["weekday","short"],["day","numeric"],["month","long"]]))},v=function(){var a=t();return(0,k.useMemo)(function(){return{leftIcon:l().createElement("div",{className:h()(m,o)},a.getDate()),title:u(),analyticContent:"stub"}},[a])},w=c(4334),x=c.n(w),y=c(4679),z=c.n(y),A="_2zss7QkqYU90qFqLNf4irp",B="_1YMH5NB3-IK6ceAAA4EANw",C={d1:"11",n1:"11",d2:"21",n2:"21",d3:"10",n3:"10",d4:"25",n4:"25",d5:"03",n5:"03",d6:"05",n6:"06",d7:"01",n7:"02",d8:"09",n8:"09",d9:"13",n9:"14",d10:"17",n10:"18",d11:"12",n11:"12",d12:"23",n12:"24",d13:"22",n13:"22",d14:"61",n14:"62",d15:"31",n15:"31",d16:"04",n16:"04",d17:"35",n17:"35",d18:"59",n18:"60",d19:"50",n19:"50",d20:"63",n20:"64",d21:"33",n21:"34",d22:"51",n22:"51",d23:"33",n23:"34",d24:"45",n24:"45",d25:"65",n25:"66",d26:"58",n26:"58",d27:"15",n27:"16",d28:"56",n28:"57",d29:"37",n29:"38",d30:"25",n30:"25",d31:"54",n31:"54",d32:"53",n32:"53",d33:"29",n33:"29",d34:"47",n34:"48",d35:"19",n35:"20",d36:"46",n36:"46",d37:"67",n37:"68",d38:"69",n38:"70",d39:"52",n39:"52",d40:"42",n40:"42",d41:"43",n41:"44",d42:"71",n42:"72",d43:"41",n43:"41",d44:"30",n44:"55",d45:"39",n45:"40",d46:"49",n46:"49",d47:"26",n47:"36",d48:"07",n48:"08"},D=function(){var a,b,c,d,e=function(){var a=(0,k.useState)(!1),b=a[0],c=a[1],d=s(function(){return x().getSlot("t1189")},function(){return 6e5});return(0,k.useEffect)(function(){d.then(c)},[d]),b}(),f=t(),g=e&&(a={colorThemeDark:!0,icon:e.now_icon,status:e.now_status},b=a.colorThemeDark,c=a.icon,d=a.status,"https://pogoda.imgsmail.ru/icons/status/2021/".concat(b?"d":"l","t/svg/").concat(C[c+d],".svg"));return(0,k.useMemo)(function(){return{leftIcon:l().createElement("div",{className:h()(m,n),style:{backgroundImage:"url(".concat(i.MARUSIA_LOGO,")")}}),title:(0,r.capitalize)(e?(0,r.formatDate)(f,[["weekday","short"]])+", "+e.now_temp+"°":u()),rightIcon:g&&l().createElement("div",{className:h()(A,B),style:{backgroundImage:"url(".concat(g,")")}}),analyticContent:e?"weather":"stub",onClick:function(){return z()[document.querySelector(".ph-project-marusia.ph-project_open")?"closeMarusia":"openMarusia"]()}}},[e,g,f])},E=c(7916),F=function(){return(F=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++)for(var e in b=arguments[c])if(Object.prototype.hasOwnProperty.call(b,e))a[e]=b[e];return a}).apply(this,arguments)},G=function(){var a=E.lt;if(0===a)return{title:"Нет обновлений",analyticContent:"stub"};if(1===a)return{title:E.gw[0].title,analyticContent:"title_update"};else return{title:"".concat(a," обновления"),analyticContent:"n_updates"}}(),H=function(){return(0,k.useMemo)(function(){return F({leftIcon:l().createElement("div",{className:h()(m,p)},l().createElement(d.Icon,{icon:j.WIDGET_NOTIFICATION_ICON,sizeX:4}))},G)},[])},I=function(){return(0,k.useMemo)(function(){return{leftIcon:l().createElement("div",{className:h()(m,q)},l().createElement(d.Icon,{icon:j.WIDGET_TODO_ICON})),title:"Ваши задачи",analyticContent:"stub"}},[])},J=c(1373),K=c.n(J),L=c(7047),M=c.n(L),N=c(8276),O={container:"_1iXDwxq7FlFh9tbb7pDYrr",mask:"_28cyq_G7u_SaAnp4G4sciX",onlyIcon:"_1_W6cyJvdla1U9H-btmbKO",titleWrapper:"xzEOPp70jXs7vLrweFT5p",title:"_25s9-Lu4te43s_xjhdK-1Y",iconWrapper:"_2mAvvFOHKusnChDwYjezrQ",sceleton:"_3se4o4maxfzgW-eWQH401s"},P=function(){switch(i.WIDGET_HEADER_TYPE){case"todo":return I;case"notification":return H;case"marusia":return D;case"calendar":default:return v}}(),Q=function(){return a=function(){document.body.classList.remove("hideMarusia"),f().set("showMarusiaFakeDoor","1",{email:!1})},void Promise.all([M()("blitz")]).then(function(b){var c=new(0,b[0].LayerManager);c.setup(document.body,{popup:!0});var d=c.openLayer(l().createElement(N.Z,{onClose:function(){c.destroyLayer(d),null==a||a()}}),{noPanelWrap:!0,responsive:"auto"}).id});var a},R=function(a){var b,c,e=a.onlyIcon,g=a.className,i=P(),n=i.leftIcon,o=i.title,p=i.rightIcon,q=i.onClick,r=void 0===q?Q:q,s=i.analyticContent,t=(0,k.useRef)(),u=(0,k.useRef)(),v=(0,k.useState)(!1),w=v[0],x=v[1],y=o||"";return(0,k.useEffect)(function(){if(!f().get("showMarusiaFakeDoor",{email:!1}))a=s,b=y,K().send("show_widget",{p:"whiteline",dwh:{content:a,item:b}});var a,b},[s,y]),(0,k.useLayoutEffect)(function(){var a,b,c=(null===(a=t.current)||void 0===a?void 0:a.clientWidth)<(null===(b=u.current)||void 0===b?void 0:b.clientWidth);if(c!==w)x(c)},[n,o,p]),l().createElement("div",{title:w||e?o||void 0:void 0,onClick:function(){var a,b;a=s,b=y,K().send("click_widget",{p:"whiteline",dwh:{content:a,item:b}}),r()},className:h()(O.container,g,(b={},b[O.hasRightIcon]=p,b[O.onlyIcon]=e,b))},n||l().createElement("div",{className:h()(m,O.sceleton)}),o?l().createElement("div",{className:h()(O.titleWrapper,(c={},c[O.mask]=w,c)),ref:t},l().createElement("div",{className:O.title,ref:u},o)):l().createElement("div",{className:h()(O.titleWrapper,O.sceleton)}),p,l().createElement("div",{className:O.iconWrapper},l().createElement(d.Icon,{icon:j.WIDGET_HEADER_ICON})))},S=R},142:function(a,b,c){"use strict";c.d(b,{RV:function(){return f},eP:function(){return g},BU:function(){return h},BK:function(){return i},Co:function(){return k}});var d=c(4998),e=d.Event,f=function(a){return"string"==typeof a?{name:a}:a};function g(a,b){if(b.stop)a.stopPropagation();if(b.prevent)a.preventDefault()}function h(a,b,c){var d,f=new e(a);return f.target=null==c?void 0:c.target,f.details=null!=b?b:null==c?void 0:c.details,f.originalEvent=null!==(d=null==c?void 0:c.originalEvent)&&void 0!==d?d:c,f.stopPropagation=function(){var a,b;null===(b=null===(a=f.originalEvent)||void 0===a?void 0:a.stopPropagation)||void 0===b||b.call(a),e.prototype.stopPropagation.call(f)},f.preventDefault=function(){var a,b;null===(b=null===(a=f.originalEvent)||void 0===a?void 0:a.preventDefault)||void 0===b||b.call(a),e.prototype.preventDefault.call(f)},f.defaultPrevented=null==c?void 0:c.defaultPrevented,f.propagationStopped=null==c?void 0:c.propagationStopped,f}function i(a,b){if(null==b)throw new TypeError("Invalid object ".concat(b," provided"));if("function"!=typeof b.on)throw new TypeError('Invalid object with no "on" method provided');Object.entries(a).forEach(function(a){var c=a[0],d=a[1];if(null==b[d])throw new TypeError('Could not subscribe to "'.concat(c,'": class has no method named ').concat(d))}),function(a,b){Object.entries(a).forEach(function(a){var c=a[0],d=a[1];b.on(c,b[d])})}(a,b)}var j=/-/g,k=function(a){return a.toLowerCase().replace(j,"")}},2312:function(a,b,c){"use strict";c.d(b,{zf:function(){return m},uN:function(){return o},hG:function(){return p},Yv:function(){return u},CH:function(){return v},Nh:function(){return x},_N:function(){return y},Ce:function(){return z},pd:function(){return E},v$:function(){return F}});var d,e=c(5881),f=c(1347),g=c.n(f),h=c(142),i=(d=function(a,b){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)if(Object.prototype.hasOwnProperty.call(b,c))a[c]=b[c]})(a,b)},function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function c(){this.constructor=a}d(a,b),a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)}),j=function(){return(j=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++)for(var e in b=arguments[c])if(Object.prototype.hasOwnProperty.call(b,e))a[e]=b[e];return a}).apply(this,arguments)},k=function(a,b,c){if(c||2===arguments.length)for(var d,e=0,f=b.length;e<f;e++)if(d||!(e in b)){if(!d)d=Array.prototype.slice.call(b,0,e);d[e]=b[e]}return a.concat(d||Array.prototype.slice.call(b))};function l(a){var b,c;return null!==(c=null===(b=this.state)||void 0===b?void 0:b[a])&&void 0!==c?c:this.props[a]}function m(a){return!!l.call(this,a)}function n(a,b){var c;if("string"==typeof a)(c={})[a]=b,a=c;return this.setState(a),null}function o(a,b){var c=(0,h.Co)(a);if(this.eventsMap[c])this.eventsMap[c].push(b);else this.eventsMap[c]=[b]}function p(a,b){var c=(0,h.Co)(a);this.eventsMap[c]=this.eventsMap[c].filter(function(a){return a!==b})}var q=function(){return!1};function r(a){var b=l.call(this,a),c=0===b?1:1===b?0:!b;n.call(this,a,c)}function s(a,b,c){var d;if("string"==typeof c&&void 0!==this[c])d=this["___"+c]||(this["___"+c]=function(a){return this[c].call(this,a)});else if("function"==typeof c)d=c;if(d&&!this.findDomListener(a,b,d))a.addEventListener(b,d.bind(this),!1),this.domListeners.push({element:a,eventName:b,handle:d})}function t(a,b,c){var d;if("string"==typeof c&&void 0!==this[c])d=this["___"+c]||(this["___"+c]=function(a){return this[c].call(this,a)});else if("function"==typeof c)d=c;var e=this.findDomListener(a,b,d);if(e)a.removeEventListener(b,d,!1),this.domListeners.splice(this.domListeners.indexOf(e),1)}function u(a){return a.broadcastEvent}function v(a,b){var c,d=(0,h.RV)(b);(c=a).__events||(c.__events={});var e=a.__events,f="".concat(d.name,":").concat(d.stop,":").concat(d.prevent);if(f in e&&!d.hasOwnProperty("details"))return e[f];var g=function(b){if(d.stop)null==b||b.stopPropagation(),null==b||b.nativeEvent.stopImmediatePropagation();if(d.prevent)null==b||b.preventDefault();u(a).call(a,(0,h.BU)(d.name,d.details||null,null==b?void 0:b.nativeEvent))};return e[f]=g,g}function w(a,b){a.forEach(function(a){var c=g().Mediator.get(a);if(c)b(c);else console.warn("[sync] No mediator found for name ".concat(a))})}function x(a,b,c){w(c,function(c){c.registerInstanceByName(a,b)})}function y(a,b,c){var d=g().Block.prototype.broadcast;g().Block.prototype.broadcast=b,a(c),g().Block.prototype.broadcast=d}function z(a,b,c){if(void 0===c)c=!1;if(b)w(b,function(b){var d,e=g().Mediator.updateAttributes(b.name,a);if(e)if(c)a.setState(e);else a.state=j(j({},null!==(d=a.state)&&void 0!==d?d:{}),e)})}function A(a){if(a.remitEvents&&!a.broadcastEvent)throw new TypeError("You provided events to broadcast, but not the broadcast function");if(a.remitDetails&&!a.remitEvents)console.warn("You passed remitDetails with no events, this prop is unnecessary");return{mediators:a.useMediators,remit:a.remitEvents,broadcast:a.broadcastEvent,remitDetails:a.remitDetails,model:a.model,models:a.models,updateRemitEventsName:a.updateRemitEventsName}}var B="add remove sort reset update";function C(a,b,c){var d;null===(d=null==c?void 0:c.on)||void 0===d||d.call(c,a,b.forceUpdateFromModel)}function D(a,b,c){var d;null===(d=null==c?void 0:c.off)||void 0===d||d.call(c,a,b.forceUpdateFromModel)}var E=function(a){if(!a.feastReactMixin)throw new TypeError("castToFeastComponent called on component without a wrapper");return a};function F(a,b,c){var d;if(void 0===c)c={syncMediatorsOnRender:!1};return(d=function(b){function d(d,e){var f=b.call(this,d,e)||this;f.debug_wasMounted=!1,f.debug_wasUnmounted=!1,f.feastReactMixin=!0,f.syncMediatorsOnRender=c.syncMediatorsOnRender,f.eventsMap={},f.broadcast=function(a,b,c){if(void 0===b)b=f;f.broadcastEvent((0,h.BU)(a,b,c))},f.forceUpdateFromModel=function(a){if(f.debug)console.log("Updated from model: ",f.constructor.name,a);if(!f._debouncedRenderTimer)f._debouncedRenderTimer=window.setTimeout(f.debouncedRender,0)},f.debouncedRender=function(){f._debouncedRenderTimer=null,f.forceUpdate()},f.broadcastEvent=function(b){var c;if(f.handleInnerEvent)f.handleInnerEvent(b);if(f.debug)console.log("".concat(a," broadcast event: "),b);null===(c=f.eventsMap[b.type])||void 0===c||c.forEach(function(a){a(b)})},f.reBroadcast=function(a){var b=A(E(f).props),c=b.broadcast,d=b.remit,e=b.remitDetails;if(b.updateRemitEventsName)Object.keys(d).forEach(function(a){d[(0,h.Co)(a)]=d[a]});var g=(0,h.RV)(d[a.type]);(0,h.eP)(a,g),c((0,h.BU)(g.name,e,a))},f.domListeners=[],f.get=l,f.is=m,f.set=n,f.invert=r,f.$on=s,f.$off=t,f.vdomContains=q,f.on=o,f.off=p;var g=A(d),i=g.mediators,j=g.remit;if(i)x(a,f,i);if(f.events)(0,h.BK)(f.events,f);if(z(f,i),j)Object.keys(j).map(function(a){return f.on(a,f.reBroadcast)});return f}return i(d,b),d.prototype.logError=function(a){(0,e.coreLoggerDispatchSelfError)("fst-rct",a,{name:d.displayName,wasMounted:this.debug_wasMounted,wasUnmounted:this.debug_wasUnmounted})},d.prototype.componentDidUpdate=function(){for(var a,c=[],d=0;d<arguments.length;d++)c[d]=arguments[d];if(!c[0])this.logError(new Error("no prevProps"));var e=c[0],f=e.model,g=e.models,h=A(E(this).props),i=h.models,j=h.model;if(f!==j)D("change",this,f),C("change",this,j);if(g!==i)D(B,this,g),C(B,this,i);null===(a=b.prototype.componentDidUpdate)||void 0===a||a.call.apply(a,k([this],c,!1))},d.prototype.findDomListener=function(a,b,c){return this.domListeners.forEach(function(d){if(d.element===a&&d.eventName===b&&d.handle===c)return d}),null},d.prototype.render=function(){var a=A(E(this).props).mediators;if(this.syncMediatorsOnRender)z(this,a);return b.prototype.render.call(this)},d.prototype.componentDidMount=function(){var a,c=A(E(this).props),d=c.models;C("change",this,c.model),C(B,this,d),null===(a=b.prototype.componentDidMount)||void 0===a||a.call(this),this.debug_wasMounted=!0,this.broadcast("$mount",this)},d.prototype.componentWillUnmount=function(){var a;null===(a=b.prototype.componentWillUnmount)||void 0===a||a.call(this),window.clearTimeout(this._debouncedRenderTimer);var c=A(E(this).props),d=c.models;D("change",this,c.model),D(B,this,d),this.debug_wasUnmounted=!0,this.broadcast("$destroyed",this),this.domListeners=[]},d}(b)).displayName=a,d}},6792:function(a,b,c){"use strict";c.d(b,{C:function(){return i}});var d=c(8156),e=c(142),f=c(2312),g=function(){return(g=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++)for(var e in b=arguments[c])if(Object.prototype.hasOwnProperty.call(b,e))a[e]=b[e];return a}).apply(this,arguments)},h=function(){function a(a){var b=this;this.setMediatorProps=null,this.eventsMap={},this.vdomContains=function(){return!1},this.on=f.uN,this.off=f.hG,this.set=function(a,c){if("string"==typeof a)b.setMediatorProps(function(b){var d;return g(g({},b),((d={})[a]=c,d))});else b.setMediatorProps(function(b){return g(g({},b),a)});return b},this.broadcastEvent=function(a){var c;null===(c=b.eventsMap[a.type])||void 0===c||c.forEach(function(b){b(a)})},this.render=function(){return null},this.setMediatorProps=a.setMediatorProps}return a.prototype.updateSetCallback=function(a){this.setMediatorProps=a},a}();var i=function(a){var b,c=a.name,g=a.mediators,i=a.forRadar,j=(b=(0,d.useRef)(!1),(0,d.useEffect)(function(){return b.current=!0,function(){b.current=!1}},[]),b.current),k=(0,d.useMemo)(function(){return null==i?void 0:i.syntheticBlock()},[]),l=(0,d.useMemo)(function(){return{}},[]),m=(0,d.useCallback)(function(a){if("function"==typeof a)Object.assign(l,a(l));else Object.assign(l,a)},[]),n=(0,d.useMemo)(function(){return new h({setMediatorProps:m})},[]),o=(0,d.useState)(l),p=o[0],q=o[1];if(i)k.state=p;if(!j){if((0,f.Nh)(c,n,g),i)k.template="synthetic ".concat(c),k.name=c,(0,f._N)(i.radar,q,k);n.updateSetCallback(q)}if(i)Object.assign(k.radarContext||(k.radarContext={}),k.getChildContext());return(0,d.useEffect)(function(){return function(){n.broadcastEvent((0,e.BU)("$destroyed",n))}},[]),[p,n.broadcastEvent,k]}},9775:function(a,b,c){"use strict";c.d(b,{qa:function(){return f},U:function(){return g}});var d=c(769),e=c.n(d);function f(a){if(e().qa)return a;else return null}function g(){return e().qa}},1349:function(b){"use strict";b.exports=a},1936:function(a){"use strict";a.exports=b},9842:function(a){"use strict";a.exports=c},6366:function(a){"use strict";a.exports=d},7406:function(a){"use strict";a.exports=e},1373:function(a){"use strict";a.exports=f},4998:function(a){"use strict";a.exports=g},6093:function(a){"use strict";a.exports=h},7764:function(a){"use strict";a.exports=i},769:function(a){"use strict";a.exports=j},5261:function(a){"use strict";a.exports=k},5535:function(a){"use strict";a.exports=l},1226:function(a){"use strict";a.exports=m},8258:function(a){"use strict";a.exports=n},8242:function(a){"use strict";a.exports=o},7732:function(a){"use strict";a.exports=p},8521:function(a){"use strict";a.exports=q},7511:function(a){"use strict";a.exports=r},9979:function(a){"use strict";a.exports=s},4002:function(a){"use strict";a.exports=t},1791:function(a){"use strict";a.exports=u},1347:function(a){"use strict";a.exports=v},8796:function(a){"use strict";a.exports=w},2685:function(a){"use strict";a.exports=x},8078:function(a){"use strict";a.exports=y},7984:function(a){"use strict";a.exports=z},198:function(a){"use strict";a.exports=A},3910:function(a){"use strict";a.exports=B},894:function(a){"use strict";a.exports=C},5125:function(a){"use strict";a.exports=D},2707:function(a){"use strict";a.exports=E},3040:function(a){"use strict";a.exports=F},1559:function(a){"use strict";a.exports=G},1015:function(a){"use strict";a.exports=H},5822:function(a){"use strict";a.exports=I},1820:function(a){"use strict";a.exports=J},2269:function(a){"use strict";a.exports=K},9138:function(a){"use strict";a.exports=L},1698:function(a){"use strict";a.exports=M},9299:function(a){"use strict";a.exports=N},4707:function(a){"use strict";a.exports=O},3798:function(a){"use strict";a.exports=P},4334:function(a){"use strict";a.exports=Q},9587:function(a){"use strict";a.exports=R},1733:function(a){"use strict";a.exports=S},5041:function(a){"use strict";a.exports=T},1013:function(a){"use strict";a.exports=U},7920:function(a){"use strict";a.exports=V},3898:function(a){"use strict";a.exports=W},4149:function(a){"use strict";a.exports=X},8066:function(a){"use strict";a.exports=Y},935:function(a){"use strict";a.exports=Z},6201:function(a){"use strict";a.exports=_},6593:function(a){"use strict";a.exports=$},4821:function(a){"use strict";a.exports=aa},6359:function(a){"use strict";a.exports=ba},34:function(a){"use strict";a.exports=ca},4679:function(a){"use strict";a.exports=da},1146:function(a){"use strict";a.exports=ea},4132:function(a){"use strict";a.exports=fa},4198:function(a){"use strict";a.exports=ga},259:function(a){"use strict";a.exports=ha},5264:function(a){"use strict";a.exports=ia},3613:function(a){"use strict";a.exports=ja},7830:function(a){"use strict";a.exports=ka},1802:function(a){"use strict";a.exports=la},7632:function(a){"use strict";a.exports=ma},7094:function(a){"use strict";a.exports=na},1314:function(a){"use strict";a.exports=oa},6732:function(a){"use strict";a.exports=pa},7494:function(a){"use strict";a.exports=qa},3481:function(a){"use strict";a.exports=ra},5246:function(a){"use strict";a.exports=sa},5099:function(a){"use strict";a.exports=ta},8156:function(a){"use strict";a.exports=ua},7386:function(a){"use strict";a.exports=va},7022:function(a){"use strict";a.exports=wa},3054:function(a){"use strict";a.exports=xa},525:function(a){"use strict";a.exports=ya},7542:function(a){"use strict";a.exports=za},7996:function(a){"use strict";a.exports=Aa},7047:function(a){"use strict";a.exports=Ba},5872:function(a){"use strict";a.exports=Ca},8624:function(a){"use strict";a.exports=Da},8211:function(a){"use strict";a.exports=Ea},2152:function(a){"use strict";a.exports=Fa},2036:function(a){"use strict";a.exports=Ga},1434:function(a){"use strict";a.exports=Ha},5779:function(a){"use strict";a.exports=Ia},7353:function(a){"use strict";a.exports=Ja},8269:function(a){"use strict";a.exports=Ka},9573:function(a){"use strict";a.exports=La},7050:function(a){"use strict";a.exports=Ma},5793:function(a){"use strict";a.exports=Na},5920:function(a){"use strict";a.exports=Oa},6753:function(a){"use strict";a.exports=Pa},7115:function(a){"use strict";a.exports=Qa},735:function(a){"use strict";a.exports=Ra},9228:function(a){"use strict";a.exports=Sa},1116:function(a){"use strict";a.exports=Ta},2888:function(a){"use strict";a.exports=Ua},7771:function(a){"use strict";a.exports=Va},8383:function(a){"use strict";a.exports=Wa},9559:function(a){"use strict";a.exports=Xa},5572:function(a){"use strict";a.exports=Ya},3634:function(a){"use strict";a.exports=Za},4284:function(a){"use strict";a.exports=$a},7678:function(a){"use strict";a.exports=_a},4245:function(a){"use strict";a.exports=ab},2603:function(a){"use strict";a.exports=bb},6866:function(a){"use strict";a.exports=cb},1237:function(a){"use strict";a.exports=db},8595:function(a){"use strict";a.exports=eb},6455:function(a){"use strict";a.exports=fb},4191:function(a){"use strict";a.exports=gb},8842:function(a){"use strict";a.exports=hb},6281:function(a){"use strict";a.exports=ib},7608:function(a){"use strict";a.exports=jb},5456:function(a){"use strict";a.exports=kb},5510:function(a){"use strict";a.exports=lb},3805:function(a){"use strict";a.exports=mb},5378:function(a){"use strict";a.exports=nb},2233:function(a){"use strict";a.exports=ob},770:function(a){"use strict";a.exports=pb},6534:function(a){"use strict";a.exports=qb},3738:function(a){"use strict";a.exports=rb},8853:function(a){"use strict";a.exports=sb},3754:function(a){"use strict";a.exports=tb},2471:function(a){"use strict";a.exports=ub},3178:function(a){"use strict";a.exports=vb},6820:function(a){"use strict";a.exports=wb},9985:function(a){"use strict";a.exports=xb},6577:function(a){"use strict";a.exports=yb},6766:function(a){"use strict";a.exports=zb},3277:function(a){"use strict";a.exports=Ab},9896:function(a){"use strict";a.exports=Bb},6827:function(a){"use strict";a.exports=Cb},5483:function(a){"use strict";a.exports=Db},7641:function(a){"use strict";a.exports=Eb},9497:function(a){"use strict";a.exports=Fb},1433:function(a){"use strict";a.exports=Gb},5013:function(a){"use strict";a.exports=Hb},2258:function(a){"use strict";a.exports=Ib},604:function(a){"use strict";a.exports=Jb},8441:function(a){"use strict";a.exports=Kb},1730:function(a){"use strict";a.exports=Lb},348:function(a){"use strict";a.exports=Mb},4517:function(a){"use strict";a.exports=Nb},5207:function(a){"use strict";a.exports=Ob},5135:function(a){"use strict";a.exports=Pb},7770:function(a){"use strict";a.exports=Qb},8028:function(a){"use strict";a.exports=Rb},973:function(a){"use strict";a.exports=Sb},3248:function(a){"use strict";a.exports=Tb},7400:function(a){"use strict";a.exports=Ub},9834:function(a){"use strict";a.exports=Vb},3316:function(a){"use strict";a.exports=Wb},9604:function(a){"use strict";a.exports=Xb},6465:function(a){"use strict";a.exports=Yb},7863:function(a){"use strict";a.exports=Zb},9330:function(a){"use strict";a.exports=$b},4312:function(a){"use strict";a.exports=_b},748:function(a){"use strict";a.exports=ac},6146:function(a){"use strict";a.exports=bc},9386:function(a){"use strict";a.exports=cc},5293:function(a){"use strict";a.exports=dc},7611:function(a){"use strict";a.exports=ec},2590:function(a){"use strict";a.exports=fc},7596:function(a){"use strict";a.exports=gc},5250:function(a){"use strict";a.exports=hc},1286:function(a){"use strict";a.exports=ic}},mc={};function nc(a){var b=mc[a];if(void 0!==b)return b.exports;var c=mc[a]={id:a,loaded:!1,exports:{}};return lc[a].call(c.exports,c,c.exports,nc),c.loaded=!0,c.exports}nc.n=function(a){var b=a&&a.__esModule?function(){return a.default}:function(){return a};return nc.d(b,{a:b}),b},kc=Object.getPrototypeOf?function(a){return Object.getPrototypeOf(a)}:function(a){return a.__proto__},nc.t=function(a,b){if(1&b)a=this(a);if(8&b)return a;if("object"==typeof a&&a){if(4&b&&a.__esModule)return a;if(16&b&&"function"==typeof a.then)return a}var c=Object.create(null);nc.r(c);var d={};jc=jc||[null,kc({}),kc([]),kc(kc)];for(var e=2&b&&a;"object"==typeof e&&!~jc.indexOf(e);e=kc(e))Object.getOwnPropertyNames(e).forEach(function(b){d[b]=function(){return a[b]}});return d.default=function(){return a},nc.d(c,d),c},nc.d=function(a,b){for(var c in b)if(nc.o(b,c)&&!nc.o(a,c))Object.defineProperty(a,c,{enumerable:!0,get:b[c]})},nc.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(a){if("object"==typeof window)return window}}(),nc.o=function(a,b){return Object.prototype.hasOwnProperty.call(a,b)},nc.r=function(a){if("undefined"!=typeof Symbol&&Symbol.toStringTag)Object.defineProperty(a,Symbol.toStringTag,{value:"Module"});Object.defineProperty(a,"__esModule",{value:!0})},nc.nmd=function(a){if(a.paths=[],!a.children)a.children=[];return a};var oc={};return function(){"use strict";nc.r(oc),nc.d(oc,{default:function(){return yv}});var a,b,c,d,e,f=nc(7406),g=nc(8156),h=nc.n(g),i={title:i18n("Ошибка при сохранении файлов"),close:i18n("Закрыть")},j=nc(8163),k=nc(1373),l=nc.n(k),m=nc(5881),n=nc(8242),o=nc(7732),p=nc(9979),q=nc(5261),r=nc.n(q),s=nc(1791),t=nc(5041),u=nc(1226),v=nc(8258),w=nc(5793),x=nc.n(w),y=[v.LetterFastActionType.archive,v.LetterFastActionType.unread,v.LetterFastActionType.remove],z=function(a,b){var c=v.LetterFastActionType.archive;if(a===v.LetterFastActionType.unread)c="read";if(a===v.LetterFastActionType.remove)c="delete";return"https://img.imgsmail.ru/hb/e.mail.ru/static/settings/letters-fast-action-settings/"+c+(x().getSelectedModel().isDarkMode()?"_dark":"")+(b?"-hidpi":"")+".png"},A=function(a){var b=a;if(!b){var c=(0,u.getFastActionReal)();if(!c||c===v.LetterFastActionType.settings)b=v.LetterFastActionType.unread;else b=c}var d=new Image;d.src=z(b),d.srcset="".concat(z(b,!0)," 2x")},B="_2ve7yX_xk8E4tIfjUsqzWI",C="lsNDhqYXKed-lFu-H8CbF",D=function(a){var b=a.onClick;return h().createElement("button",{className:B,onClick:b},h().createElement("span",{className:C},h().createElement(f.Icon,{icon:t.UNION_CHEVRON_DOWN_OUTLINE_28})))},E=nc(7747),F="_6-Tcbp_vMMDn6pPmvN8c3",G="_2Zz2QtC6bDrhrH1hTzxsm5",H="_26O209NOZ1b6w_aJ1KGCCI",I="_1suaejNwTAR5Eq-jlkfIQX",J="_3SUa5Dm7FghR_bow4viGt8",K="_3-RLjw3JtqfFYJr5m9Pm2t",L="_30o2c--oE5lIg-HwovltBI",M="_2ikpJBuyMJg1cYXaWh475h",N="_1xNzla9vL5cG0ZMEelkEeT",O=nc(1698),P=nc.n(O),Q=s.LOGOUT_URL+(s.LOGOUT_REDIRECT_URL?"&page=".concat(s.LOGOUT_REDIRECT_URL):""),R=function(){return(R=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++)for(var e in b=arguments[c])if(Object.prototype.hasOwnProperty.call(b,e))a[e]=b[e];return a}).apply(this,arguments)},S=r().get("initialUser"),T=s.DEFAULT_AVATAR_SRC+"&email=",U=function(a){if(!(null==a?void 0:a.fullName))return T+(null==a?void 0:a.email);else return T+(null==a?void 0:a.email)+"&name="+(null==a?void 0:a.fullName)},V=function(){return l().sendImmediately("mobile-account-dock_profile-open")},W=function(){return l().sendImmediately("mobile-account-dock_account-change")},X=function(){return l().sendImmediately("mobile-account-dock_settings-open")},Y=function(){return l().sendImmediately("mobile-account-dock_account-add_click")},Z=function(){return l().sendImmediately("mobile-account-dock_touch-redirect_click")},_=function(){return l().sendImmediately("mobile-account-dock_contacts_click")},$=s.MOBILE_ADDRESSBOOK_URL+"?mv=1",aa=function(a){var b=a.onClose,c=(0,j.useGlobalStateSelector)(n.getOtherAccounts),d=(0,j.useGlobalStateSelector)(n.getCurrentAccount);(0,g.useEffect)(function(){return A(),function(){l().send("mobile-account-dock_close")}},[]);var e,i,k,q,r=(e=null==d?void 0:d.email,i=(0,g.useCallback)(function(){(0,o.resetSnackbar)()},[]),k=(0,g.useCallback)(function(){l().sendImmediately("mobile-account-dock_logout"),i(),P()(Q,O.OpenerTarget.self)},[i]),q=(0,g.useMemo)(function(){return h().createElement(E.Z,null,function(a){var b=a.Alert;return h().createElement(b,{actions:[{title:i18n("Отмена"),autoClose:!0,mode:"default"},{title:i18n("Выйти"),autoClose:!0,mode:"destructive",action:k}],actionsLayout:"horizontal",onClose:i,header:e,text:i18n("Выйти из учётной записи?")})})},[e,i,k]),(0,g.useCallback)(function(){if(s.DISABLE_MOBILE_ACCOUNT_LOGOUT_ALERT)k();else l().send("mobile-account-dock_logout-alert_open"),(0,o.setSnackbar)(q)},[q,k])),u=(0,g.useCallback)(function(){l().send("mobile-account-dock_csat_click"),b(),Promise.resolve().then(nc.t.bind(nc,7542,23)).then(function(a){return a.default}).then(function(a){return a.instance}).then(function(a){return a.forceShowSurvey(s.MOBILE_CSAT)}).catch(function(){(0,m.coreLoggerDispatchError)(new Error("Fetch feedback module error"),m.Tag.API)})},[b]);return h().createElement(E.Z,null,function(b){var e,g=b.ModalPage,i=b.SimpleCell,j=b.Counter,k=b.Separator,l=b.Spacing,m=b.Avatar;return h().createElement(g,R({},a,{onClose:a.onClose,header:h().createElement(D,{onClick:a.onClose})}),h().createElement("div",null,h().createElement("a",{key:null==d?void 0:d.email,href:(null==S?void 0:S.email)!==(null==d?void 0:d.email)?s.ACCOUNT_CHANGE_URL+(null==d?void 0:d.email):"",onClick:W},h().createElement(i,{disabled:(null==S?void 0:S.email)===(null==d?void 0:d.email),before:h().createElement(m,{size:48,src:U(d)}),subtitle:null==d?void 0:d.email},h().createElement("span",{className:J},null==d?void 0:d.fullName))),h().createElement(l,{size:6}),!s.DISABLE_MOBILE_ACCOUNT_PROFILE&&h().createElement("a",{href:s.PROFILE_URL,onClick:V},h().createElement(i,null,h().createElement("div",{className:F},h().createElement("span",{className:G},h().createElement(f.Icon,{icon:t.UNION_USER_OUTLINE_20})),h().createElement("span",null,i18n("Личные данные"))))),!s.DISABLE_MOBILE_ACCOUNT_SECURITY&&h().createElement("a",{href:s.SECURITY_URL,onClick:X},h().createElement(i,null,h().createElement("div",{className:F},h().createElement("span",{className:G},h().createElement(f.Icon,{icon:t.UNION_LOCK_OUTLINE_20})),h().createElement("span",null,i18n("Пароль и безопасность"))))),!s.DISABLE_MOBILE_CONTACTS&&h().createElement("a",{href:$,onClick:_},h().createElement(i,null,h().createElement("div",{className:F},h().createElement("span",{className:G},h().createElement(f.Icon,{icon:t.UNION_USER_SQUARE_OUTLINE_20})),h().createElement("span",null,i18n("Контакты"))))),h().createElement(i,{onClick:function(){return(0,o.pushModal)(p.ModalPages.letterFastActionSettings)}},h().createElement("div",{className:F},h().createElement("span",{className:G},h().createElement(f.Icon,{icon:t.UNION_FAVORITE_OUTLINE_20})),h().createElement("span",null,i18n("Быстрые действия")))),s.USE_NEW_MOBILE_FOLDERS_MODAL&&h().createElement(i,{onClick:function(){return(0,o.pushModal)({id:p.ModalPages.foldersSettings,data:a.data})}},h().createElement("div",{className:F},h().createElement("span",{className:G},h().createElement(f.Icon,{icon:t.UNION_FOLDER_OUTLINE_20})),h().createElement("span",null,i18n("Папки")))),h().createElement(i,{onClick:r},h().createElement("div",{className:F},h().createElement("span",{className:G},h().createElement(f.Icon,{icon:t.UNION_DOOR_ARROW_RIGHT_OUTLINE_20})),h().createElement("span",null,i18n("Выйти"))))),!s.DISABLE_MOBILE_ACCOUNT_CHANGE_AND_ADD&&h().createElement(h().Fragment,null,h().createElement(l,{size:16}),(null===(e=null==d?void 0:d.children)||void 0===e?void 0:e.length)>0&&h().createElement("div",null,h().createElement("div",{className:L},i18n("Детские почтовые ящики")),d.children.map(function(a){return h().createElement("a",{key:a.email,href:(null==S?void 0:S.email)!==a.email?s.ACCOUNT_CHANGE_URL+a.email:"",onClick:W},h().createElement(i,{disabled:(null==S?void 0:S.email)===a.email,className:H,before:h().createElement(m,{size:48,src:U(a)},h().createElement(m.Badge,null,h().createElement("div",{className:M},h().createElement(f.Icon,{icon:t.UNION_HORSE_TOY_OUTLINE_20})))),after:a.count>0&&h().createElement(j,{mode:"primary"},h().createElement("span",{className:I},a.count)),subtitle:a.email},h().createElement("span",{className:J},a.fullName)))})),h().createElement(l,null),h().createElement(k,null),h().createElement(l,{size:12}),h().createElement("div",null,c.map(function(a){return h().createElement("a",{key:a.email,href:s.ACCOUNT_CHANGE_URL+a.email,onClick:W},h().createElement(i,{className:H,before:h().createElement(m,{size:48,src:U(a)}),after:a.count>0&&h().createElement(j,{mode:"primary"},h().createElement("span",{className:I},a.count)),subtitle:a.email},h().createElement("span",{className:J},a.fullName)))}),h().createElement("a",{href:s.LOGIN_URL,onClick:Y},h().createElement(i,{before:h().createElement(m,{size:48,className:K,withBorder:!1},h().createElement(f.Icon,{icon:t.UNION_ADD_20}))},i18n("Добавить аккаунт")))),(s.ENABLE_OPEN_TOUCH||s.ENABLE_MOBILE_CSAT)&&h().createElement(h().Fragment,null,h().createElement(l,{size:10}),h().createElement(k,null),h().createElement(l,{size:10})),s.ENABLE_OPEN_TOUCH&&h().createElement("a",{href:s.TOUCH_URL,onClick:Z},h().createElement(i,null,h().createElement("div",{className:F},h().createElement("span",{className:G},h().createElement(f.Icon,{icon:t.UNION_ARROW_UTURN_LEFT_OUTLINE_20})),h().createElement("span",{className:N},i18n("Перейти в старую версию"))))),s.ENABLE_MOBILE_CSAT&&h().createElement(i,{onClick:u},h().createElement("div",{className:F},h().createElement("span",{className:G},h().createElement(f.Icon,{icon:t.UNION_MESSAGE_OUTLINE_20})),h().createElement("span",{className:N},i18n("Оставить отзыв")))),(s.ENABLE_OPEN_TOUCH||s.ENABLE_MOBILE_CSAT)&&h().createElement(l,{size:10})))})},ba=nc(4184),ca=nc.n(ba),da="_2DuBfto-XbFgBB7jA-SEgn",ea="YHziy8PL3svFrkypcrlrt",fa="_1wKDuGpSBaf5FGUQlz3_23",ga="_2O5l0pEqLgDOdXsU1kbpi0",ha="_181ioJY6x3hE1wEID1tAce",ia="_1sffr8cSZ156jZ5eSUhFby",ja=function(a){var b,c=a.title,d=a.negativeButtonText,e=a.positiveButtonText,g=a.unknownButtonText,i=a.disabled,j=a.small,k=a.indented,l=a.onPositiveClick,m=a.onNegativeClick,n=a.onUnknownClick,o=ca()(((b={})[da]=!0,b[ha]=j,b[ia]=j&&k,b));return h().createElement(E.Z,null,function(a){var b=a.Button;return h().createElement("div",{className:o},h().createElement("div",{className:ea},h().createElement(f.Text,{secondary:!0,text:c})),h().createElement("div",{className:fa},h().createElement(b,{onClick:m,disabled:i,mode:"secondary",appearance:"neutral",size:"s"},d),h().createElement("div",{className:ga}),!!g&&h().createElement(h().Fragment,null,h().createElement(b,{onClick:n,disabled:i,mode:"secondary",appearance:"neutral",size:"s"},h().createElement(f.Text,{text:g,mode:"small"})),h().createElement("div",{className:ga})),h().createElement(b,{onClick:l,disabled:i,mode:"secondary",appearance:"neutral",size:"s"},e)))})},ka="_2V7LTszlTINOh3CSVOQfgq",la="_10uBzyD3XY00dgex_ehMnA",ma="pVdU5AdXYDsvEp4hoDuFG",na="_3b_tW5VKCs76_dYO9ZQ9Hs",oa="_2FSFbDla5oQAn2yQ7xcT8P",pa="_2VZ0EY32IZhrTr-9mcUA08",qa="_2mVf7d9ZpxUMYYij7Lj7Z3",ra=function(a){var b,c,d=a.small,e=a.indented,g=a.onNotInterestingClick,i=a.onAlreadyPurchasedClick,j=a.onOtherClick,k=a.onCancelClick,l=ca()(((b={})[ka]=!0,b[la]=d,b[ma]=d&&e,b)),m=ca()(((c={})[pa]=!0,c[qa]=d,c));return h().createElement("div",{className:l},h().createElement(E.Z,null,function(a){var b=a.Button;return h().createElement("div",{className:na},h().createElement(b,{onClick:k,size:"s",mode:"tertiary",before:h().createElement("div",{style:{display:"flex"}},h().createElement(f.Icon,{icon:t.ACTIONS_CLOSE}))}))}),h().createElement("div",{className:m},h().createElement("span",{onClick:g,className:oa},i18n("Не интересует тема")),h().createElement("span",{onClick:i,className:oa},i18n("Уже куплено")),h().createElement("span",{onClick:j,className:oa},i18n("Иная причина"))))},sa=nc(9842),ta=nc(6753),ua={TODAY:ta.SearchDatesTypes.TODAY,YESTERDAY:ta.SearchDatesTypes.YESTERDAY,WEEK:ta.SearchDatesTypes.WEEK,MONTH:ta.SearchDatesTypes.MONTH,MONTHS:ta.SearchDatesTypes.MONTHS,YEARS:ta.SearchDatesTypes.YEARS,UNREAD:sa.OperandFilterTypes.UNREAD,FLAGGED:sa.OperandFilterTypes.FLAGGED,ATTACH:sa.OperandFilterTypes.ATTACH,FROM:sa.OperandQueryTypes.FROM,TO:sa.OperandQueryTypes.TO,SUBJECT:sa.OperandQueryTypes.SUBJECT,QUERY:sa.OperandQueryTypes.QUERY,STATUS_DONE:"STATUS_DONE",DOCUMENT_SCANS:sa.CategoryTypes.DOCUMENT_SCANS,ORDER:sa.CategoryTypes.ORDER,FINANCE:sa.CategoryTypes.FINANCE,REGISTRATION:sa.CategoryTypes.REGISTRATION,TRAVEL:sa.CategoryTypes.TRAVEL,EVENT:sa.CategoryTypes.EVENT,FEES:sa.CategoryTypes.FEES,OFFICIAL_LETTERS:sa.CategoryTypes.OFFICIAL,SCHOOL_LETTERS:sa.CategoryTypes.SCHOOL,GAMES_LETTERS:sa.CategoryTypes.GAMES,TAGGED_PERSONAL:sa.ColorTagTypes.TAGGED_PERSONAL,TAGGED_DOCUMENTS:sa.ColorTagTypes.TAGGED_DOCUMENTS,TAGGED_IMPORTANT:sa.ColorTagTypes.TAGGED_IMPORTANT,TAGGED_URGENT:sa.ColorTagTypes.TAGGED_URGENT,TAGGED_NEEDS_REPLY:sa.ColorTagTypes.TAGGED_NEEDS_REPLY,STATUS_TAG:"STATUS_TAG",COLOR_TAG_SUGGEST_LIGHT:"COLOR_TAG_SUGGEST_LIGHT",COLOR_TAG_SUGGEST_DARK:"COLOR_TAG_SUGGEST_DARK",CALENDAR:"CALENDAR",FOLDER:"FOLDER",FOLDER_ARCHIVE:"FOLDER_ARCHIVE",FOLDER_SENT:"FOLDER_SENT",FOLDER_DRAFTS:"FOLDER_DRAFTS",FOLDER_TEMPLATES:"FOLDER_TEMPLATES",FOLDER_SPAM:"FOLDER_SPAM",FOLDER_TRASH:"FOLDER_TRASH",FOLDER_USER:"FOLDER_USER",FOLDER_INBOX:"FOLDER_INBOX",FOLDER_SECRET_CLOSED:"FOLDER_SECRET_CLOSED",FOLDER_SECRET_OPEN:"FOLDER_SECRET_OPEN",FOLDER_SOCIAL:"FOLDER_SOCIAL",FOLDER_NEWSLETTERS:"FOLDER_NEWSLETTERS",FOLDER_TOMYSELF:"FOLDER_TOMYSELF",FOLDER_NEWS:"FOLDER_NEWS",FOLDER_OFFICIAL:"FOLDER_OFFICIAL",FOLDER_RECEIPTS:"FOLDER_RECEIPTS",FOLDER_SCHOOL:"FOLDER_SCHOOL",FOLDER_GAMES:"FOLDER_GAMES",FOLDER_OUTBOX:"FOLDER_OUTBOX",COMPOSE:"COMPOSE",FOLDER_PARENTAL_CONTROL:"FOLDER_PARENTAL_CONTROL",FOLDER_CHILD_TRASH:"FOLDER_CHILD_TRASH",SEARCH_IN:"search",KASPERSKY_LOGO_RUS:"KASPERSKY_LOGO_RUS",KASPERSKY_LOGO_ENG:"KASPERSKY_LOGO_ENG",KASPERSKY_LOGO_ALTER_RUS:"KASPERSKY_LOGO_ALTER_RUS",KASPERSKY_LOGO_ALTER_ENG:"KASPERSKY_LOGO_ALTER_ENG",NAVIGATION_MORE:"NAVIGATION_MORE",NAVIGATION_MORE_VERTICAL:"NAVIGATION_MORE_VERTICAL",ACTIONS_CLOSE_BIG:"ACTIONS_CLOSE_BIG",NAVIGATION_ARROW_LIST_PREVIOUS:"NAVIGATION_ARROW_LIST_PREVIOUS"},va="ATTACH_ANDROID",wa="ATTACH_AUDIO",xa="ATTACH_CALENDAR",ya="ATTACH_CHART",za="ATTACH_DOC",Aa="ATTACH_EBOOK",Ba="ATTACH_EXE",Ca="ATTACH_VIRUS",Da="ATTACH_HTML",Ea="ATTACH_JSON",Fa="ATTACH_MAIL",Ga="ATTACH_MARKDOWN",Ha="ATTACH_PICTURE",Ia="ATTACH_PLAYLIST",Ja="ATTACH_PRESENTATION",Ka="ATTACH_PDF",La="ATTACH_PSD",Ma="ATTACH_SKETCH",Na="ATTACH_SOURCE",Oa="ATTACH_SPREADSHEET",Pa="ATTACH_TEXT",Qa="ATTACH_UNKNOWN",Ra="ATTACH_VCARD",Sa="ATTACH_VIDEO",Ta="ATTACH_WEBFEED",Ua="THUMB_ANDROID_PACKAGE",Va="THUMB_ARCHIVE",Wa="THUMB_AUDIO",Xa="THUMB_CALEDAR",Ya="THUMB_CARD",Za="THUMB_CHART",$a="THUMB_DOCUMENT",_a="THUMB_EBOOK",ab="THUMB_EMAIL",bb="THUMB_EXCEL_ONLINE",cb="THUMB_EXE",db="THUMB_FOLDER_CAMERA",eb="THUMB_FOLDER_SHARED",fb="THUMB_FOLDER_VIRUS",gb="THUMB_FOLDER",hb="THUMB_HTML",ib="THUMB_JSON",jb="THUMB_MARKDOWN",kb="THUMB_PDF",lb="THUMB_PHOTOSHOP",mb="THUMB_PICTURE",nb="THUMB_PLAIN_TEXT",ob="THUMB_PLAYLIST",pb="THUMB_POWERPOINT_ONLINE",qb="THUMB_PRESENTATION",rb="THUMB_SOURCE",sb="THUMB_SPREADSHEET",tb="THUMB_UNKNOWN",ub="THUMB_VIDEO",vb="THUMB_WEB_FEED",wb="THUMB_VIRUS",xb="THUMB_WORD_ONLINE",yb="ACTIONS_TO_CLOUD",zb="ACTIONS_DOWNLOAD_ALT",Ab="LINK",Bb="WARNING",Cb="EMPTY_FOLDER",Db="TRASH",Eb="SPAM",Fb="LOCK",Gb="NO_SEARCH",Hb="NO_TEMPLATES",Ib="NO_SELECT",Jb="NO_LETTER",Kb=function(){return(Kb=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++)for(var e in b=arguments[c])if(Object.prototype.hasOwnProperty.call(b,e))a[e]=b[e];return a}).apply(this,arguments)},Lb=((a={})["ATTACH_ARCHIVE"]=t.ATTACH_ARCHIVE,a[va]=t.ATTACH_ANDROID,a[wa]=t.ATTACH_AUDIO,a[xa]=t.ATTACH_CALENDAR,a[ya]=t.ATTACH_CHART,a[za]=t.ATTACH_DOC,a[Aa]=t.ATTACH_EBOOK,a[Ba]=t.ATTACH_EXE,a[Ca]=t.ATTACH_VIRUS,a[Da]=t.ATTACH_HTML,a[Ea]=t.ATTACH_JSON,a[Fa]=t.ATTACH_MAIL,a[Ga]=t.ATTACH_MARKDOWN,a[Ha]=t.ATTACH_PICTURE,a[Ia]=t.ATTACH_PLAYLIST,a[Ja]=t.ATTACH_PRESENTATION,a[Ka]=t.ATTACH_PDF,a[La]=t.ATTACH_PSD,a[Ma]=t.ATTACH_SKETCH,a[Na]=t.ATTACH_SOURCE,a[Oa]=t.ATTACH_SPREADSHEET,a[Pa]=t.ATTACH_TEXT,a[Qa]=t.ATTACH_UNKNOWN,a[Ra]=t.ATTACH_VCARD,a[Sa]=t.ATTACH_VIDEO,a[Ta]=t.ATTACH_WEBFEED,a),Mb=((b={})[Cb]=t.EMPTY_FOLDER_PLACEHOLDER,b[Db]=t.TRASH_PLACEHOLDER,b[Eb]=t.SPAM_PLACEHOLDER,b[Fb]=t.LOCK_PLACEHOLDER,b[Gb]=t.NO_SEARCH_PLACEHOLDER,b[Hb]=t.NO_TEMPLATES_PLACEHOLDER,b[Ib]=t.NO_SELECT_PLACEHOLDER,b[Jb]=t.NO_LETTER_PLACEHOLDER,b),Nb=((c={})[ua.UNREAD]=t.STATUS_UNREAD,c[ua.FLAGGED]=t.ACTIONS_FAVORITE_ON,c[ua.ATTACH]=t.STATUS_ATTACH,c[ua.DOCUMENT_SCANS]=t.CATEGORIES_SCAN,c[ua.ORDER]=t.NAVIGATION_CART,c[ua.FINANCE]=t.CATEGORIES_CURRENCY_ROUBLE,c[ua.REGISTRATION]=t.CATEGORIES_ACCESS,c[ua.TRAVEL]=t.CATEGORIES_FLIGHT,c[ua.EVENT]=t.CATEGORIES_TICKET,c[ua.FEES]=t.CATEGORIES_GOVERNMENT,c[ua.OFFICIAL_LETTERS]=t.CATEGORIES_GOVERNMENT,c[ua.SCHOOL_LETTERS]=t.CATEGORIES_SCHOOL,c[ua.GAMES_LETTERS]=t.CATEGORIES_GAMES,c[ua.TAGGED_DOCUMENTS]=t.COLOR_TAG,c[ua.TAGGED_IMPORTANT]=t.COLOR_TAG,c[ua.TAGGED_NEEDS_REPLY]=t.COLOR_TAG,c[ua.TAGGED_PERSONAL]=t.COLOR_TAG,c[ua.TAGGED_URGENT]=t.COLOR_TAG,c[ua.CALENDAR]=t.NAVIGATION_CALENDAR_MONTH,c[ua.STATUS_TAG]=t.STATUS_TAG,c[ua.COLOR_TAG_SUGGEST_LIGHT]=t.COLOR_TAG_SUGGEST_LIGHT,c[ua.COLOR_TAG_SUGGEST_DARK]=t.COLOR_TAG_SUGGEST_DARK,c[ua.FOLDER]=t.NAVIGATION_FOLDER,c[ua.FOLDER_INBOX]=t.CATEGORIES_MAIL,c[ua.FOLDER_USER]=t.NAVIGATION_FOLDER,c[ua.FOLDER_TEMPLATES]=t.NAVIGATION_FOLDER,c[ua.FOLDER_SECRET_CLOSED]=t.STATUS_LOCK_OFF,c[ua.FOLDER_ARCHIVE]=t.NAVIGATION_ARCHIVE,c[ua.FOLDER_SENT]=t.ACTIONS_REPLY,c[ua.FOLDER_DRAFTS]=t.CATEGORIES_DRAFTS,c[ua.FOLDER_SPAM]=t.ACTIONS_DISLIKE,c[ua.FOLDER_TRASH]=t.ACTIONS_DELETE,c[ua.COMPOSE]=t.ACTIONS_COMPOSE,c[ua.FOLDER_SECRET_OPEN]=t.STATUS_LOCK_ON,c[ua.FOLDER_SOCIAL]=t.NAVIGATION_USERS,c[ua.FOLDER_NEWSLETTERS]=t.CATEGORIES_MAILINGS,c[ua.FOLDER_OUTBOX]=t.STATUS_TIME,c[ua.FOLDER_TOMYSELF]=t.CATEGORIES_SELF_MAIL,c[ua.FOLDER_NEWS]=t.CATEGORIES_SUBSCRIPTIONS,c[ua.FOLDER_OFFICIAL]=t.CATEGORIES_GOVERNMENT,c[ua.FOLDER_RECEIPTS]=t.CATEGORIES_RECEIPTS,c[ua.FOLDER_SCHOOL]=t.CATEGORIES_SCHOOL,c[ua.FOLDER_GAMES]=t.CATEGORIES_GAMES,c[ua.FOLDER_PARENTAL_CONTROL]=t.NAVIGATION_TIP,c[ua.FOLDER_CHILD_TRASH]=t.ACTIONS_DELETE,c[ua.KASPERSKY_LOGO_RUS]=t.KASPERSKY_LOGO_RUS,c[ua.KASPERSKY_LOGO_ENG]=t.KASPERSKY_LOGO_ENG,c[ua.KASPERSKY_LOGO_ALTER_RUS]=t.KASPERSKY_LOGO_ALTER_RUS,c[ua.KASPERSKY_LOGO_ALTER_ENG]=t.KASPERSKY_LOGO_ALTER_ENG,c[ua.NAVIGATION_MORE]=t.NAVIGATION_MORE,c[ua.NAVIGATION_MORE_VERTICAL]=t.NAVIGATION_MORE_VERTICAL,c[ua.NAVIGATION_ARROW_LIST_PREVIOUS]=t.NAVIGATION_ARROW_LIST_PREVIOUS,c[ua.ACTIONS_CLOSE_BIG]=t.ACTIONS_CLOSE_BIG,c[ua.STATUS_DONE]=t.STATUS_DONE,c),Ob=Kb(Kb({},Nb),((d={})[ua.FLAGGED]=t.ACTIONS_FAVORITE_S,d[ua.ATTACH]=t.STATUS_ATTACH_S,d[ua.DOCUMENT_SCANS]=t.CATEGORIES_SCAN_S,d[ua.ORDER]=t.NAVIGATION_CART_S,d[ua.REGISTRATION]=t.CATEGORIES_ACCESS_S,d[ua.TRAVEL]=t.CATEGORIES_FLIGHT_S,d[ua.EVENT]=t.CATEGORIES_TICKET_S,d[ua.FEES]=t.CATEGORIES_GOVERNMENT_S,d[ua.OFFICIAL_LETTERS]=t.CATEGORIES_GOVERNMENT_S,d[ua.SCHOOL_LETTERS]=t.CATEGORIES_SCHOOL_S,d[ua.GAMES_LETTERS]=t.CATEGORIES_GAMES_S,d[ua.FOLDER]=t.NAVIGATION_FOLDER_S,d[ua.FOLDER_INBOX]=t.CATEGORIES_MAIL_S,d[ua.FOLDER_USER]=t.NAVIGATION_FOLDER_S,d[ua.FOLDER_TEMPLATES]=t.NAVIGATION_FOLDER_S,d[ua.FOLDER_SECRET_CLOSED]=t.STATUS_LOCK_OFF,d[ua.FOLDER_ARCHIVE]=t.NAVIGATION_ARCHIVE_S,d[ua.FOLDER_SENT]=t.ACTIONS_REPLY_S,d[ua.FOLDER_DRAFTS]=t.CATEGORIES_DRAFTS_S,d[ua.FOLDER_SPAM]=t.ACTIONS_DISLIKE_S,d[ua.FOLDER_TRASH]=t.ACTIONS_DELETE_S,d[ua.FOLDER_SECRET_OPEN]=t.STATUS_LOCK_ON,d[ua.FOLDER_SOCIAL]=t.NAVIGATION_USERS_S,d[ua.FOLDER_NEWSLETTERS]=t.CATEGORIES_MAILINGS_S,d[ua.FOLDER_NEWS]=t.CATEGORIES_SUBSCRIPTIONS_S,d[ua.FOLDER_OFFICIAL]=t.CATEGORIES_GOVERNMENT_S,d[ua.FOLDER_RECEIPTS]=t.CATEGORIES_RECEIPTS,d[ua.FOLDER_SCHOOL]=t.CATEGORIES_SCHOOL_S,d[ua.FOLDER_GAMES]=t.CATEGORIES_GAMES_S,d[ua.FOLDER_OUTBOX]=t.STATUS_TIME_S,d[ua.FOLDER_PARENTAL_CONTROL]=t.NAVIGATION_TIP_S,d[ua.FOLDER_CHILD_TRASH]=t.ACTIONS_DELETE_S,d)),Pb=((e={})[Ua]=t.THUMB_ANDROID_PACKAGE,e[Va]=t.THUMB_ARCHIVE,e[Wa]=t.THUMB_AUDIO,e[Xa]=t.THUMB_CALEDAR,e[Ya]=t.THUMB_CARD,e[Za]=t.THUMB_CHART,e[$a]=t.THUMB_DOCUMENT,e[_a]=t.THUMB_EBOOK,e[ab]=t.THUMB_EMAIL,e[bb]=t.THUMB_EXCEL_ONLINE,e[cb]=t.THUMB_EXE,e[db]=t.THUMB_FOLDER_CAMERA,e[eb]=t.THUMB_FOLDER_SHARED,e[fb]=t.THUMB_FOLDER_VIRUS,e[gb]=t.THUMB_FOLDER,e[hb]=t.THUMB_HTML,e[ib]=t.THUMB_JSON,e[jb]=t.THUMB_MARKDOWN,e[kb]=t.THUMB_PDF,e[lb]=t.THUMB_PHOTOSHOP,e[mb]=t.THUMB_PICTURE,e[nb]=t.THUMB_PLAIN_TEXT,e[ob]=t.THUMB_PLAYLIST,e[pb]=t.THUMB_POWERPOINT_ONLINE,e[qb]=t.THUMB_PRESENTATION,e[rb]=t.THUMB_SOURCE,e[sb]=t.THUMB_SPREADSHEET,e[tb]=t.THUMB_UNKNOWN,e[ub]=t.THUMB_VIDEO,e[vb]=t.THUMB_WEB_FEED,e[wb]=t.THUMB_VIRUS,e[xb]=t.THUMB_WORD_ONLINE,e[yb]=t.ACTIONS_CLOUD_UPLOAD,e[zb]=t.ACTIONS_DOWNLOAD_ALT,e[Ab]=t.STATUS_LINK,e[Bb]=t.STATUS_WARNING_ROUND,e);function Qb(a){var b="FOLDER_"+a.get("type").toUpperCase(),c=ua[b];if("archive"===c&&!a.isArchive())c=ua.FOLDER_USER;if(a.isArchive())c=ua.FOLDER_ARCHIVE;return c||ua.FOLDER}var Rb,Sb={asx:"THUMB_PLAYLIST",m3u:"THUMB_PLAYLIST",m3u8:"THUMB_PLAYLIST",playlist:"THUMB_PLAYLIST",virus:"THUMB_VIRUS",odc:"THUMB_CHART",otc:"THUMB_CHART",chart:"THUMB_CHART",cb7:"THUMB_EBOOK",cbr:"THUMB_EBOOK",cba:"THUMB_EBOOK",cbt:"THUMB_EBOOK",cbz:"THUMB_EBOOK",djv:"THUMB_EBOOK",djvu:"THUMB_EBOOK",ebook:"THUMB_EBOOK",fb2:"THUMB_EBOOK",epub:"THUMB_EBOOK",mad:"THUMB_MARKDOWN",markdown:"THUMB_MARKDOWN","android-package":"THUMB_ANDROID_PACKAGE",apk:"THUMB_ANDROID_PACKAGE",rss:"THUMB_WEB_FEED","web-feed":"THUMB_WEB_FEED",ics:"THUMB_CALEDAR",ifb:"THUMB_CALEDAR",vcs:"THUMB_CALEDAR",calendar:"THUMB_CALEDAR",ldif:"THUMB_CARD",vcard:"THUMB_CARD",vcf:"THUMB_CARD",card:"THUMB_CARD",folder:"THUMB_FOLDER","folder-camera":"THUMB_FOLDER_CAMERA","folder-shared":"THUMB_FOLDER_SHARED","folder-mounted":"THUMB_FOLDER_SHARED","folder-virus":"THUMB_FOLDER_VIRUS",chm:"THUMB_HTML",mathml:"THUMB_HTML",mht:"THUMB_HTML",mhtml:"THUMB_HTML",mml:"THUMB_HTML",htm:"THUMB_HTML",html:"THUMB_HTML",xhtml:"THUMB_HTML",apng:"THUMB_PICTURE",hdp:"THUMB_PICTURE",ico:"THUMB_PICTURE",j2k:"THUMB_PICTURE",jp2:"THUMB_PICTURE",jpe:"THUMB_PICTURE",jpf:"THUMB_PICTURE",jpm:"THUMB_PICTURE",jpx:"THUMB_PICTURE",jxr:"THUMB_PICTURE",svg:"THUMB_PICTURE",svgz:"THUMB_PICTURE",wdp:"THUMB_PICTURE",webp:"THUMB_PICTURE",jpg:"THUMB_PICTURE",jpeg:"THUMB_PICTURE",gif:"THUMB_PICTURE",bmp:"THUMB_PICTURE",tif:"THUMB_PICTURE",tiff:"THUMB_PICTURE",png:"THUMB_PICTURE",heic:"THUMB_PICTURE",tga:"THUMB_PICTURE",ai:"THUMB_PICTURE",image:"THUMB_PICTURE",raw:"THUMB_PICTURE",graphics:"THUMB_PICTURE",picture:"THUMB_PICTURE",psd:"THUMB_PHOTOSHOP",photoshop:"THUMB_PHOTOSHOP",cab:"THUMB_ARCHIVE",dmg:"THUMB_ARCHIVE",ear:"THUMB_ARCHIVE",tar:"THUMB_ARCHIVE",tbz:"THUMB_ARCHIVE",tgz:"THUMB_ARCHIVE",war:"THUMB_ARCHIVE",arj:"THUMB_ARCHIVE",zipz:"THUMB_ARCHIVE",bzip2:"THUMB_ARCHIVE",bz2:"THUMB_ARCHIVE",gz:"THUMB_ARCHIVE","7z":"THUMB_ARCHIVE",rar:"THUMB_ARCHIVE",zip:"THUMB_ARCHIVE",jar:"THUMB_ARCHIVE",hyp:"THUMB_ARCHIVE",archive:"THUMB_ARCHIVE",conf:"THUMB_PLAIN_TEXT",diff:"THUMB_PLAIN_TEXT",ini:"THUMB_PLAIN_TEXT",mime:"THUMB_PLAIN_TEXT",text:"THUMB_PLAIN_TEXT",log:"THUMB_PLAIN_TEXT",txt:"THUMB_PLAIN_TEXT",lng:"THUMB_PLAIN_TEXT","plain-text":"THUMB_PLAIN_TEXT",asm:"THUMB_SOURCE",atom:"THUMB_SOURCE",cc:"THUMB_SOURCE",cpp:"THUMB_SOURCE",css:"THUMB_SOURCE",cxx:"THUMB_SOURCE",dtd:"THUMB_SOURCE",f:"THUMB_SOURCE",f77:"THUMB_SOURCE",f90:"THUMB_SOURCE",for:"THUMB_SOURCE",gemspec:"THUMB_SOURCE",h:"THUMB_SOURCE",hh:"THUMB_SOURCE",hpp:"THUMB_SOURCE",java:"THUMB_SOURCE",masm:"THUMB_SOURCE",p:"THUMB_SOURCE",pas:"THUMB_SOURCE",pl:"THUMB_SOURCE",pm:"THUMB_SOURCE",rake:"THUMB_SOURCE",ru:"THUMB_SOURCE",s:"THUMB_SOURCE",sgm:"THUMB_SOURCE",sgml:"THUMB_SOURCE",t:"THUMB_SOURCE",tex:"THUMB_SOURCE",texi:"THUMB_SOURCE",texinfo:"THUMB_SOURCE",txi:"THUMB_SOURCE",vbs:"THUMB_SOURCE",xml:"THUMB_SOURCE",yaml:"THUMB_SOURCE",yml:"THUMB_SOURCE",c:"THUMB_SOURCE",js:"THUMB_SOURCE",php:"THUMB_SOURCE",py:"THUMB_SOURCE",rb:"THUMB_SOURCE",source:"THUMB_SOURCE",json:"THUMB_JSON",aifc:"THUMB_AUDIO",mid:"THUMB_AUDIO",oga:"THUMB_AUDIO",ra:"THUMB_AUDIO",wave:"THUMB_AUDIO",ram:"THUMB_AUDIO",midi:"THUMB_AUDIO",wav:"THUMB_AUDIO",ogg:"THUMB_AUDIO",aiff:"THUMB_AUDIO",flac:"THUMB_AUDIO",m4a:"THUMB_AUDIO",wma:"THUMB_AUDIO",mp3:"THUMB_AUDIO",audio:"THUMB_AUDIO",msg:"THUMB_EMAIL",mbox:"THUMB_EMAIL",clx:"THUMB_EMAIL",eml:"THUMB_EMAIL",email:"THUMB_EMAIL",bat:"THUMB_EXE",com:"THUMB_EXE",msi:"THUMB_EXE",sh:"THUMB_EXE",exe:"THUMB_EXE",exec:"THUMB_EXE",executable:"THUMB_EXE",pdf:"THUMB_PDF",m2ts:"THUMB_VIDEO",m4v:"THUMB_VIDEO",matroska:"THUMB_VIDEO",mk3d:"THUMB_VIDEO",mka:"THUMB_VIDEO",mks:"THUMB_VIDEO",mkv:"THUMB_VIDEO",mng:"THUMB_VIDEO",mp4v:"THUMB_VIDEO",mts:"THUMB_VIDEO",ogv:"THUMB_VIDEO",qt:"THUMB_VIDEO",ts:"THUMB_VIDEO",tsa:"THUMB_VIDEO",tsv:"THUMB_VIDEO",vob:"THUMB_VIDEO",wmx:"THUMB_VIDEO",flv:"THUMB_VIDEO",mpg:"THUMB_VIDEO","3gp":"THUMB_VIDEO",mov:"THUMB_VIDEO",asf:"THUMB_VIDEO",mp4:"THUMB_VIDEO",mpeg:"THUMB_VIDEO",avi:"THUMB_VIDEO",wmv:"THUMB_VIDEO",webm:"THUMB_VIDEO",video:"THUMB_VIDEO",docm:"THUMB_DOCUMENT",dot:"THUMB_DOCUMENT",dotx:"THUMB_DOCUMENT",odt:"THUMB_DOCUMENT",ott:"THUMB_DOCUMENT",pages:"THUMB_DOCUMENT",doc:"THUMB_DOCUMENT",docx:"THUMB_DOCUMENT",rtf:"THUMB_DOCUMENT",wps:"THUMB_DOCUMENT",wpd:"THUMB_DOCUMENT",document:"THUMB_DOCUMENT",csv:"THUMB_SPREADSHEET",numbers:"THUMB_SPREADSHEET",ods:"THUMB_SPREADSHEET",ots:"THUMB_SPREADSHEET",xls:"THUMB_SPREADSHEET",xlsx:"THUMB_SPREADSHEET",xlsb:"THUMB_SPREADSHEET",xlsm:"THUMB_SPREADSHEET",excel:"THUMB_SPREADSHEET",spreadsheet:"THUMB_SPREADSHEET",key:"THUMB_PRESENTATION",keynote:"THUMB_PRESENTATION",odp:"THUMB_PRESENTATION",otp:"THUMB_PRESENTATION",pot:"THUMB_PRESENTATION",potm:"THUMB_PRESENTATION",potx:"THUMB_PRESENTATION",ppsm:"THUMB_PRESENTATION",pptm:"THUMB_PRESENTATION",ppt:"THUMB_PRESENTATION",pptx:"THUMB_PRESENTATION",pps:"THUMB_PRESENTATION",ppsx:"THUMB_PRESENTATION",presentation:"THUMB_PRESENTATION","excel-online":"THUMB_EXCEL_ONLINE","powerpoint-online":"THUMB_POWERPOINT_ONLINE","word-online":"THUMB_WORD_ONLINE"},Tb=function(a){var b=a.iconType,c=Pb[Sb[b]]||Pb[tb];return h().createElement(f.Icon,{icon:c,sizeX:5})},Ub=nc(9775),Vb=function(a){var b,c,d=a.x10,e=a.x8,f=a.x6,g=a.x5,h=a.x05,i=a.sizeBorderRadius,j=a.colorTransparent;return{container:{height:d.value,display:"flex",justifyContent:"center",alignItems:"center","&:hover $base":{background:j.hover.value},"&:active $base":{background:j.active.value}},base:{width:d.value,height:d.value,borderRadius:null!==(c=null===(b=i.compact)||void 0===b?void 0:b.value)&&void 0!==c?c:i.regular.value,display:"flex",justifyContent:"center",alignItems:"center",cursor:"pointer"},ponyMode:{width:e.value,height:e.value,borderRadius:h.value},small:{width:f.value,height:f.value},iconContainer:{width:g.value,height:g.value,position:"relative"},active:{background:j.active.value,"&:hover":{background:j.active.value}}}},Wb=(Rb=function(a,b){return(Rb=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)if(Object.prototype.hasOwnProperty.call(b,c))a[c]=b[c]})(a,b)},function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function c(){this.constructor=a}Rb(a,b),a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)}),Xb=function(a,b,c,d){var e,f=arguments.length,g=f<3?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)if(e=a[h])g=(f<3?e(g):f>3?e(b,c,g):e(b,c))||g;return f>3&&g&&Object.defineProperty(b,c,g),g},Yb=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}return Wb(b,a),b.prototype.render=function(){var a,b=this.props,c=b.classes,d=b.active,e=b.small,g=b.ponyMode;return h().createElement("div",{className:c.container},h().createElement("div",{className:ca()(c.base,(a={},a[c.active]=d,a[c.ponyMode]=g,a[c.small]=e,a)),"data-test-id":(0,Ub.qa)("attachment-button")},h().createElement("span",{className:c.iconContainer},h().createElement(f.Icon,{icon:t.STATUS_ATTACH}))))},b=Xb([(0,f.withStyles)(Vb)],b)}(h().PureComponent),Zb=nc(5779),$b=function(a){return(0,Zb.getAttachmentIconByExt)(a)},_b=function(a){switch(a.iconName){case"ATTACH_PDF":return"#EF6162";case"ATTACH_SPREADSHEET":return"#50BB4C";default:return"#7A8595"}},ac=function(a){var b=a.x8,c=a.x6,d=a.x1,e=a.colorBackgroundSecondary;return{base:{display:"flex",justifyContent:"center",alignItems:"center",width:b.value,height:b.value,borderRadius:d.value,backgroundColor:e.normal.value},ponyMode:{width:c.value,height:c.value}}},bc=function(){var a=function(b,c){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)if(Object.prototype.hasOwnProperty.call(b,c))a[c]=b[c]})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw new TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),cc=function(a,b,c,d){var e,f=arguments.length,g=f<3?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)if(e=a[h])g=(f<3?e(g):f>3?e(b,c,g):e(b,c))||g;return f>3&&g&&Object.defineProperty(b,c,g),g},dc=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}return bc(b,a),b.prototype.render=function(){var a,b=this.props,c=b.classes,d=b.ponyMode,e=b.iconName,g=ca()(c.base,((a={})[c.ponyMode]=d,a));return h().createElement("div",{className:g,style:{fill:_b(this.props)}},h().createElement(f.Icon,{icon:Lb[e]||Lb.ATTACH_UNKNOWN,testId:"file-icon:".concat(e)}))},b=cc([(0,f.withStyles)(ac)],b)}(h().PureComponent),ec=function(a){var b=a.x05,c=a.x5;return{base:{paddingLeft:"40px",position:"relative"},clickable:{cursor:"pointer"},imageWrap:{padding:"4px",borderRadius:b.value},imageWrapClickable:{cursor:"pointer"},imageWrapHidden:{position:"absolute",opacity:0},fileIco:{position:"absolute",left:0,top:-6},listItem:{padding:"10px 16px 10px 52px"},listItemFileIco:{left:12,top:4},listItemPonyMode:{paddingTop:6,paddingBottom:6,paddingLeft:"48px"},noWrap:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},progressWrapper:{padding:20},text:{maxHeight:c.value}}},fc=function(){var a=function(b,c){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)if(Object.prototype.hasOwnProperty.call(b,c))a[c]=b[c]})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw new TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),gc=function(){return(gc=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++)for(var e in b=arguments[c])if(Object.prototype.hasOwnProperty.call(b,e))a[e]=b[e];return a}).apply(this,arguments)},hc=function(a,b,c,d){var e,f=arguments.length,g=f<3?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)if(e=a[h])g=(f<3?e(g):f>3?e(b,c,g):e(b,c))||g;return f>3&&g&&Object.defineProperty(b,c,g),g},ic=function(a){function b(){var b=null!==a&&a.apply(this,arguments)||this;return b.state={loaded:!1,src:void 0},b.overlayRender=function(a){var c,d=b.props,e=d.classes,g=d.onClick,i=d.qaEnabled,j=b.state.loaded,k=b.getActualSrc();return h().createElement("div",null,!j?h().createElement("div",{className:e.progressWrapper},h().createElement(f.Progress,{secondary:!0})):null,h().createElement("div",gc({},i?{"data-test-id":"clip-in-list-success-overlay"}:{},{className:ca()(e.imageWrap,(c={},c[e.imageWrapClickable]=!!g,c[e.imageWrapHidden]=!j,c)),onClick:g}),h().createElement("img",{src:k,onLoad:function(){b.setState(gc(gc({},b.state),{loaded:!0}),function(){a()})},onError:function(){b.setState({src:null})}})))},b}return fc(b,a),b.prototype.getItem=function(){var a,b,c,d=this.props,e=d.classes,g=d.extension,i=d.title,j=d.noWrap,k=d.listItem,l=d.onClick,m=d.ponyMode;return h().createElement("div",{className:ca()(e.base,(a={},a[e.listItem]=k,a[e.noWrap]=j,a[e.listItemPonyMode]=m,a[e.clickable]=!!l,a)),onClick:l},h().createElement("div",{className:ca()(e.fileIco,(b={},b[e.listItemFileIco]=k,b))},h().createElement(dc,{iconName:$b(g),ponyMode:m})),h().createElement("div",{className:ca()(e.text,(c={},c[e.noWrap]=j,c))},h().createElement(f.Text,{mode:m?"small":"base"},i)))},b.prototype.getActualSrc=function(){var a=this.props.src,b=this.state?this.state.src:void 0,c=a;if(void 0!==b)c=b;return c},b.prototype.render=function(){var a=this.props.overlayContainer;if(this.getActualSrc()&&!s.DISABLE_DOCS_PREVIEWS)return h().createElement(f.Tooltip,{delay:500,placement:"left",overlay:this.overlayRender,overlayContainer:a},this.getItem());else return this.getItem()},b=hc([(0,f.withStyles)(ec)],b)}(h().PureComponent),jc=function(a){var b=a.x4,c=a.x1,d=a.typeBorderButton,e=a.colorBackgroundContent,f=a.colorFieldBorderAlpha;return{base:{display:"flex",alignItems:"center",whiteSpace:"nowrap",borderRadius:c.value,backgroundColor:e.normal.value,border:"".concat("1px"," ").concat(d.value," ").concat(f.normal.value),padding:"0 ".concat(b.value),boxSizing:"border-box",height:28,"&:hover":{borderColor:f.hover.value}},large:{height:47}}},kc=function(){var a=function(b,c){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)if(Object.prototype.hasOwnProperty.call(b,c))a[c]=b[c]})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw new TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),lc=function(){return(lc=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++)for(var e in b=arguments[c])if(Object.prototype.hasOwnProperty.call(b,e))a[e]=b[e];return a}).apply(this,arguments)},mc=function(a,b,c,d){var e,f=arguments.length,g=f<3?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)if(e=a[h])g=(f<3?e(g):f>3?e(b,c,g):e(b,c))||g;return f>3&&g&&Object.defineProperty(b,c,g),g},pc=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}return kc(b,a),b.prototype.render=function(){var a,b=this.props,c=b.classes,d=b.qaEnabled,e=b.count,g=b.large;if(!e)return null;var i=ca()(c.base,((a={})[c.large]=g,a));return h().createElement("div",lc({className:i},d?{"data-test-id":"attachment-button"}:{}),h().createElement(f.Text,{bold:!0,mode:"small"},i18n("ещё {count}",{count:e})))},b=mc([(0,f.withStyles)(jc)],b)}(h().PureComponent),qc=function(a){return{base:{},item:{"&:hover":{background:a.colorTransparent.hover.value},maxWidth:"300px"},itemHoverless:{"&:hover":{background:"inherit"}},overlay:{padding:"8px 0"}}},rc=function(){var a=function(b,c){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)if(Object.prototype.hasOwnProperty.call(b,c))a[c]=b[c]})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw new TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),sc=function(){return(sc=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++)for(var e in b=arguments[c])if(Object.prototype.hasOwnProperty.call(b,e))a[e]=b[e];return a}).apply(this,arguments)},tc=function(a,b,c,d){var e,f=arguments.length,g=f<3?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)if(e=a[h])g=(f<3?e(g):f>3?e(b,c,g):e(b,c))||g;return f>3&&g&&Object.defineProperty(b,c,g),g},uc={search:"bottomRight",letter:"left"},vc={search:200,letter:0},wc=function(a){function b(b){var c=a.call(this,b)||this;return c.renderOverlay=function(a){a.closeOverlay;var b=c.props,d=b.classes,e=b.qaEnabled;return h().createElement("div",sc({className:d.overlay},e?{"data-test-id":"attachment-dropdown-overlay"}:{}),c.getItems())},c.onChangeExpandState=c.onChangeExpandState.bind(c),c}return rc(b,a),b.prototype.getItems=function(){var a=this.props,b=a.classes,c=a.items,d=a.ponyMode,e=a.qaEnabled;return c.map(function(a,c){var f,g=a.title,i=a.src,j=a.extension,k=a.onClick;return h().createElement("div",sc({className:ca()(b.item,(f={},f[b.itemHoverless]=!k,f)),key:c},e?{"data-test-id":"overlay-item:".concat(c)}:{}),h().createElement(ic,sc({listItem:!0,noWrap:!0},{ponyMode:d,qaEnabled:e,onClick:k,src:i,title:g,extension:j})))})},b.prototype.onChangeExpandState=function(a){var b=this.props.onChange;b&&b(a)},b.prototype.getDropdownButton=function(){var a=this.props,b=a.mode,c=void 0===b?"letter":b,d=a.qaEnabled,e=a.ponyMode,f=a.open,g=a.items,i=a.buttonSize;switch(c){case"letter":return h().createElement(Yb,{active:f,ponyMode:e,small:"small"==i});case"search":return h().createElement(pc,{qaEnabled:d,count:(g||[]).length,large:"large"===i})}},b.prototype.render=function(){var a=this.props,b=a.overlayContainer,c=a.open,d=a.mode;return h().createElement(f.Dropdown,{overlayContainer:b,overlay:this.renderOverlay,placement:uc[d]||"left",onChangeExpandState:this.onChangeExpandState,pureOverlay:!0,open:c,reservePlacement:"search"===d?"topRight":void 0,minOverlayHeight:vc[d]||0,autoOverflow:!0},this.getDropdownButton())},b=tc([(0,f.withStyles)(qc)],b)}(h().PureComponent),xc=nc(9299),yc=nc.n(xc),zc=nc(6866),Ac=nc.n(zc),Bc=nc(1347),Cc=nc.n(Bc),Dc=nc(142),Ec=function(){var a=function(b,c){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)if(Object.prototype.hasOwnProperty.call(b,c))a[c]=b[c]})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw new TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),Fc=function(){return(Fc=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++)for(var e in b=arguments[c])if(Object.prototype.hasOwnProperty.call(b,e))a[e]=b[e];return a}).apply(this,arguments)};function Gc(a,b,c){if(Object.is(a,b))return!0;if("object"!=typeof a||null===a||"object"!=typeof b||null===b)return!1;var d=Object.keys(a),e=Object.keys(b);if(d.length!==e.length)return!1;for(var f=0;f<d.length;f++)if(!((null==c?void 0:c[d[f]])||Object.hasOwnProperty.call(b,d[f])&&Object.is(a[d[f]],b[d[f]])))return!1;return!0}var Hc={};if(s.IS_DEBUG)window.__feastBlockCache=Hc;var Ic,Jc=function(a){function b(b){var c=a.call(this,b)||this;if(c.elementRef=h().createRef(),c.innerElRef=h().createRef(),c.isInitedComponent=null,c.componentMountState=null,c.separatelyCheckedKeys={remitDetails:!0,useMediators:!0,remitEvents:!0},c.reBroadcast=function(a){var b=c.props,d=b.broadcastEvent,e=b.remitEvents,f=b.remitDetails;if(b.updateRemitEventsName)Object.keys(e).forEach(function(a){e[(0,Dc.Co)(a)]=e[a]});var g=e[a.type];if(g){var h=(0,Dc.RV)(g);(0,Dc.eP)(a,h),d((0,Dc.BU)(h.name,f,a))}},b.useMixin)Cc().tags.$mixins[b.useMixin](null,b);var d=b.component;if("function"==typeof d&&!d.getInstances)d().then(function(a){c.initComponent(a,b.useContext)});else c.initComponent(d,b.useContext);return c}return Ec(b,a),b.clearCache=function(a){if(Hc[a])Object.values(Hc[a]).forEach(function(a){a.component.destroy()}),delete Hc[a]},b.clearLetterListItemAdvCache=function(){var a="letter-list-item-adv";if(Hc[a])Object.values(Hc[a]).forEach(function(a){var b=a.component;if(!b.el||!b.el.offsetParent)b.destroy()}),delete Hc[a]},b.prototype.initComponent=function(a,b){var c,d,e;if("unmount"!==this.componentMountState&&!this.isInitedComponent){this.isInitedComponent=!0,this.componentName=function(a){return"string"==typeof a?a:a.blockName||a.name}(a);var f=this.props.cacheKey,g=f?null===(c=Hc[this.componentName])||void 0===c?void 0:c[f]:null;if(!g){var h=void 0;if("string"==typeof a){var i=window.require("ui-block/".concat(a,"/").concat(a));h=null!==(d=null==i?void 0:i.default)&&void 0!==d?d:i}else h=a;this.component=new h(Fc({},this.props),b)}else this.component=g.component,this.cachedBlock=g;if(!this.component)this.logMissingComponent("constructor");if(!(null===(e=this.component)||void 0===e?void 0:e.on))this.logMissingComponent("constructor.prop");if("mount"===this.componentMountState)this.componentDidMount()}},b.prototype.componentDidMount=function(){var a,b=this;if(this.componentMountState="mount",this.isInitedComponent){var c=this.props,d=c.useMediators,e=c.remitEvents,f=c.broadcastEvent,g=c.cacheKey,h=null!==(a=null==d?void 0:d.map(Cc().Mediator.get))&&void 0!==a?a:[];if(!this.component)this.logMissingComponent("mount");if(!this.cachedBlock)h.forEach(function(a){a.register(b.component)});if(Object.keys(e||{}).map(function(a){return b.component.on(a,b.reBroadcast,!0)}),g)if(this.cachedBlock)this.elementRef.current.appendChild(this.cachedBlock.el);else{var i=document.createElement("div");this.elementRef.current.appendChild(i),this.component.renderTo(i)}else this.component.renderTo(this.elementRef.current);if(e&&!f)throw new TypeError("You passed events to remit, but did not pass the broadcastEvent function to block '".concat(this.componentName,"'"))}},b.prototype.shouldComponentUpdate=function(a){return!Gc(a,this.props,this.separatelyCheckedKeys)||!Gc(a.remitDetails,this.props.remitDetails)},b.prototype.componentDidUpdate=function(a){if(this.isInitedComponent)this.component.set(Fc(Fc({},Object.fromEntries(Object.keys(a).map(function(a){return[a,void 0]}))),this.props))},b.prototype.componentWillUnmount=function(){var a=this;if(this.componentMountState="unmount",this.isInitedComponent){var b=this.props,c=b.cacheKey,d=b.remitEvents;if(c){Object.keys(d||{}).map(function(b){return a.component.off(b,a.reBroadcast,!0)});var e=this.componentName,f=this.elementRef.current.removeChild(this.elementRef.current.firstChild);if(f.innerHTML){if(!Hc[e])Hc[e]={};Hc[e][c]={el:f,component:this.component}}}else this.component.destroy()}},b.prototype.logMissingComponent=function(a){var b,c,d=this.props.cacheKey,e=null===(c=null===(b=this.component)||void 0===b?void 0:b.__proto__)||void 0===c?void 0:c.__proto__;(0,m.coreLoggerDispatchSelfError)("fstblck",new Error("missing created component"),{id:a,cacheKey:d,component:this.componentName,shape:this.component&&Object.keys(this.component),protoShape:e&&Object.keys(e)})},b.prototype.render=function(){var a=this.props,b=a.className,c=a.qaIndex,d=a["data-qa-id"],e=a.inlineRoot,f={};if(a.fluid)f.width="100%";if(e)f.display="inline";return h().createElement("div",{"data-qa-id":(0,Ub.qa)(d),style:f,className:b,ref:this.elementRef,"data-qa-index":(0,Ub.qa)(c)})},b}(h().Component),Kc="PYWbz7iDRANq-rcj1HnGD",Lc="_1Fx4sel0_yQc_829Y-NC57",Mc="_3VRa3Oke0jvi15ZZiAXsTI",Nc="_3tFIEVfLI2js4Xt03prydF",Oc="_2JRHs7IIUxr_vQQ6y-UYrH",Pc="_1X2w25WlZYhC74I5Q5IB4I",Qc="_31c204N70PbxnaLRI3kmEQ",Rc="NdtqSOtLWhHc3hGqG5-oL",Sc="_1u-Wwswc_xWFA0QXNNvySF",Tc="lddh6oGGYau2ap2qfKJ0q",Uc="QQBOLGk7zzSEd8HnB6WrE",Vc="_3SrHpMNsn2QgsuRm822qgo",Wc="_2Zu7wp58wMDPJnM_cDP_3l",Xc="_2s3_4wFY391gFTwt29a0_g",Yc="_2k5-U5g15ZVDMngyN7bQmH",Zc={healthy:"CHECK_SHIELD",unchecked:"STATUS_WARNING_ROUND",danger:"STATUS_WARNING_ROUND"},$c=function(a){var b,c,d,e=a.safetyStatus,g=a.hasBackground,i=a.attachCount,j=a.mobile,k={healthy:{text:yc()(i,{one:j?i18n("Файл проверен"):i18n("Файл проверен антивирусом"),many:j?i18n("Файлы проверены"):i18n("Файлы проверены антивирусом")}),hint:yc()(i,{one:i18n("Вирусов в нём не нашли"),many:i18n("Вирусов в них не нашли")})},unchecked:{text:yc()(i,{one:j?i18n("Файл не проверен"):i18n("Файл не проверен антивирусом"),many:j?i18n("Файлы не проверены"):i18n("Файлы не проверены антивирусом")}),hint:yc()(i,{one:i18n("Не открывайте его, если не доверяете отправителю"),many:i18n("Не открывайте их, если не доверяете отправителю")})},danger:{text:i18n("Обнаружены вирусы"),hint:yc()(i,{one:i18n("Не открывайте файл, он может навредить"),many:i18n("Не открывайте файлы, они могут навредить")})}},l=Zc[e],m=k[e],n=m.text,o=m.hint,p="healthy"===e,q="danger"===e,r="unchecked"===e,s=ca()(Rc,((b={})[Sc]=p,b[Tc]=r,b[Uc]=q,b)),t=ca()(Vc,((c={})[Wc]=p,c[Xc]=r,c[Yc]=q,c)),u=ca()(Lc,((d={})[Mc]=g,d[Nc]=g&&p,d[Oc]=g&&r,d[Pc]=g&&q,d));return h().createElement("div",{className:Kc},h().createElement("div",null,h().createElement("span",{className:Qc},"• ")),h().createElement("div",{className:u},h().createElement("span",{className:s},h().createElement(Jc,{name:l,component:Ac()})),h().createElement("span",{className:t},h().createElement(f.Tooltip,{overlay:h().createElement(f.Text,{mode:"small",text:o}),overlayContainer:document.body,showByClick:!0,testId:"attach-safety-status-tooltip"},n))))},_c=function(a){var b=a.attachIcon,c=a.size,d=void 0===c?23:c;return h().createElement(f.Icon,{icon:b,sizeX:d})},ad=f.TwoKitTheming.createUseStyles(function(a){return{spacer:{width:a.x2.value},controlsBarBottom:{display:"flex",width:"100%",justifyContent:"space-between"},controlsBarItem:{display:"flex",margin:a.x3.value,width:"calc(100% - 2*".concat(a.x3.value,")")}}}),bd=function(a){var b=a.iconDownload,c=a.iconUpload,d=a.downloadBtnTitle,e=a.downloadBtnTooltip,g=a.uploadBtnTitle,i=a.uploadBtnTooltip,j=a.link,k=a.onCloudUploadClick,l=a.onDownloadClick,m=a.isDownload,n=a.isCloudUpload,o=ad(a);return h().createElement("div",{className:o.controlsBarBottom,"data-test-id":"controlsBarBottom"},m&&h().createElement(f.Tooltip,{overlay:h().createElement(f.Text,{mode:"small",text:e}),overlayContainer:document.body},h().createElement("a",{className:o.controlsBarItem,onClick:l,"data-test-id":"download",href:j},h().createElement(f.Icon,{icon:b}),h().createElement("div",{className:o.spacer}),h().createElement(f.Text,{text:d,mode:"small"}))),n&&h().createElement(f.Tooltip,{overlay:h().createElement(f.Text,{mode:"small",text:i}),overlayContainer:document.body},h().createElement("div",{className:o.controlsBarItem,onClick:k,"data-test-id":"cloud"},h().createElement(f.Icon,{icon:c}),h().createElement("div",{className:o.spacer}),h().createElement(f.Text,{text:g,mode:"small"}))))},cd="_1cxy2LRKQ87SyaqdQ6reTe",dd="_1rxuLJo77v4lUrVe4mnNM6",ed="_5Fs81lZrvIDR55HR5JtzB",fd="_1d_4AzngkI4NdXO72TE-IY",gd="_1QDMIBW3LTw2-mmIP68Ub6",hd=function(a){var b=a.attachName,c=a.icon,d=a.couldExpired,e=a.expiredText,g=a.onExpiredClick,i=Pb[Ab];return h().createElement("div",{className:cd,"data-test-id":"thumb-header"},c&&h().createElement("div",{className:ed},h().createElement(f.Icon,{icon:c,sizeX:5})),b&&h().createElement("div",{className:dd},h().createElement(f.Text,{mode:"small",text:b})),d&&h().createElement(f.Tooltip,{overlay:function(){return h().createElement("div",{className:fd,"data-test-id":"thumb-footer-link-overlay"},h().createElement(f.Text,{mode:"small",text:e}))},overlayContainer:document.body},h().createElement("div",{className:gd,"data-test-id":"link"},h().createElement(f.Icon,{icon:i,onClick:g}))))},id="_3JaY_XKz-_Ywfpcjy91efA",jd="_2IOjOGA3e62io7V05XBC71",kd=function(){return h().createElement("div",{className:id,"data-test-id":"attach-warning-content"},h().createElement("div",{className:jd},h().createElement(f.Text,{text:i18n("Файл заражен"),secondary:!0})))},ld="Nz9IjvD763mPUnVv4IDIj",md="_2eoVLi9EUpT0iSnJNzqBm9",nd=function(){var a=(0,f.fillIcon)(t.STATUS_ERROR,{fill:"white"});return h().useEffect(function(){l().send("attach_show_warn_overlay")},[]),h().createElement("div",{className:ld,"data-test-id":"attach-warning-overlay"},h().createElement("div",{className:md},h().createElement(f.Avatar,{small:!0,warning:!0,icon:a})),h().createElement("div",null,h().createElement(f.Text,{mode:"h5",text:i18n("Файл заражен")}),h().createElement(f.Margin,{mobileX:1,desktopX:1}),h().createElement(f.Text,{text:i18n("Осторожно: Касперский нашел в этом файле вирус")})))},od=function(){return(od=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++)for(var e in b=arguments[c])if(Object.prototype.hasOwnProperty.call(b,e))a[e]=b[e];return a}).apply(this,arguments)},pd=function(a){var b,c=a.title,d=a.preview,e=a.fullPreview,g=a.iconType,i=a.downloadBtnTitle,j=a.downloadBtnTooltip,k=a.uploadBtnTitle,m=a.uploadBtnTooltip,n=a.linkTitle,o=a.isLink,p=a.link,q=a.onDownloadClick,r=a.onCloudUploadClick,s=a.onOpenClick,t=a.testId,u=a.attachWarningTooltip,v=a.disableCloudUpload,w=f.TwoKitTheming.useTheme(),x=u&&(0,f.fillIcon)(Pb[Bb],{fill:w.colorIconNegative.normal.value})||Pb[Sb[g]]||Pb[tb],y=Pb[zb],z=Pb[yb],A=d&&!e||u,B=h().createElement(hd,od({},!e&&{attachName:c},A&&{icon:x},{couldExpired:o,expiredText:n,onExpiredClick:s})),C=h().createElement(bd,{isDownload:!u,isCloudUpload:!v&&!u,iconDownload:y,iconUpload:z,downloadBtnTitle:i,downloadBtnTooltip:j,uploadBtnTitle:k,uploadBtnTooltip:m,link:p,onDownloadClick:q,onCloudUploadClick:r}),D=od(od({tooltip:function(){if(u)return h().createElement(nd,null);else return c}(),testId:"thumb",footer:C},u&&{tooltipProps:{promo:!0,arrow:!0,arrowMode:"soft"},bgMode:"error",footerMode:"naked"}),{onClickOpen:s,header:B}),E=d?e?"previewFull":"preview":"noPreview",F=function(){if(u)return h().createElement(kd,null);if("noPreview"===E)return h().createElement(_c,{attachIcon:x});else return d};switch(h().useEffect(function(){l().send("attach_show_".concat(u?"warn_tltp":"health"))},[]),E){case"preview":b=h().createElement(f.Thumb,od({},D,{mode:"preview",content:F(),testId:t,onClickOpen:s}));break;case"previewFull":b=h().createElement(f.Thumb,od({},D,{mode:"previewFull",content:F(),testId:t,onClickOpen:s}));break;case"noPreview":b=h().createElement(f.Thumb,od({},D,{mode:"noPreview",content:F(),testId:t,onClickOpen:s}))}return h().createElement(h().Fragment,null,b)},qd="pjQlFxOKi2oRlK2qST1m6",rd="_3L1OP_26_tOJUigKZMCQzI",sd="_3Jh8rpdc5u3Fj00ZL2E4R",td="_1WJxOkau14yQgz68dWAGWL",ud=function(a){var b,c,d=a.text,e=a.isDefaultTheme,f=a.onClick,g=ca()(((b={})[rd]=!0,b[sd]=e,b)),i=ca()(((c={})[td]=!e,c[qd]=!0,c));return h().createElement("button",{onClick:f,className:g},h().createElement("div",{className:i},d))},vd=function(){return{popup:{textAlign:"left"},controls:{display:"flex"}}},wd=function(){var a=function(b,c){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)if(Object.prototype.hasOwnProperty.call(b,c))a[c]=b[c]})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw new TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),xd=function(a,b,c,d){var e,f=arguments.length,g=f<3?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)if(e=a[h])g=(f<3?e(g):f>3?e(b,c,g):e(b,c))||g;return f>3&&g&&Object.defineProperty(b,c,g),g},yd=function(a){function b(){var b=null!==a&&a.apply(this,arguments)||this;return b.state={show:!0},b.onClose=function(){b.setState({show:!1}),b.props.onClose()},b.onAttachClick=function(){var a=b.props.onAttachClick;b.onClose(),a()},b}return wd(b,a),b.prototype.render=function(){var a=this,b=this.props.classes,c=this.state.show;return h().createElement(f.Popup,{show:c,onHide:this.onClose,closeByEsc:!0,width:"420px",testId:"file-limit-popup"},h().createElement(f.Panel,{popup:!0,onClose:this.onClose},h().createElement("div",{className:b.popup},h().createElement(f.Text,{mode:"h3"},i18n("Будут прикреплены 100 файлов")),h().createElement("div",null,h().createElement(f.Margin,{mobile:10,desktop:16}),h().createElement(f.Text,null,i18n("Вы можете присоединить к письму не более 100 файлов"))),h().createElement(f.Margin,{mobile:10,desktop:40}),h().createElement(f.Hr,{oversize:!0}),h().createElement(f.Margin,{mobile:10,desktop:20}),h().createElement(E.Z,null,function(c){var d=c.Button;return h().createElement("div",{className:b.controls},h().createElement(d,{onClick:a.onAttachClick,"data-test-id":"attach-button",size:"l"},i18n("Прикрепить")),h().createElement(f.Space,null),h().createElement(d,{mode:"secondary",appearance:"neutral",onClick:a.onClose,"data-test-id":"cancel-button",size:"l"},i18n("Отмена")))}))))},b=xd([(0,f.withStyles)(vd)],b)}(h().PureComponent),zd=function(){var a=function(b,c){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)if(Object.prototype.hasOwnProperty.call(b,c))a[c]=b[c]})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw new TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),Ad=function(){return(Ad=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++)for(var e in b=arguments[c])if(Object.prototype.hasOwnProperty.call(b,e))a[e]=b[e];return a}).apply(this,arguments)},Bd=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}return zd(b,a),b.prototype.componentDidCatch=function(a,b){var c;(0,m.coreLoggerDispatchReactError)(a,Ad(Ad({},b),null!==(c=this.props.logData)&&void 0!==c?c:{}),{category:"rct-".concat(this.props.id),tag:m.Tag.Self})},b.prototype.render=function(){return this.props.children},b}(h().Component),Cd=nc(7984),Dd="_3oIyeg5-APZE-wMgE1Sa4R",Ed="_5aXw-8m9Z2YfntoapsIrl",Fd="yBGr5VSpZsrNAzlkZNINP",Gd="_1WFYMWbtt3C453rYcJ6cj",Hd="_25HeWmeK-5bvP9wNFp7Xsx",Id=function(a){var b=a.children,c=a.onChangeExpandState,d=a.placement,e=a.reservePlacement,g=a.adDescription,i=a.overlayContainer,j=h().useMemo(function(){return(0,Cd.createAboutAdLink)(g)},[g]);return h().createElement("div",{className:Dd},h().createElement(f.Dropdown,{placement:null!=d?d:"bottom",reservePlacement:null!=e?e:"top",pureOverlay:!0,overlay:function(){return h().createElement("div",{className:Ed},h().createElement("div",{className:Fd},s.TRANSLATE_ABOUT_AD?i18n("Рекламная интеграция"):"Рекламная интеграция"),h().createElement("a",{className:Gd,href:j,target:"_blank",rel:"noopener noreferrer"},h().createElement("img",{className:Hd,src:"https://img.imgsmail.ru/hb/e.mail.ru/static/icons/img/82/AB7DCF.svg",alt:""}),s.TRANSLATE_ABOUT_AD?i18n("О рекламодателе"):"О рекламодателе"))},overlayContainer:i,onChangeExpandState:c},b))},Jd="_13OlX00wr6HZedRW0_4y5q",Kd="_1U0AAuV1rA5qIf9yWHDLEe",Ld="_1n83Qbln9HESp-GH8yTvnY",Md=function(a){switch(a){case"vertical":return Nb[ua.NAVIGATION_MORE_VERTICAL];default:case"horizontal":return Nb[ua.NAVIGATION_MORE]}},Nd=function(a){var b,c=a.className,d=a.mode,e=a.pressed,g=a.onClick,i=a.contrast;return h().createElement("div",{className:ca()(Jd,(b={},b[Ld]=e,b[Kd]=i,b[c]=!!c,b)),onClick:g},h().createElement(f.Icon,{icon:Md(d)}))},Od=function(a){var b,c=a.adDescription,d=a.onChangeExpandState,e=a.placement,f=a.reservePlacement,g=a.className,i=a.mode,j=a.overlayContainer,k=a.onClick,l=a.contrast,m=h().useState(!1),n=m[0],o=m[1];return h().useEffect(function(){null==d||d(n)},[d,n]),h().createElement(Id,{adDescription:c,onChangeExpandState:o,placement:e,reservePlacement:f,overlayContainer:j},h().createElement(Nd,{mode:i,pressed:n,className:ca()((b={},b[g]=!!g,b)),onClick:k,contrast:l}))},Pd="_1NwMwhTfjiaK5NkfLxVun0",Qd="_24W00GUXAc1hiwoPHdD3UE",Rd="_2x4zBiAo7Avv0IZuceXWWf",Sd="_1q-jtefI3wS9HUis6j0FXl",Td="CqAGbQM2kVpRixOIkdj8D",Ud="Q4Vjzfg5le4oTgqWpRLMx",Vd="_2E1HVnCJ8JRhMo9qhBnxyQ",Wd=function(){return(Wd=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++)for(var e in b=arguments[c])if(Object.prototype.hasOwnProperty.call(b,e))a[e]=b[e];return a}).apply(this,arguments)},Xd=(0,Cd.isAdInfo)(s.KASPERSKY_ABOUT_AD_RAW)?s.KASPERSKY_ABOUT_AD_RAW:s.KASPERSKY_ABOUT_AD_DEFAULT,Yd=function(a){return a?Nb[ua.KASPERSKY_LOGO_ALTER_ENG]:Nb[ua.KASPERSKY_LOGO_ALTER_RUS]},Zd=function(a){var b=a.children,c=a.onLogoLinkClick;return h().createElement("a",{href:s.KASPERSKY_LOGO_HREF,target:"_blank",rel:"noopener noreferrer",onClick:c,className:Rd},b)},$d=function(a){var b,c,d,e,g=a.isEngLogo,i=a.onLogoLinkClick,j=a.contrast,k=h().useState(!1),l=k[0],m=k[1];if(!s.KASPERSKY_LOGO_WITH_AD_DROPDOWN)return h().createElement(Zd,{onLogoLinkClick:i},h().createElement(f.Icon,{icon:(e=g,e?Nb[ua.KASPERSKY_LOGO_ENG]:Nb[ua.KASPERSKY_LOGO_RUS])}));else return h().createElement("div",{className:ca()(Pd,(b={},b[Qd]=j,b))},h().createElement(Zd,{onLogoLinkClick:i},h().createElement(f.Icon,{icon:Yd(g)})),h().createElement("span",{className:Sd},"•"),h().createElement("div",{className:Td},s.TRANSLATE_ABOUT_AD?i18n("реклама"):"реклама"),h().createElement(Od,{className:ca()(Ud,(c={},c[Vd]=!l,c)),adDescription:Wd((d={},d[Cd.AdDescriptionKeys.Subject]=s.KASPERSKY_LOGO_HREF,d),Xd),onChangeExpandState:m,contrast:j}))},_d=f.TwoKitTheming.createUseStyles(function(a){var b=a.x2,c=a.x4,d=a.x5,e=a.x6,f=a.x10,g=a.colorBackgroundSecondary;return{titleBlock:{paddingBottom:c.value},folderList:{height:"240px",background:g.normal.value,overflow:"auto",marginLeft:"-32px",marginRight:"-32px",padding:"".concat(b.value," 0")},folder:{display:"flex",alignItems:"center",height:f.value,borderRadius:b.value,paddingLeft:b.value,marginLeft:e.value,marginRight:e.value},notChosenFolder:{"&:hover":{background:g.hover.value}},chosenFolder:{background:g.active.value},folderIcon:{marginRight:b.value,marginTop:"3px","& svg":{fill:"#FFCA5A"}},folderName:{overflow:"hidden",textOverflow:"ellipsis"},buttonsBlock:{paddingTop:d.value}}}),ae=function(a){var b=a.tree,c=a.onSave,d=a.onClose,e=_d(a),i=(0,g.useState)(null),j=i[0],k=i[1],l=(0,g.useState)(!0),m=l[0],n=l[1],o=function(){c(b[j])};return h().createElement(f.Popup,{show:!0,width:"var(--vkui--size_popup_small--regular)",testId:"choose-save-folder-popup"},h().createElement(f.Panel,{popup:!0,closable:!0,onClose:d},h().createElement("div",{className:e.titleBlock},h().createElement(f.Text,{mode:"h3"},i18n("Сохранить в папку"))),h().createElement("div",{className:e.folderList},b.map(function(a,b){var c=b===j?e.chosenFolder:e.notChosenFolder,d=ca()(e.folder,c);return h().createElement("div",{key:b,className:d,onClick:function(){return function(a){k(a),n(!1)}(b)},"data-test-id":"folder-item-".concat(b)},h().createElement("div",{className:e.folderIcon},h().createElement(f.Icon,{icon:t.NAVIGATION_FOLDER})),h().createElement("div",{className:e.folderName},h().createElement(f.Text,null,a)))})),h().createElement("div",{className:e.buttonsBlock},h().createElement(E.Z,null,function(a){var b=a.Button;return h().createElement(b,{disabled:m,onClick:o,size:"l","data-test-id":"save-button"},i18n("Сохранить"))}))))},be=nc(2152),ce=nc.n(be),de=nc(8066),ee=nc.n(de),fe=nc(8624),ge=nc.n(fe),he=nc(1733),ie=f.TwoKitTheming.createUseStyles(function(a){var b=a.x3,c=a.x4,d=a.x5;return{titleBlock:{paddingBottom:c.value},spacer:{width:b.value},buttonsBlock:{paddingTop:d.value,display:"flex"},buttonsBlockReverse:{flexDirection:"row-reverse",justifyContent:"flex-end"}}});!function(a){a.spam="spam:force",a.undo="undo",a.resolve="layer:resolve",a.unsubscribe="unsubscribe",a.remove="remove"}(Ic||(Ic={}));var je={headerUnsubscribe:i18n("Это не только спам"),headerConfirm:i18n("Переместить в «Спам»?"),contentUnsubscribe:i18n("Здесь есть рассылка, на которую вы подписались.{br} Если вы её не читаете, отпишитесь.{br} Выделенные письма от этих отправителей попадут в{space}корзину.",{"unsafe-br":"<br/>","unsafe-space":"&nbsp;"}),contentConfirmSingle:i18n("Выделенное письмо будет перемещено в «Спам»"),contentConfirmPlural:i18n("Выделенные письма будут перемещены в «Спам»")},ke=function(a){var b=[],c=[];return a.forEach(function(a){var d,e,f,g=null===(f=null===(e=null===(d=a.get("correspondents"))||void 0===d?void 0:d.from)||void 0===e?void 0:e[0])||void 0===f?void 0:f.email;if(!c.includes(g))c.push(g);b.push(a.get("last"))}),{senders:c,ids:b}},le=function(a){var b=ie(a),c=a.onEvent,d=a.unsubscribeModels,e=a.models,i=a.type,j=a.actionType,k=(0,g.useState)(!0),l=k[0],m=k[1],n=(0,g.useState)(void 0),o=n[0],p=n[1],q=(0,g.useState)([]),r=q[0],t=q[1],u=function(){c({type:Ic.resolve,details:{close:!0}})},v=function(a,b){if(void 0===b)b=!0;if(null==a?void 0:a.length)c({type:Ic.spam,details:{model:a}});m(!1),b&&u()},w=(0,g.useCallback)(function(){var a=ke(e).senders,b="confirm"===i?"layer-confirm-move-to-spam_spam-as-submit_click":"layer-confirm-move-to-spam_spam-as-cancel_click";ce()({type:b,dwh:{letters_length:e.length,senders_length:a.length,action_type:j}}),v(e)},[e]),x=function(){var a,b=!1,e=ke(d).senders,f=ge().add({text:(a=e.length,(0,he.getUnsubscribesText)(a)),actions:[{text:i18n("Отменить")}],qa:"notify-unsubscribe-from-spam-layer"});if(f)f.on("action",function(){b=!0,f.close()}),f.on("closed",function(){if(!b)return ce()({type:"unsubscribe_from_spam",dwh:{letters_length:r.length,senders_length:e.length,action_type:j}}),a=r,c({type:Ic.unsubscribe,details:{ids:a,silent:!0}}),void u();var a;ce()({type:"unsubscribe_from_spam_cancel",dwh:{letters_length:d.length,senders_length:e.length,action_type:j}}),function(){if(null==o?void 0:o.undo)return o.undo().then(function(){c({type:Ic.undo})})}().then(function(){return u()})})},y=(0,g.useCallback)(function(){var a=e.filter(function(a){return!d.includes(a)});v(a,!1);var b=ke(d).senders;ce()({type:"layer-confirm-move-to-spam_unsubscribe_click",dwh:{spam_letters_length:a.length,senders_length:b.length,letters_length:d.length,action_type:j}}),function(a){var b=ke(a).ids;t(b)}(d),c({type:Ic.remove,details:{model:d,actionCallback:p}}),m(!1)},[d,e]),z=(0,g.useCallback)(function(){ce()({type:"layer-confirm-move-to-spam_close",dwh:{type:i,action_type:j}}),u()},[]),A=(0,g.useCallback)(function(){ce()({type:"layer-confirm-move-to-spam_cancel_click",dwh:{letters_length:e.length,action_type:j}}),u()},[]);if((0,g.useEffect)(function(){if(o)x()},[o]),!l)return h().createElement(h().Fragment,null);else return h().createElement(f.Popup,{show:!0,testId:"confirm-move-to-spam"},h().createElement(f.Panel,{popup:!0,closable:!0,onClose:z,mobileCross:!0},h().createElement("div",{className:b.titleBlock},h().createElement(f.Text,{mode:"h3"},function(){if(d.length)return je.headerUnsubscribe;else return je.headerConfirm}())),h().createElement("div",null,h().createElement("span",{dangerouslySetInnerHTML:{__html:function(){if(d.length)return je.contentUnsubscribe;if(e.length>1||e[0]instanceof ee()&&e[0].get("length")>1)return je.contentConfirmPlural;else return je.contentConfirmSingle}()}})),"confirm"===i&&h().createElement(E.Z,null,function(a){var c,d=a.Button;return h().createElement("div",{className:ca()(b.buttonsBlock,(c={},c[b.buttonsBlockReverse]=s.BUTTON_MOVE_TO_SPAM_CANCEL_LEFT_POSITION,c))},h().createElement(d,{size:"l",mode:s.BUTTON_MOVE_TO_SPAM_CANCEL_PRIMARY?"secondary":"primary",appearance:s.BUTTON_MOVE_TO_SPAM_CANCEL_PRIMARY?"neutral":"accent","data-test-id":"submit",onClick:w},i18n("Переместить")),h().createElement("div",{className:b.spacer}),h().createElement(d,{size:"l",mode:s.BUTTON_MOVE_TO_SPAM_CANCEL_PRIMARY?"primary":"secondary",appearance:s.BUTTON_MOVE_TO_SPAM_CANCEL_PRIMARY?"accent":"neutral","data-test-id":"cancel",onClick:A},i18n("Отменить")))}),"unsubscribe"===i&&h().createElement(E.Z,null,function(a){var c=a.Button;return h().createElement("div",{className:b.buttonsBlock},h().createElement(c,{size:"l","data-test-id":"submit",onClick:y},i18n("Отписаться")),h().createElement("div",{className:b.spacer}),h().createElement(c,{size:"l",mode:"secondary",appearance:"neutral","data-test-id":"cancel",onClick:w},i18n("В спам")))})))},me=nc(8276),ne=f.TwoKitTheming.createUseStyles(function(a){var b=a.x3,c=a.x4,d=a.x8;return{titleBlock:{paddingBottom:c.value},spacer:{width:b.value},buttonsBlock:{paddingTop:d.value,display:"flex"},imageContainer:{position:"absolute",bottom:0,right:0,height:"120px"},image:{height:"100%"},button:{zIndex:1}}}),oe=function(a){var b=ne(a),c=a.onClose,d=a.onSubmit,e=a.showImage,g=a.imageSrc,i=a.lockClose,j=a.hideCancel;return h().createElement(f.Popup,{show:!0,width:420,closeByBackdropClick:!i,closeByEsc:!i,testId:"promo-enabled-push",onHide:c,overflowVisible:!0},h().createElement(f.Panel,{popup:!i,closable:!i,onClose:c,closeByEsc:!i},h().createElement("div",{className:b.titleBlock},h().createElement(f.Text,{mode:"h3",text:i18n("Уведомления в браузере")})),h().createElement(f.Text,{text:i18n("Включите уведомления, чтобы не пропускать важные письма")}),h().createElement("div",{className:b.buttonsBlock},h().createElement("div",{className:b.button},h().createElement(f.Button,{primary:!0,testId:"submit",onClick:d},i18n("Включить"))),h().createElement("div",{className:b.spacer}),!(i||j)&&h().createElement("div",{className:b.button},h().createElement(f.Button,{testId:"cancel",onClick:c},i18n("Отмена")))),e&&h().createElement("div",{className:b.imageContainer,"data-test-id":(0,Ub.qa)("promo-image")},h().createElement("img",{className:b.image,src:g}))))},pe="_1pl7vWcbXz5W3zZPRB8QkV",qe="_3jwEnb6b5yXYJQX3srMIQM",re=function(a){var b=(0,g.useState)([]),c=b[0],d=b[1],e=(0,g.useState)(!1),f=e[0],h=e[1],i=(0,g.useState)(!1),j=i[0],k=i[1];return(0,g.useEffect)(function(){a().then(function(a){h(!0),d(a.map(function(a){return a.data}))}).catch(function(){k(j)})},[]),[c,f,j]},se=function(){return h().createElement(h().Fragment,null,h().createElement(f.Margin,{desktopX:2,mobileX:1}),h().createElement("div",{className:pe},h().createElement(f.Progress,{primary:!0})))},te=function(a){var b=a.text,c=a.testId,d=a.error;return h().createElement(h().Fragment,null,h().createElement(f.Margin,{desktopX:8,mobileX:8}),h().createElement("div",{className:pe},h().createElement(f.Text,{text:b,testId:c,secondary:!0,error:d})),h().createElement(f.Margin,{desktopX:6,mobileX:6}))},ue=function(a){var b=a.onChoose,c=a.onClose,d=a.fetchTemplates,e=a.appliedTemplate,i=(0,g.useState)(e),j=i[0],k=i[1],l=re(d),m=l[0],n=l[1],o=l[2],p=function(){var a=m.find(function(a){return a.id===j});a&&b(a),c()};return h().createElement(f.Popup,{width:window.innerWidth-16,show:!0,testId:"select-template-popup"},h().createElement(f.Panel,{popup:!0,header:i18n("Выбор шаблона"),closable:!0,controls:h().createElement(E.Z,null,function(a){var b=a.Button;return h().createElement("div",null,h().createElement(b,{"data-test-id":"submit",size:"l",onClick:p,disabled:!n||!j||o||0===m.length,stretched:!0},i18n("Выбрать")),h().createElement(f.Space,null),h().createElement(b,{"data-test-id":"cancel",size:"l",mode:"secondary",appearance:"neutral",disabled:!n,onClick:c,stretched:!0},i18n("Отменить")))}),onClose:c},!n&&!o&&h().createElement(se,null),o&&h().createElement(te,{text:i18n("Не удалось загрузить шаблоны"),error:!0}),n&&0===m.length&&h().createElement(te,{text:i18n("У вас отсутствуют сохраненные шаблоны"),testId:"no-templates"}),h().createElement("div",null,m.map(function(a){var b=a.id,c=a.value;return h().createElement("div",{key:b,className:qe},h().createElement(f.Radio,{label:c,checked:j===b,name:b,value:b,onChange:function(){return k(b)},testId:"template:".concat(c)}),h().createElement(f.Margin,{desktopX:2,mobileX:2}))}))))},ve=nc(9587),we=nc(8211),xe=nc.n(we),ye=nc(6534),ze=nc(2312),Ae=nc(3798),Be=nc(1820),Ce=nc(1013),De=nc(6593),Ee=nc(735),Fe=nc.n(Ee),Ge=nc(9228),He=nc.n(Ge),Ie=nc(1116),Je=nc.n(Ie),Ke=nc(2888),Le=nc.n(Ke),Me=nc(4245),Ne=nc.n(Me),Oe=nc(8595),Pe=nc.n(Oe),Qe=nc(4191),Re=nc.n(Qe),Se=nc(8842),Te=nc.n(Se),Ue=nc(6281),Ve=nc.n(Ue),We=nc(7608),Xe=nc.n(We),Ye=nc(5378),Ze=nc.n(Ye),$e=nc(2233),_e=nc.n($e),af=nc(770),bf=nc.n(af),cf=nc(5250),df=nc.n(cf),ef=nc(6455),ff=nc(2603),gf=nc.n(ff),hf=nc(1237),jf=nc.n(hf),kf=nc(9573),lf=nc.n(kf);function mf(a){return"".concat("js-promo-id_").concat(a)}var nf=function(){function a(a){this.name=a}return a.prototype.getModsToElem=function(a,b){if(!b)return null;else return Object.entries(b).reduce(function(b,c){var d=c[0],e=c[1];return b["".concat(a,"_").concat(d)]=e,b},{})},a.prototype.postProcess=function(a){return lf().lookup(a)},a.prototype.root=function(a,b){return this.postProcess(ca()(this.name,this.getModsToElem(this.name,a),null==b?void 0:b.addClass))},a.prototype.elem=function(a,b,c){var d="".concat(this.name,"__").concat(a);return this.postProcess(ca()(d,this.getModsToElem(d,b),null==c?void 0:c.addClass))},a}(),of=function(){return(of=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++)for(var e in b=arguments[c])if(Object.prototype.hasOwnProperty.call(b,e))a[e]=b[e];return a}).apply(this,arguments)},pf=new nf("letter-body");function qf(){var a=this,b=of(of({},this.props),this.state),c=!(!b["quotes-raw"]&&!b["quotes-formatted"].length),d=b["body-raw"],e=b["dark-mode"],f=b.message;return h().createElement("div",{"data-qa-id":(0,Ub.qa)("letter-body"),ref:this.letterBodyRef,className:pf.root({mobile:b.mobile,"formatted-quotes":!b["quotes-mode-raw"]&&b["quotes-formatted"].length,"raw-quotes":b["quotes-mode-raw"]&&b["quotes-raw"],quotes:c,"dark-mode":e})},h().createElement("div",{"data-qa-id":(0,Ub.qa)("body"),className:pf.elem("body",{"no-scroll":b["preview-mode"]})},h().createElement("div",{ref:"body",className:pf.elem("body-wrapper")},h().createElement("div",{tabIndex:-1,ref:"js-body",className:pf.elem("body-content")},!!d&&h().createElement(Jc,{ref:this.bodyParserRef,id:"body-parser",content:d,darkosha:this.getOrCreateDarkosha(),message:f,"dark-mode":e,remitEvents:{zoom:"letter:zoom"},broadcastEvent:(0,ze.Yv)(this),component:gf(),key:"html-parser"})))),!!c&&h().createElement(h().Fragment,null,!!b.collapsable&&h().createElement("div",{className:pf.elem("badge")},h().createElement(Jc,{badge:!0,secondary:!0,ico:"navigation:more","data-qa-id":(0,Ub.qa)("blockquote-toggler"),centered:!0,remitEvents:{click:"blockquote:toggle"},broadcastEvent:(0,ze.Yv)(this),component:Je(),key:"button2"})),!b.collapsable&&h().createElement("div",{"data-qa-id":(0,Ub.qa)("blockquote-title"),className:pf.elem("title")},i18n("вся переписка")),h().createElement("div",{ref:"blockquotes","data-qa-id":(0,Ub.qa)("blockquotes"),className:pf.elem("blockquotes")},!(b.collapsable&&this.isCollapsed())&&h().createElement(h().Fragment,null,!!b["quotes-mode-raw"]&&h().createElement("div",{"data-qa-id":(0,Ub.qa)("raw"),className:pf.elem("blockquotes-raw")},h().createElement(Jc,{ref:this.quoteParserRef,id:"quote-parser",content:b["quotes-raw"],darkosha:this.getOrCreateDarkosha(),message:f,component:gf(),key:"html-parser"})),!b["quotes-mode-raw"]&&b["quotes-formatted"].map(function(c,d){return h().createElement(Jc,{key:"letter-blockquote",index:d,blockquote:c,ponymode:b.ponymode,message:f,darkosha:a.getOrCreateDarkosha(),remitEvents:{"blockquote-zoom":"letter:zoom"},updateRemitEventsName:!0,broadcastEvent:(0,ze.Yv)(a),component:jf()})})))))}var rf=function(){var a=function(b,c){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)if(Object.prototype.hasOwnProperty.call(b,c))a[c]=b[c]})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw new TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),sf=function(){return(sf=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++)for(var e in b=arguments[c])if(Object.prototype.hasOwnProperty.call(b,e))a[e]=b[e];return a}).apply(this,arguments)},tf=function(a,b,c){if(c||2===arguments.length)for(var d,e=0,f=b.length;e<f;e++)if(d||!(e in b)){if(!d)d=Array.prototype.slice.call(b,0,e);d[e]=b[e]}return a.concat(d||Array.prototype.slice.call(b))}([],Object.values(ef.blockSpec.events),!0),uf=function(a){function b(b){var c=a.call(this,b)||this;return c.letterBodyMounted=!1,c.events=ef.blockSpec.events,c.asyncDidMountRender=ef.blockSpec.asyncDidMountRender,c.onBlockquoteToggle=ef.blockSpec.onBlockquoteToggle,c.onLetterZoom=ef.blockSpec.onLetterZoom,c.handelDataAttributeClick=ef.blockSpec.handelDataAttributeClick,c.handleClickAllowedAttr=ef.blockSpec.handleClickAllowedAttr,c.handleClickRightFinePayment=ef.blockSpec.handleClickRightFinePayment,c.handleClickFinePayment=ef.blockSpec.handleClickFinePayment,c.handleClickToMyself=ef.blockSpec.handleClickToMyself,c.handleClickMonetaLink=ef.blockSpec.handleClickMonetaLink,c.handleClickMonetaPayment=ef.blockSpec.handleClickMonetaPayment,c.getOrCreateDarkosha=ef.blockSpec.getOrCreateDarkosha,c.applyDarkosha=ef.blockSpec.applyDarkosha,c.renderBody=ef.blockSpec.renderBody,c.format=ef.blockSpec.format,c.formatNew=ef.blockSpec.formatNew,c.formatFallback=ef.blockSpec.formatFallback,c.rerenderParser=ef.blockSpec.rerenderParser,c.isCollapsed=ef.blockSpec.isCollapsed,c.triggerBlockquoteChange=ef.blockSpec.triggerBlockquoteChange,c.highlightCurrentUserMention=ef.blockSpec.highlightCurrentUserMention,c.render=qf,c.letterBodyRef=h().createRef(),c.bodyParserRef=h().createRef(),c.quoteParserRef=h().createRef(),tf.forEach(function(a){c[a]=c[a].bind(c)}),c}return rf(b,a),Object.defineProperty(b.prototype,"el",{get:function(){return this.letterBodyRef.current},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"ids",{get:function(){var a={};if(this.bodyParserRef.current)a["body-parser"]=this.bodyParserRef.current.component;if(this.quoteParserRef.current)a["quote-parser"]=this.quoteParserRef.current.component;return a},enumerable:!1,configurable:!0}),b.prototype.componentDidMount=function(){this.letterBodyMounted=!0,ef.blockSpec.didMount.bind(this)()},b.prototype.componentDidUpdate=function(a,b){var c=sf(sf({},this.props),this.state),d=sf(sf({},a),b);if(c.id!==d.id){var e=c.id,f=d.id;if(!e||!f||e===f)return;this.renderBody()}},b.prototype.componentWillUnmount=function(){this.letterBodyMounted=!1,ef.blockSpec.didUnmount.bind(this)()},b.prototype.isMounted=function(){return this.letterBodyMounted},b}(h().Component),vf=(0,ze.v$)("letter-body",uf,{syncMediatorsOnRender:!1});vf.defaultProps=ef.blockSpec.defaults;var wf,xf,yf=vf,zf=nc(3639),Af=nc(7920),Bf=nc.n(Af),Cf=nc(4149),Df=nc.n(Cf),Ef=nc(6093),Ff=nc.n(Ef),Gf=function(a,b,c,d){return new(c||(c=Promise))(function(e,f){function g(a){try{i(d.next(a))}catch(a){f(a)}}function h(a){try{i(d.throw(a))}catch(a){f(a)}}function i(a){var b;a.done?e(a.value):(b=a.value,b instanceof c?b:new c(function(a){a(b)})).then(g,h)}i((d=d.apply(a,b||[])).next())})},Hf=function(a,b){var c,d,e,f,g={label:0,sent:function(){if(1&e[0])throw e[1];return e[1]},trys:[],ops:[]};return f={next:h(0),throw:h(1),return:h(2)},"function"==typeof Symbol&&(f[Symbol.iterator]=function(){return this}),f;function h(f){return function(h){return function(f){if(c)throw new TypeError("Generator is already executing.");for(;g;)try{if(c=1,d&&(e=2&f[0]?d.return:f[0]?d.throw||((e=d.return)&&e.call(d),0):d.next)&&!(e=e.call(d,f[1])).done)return e;if(d=0,e)f=[2&f[0],e.value];switch(f[0]){case 0:case 1:e=f;break;case 4:return g.label++,{value:f[1],done:!1};case 5:g.label++,d=f[1],f=[0];continue;case 7:f=g.ops.pop(),g.trys.pop();continue;default:if(!(e=g.trys,(e=e.length>0&&e[e.length-1])||6!==f[0]&&2!==f[0])){g=0;continue}if(3===f[0]&&(!e||f[1]>e[0]&&f[1]<e[3])){g.label=f[1];break}if(6===f[0]&&g.label<e[1]){g.label=e[1],e=f;break}if(e&&g.label<e[2]){g.label=e[2],g.ops.push(f);break}if(e[2])g.ops.pop();g.trys.pop();continue}f=b.call(a,g)}catch(a){f=[6,a],d=0}finally{c=e=0}if(5&f[0])throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}([f,h])}}};!function(a){a.TaggedPersonal="tagged_personal",a.TaggedDocuments="tagged_documents",a.TaggedImportant="tagged_important",a.TaggedUrgent="tagged_urgent",a.TaggedNeedsReply="tagged_needs_reply"}(xf||(xf={}));var If=((wf={})[xf.TaggedUrgent]=i18n("Срочно"),wf[xf.TaggedImportant]=i18n("Важно"),wf[xf.TaggedNeedsReply]=i18n("Ответить"),wf[xf.TaggedDocuments]=i18n("Документы"),wf[xf.TaggedPersonal]=i18n("Личное"),wf),Jf=(0,zf.createGlobalAction)("colortags/change",function(a){return Gf(void 0,void 0,Promise,function(){var b,c,d,e,f;return Hf(this,function(g){switch(g.label){case 0:if(b=a.model,c=a.tags,d=ee().getByMessageId(b.id),(e={})[b.id]=b.get("flags.tags"),d)e[d.id]=d.get("flags.tags");if(b instanceof ee())b.get("messages").forEach(function(a){a=Df().all.get(a.id),e[a.id]=a.get("flags.tags")});if(b.set("flags.tags",c),d)d.set("flags.tags",function(a,b,c){var d={};return b.get("messages").forEach(function(b){var e=(b=Df().all.get(b.id)).get("flags.tags");if(b.id===a.id)e=c;null==e||e.forEach(function(a){if(!d[a])d[a]=!0})}),Object.keys(d)}(b,d,c));if(b instanceof ee())b.get("messages").forEach(function(a){(a=Df().all.get(a.id)).set("flags.tags",c)});return[4,Ff().call(b.changeColorTagsUrl,{ids:[b.get("id")],tags:c})];case 1:if(null==(f=g.sent())?void 0:f.error){if(b.set("flags.tags",e[b.id]),d)d.set("flags.tags",e[d.id]);if(b instanceof ee())b.get("messages").forEach(function(a){(a=Df().all.get(a.id)).set("flags.tags",e[a.id])})}return[2,{updatedIds:f.body||[]}]}})})}),Kf=function(a,b){var c=a.get("flags.tags").filter(function(a){return a!==b});Jf({model:a,tags:c})};Jf.rejected.subscribe(function(a){var b=a.error;Bf().add("setColorTags failed",b),ge().add({type:ge().types.error,text:i18n("Что-то пошло не так"),qa:"on-delete-tag-notify"})});var Lf=nc(6359),Mf=nc.n(Lf),Nf=function(a,b,c){var d=null===s.TAGS_COLORS||void 0===s.TAGS_COLORS?void 0:s.TAGS_COLORS[a],e={"--2kit-chip-height":c?"var(--vkui--x5)":"var(--vkui--x6)","--2kit-chip-background-color":d?"var(--vkui--color_tag_background_".concat(d,")"):"var(--vkui--color_background_secondary_alpha)","--2kit-chip-background-color--hover":d?"var(--vkui--color_tag_background_".concat(d,"--hover)"):"var(--vkui--color_background_secondary_alpha--hover)","--2kit-chip-background-color--active":d?"var(--vkui--color_tag_background_".concat(d,"--active)"):"var(--vkui--color_background_secondary_alpha--active)","--2kit-chip-icon-color":d?"var(--vkui--color_tag_text_".concat(d,")"):"var(--vkui--color_icon_primary)","--2kit-chip-icon-color--active":d?"var(--vkui--color_tag_text_".concat(d,"--active)"):"var(--vkui--color_icon_primary--active)","--2kit-text-color":d?"var(--vkui--color_tag_text_".concat(d,")"):"var(--vkui--color_text_secondary)"};if(b)e["--2kit-chip-text-padding"]="0 var(--vkui--x1) 0 var(--vkui--x2)";return e},Of=function(a){var b=a.tag,c=a.empty,d=a.compact,e=a.onCloseClick,i=a.onClick,j=b?If[b]:i18n("Добавить метку"),k=b?"color-tag:".concat(b):"color-tag:add",l=(0,g.useCallback)(function(){return i(b)},[i,b]),m=(0,g.useCallback)(function(){return e(b)},[e,b]);return h().createElement("span",{style:Nf(b,!!e,d)},h().createElement(f.Chip,{text:c?"":j,textProps:{mode:"small"},onClick:i?l:null,onCloseClick:e?m:null,testId:k}))},Pf=sa.ModeContext.Consumer,Qf=function(){return(Qf=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++)for(var e in b=arguments[c])if(Object.prototype.hasOwnProperty.call(b,e))a[e]=b[e];return a}).apply(this,arguments)};function Rf(a){return function(b){return h().createElement(Pf,null,function(c){var d=b.mode,e=void 0===d?c:d;return h().createElement(a,Qf({},b,{mode:e}))})}}var Sf=function(){return(Sf=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++)for(var e in b=arguments[c])if(Object.prototype.hasOwnProperty.call(b,e))a[e]=b[e];return a}).apply(this,arguments)};function Tf(a){return function(b){return function(c){var d;if("function"==typeof a)d=a(c);if("string"==typeof a)d=a;return h().createElement(b,Sf({themeClassName:d},c))}}}var Uf,Vf={text:"LG-qpXXxvyWu6jdl5Gi7J",normal:"_2gKLkbexHGxTQZD1QZ1Rjy",compact:"_2QZhjTImYCoGipR10q4egR",type_normal:"RoFgOx4FtYsE75MGCG1F0",type_badge:"_3oebx2fsA1-fiPatjmNyF",type_secondary:"zeOwucwyESXoqO1hsz6dT",bold:"_2FBZnr8QOI7cn9pMLgkRAm",type_caption:"_2xV0XYI8vqnpAY3D78_2HI",contactName:"_2XFqcqPMFWHtYaXVX5gpnP"},Wf=function(){var a=function(b,c){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)if(Object.prototype.hasOwnProperty.call(b,c))a[c]=b[c]})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw new TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),Xf=function(a,b,c,d){var e,f=arguments.length,g=f<3?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)if(e=a[h])g=(f<3?e(g):f>3?e(b,c,g):e(b,c))||g;return f>3&&g&&Object.defineProperty(b,c,g),g};!function(a){a.NORMAL="type_normal",a.CAPTION="type_caption",a.BADGE="type_badge",a.SECONDARY="type_secondary"}(Uf||(Uf={}));var Yf,Zf=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}return Wf(b,a),b.prototype.render=function(){var a,b=this.props,c=b.children,d=b.className,e=b.mode,f=b.text,g=b.themeClassName,i=b.type,j=b.bold,k=b.testId,l=ca()(((a={})[Vf.text]=!0,a[Vf[i]]=void 0!==i,a[Vf[e]]=void 0!==e,a[Vf.bold]=j,a[d]=void 0!==d,a[g]=void 0!==g,a));return h().createElement("span",{"data-test-id":k,className:l},f||c)},b=Xf([Rf,Tf(function(a){if(a.type!==Uf.SECONDARY)return"r-text";else return"ll-pd__text_subtitle"})],b)}(h().PureComponent),$f={container:"_2RFvbHgredzb598qxf1fIY",transparent:"_2INdw9pFkG3afhYXuc-Vss",text:"_3fswF9vDhtM556nP7vBolq",large:"_25jN64TaI9cAha83XnvuFW"},_f=function(){var a=function(b,c){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)if(Object.prototype.hasOwnProperty.call(b,c))a[c]=b[c]})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw new TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}();!function(a){a.NORMAL="normal",a.LARGE="large"}(Yf||(Yf={}));var ag=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}return _f(b,a),b.prototype.render=function(){var a,b,c=this.props,d=c.className,e=c.size,f=void 0===e?Yf.LARGE:e,g=c.text,i=c.transparent,j=ca()(((a={})[$f.container]=!0,a[$f[f]]=!0,a[$f.transparent]=i,a[d]=void 0!==d,a)),k=ca()(((b={})[$f.text]=!0,b));return h().createElement("span",{className:j},h().createElement(Zf,{className:k,type:Uf.BADGE},g))},b}(h().PureComponent),bg="_26Dn0F1HkeaVuJNtmK_38S",cg=function(){var a=function(b,c){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)if(Object.prototype.hasOwnProperty.call(b,c))a[c]=b[c]})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw new TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),dg=function(a,b,c,d){var e,f=arguments.length,g=f<3?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)if(e=a[h])g=(f<3?e(g):f>3?e(b,c,g):e(b,c))||g;return f>3&&g&&Object.defineProperty(b,c,g),g},eg=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}return cg(b,a),b.prototype.render=function(){var a,b=this.props.themeClassName,c=ca()(((a={})[bg]=!0,a[b]=void 0!==b,a));return h().createElement("hr",{className:c})},b=dg([Tf("r-hr")],b)}(h().PureComponent),fg=function(){var a=function(b,c){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)if(Object.prototype.hasOwnProperty.call(b,c))a[c]=b[c]})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw new TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),gg=function(a,b,c,d){var e,f=arguments.length,g=f<3?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)if(e=a[h])g=(f<3?e(g):f>3?e(b,c,g):e(b,c))||g;return f>3&&g&&Object.defineProperty(b,c,g),g},hg=Object.values(sa.ColouredIconTypes);function ig(a){return hg.includes(a)?a:void 0}var jg,kg=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}return fg(b,a),b.prototype.renderIcon=function(a){var b,c=this.props,d=c.isColoured,e=c.className,f=c.name,g=c.themeClassName,i=a[f],j=ca()(((b={})[g]=void 0!==g,b[e]=void 0!==e,b));return h().createElement(h().Fragment,null,d&&h().createElement(sa.ColouredIcon,{className:j,icon:i,type:ig(f)}),!d&&h().createElement(sa.Icon,{className:j,icon:i}))},b.prototype.render=function(){var a=this;return h().createElement(sa.ColouredIconContext.Consumer,null,function(b){return a.renderIcon(b)})},b=gg([Tf("r-icon")],b)}(h().PureComponent),lg={container:"XMGeM4f3_MAG3PtguoT0T",caption:"_1die4XfSHVyoGk-M9nYcXP",hr:"_38kbG8uq4y7IpVq0wnYUOY",compact:"XgYUmxJVRD2SkPdz7_RDh",markable:"jSmtsIDaNP9CighrQD6k9",normal:"cWMu0sJX7XUaHwjeTRW3w",nano:"_3sG86eq-T3iVswnMtaedIn",list:"enirazkQzjhqKqTY-aRDs",selected:"_7b0DcIQXtCY6SzNUmJkef",filters:"_3k_JYURSSx8BBy00lttuxQ",navigation:"_1Uh_X8Tg3l3dZcpNJUTDV6",text:"_3nnq1GzHyeR6tFzK4c4mHp",short:"_3c-zpB4-3qRxROXAgsCEvf",icon:"_1Dk2FFsjYLDLlZc3gRvOtK",badge:"_3t9W7qqi94ywHeV8deEkLI",iconRight:"MH7q6wOUz9tmXGh_cCWQn",iconEmpty:"_247_-RBUJ2om6fZqqJQcE0",hr_list:"_2EymLWvLTXASUALXCv7wYR",touch:"_1AB5kt9TP5e61Li0_Kf32M"},mg=function(){var a=function(b,c){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)if(Object.prototype.hasOwnProperty.call(b,c))a[c]=b[c]})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw new TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),ng=function(){return(ng=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++)for(var e in b=arguments[c])if(Object.prototype.hasOwnProperty.call(b,e))a[e]=b[e];return a}).apply(this,arguments)},og=function(a,b,c,d){var e,f=arguments.length,g=f<3?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)if(e=a[h])g=(f<3?e(g):f>3?e(b,c,g):e(b,c))||g;return f>3&&g&&Object.defineProperty(b,c,g),g};function pg(a){var b,c,d,e,f,g=a.badgeText,i=a.contentText,j=a.contentTextType,k=a.iconName,l=a.iconEmpty,m=a.rightIconName,n=!!k,o=!!m,p=ca()(((b={})[lg.icon]=!0,b)),q=ca()(((c={})[lg.iconRight]=!0,c)),r=ca()(((d={})[lg.iconEmpty]=!0,d[lg.icon]=!0,d)),s=ca()(((e={})[lg.text]=!0,e)),t=ca()(((f={})[lg.badge]=!0,f));return h().createElement(h().Fragment,null,n&&h().createElement(kg,{className:p,name:k,isColoured:!0}),l&&h().createElement("span",{className:r}),i&&h().createElement(Zf,{className:s,text:i,type:j}),g&&h().createElement(ag,{className:t,text:g,transparent:!0}),o&&h().createElement(kg,{className:q,name:m,isColoured:!0}))}function qg(a){var b,c,d=a.iconEmpty,e=a.short,f=a.type,g=void 0===f?jg.LIST:f,i=ca()(((b={})[lg.hr]=!0,b[lg.hr_short]=e,b[lg["hr_"+g]]=void 0!==g,b)),j=ca()(((c={})[lg.iconEmpty]=!0,c[lg.icon]=!0,c));return h().createElement("div",{className:i},d&&h().createElement("span",{className:j}),h().createElement(eg,null))}function rg(a){var b,c=a.text,d=a.testId,e=ca()(((b={})[lg.caption]=!0,b));return h().createElement("div",{"data-test-id":d,className:e},h().createElement(Zf,{text:c,type:Uf.CAPTION}))}!function(a){a.LIST="list",a.NAVIGATION="navigation"}(jg||(jg={}));var sg=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}return mg(b,a),b.prototype.render=function(){var a,b=this.props,c=b.children,d=b.contentProps,e=b.mode,g=b.navigationIndex,i=b.onMouseDown,j=b.onClick,k=b.onKeyDown,l=b.onMouseEnter,m=b.selected,n=b.isFilter,o=b.short,p=b.themeClassName,q=b.title,r=b.type,u=void 0===r?jg.LIST:r,v=b.testId,w=b.markable,x=b.marked,y=ca()(((a={})[lg.filters]=n,a[lg.container]=!0,a[lg.selected]=m,a[lg.short]=o,a[lg[u]]=void 0!==u,a[lg[e]]=void 0!==e,a[p]=void 0!==p,a[lg.safe]=!0,a[lg.touch]=s.TOUCH_MODE,a[lg.markable]=w,a));return h().createElement("div",ng({className:y,"data-navigation-index":g,onClick:j,onMouseDown:i,onKeyDown:k,onMouseEnter:l,title:q},v?{"data-test-id":v,"data-test-selected":m}:{}),c||h().createElement(pg,ng({},d,{short:o})),x&&h().createElement(f.Icon,{icon:t.STATUS_DONE}))},b=og([Rf,Tf(function(a){var b="r-list-item";if(a.selected)b+=" ".concat("r-list-item","_selected");return b})],b)}(h().PureComponent),tg="_20AOs9Rzki2pykeqGTgJWi",ug="_1xMWOID8S2qMMRlJ35VpJ5",vg="_2vjeQtsPLruSIi8mhWeCO5",wg=function(a,b,c){if(c||2===arguments.length)for(var d,e=0,f=b.length;e<f;e++)if(d||!(e in b)){if(!d)d=Array.prototype.slice.call(b,0,e);d[e]=b[e]}return a.concat(d||Array.prototype.slice.call(b))},xg=function(a){var b,c=a.model,d=a.tags,e=a.xrayFrom,i=null===(b=null==c?void 0:c.getFolder())||void 0===b?void 0:b.id,j=(0,g.useCallback)(function(a){if(null==d?void 0:d.includes(a))return l().send("click_delete_label",{dwh:{folder_id:Number(i),from:e,label_name:a,letter_id:c instanceof ee()?c.get("last"):null==c?void 0:c.id,mode:Mf().getType(),is_compact:Mf().getUiLayout().ponyMode}}),Kf(c,a);else return l().send("click_add_label",{dwh:{folder_id:Number(i),from:e,label_name:a,letter_id:c instanceof ee()?c.get("last"):null==c?void 0:c.id,mode:Mf().getType(),is_compact:Mf().getUiLayout().ponyMode}}),Jf({model:c,tags:wg(wg([],null!=d?d:[],!0),[a],!1)})},[i,c,d,e]),k=Object.entries(If).map(function(a){var b=a[0],c=a[1],e=null==d?void 0:d.includes(b);return h().createElement(sg,{key:b,mode:"compact",markable:!0,marked:e,onClick:function(){return j(b)},testId:"tags-picker-item:".concat(b,":").concat(e?"marked":"not_marked")},h().createElement("div",{className:tg},h().createElement("div",{className:ug,style:{backgroundColor:"var(--vkui--color_tag_background_".concat(null===s.TAGS_COLORS||void 0===s.TAGS_COLORS?void 0:s.TAGS_COLORS[b],")")}}),h().createElement("div",{className:vg},h().createElement(f.Text,{text:c}))))});if(null==d?void 0:d.length)k.unshift(h().createElement(sg,{key:"no_tag",mode:"compact",markable:!0,onClick:function(){l().send("click_delete_all_label",{dwh:{labels:null==d?void 0:d.join(","),folder_id:Number(i),from:e,letter_id:c instanceof ee()?c.get("last"):null==c?void 0:c.id}}),Jf({model:c,tags:[]})},testId:"tags-picker-item:no_tag"},h().createElement("div",{className:tg},h().createElement(f.Icon,{icon:t.ACTIONS_CLOSE}),h().createElement("div",{className:vg},h().createElement(f.Text,null,i18n("Без меток"))))));return h().createElement("div",{"data-qa-id":(0,Ub.qa)("tags-picker")},k)},yg="Dij-kL-gfkN5i71rllDra",zg=function(a){var b=a.model,c=a.tags,d=function(a){var c;Kf(b,a);var d=null===(c=null==b?void 0:b.getFolder())||void 0===c?void 0:c.id;l().send("click_delete_label",{dwh:{folder_id:Number(d),from:"message",label_name:a,letter_id:null==b?void 0:b.id,mode:Mf().getType(),is_compact:Mf().getUiLayout().ponyMode}})},e=s.TAGS_ORDER.filter(function(a){return null==c?void 0:c.includes(a)}).map(function(a){return h().createElement(Of,{key:a,tag:a,onCloseClick:d})}).reverse(),g=(null==e?void 0:e.length)===(null===s.TAGS_ORDER||void 0===s.TAGS_ORDER?void 0:s.TAGS_ORDER.length);return h().createElement(h().Fragment,null,!!(null==e?void 0:e.length)&&h().createElement("div",{"data-qa-id":(0,Ub.qa)("letter-tags"),className:yg},e,!g&&h().createElement(f.Dropdown,{overlay:h().createElement(xg,{model:b,tags:c,xrayFrom:"message_change_menu"}),pureOverlay:!0,placement:"bottomLeft",reservePlacement:"topLeft",overlayContainer:document.body},h().createElement(Of,{onClick:function(){var a,c=null===(a=null==b?void 0:b.getFolder())||void 0===a?void 0:a.id;l().send("click_on_add_label_button",{dwh:{folder_id:Number(c),from:"message_change_menu",letter_id:null==b?void 0:b.id,mode:Mf().getType(),is_compact:Mf().getUiLayout().ponyMode}})}}))))},Ag=nc(8028),Bg=function(){return(Bg=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++)for(var e in b=arguments[c])if(Object.prototype.hasOwnProperty.call(b,e))a[e]=b[e];return a}).apply(this,arguments)},Cg=new nf("marusia-rl-button");function Dg(){var a=Bg(Bg({},this.props),this.state);return h().createElement("div",{className:Cg.root()},h().createElement("img",{src:this.getLogoSrc(),onClick:(0,ze.CH)(this,{name:"marusia:rl:button:click",details:a.model}),className:Cg.elem("img")}),h().createElement("div",{className:Cg.elem("button")},h().createElement(Jc,{text:i18n("Прочитать письмо"),ico:"actions:play",icoSize:"xs",compact:!0,shadowless:!0,invert:!0,centered:!0,remitEvents:{click:"marusia:rl:button:click"},remitDetails:{model:a.model},broadcastEvent:(0,ze.Yv)(this),component:Je(),key:"button2"})))}var Eg=function(){var a=function(b,c){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)if(Object.prototype.hasOwnProperty.call(b,c))a[c]=b[c]})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw new TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),Fg=function(a,b,c){if(c||2===arguments.length)for(var d,e=0,f=b.length;e<f;e++)if(d||!(e in b)){if(!d)d=Array.prototype.slice.call(b,0,e);d[e]=b[e]}return a.concat(d||Array.prototype.slice.call(b))}([],Object.values(Ag.blockSpec.events),!0),Gg=function(a){function b(b){var c=a.call(this,b)||this;return c.blockIsMounted=!1,c.rootClassName=Ag.blockSpec.rootClassName,c.events=Ag.blockSpec.events,c.onClick=Ag.blockSpec.onClick,c.getLogoSrc=Ag.blockSpec.getLogoSrc,c.radarSend=Ag.blockSpec.radarSend,c.render=Dg,Fg.forEach(function(a){c[a]=c[a].bind(c)}),c}return Eg(b,a),b.prototype.componentDidMount=function(){this.blockIsMounted=!0,Ag.blockSpec.didMount.bind(this)()},b.prototype.componentWillUnmount=function(){this.blockIsMounted=!1},b.prototype.isMounted=function(){return this.blockIsMounted},b}(h().Component),Hg=(0,ze.v$)("marusia-read-letter-button",Gg,{syncMediatorsOnRender:!1}),Ig=nc(6465),Jg=function(){return(Jg=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++)for(var e in b=arguments[c])if(Object.prototype.hasOwnProperty.call(b,e))a[e]=b[e];return a}).apply(this,arguments)},Kg=new nf("notification-badge");function Lg(){var a,b=Jg(Jg({},this.props),this.state);return h().createElement("div",{className:Kg.root()},!!b.show&&h().createElement("div",{"data-qa-id":(0,Ub.qa)("".concat(b["test-id"])),className:Kg.elem("badge",(a={react:!0},a["color_".concat(b.colorMode)]=!!b.colorMode,a["size_".concat(b.size)]=!!b.size,a))}),this.props.children)}var Mg=function(){var a=function(b,c){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)if(Object.prototype.hasOwnProperty.call(b,c))a[c]=b[c]})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw new TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),Ng=function(){return(Ng=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++)for(var e in b=arguments[c])if(Object.prototype.hasOwnProperty.call(b,e))a[e]=b[e];return a}).apply(this,arguments)},Og=function(a){function b(){var b=null!==a&&a.apply(this,arguments)||this;return b.getCssRule=Ig.blockSpec.getCssRule,b.setInlineStyles=Ig.blockSpec.setInlineStyles,b.render=Lg,b}return Mg(b,a),b.prototype.componentDidUpdate=function(a,b){var c=Ng(Ng({},this.props),this.state),d=Ng(Ng({},a),b);if(c.ponymode!==d.ponymode)this.setInlineStyles();if(c.show!==d.show&&c.show)this.setInlineStyles()},b.prototype.didMount=function(){Ig.blockSpec.didMount.bind(this)()},b}(h().Component),Pg=(0,ze.v$)("notification-badge",Og,{syncMediatorsOnRender:!1});Pg.defaultProps=Ig.blockSpec.defaults;var Qg,Rg=Pg,Sg="_2oRHl88bWX55jteN4U-fwG",Tg=function(){return(Tg=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++)for(var e in b=arguments[c])if(Object.prototype.hasOwnProperty.call(b,e))a[e]=b[e];return a}).apply(this,arguments)},Ug=new nf("letter");function Vg(a){var b=a["amp-error"];return h().createElement(h().Fragment,null,h().createElement("span",{"data-qa-id":(0,Ub.qa)("amp-icon"),className:Ug.elem("amp-icon",{error:b}),title:i18n("При отображении динамического контента письма возникли ошибки")},h().createElement(Jc,{inlineRoot:!0,name:"status:breaking",size:"s",component:Ac(),key:"ico"})))}function Wg(a,b,c,d){var e=this,f=a.ponymode,g=d?b.slice(0,d):b;return h().createElement(h().Fragment,null,g.map(function(b,d){var i=b.email==a["current-user"].getEmail(),j=d+1===g.length;return h().createElement(Jc,{inlineRoot:!0,key:"letter-contact-".concat(d),useMediators:["contact-selection"],contact:b,dir:c,isCurrent:i,dangerous:"from"===c&&e.isProbablyPhishing(),"pony-mode":f,isLast:j,remitEvents:{click:{stop:!0,prevent:!0,name:"contact:click"}},remitDetails:b,broadcastEvent:(0,ze.Yv)(e),component:Xe(),className:Sg})}))}function Xg(a){var b=a.model;return h().createElement(h().Fragment,null,h().createElement("div",{"data-qa-id":(0,Ub.qa)("unread"),className:Ug.elem("unread",{plain:!(b.is("flags.forward")||b.is("flags.reply"))})},h().createElement(Jc,{disabled:a["disable-edit"],name:"unread",compact:!a.compact,small:a.compact,forward:b.is("flags.forward"),reply:b.is("flags.reply"),state:b.is("flags.unread"),remitEvents:{click:{prevent:!0,name:"togglestatus:unread"}},remitDetails:{model:a.model,state:b.is("flags.unread")},broadcastEvent:(0,ze.Yv)(this),component:_e(),key:"letter-status2"})))}function Yg(a){return!a["preview-mode"]&&h().createElement("div",{className:Ug.elem("tags")},h().createElement(f.Dropdown,{placement:"topLeft",pureOverlay:!0,overlay:h().createElement(xg,{model:a.model,tags:a.model.get("flags.tags"),xrayFrom:"message_icon_menu"})},h().createElement(Jc,{"radar-id":"add-tag",text:i18n("Добавить метку"),ico:"status:tag",secondary:!0,short:!0,centered:!0,touch:a.touch,"data-qa-id":"add-tag",component:"button2"})))}function Zg(a){return!a["preview-mode"]&&h().createElement("div",{"data-qa-id":(0,Ub.qa)("dark-mode-toggle"),className:Ug.elem("dark-mode-toggle")},!a["preview-mode"]&&h().createElement(Jc,{name:"dark-mode",state:a["dark-mode-enabled"],remitEvents:{click:{prevent:!0,name:"dark-mode:toggle"}},broadcastEvent:(0,ze.Yv)(this),component:_e(),key:"letter-status2"}))}function $g(a){var b=a.model;return h().createElement(h().Fragment,null,h().createElement("div",{"data-qa-id":(0,Ub.qa)("flag"),className:Ug.elem("flag")},!a["preview-mode"]&&h().createElement(Jc,{disabled:!this.isEnableMark(),name:"flagged",state:b.is("flags.flagged"),remitEvents:{click:{prevent:!0,name:"togglestatus:flagged"}},remitDetails:{model:a.model,state:b.is("flags.flagged")},broadcastEvent:(0,ze.Yv)(this),component:_e(),key:"letter-status2"})))}function _g(a){return h().createElement(h().Fragment,null,h().createElement("div",{"data-qa-id":(0,Ub.qa)("calls:invite"),className:Ug.elem("flag",{},{addClass:[mf("letter-head-calls-button")]})},!a["preview-mode"]&&h().createElement(Jc,{"radar-id":"head-call",title:i18n("Позвонить"),ico:"categories:camera",base:!0,secondary:!0,touch:a.touch,model:a.model,disabled:!this.isEnableCall(),centered:!0,remitEvents:{click:{prevent:!0,name:"calls:invite"}},remitDetails:a.model,broadcastEvent:(0,ze.Yv)(this),component:Je(),key:"button2"})))}function ah(a){return h().createElement(h().Fragment,null,h().createElement("div",{"data-qa-id":(0,Ub.qa)("print"),className:Ug.elem("flag")},!a["preview-mode"]&&h().createElement(Jc,{"radar-id":"head-print",title:i18n("Распечатать"),ico:"actions:print",base:!0,secondary:!0,touch:a.touch,model:a.model,centered:!0,remitEvents:{click:{prevent:!0,name:"print"}},remitDetails:a.model,broadcastEvent:(0,ze.Yv)(this),component:Je(),key:"button2"})))}function bh(a){return h().createElement(h().Fragment,null,h().createElement("div",{"data-qa-id":(0,Ub.qa)("calendar:create"),className:Ug.elem("flag",{},{addClass:[mf("letter-head-calendar-button")]})},!a["preview-mode"]&&h().createElement(Jc,{"radar-id":"head-calendar",title:i18n("Создать событие"),ico:"calendar-month",base:!0,secondary:!0,touch:a.touch,model:a.model,disabled:a["disable-edit"],centered:!0,remitEvents:{click:{prevent:!0,name:"calendar:create"}},remitDetails:{model:a.model,createContent:"web_email_letter_header"},broadcastEvent:(0,ze.Yv)(this),component:Je(),key:"button2"})))}function ch(a){var b=a.model,c=b.get("correspondents.from.0");return h().createElement(h().Fragment,null,h().createElement("div",{className:Ug.elem("avatar-wrap")},!a.compact&&this.statusUnread(a),h().createElement("div",{"data-qa-id":(0,Ub.qa)("avatar"),onClick:(0,ze.CH)(this,{stop:!0,prevent:!0,name:"clickavatar",details:c}),className:Ug.elem("avatar")},h().createElement(Rg,{show:a.isOnline,colorMode:"success","test-id":a.isOnline&&"online-badge"},h().createElement(Jc,{size:a.compact?"m":"s",src:b.get("correspondents.from.0.avatars.default"),touch:a.touch,component:He(),key:"avatar"}))),!!a.compact&&this.statusUnread(a)))}function dh(a){var b,c=a.model,d=c.getFolder(),e="",f="";if(c.isHigh())e="important";if(!a["disable-category"]&&c.get("transaction_category")&&!d.isSpam())e=c.get("transaction_category");if(a.showfolder)f=d.get("name");return h().createElement(h().Fragment,null,h().createElement("div",{className:Ug.elem("folder",(b={},b["".concat(!(!f&&!e))]=!0,b.react=!0,b))},h().createElement(Jc,{short:!f,name:e,text:f,size:"l",component:Te(),key:"letter-category"})))}function eh(a){var b=a.model;return h().createElement(h().Fragment,null,h().createElement("div",{"data-qa-id":(0,Ub.qa)("date"),className:Ug.elem("date",{react:!0})},this.mods.getLocaleDateFull(b.get("date"))))}function fh(a){var b=a.model,c=this.getMessageCorrespondents(),d=c.length>3?2:c.length,e=c.length-d,f=a.model.get("correspondents.bcc.length"),g=a.model.get("correspondents.cc.length");return h().createElement(h().Fragment,null,!a["details-expanded"]?h().createElement("div",{"data-qa-id":(0,Ub.qa)("recipients:short"),className:Ug.elem("recipients",{short:!0})},h().createElement("span",{className:Ug.elem("recipient-type")},"".concat(i18n("Кому"),":")),this.correspondents(a,c,"to",d),!!(c.length>3)&&h().createElement("a",{"data-qa-id":(0,Ub.qa)("recipients:short-expand"),onClick:(0,ze.CH)(this,{prevent:!0,name:"details:expand"}),className:Ug.elem("recipients-short-expand")},"".concat(i18n("и ещё")," "),!!a.touch&&{moreCount:e},!a.touch&&this.mods.correspondentsCount(e))):h().createElement("div",{"data-qa-id":(0,Ub.qa)("recipients:expanded"),className:Ug.elem("recipients",{expanded:!0})},h().createElement("div",{className:Ug.elem("header-details-recipient")},h().createElement("span",{className:Ug.elem("recipient-type")},"".concat(i18n("Кому"),":")),this.correspondents(a,b.get("correspondents.to"),"to"),!(g||f)&&h().createElement("a",{"data-qa-id":(0,Ub.qa)("recipients:short-collapse"),onClick:(0,ze.CH)(this,{prevent:!0,name:"details:collapse"}),className:Ug.elem("recipients-short-collapse")},i18n("Скрыть список"))),!!g&&h().createElement("div",{className:Ug.elem("header-details-recipient")},h().createElement("span",{className:Ug.elem("recipient-type")},"".concat(i18n("Копия"),":")),this.correspondents(a,b.get("correspondents.cc"),"cc"),!f&&h().createElement("a",{"data-qa-id":(0,Ub.qa)("recipients:short-collapse"),onClick:(0,ze.CH)(this,{prevent:!0,name:"details:collapse"}),className:Ug.elem("recipients-short-collapse")},i18n("Скрыть список"))),!!f&&h().createElement("div",{className:Ug.elem("header-details-recipient")},h().createElement("span",{className:Ug.elem("recipient-type")},"".concat(i18n("Скрытая"),":")),this.correspondents(a,b.get("correspondents.bcc"),"bcc"),h().createElement("a",{"data-qa-id":(0,Ub.qa)("recipients:short-collapse"),onClick:(0,ze.CH)(this,{prevent:!0,name:"details:collapse"}),className:Ug.elem("recipients-short-expand")},i18n("Скрыть список")))))}function gh(a){var b=a.model,c=b.getFolder(),d=(0,Be.hasLetterReplyAll)(b),e=a.folders;return h().createElement(h().Fragment,null,h().createElement("div",{"data-qa-id":(0,Ub.qa)("more"),className:Ug.elem("more")},!a.readonly&&h().createElement(Jc,{text:i18n("Ещё"),ico:"more-hor",secondary:!0,"expand-left":!0,"disable-edit":a["disable-edit"],model:b,parentThread:a.parentThread,folders:e,folder:a.model.folder,read:b.is("flags.unread")?!0:null,unread:!b.is("flags.unread")?!0:null,flag:!b.is("flags.flagged")?!0:null,unflag:b.is("flags.flagged")?!0:null,archive:!c.isArchive(),spam:this._showSpam(),selectedLettersIds:[b.get("id")],unsubscribe:this._showUnsubscribeInMoreMenu(),unspam:c.isSpam(),"dark-mode":this.isDarkMode(),metathreads:a.metathreads,"create-event":this._showDropdownCalendarButton(),"invite-call":this._showDropdownCallButton(),"create-filter":this._showFilterButton(),"category-feedback":a["category-feedback"]&&!a.touch,translate:!a["disable-translate"],more:!0,remove:!0,move:!0,readletter:!0,print:!0,reply:d?"all":!0,"radar-id":"more",useMediators:["letters-selection","compose-manager","letters-actions","calls-manager","calendar-manager","settings-filters-manager","translator-manager","unsubscribe-actions"],component:Ne(),key:"dropdown-actions"})))}function hh(a){var b=a.model,c=(0,Be.hasLetterReplyAll)(b),d=b.get("id"),e=b.get("correspondents.from")[0].email;return h().createElement(h().Fragment,null,h().createElement("div",{"data-qa-id":(0,Ub.qa)("unsubscribe"),className:Ug.elem("footer-button")},h().createElement(Jc,{useMediators:["unsubscribe-actions","themes-manager"],touch:a.touch,senderFrom:e,letterId:d,"position-right":!0,short:c,component:Ce.lazyUIUnsubscribe,key:"unsubscribe"})))}function ih(a){var b=a.model;a.model.is("attaches.list.length")&&this.isEnableAttach();var c=b.get("drafts.replyall");return h().createElement("div",{className:Ug.elem("dropdown-overlay")},h().createElement(Jc,{text:i18n("Есть черновик, продолжить с ним"),remitEvents:{click:"letter:draft:replyall"},remitDetails:{model:a.model,draftId:c},broadcastEvent:(0,ze.Yv)(this),component:Je(),base:!0,pure:!0,touch:a.touch}),h().createElement(Jc,{text:i18n("Новое письмо"),remitEvents:{click:"compose:replyall"},remitDetails:a.model,broadcastEvent:(0,ze.Yv)(this),component:Je(),base:!0,pure:!0,touch:a.touch}))}function jh(a){var b=a.model;a.model.is("attaches.list.length")&&this.isEnableAttach();var c=b.get("drafts.reply");return h().createElement("div",{className:Ug.elem("dropdown-overlay")},h().createElement(Jc,{text:i18n("Есть черновик, продолжить с ним"),remitEvents:{click:"letter:draft:reply"},remitDetails:{model:a.model,draftId:c},broadcastEvent:(0,ze.Yv)(this),component:Je(),base:!0,pure:!0,touch:a.touch}),h().createElement(Jc,{text:i18n("Новое письмо"),remitEvents:{click:"compose:reply"},remitDetails:a.model,broadcastEvent:(0,ze.Yv)(this),component:Je(),base:!0,pure:!0,touch:a.touch}))}function kh(a){var b=a.model.get("drafts.forward");return h().createElement("div",{className:Ug.elem("dropdown-overlay")},h().createElement(Jc,{text:i18n("Есть черновик, продолжить с ним"),remitEvents:{click:"letter:draft:forward"},remitDetails:{model:a.model,draftId:b},broadcastEvent:(0,ze.Yv)(this),component:Je(),base:!0,pure:!0,touch:a.touch}),h().createElement(Jc,{text:i18n("Новое письмо"),remitEvents:{click:"compose:forward"},remitDetails:a.model,broadcastEvent:(0,ze.Yv)(this),component:Je(),base:!0,pure:!0,touch:a.touch}))}function lh(a){return h().createElement("div",{className:Ug.elem("dropdown-overlay")},h().createElement(Jc,{text:i18n("Позвонить сейчас"),ico:"categories:camera","data-qa-id":(0,Ub.qa)("calls:call"),"radar-id":"footer-calls-groupcall",disabled:!this.isEnableCall(),title:!a["disable-calls-tip"]&&i18n("Если собеседники онлайн на сайте Mail.ru, они увидят вызов и смогут ответить сразу"),remitEvents:{click:"calls:groupcall"},remitDetails:a.model,broadcastEvent:(0,ze.Yv)(this),component:Je(),base:!0,pure:!0}),h().createElement(Jc,{text:i18n("Отправить ссылку на звонок"),ico:"status:link","data-qa-id":(0,Ub.qa)("calls:invite"),"radar-id":"footer-calls-invite",disabled:!this.isEnableCall(),title:!a["disable-calls-tip"]&&i18n("Собеседники получат ссылку для видеозвонка и присоединятся, когда перейдут по ней"),remitEvents:{click:"calls:invite"},remitDetails:a.model,broadcastEvent:(0,ze.Yv)(this),component:Je(),base:!0,pure:!0}))}function mh(){var a=this,b=Tg(Tg({},this.props),this.state),c=b.model,d=b.model.is("attaches.list.length")&&this.isEnableAttach(),e=(0,Be.hasLetterReplyAll)(c),g=c.get("drafts.reply"),i=c.get("drafts.replyall"),j=c.get("drafts.forward"),k=b.ponymode,l=this.isAMPLetter(),m=b["amp-error"],n=this.getLetterMetaHeaderType(c),o=c.get("flags.maybe_phishing"),p=e&&b["sticky-reduce-reply"],q=b["marusia-portal-enabled"]&&this.isMarusiaReadLetterEnabled(),r=b["marusia-portal-enabled"]&&b["marusia-read-all-letters"],t=this.getMarusiaReadLetterRadarPrefix(),u=b.smart_replies&&this.isEnableReply();return h().createElement("div",{ref:this.letterRef,className:Ug.root({priority:!0,unread:!0,attach:!0,single:b.single,first:b.first,last:b.last,touch:b.touch,compact:b.compact,fluid:!b.compact,sticky:b.sticky,"native-sticky":b["native-sticky"],"hover-support":b["hover-support"],"expanded-next":b["expanded-next"],"light-mode":!this.isDarkMode()})},h().createElement("div",{"data-qa-id":(0,Ub.qa)("head"),onClick:(0,ze.CH)(this,"clickhead"),className:Ug.elem("head",{sticky:b["sticky-head"],"sticky-fade":b["sticky-head-fade"]})},h().createElement("div",{className:Ug.elem("header-row")},this.avatarWrap(b),h().createElement("div",{"data-qa-id":(0,Ub.qa)("head:details"),className:Ug.elem("header-details")},h().createElement("div",{className:Ug.elem("author")},this.correspondents(b,c.get("correspondents.from"),"from"),!b.compact&&this.date(b),!b.compact&&this.folder(b),(l&&!b["preview-mode"]||m)&&!b.compact&&this.ampIcon(b)),this.getMessageCorrespondents().length&&this.recipients(b),b.compact&&this.folder(b),b.compact&&this.date(b),(l&&!b["preview-mode"]||m)&&b.compact&&this.ampIcon(b)),h().createElement("div",{"data-qa-id":(0,Ub.qa)("controls"),className:Ug.elem("controls")},this.statusFlag(b),this.isDarkModePossible()&&this.darkModeToggle(b),!s.DISABLE_HEAD_PRINT&&this.showPrintButton(b),s.ENABLE_TAGS&&this.addTag(b),this.more(b)))),h().createElement("div",{className:Ug.elem("before-letter-body")},s.ENABLE_TAGS&&h().createElement(zg,{model:c,tags:c.get("flags.tags")}),n&&h().createElement("div",{className:Ug.elem("letter-meta-container",{phishing:o})},h().createElement(Jc,{type:n,model:c,useMediators:["letters-actions"],remitEvents:{"attaches-cloud-save":"attaches:cloud:all"},updateRemitEventsName:!0,broadcastEvent:(0,ze.Yv)(this),component:Ze(),key:"letter-meta"})),this.isEnableConfirmationReceipt()&&h().createElement("div",{className:Ug.elem("confirm-receipt")},h().createElement(Jc,{id:"confirm-receipt",model:c,remitEvents:{confirm:"confirmreceipt"},broadcastEvent:(0,ze.Yv)(this),component:Ve(),key:"letter-confirm-receipt"})),this.isTranslatorVisible()&&h().createElement("div",{className:Ug.elem("translator")},h().createElement(Jc,{id:"translator",error:b["is-translator-error"],"from-default-selected":b["translator-default-from"],loading:b["is-translator-loading"],ponymode:k,compact:b.compactTranslator,"to-default-selected":b["translator-default-to"],translated:this.isLetterTranslated(),remitEvents:{close:"translator:close:click",original:"translator:original:click",retry:"translator:retry:click",translate:"translator:translate:click"},broadcastEvent:(0,ze.Yv)(this),component:df(),key:"translator"}))),!this.isTranslatorVisible()&&this.isTooltipVisible()&&h().createElement("div",{className:Ug.elem("tooltip")},!!this.isImagesHiddenTooltipVisible()&&h().createElement(Jc,{type:"images-hidden-tooltip",ponymode:k,"title-text":i18n("Мы скрыли изображения в письме, чтобы защитить аккаунт"),"action-text":i18n("Показать изображения"),remitEvents:{action:"letter-tooltip:show-images:click",close:"letter-tooltip:close"},broadcastEvent:(0,ze.Yv)(this),component:bf(),key:"letter-tooltip"})),!!d&&h().createElement("div",{className:Ug.elem("attach-list",{react:!0})},h().createElement(Jc,{"letter-length":b.model.get("body.text").length,models:b.model.get("attaches.list"),"total-size":b.model.getAttachmentsTotalSize(),"download-link":this.getAttachmentsDowloadLink(),"preview-mode":b["preview-mode"],useMediators:["layout-manager"],"dark-mode":this.isDarkModePossible(),remitEvents:{"attach-list-expanded":"attaches:expanded","attach-list-collapsed":"attaches:collapsed","attach-list-cloud":"attaches:cloud:all","thumb-open":"attaches:open","thumb-cloud":"attaches:cloud:one","force-recalc":"letter-force-recalc"},updateRemitEventsName:!0,broadcastEvent:(0,ze.Yv)(this),component:Fe(),key:"attach-list"})),h().createElement("div",{"data-qa-id":(0,Ub.qa)("body"),className:Ug.elem("body",{react:!0})},!(b["address-header-calendar"]&&c.getJsonLdEvent()||b["smart-card-ics"]&&(0,De.getCalendarIcsEvent)(c))&&h().createElement(Jc,{key:"letter-calendar","dark-mode":this.isDarkMode(),calendars:c.getCalendarFromAttach(),component:Re()}),l&&!b["preview-mode"]?h().createElement(Jc,{ref:this.letterBody,model:c,remitEvents:{error:"amp:error","force-recalc":"letter-force-recalc"},updateRemitEventsName:!0,broadcastEvent:(0,ze.Yv)(this),component:Pe(),key:"letter-body-amp"}):h().createElement(yf,{ref:this.letterBody,key:"letter-body",id:this.getLetterBodyKey(),bodyHtml:this.getLetterBody(),"collapsed-default":b["quotes-collapsed-default"],ponymode:k,"dark-mode":this.isDarkMode(),message:c,"preview-mode":b["preview-mode"],useMediators:["layout-manager","features","flags"],remitEvents:{resize:"resize",blockquote:"blockquote",allowedattrclick:"letter:body:allowedattrclick","data-attr-click":"letter:body:data-attr:click","force-recalc":"letter-force-recalc",finepayment:"letter:body:finepayment",finepaymentright:"letter:body:finepaymentright",monetapayment:"letter:body:monetapayment",tomyselfclick:"letter:body:tomyself"},updateRemitEventsName:!0,broadcastEvent:(0,ze.Yv)(this)})),!b.readonly&&this.isShowFooter()&&h().createElement("div",{"data-qa-id":(0,Ub.qa)("footer"),className:Ug.elem("footer",{react:!0,sticky:b["sticky-footer"],"new-toolbar":s.NEW_TOOLBAR,"sticky-fade":b["sticky-footer-fade"]})},h().createElement("div",{className:Ug.elem("footer-background",{react:!0})},h().createElement("div",{className:Ug.elem("footer-buttons")},h().createElement("div",{className:Ug.elem("footer-left")},e&&h().createElement("div",{className:Ug.elem("footer-button")},i?h().createElement("div",{className:Ug.elem("button-dropdown")},h().createElement(f.Dropdown,{placement:"topLeft",pureOverlay:!0,overlay:this.itemsReplyAll(b)},h().createElement(Jc,{"radar-id":"replyall",text:i18n("Ответить всем"),ico:"reply-all",base:!0,pure:!0,touch:b.touch,disabled:!this.isEnableReply(),shortcut:"shift+r","title-shortcut":"Shift+R",component:Je()}))):h().createElement(Jc,{"radar-id":"replyall",text:i18n("Ответить всем"),ico:"reply-all",base:!0,pure:!0,touch:b.touch,model:b.model,disabled:!this.isEnableReply(),remitEvents:{click:"compose:replyall"},remitDetails:b.model,broadcastEvent:(0,ze.Yv)(this),shortcut:"shift+r","title-shortcut":"Shift+R",component:Je(),key:"button2"})),h().createElement("div",{className:Ug.elem("footer-button")},g?h().createElement("div",{className:Ug.elem("button-dropdown")},h().createElement(f.Dropdown,{placement:"topLeft",pureOverlay:!0,overlay:this.itemsReply(b)},h().createElement(Jc,{"radar-id":"reply",text:i18n("Ответить"),ico:"reply",base:!0,pure:!0,touch:b.touch,disabled:!this.isEnableReply(),short:p,shortcut:"r","title-shortcut":"R",component:Je()}))):h().createElement(Jc,{"radar-id":"reply",text:i18n("Ответить"),ico:"reply",base:!0,pure:!0,touch:b.touch,model:b.model,disabled:!this.isEnableReply(),short:p,remitEvents:{click:"compose:reply"},remitDetails:b.model,broadcastEvent:(0,ze.Yv)(this),shortcut:"r","title-shortcut":"R",component:Je(),key:"button2"})),h().createElement("div",{className:Ug.elem("footer-button")},j?h().createElement("div",{className:Ug.elem("button-dropdown")},h().createElement(f.Dropdown,{placement:"topLeft",pureOverlay:!0,overlay:this.itemsForward(b)},h().createElement(Jc,{"radar-id":"forward",text:i18n("Переслать"),ico:"forward",base:!0,pure:!0,touch:b.touch,disabled:!this.isEnableForward(),shortcut:"F","title-shortcut":"F",remitDetails:b.model,component:Je()}))):h().createElement(Jc,{"radar-id":"forward",text:i18n("Переслать"),ico:"forward",base:!0,pure:!0,touch:b.touch,model:b.model,disabled:!this.isEnableForward(),remitEvents:{click:"compose:forward"},remitDetails:b.model,broadcastEvent:(0,ze.Yv)(this),shortcut:"F","title-shortcut":"F",component:Je(),key:"button2"}))),h().createElement("div",{className:Ug.elem("footer-right")},!(this._showUnsubscribeButton()||this.isDatesMetadataEnabled())&&h().createElement(h().Fragment,null,b["invite-call"]&&!b["disable-call"]&&!b["disable-footer-call"]&&this.canCallTo(b.model)&&h().createElement("div",{"data-qa-id":(0,Ub.qa)("calls-dropdown"),className:Ug.elem("footer-button",{},{addClass:[mf("footer-calls-dropdown")]})},h().createElement("div",{className:Ug.elem("button-dropdown")},h().createElement(f.Dropdown,{placement:"topRight",pureOverlay:!0,overlay:this.itemsInviteCall(b)},h().createElement(Jc,{"disable-expand-center":!0,"expand-left":!0,ico:"categories:camera",text:i18n("Позвонить"),title:i18n("Позвонить"),annotation:!b["disable-calls-tip"]&&i18n("Отправьте ссылку на звонок или позвоните сейчас — если ваши собеседники онлайн, они увидят вызов"),ponymode:b["pony-mode"],pure:!0,short:b["sticky-reduce-all-texts"],"radar-id":"footer-call-dropdown",disabled:!this.isEnableCall(),remitEvents:{"dropdown-change-state":"dropdown-change"},updateRemitEventsName:!0,broadcastEvent:(0,ze.Yv)(this),component:Je()})))),b["invite-call"]&&!b["disable-call"]&&!b["disable-footer-call"]&&!this.canCallTo(b.model)&&h().createElement("div",{className:Ug.elem("footer-button",{},{addClass:[mf("footer-calls-button")]})},h().createElement(Jc,{className:Ug.elem("calls-invite-button"),"data-qa-id":(0,Ub.qa)("calls:invite"),"radar-id":"footer-call",text:!b["sticky-reduce-all-texts"]&&i18n("Позвонить"),title:i18n("Позвонить"),annotation:!b["disable-calls-tip"]&&i18n("Участники встречи получат ссылку для видеозвонка и присоединятся, когда перейдут по ней"),ico:"categories:camera",base:!0,pure:!0,touch:b.touch,model:b.model,disabled:!this.isEnableCall(),remitEvents:{click:"calls:invite"},remitDetails:b.model,broadcastEvent:(0,ze.Yv)(this),component:Je(),key:"button2"})),!b["disable-create-event"]&&!b["disable-footer-calendar"]&&h().createElement("div",{className:Ug.elem("footer-button")},h().createElement(Jc,{model:b.model,"sticky-reduce-one-text":b["sticky-reduce-one-text"],useMediators:["calendar-manager"],component:Le(),key:"calendar-button"}))),!!this._showVkMessengerButton()&&h().createElement("div",{className:Ug.elem("vk-chat-button",{},{addClass:[mf("toolbar-vk-chat")]})},h().createElement(Jc,{"data-qa-id":(0,Ub.qa)("vk-messenger:open"),"radar-id":"footer-vk",text:!b["sticky-reduce-one-text"]&&this._getVkMessengerParams().text,title:this._getVkMessengerParams().text,ico:"social:vk",base:!0,pure:!0,touch:b.touch,model:b.model,centered:b["sticky-reduce-one-text"],remitEvents:{click:"vk-messenger:open"},remitDetails:this._getVkMessengerParams().href,broadcastEvent:(0,ze.Yv)(this),component:Je(),key:"button2"})),!(!this._showUnsubscribeButton()||this.isDatesMetadataEnabled())&&this.unsubscribe(b),!!this.isDatesMetadataEnabled()&&!b["disable-create-event"]&&!b["disable-footer-calendar"]&&h().createElement("div",{className:Ug.elem("footer-button")},h().createElement(Jc,{model:b.model,"dates-metadata":b["dates-metadata"],"sticky-reduce-one-text":b["sticky-reduce-one-text"],useMediators:["calendar-manager"],component:Le(),key:"calendar-button"})))),(r||u)&&this.isShowSmartReplyAndMarusia()&&h().createElement("div",{className:Ug.elem("footer-controls")},(q||r)&&h().createElement("span",{className:Ug.elem("marusia-rl",{},{addClass:[(b.smart_replies_ready||r)&&"ready"]})},h().createElement(Hg,{model:b.model,useMediators:["marusia-manager"],"radar-prefix":t})),!!u&&b.smart_replies.map(function(c,d){return h().createElement("span",{key:d,className:Ug.elem("smart-reply",{},{addClass:[b.smart_replies_ready&&"ready"]})},h().createElement(Jc,{text:c,compact:!0,shadowless:!0,invert:!0,"radar-id":"smart-reply{message.is('flags.smart_reply_stage') ? '_stage' : ''}",remitEvents:{click:"compose:smartreply"},remitDetails:{model:b.model,key:d},broadcastEvent:(0,ze.Yv)(a),component:Je(),key:"button2"}))})))))}!function(a){a.mount="$mount",a.unmount="$destroyed",a.composeReply="compose:reply",a.composeReplyAll="compose:replyall",a.composeForward="compose:forward",a.composeSmartReply="compose:smartreply",a.toggleStatusUnread="togglestatus:unread",a.toggleStatusFlagged="togglestatus:flagged"}(Qg||(Qg={}));var nh=function(){var a=function(b,c){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)if(Object.prototype.hasOwnProperty.call(b,c))a[c]=b[c]})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw new TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),oh=function(){return(oh=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++)for(var e in b=arguments[c])if(Object.prototype.hasOwnProperty.call(b,e))a[e]=b[e];return a}).apply(this,arguments)},ph=function(a,b,c){if(c||2===arguments.length)for(var d,e=0,f=b.length;e<f;e++)if(d||!(e in b)){if(!d)d=Array.prototype.slice.call(b,0,e);d[e]=b[e]}return a.concat(d||Array.prototype.slice.call(b))}([],Object.values(ye.blockSpec.events),!0),qh=function(a){function b(b){var c=a.call(this,b)||this;return c.ampIcon=Vg,c.calendarCreate=bh,c.avatarWrap=ch,c.correspondents=Wg,c.darkModeToggle=Zg,c.date=eh,c.folder=dh,c.inviteCall=_g,c.itemsForward=kh,c.itemsInviteCall=lh,c.itemsReply=jh,c.itemsReplyAll=ih,c.more=gh,c.recipients=fh,c.statusFlag=$g,c.statusUnread=Xg,c.unsubscribe=hh,c.showPrintButton=ah,c.addTag=Yg,c.reactComponent=!0,c.performanceTrace=ye.blockSpec.performanceTrace,c.isolateEvents=ye.blockSpec.isolateEvents,c.mods=ye.blockSpec.mods,c.events=ye.blockSpec.events,c.isFooterHiddenRadarSended=!1,c.isSmartReplyHiddenRadarSended=!1,c.radar=ce(),c.onAttachmentsCloud=ye.blockSpec.onAttachmentsCloud,c.onAttachmentCloud=ye.blockSpec.onAttachmentCloud,c.onAttachmentClick=ye.blockSpec.onAttachmentClick,c.onContactShow=ye.blockSpec.onContactShow,c.onToggleDetails=ye.blockSpec.onToggleDetails,c.onAllowedAttrClick=ye.blockSpec.onAllowedAttrClick,c.onLetterDataAttributeClick=ye.blockSpec.onLetterDataAttributeClick,c.onFinePaymentClick=ye.blockSpec.onFinePaymentClick,c.onFinePaymentRightClick=ye.blockSpec.onFinePaymentRightClick,c.onMonetaPaymentClick=ye.blockSpec.onMonetaPaymentClick,c.onToMyselfClick=ye.blockSpec.onToMyselfClick,c.onLetterComposeFromDraft=ye.blockSpec.onLetterComposeFromDraft,c.onTranslatorClose=ye.blockSpec.onTranslatorClose,c.onTranslatorHide=ye.blockSpec.onTranslatorHide,c.onTranslatorOriginal=ye.blockSpec.onTranslatorOriginal,c.onTranslatorTranslate=ye.blockSpec.onTranslatorTranslate,c.onTooltipShowImagesClick=ye.blockSpec.onTooltipShowImagesClick,c.onTooltipClose=ye.blockSpec.onTooltipClose,c.onAmpError=ye.blockSpec.onAmpError,c.onDarkModeToggle=ye.blockSpec.onDarkModeToggle,c.onCallTo=ye.blockSpec.onCallTo,c.onVkMessengerOpen=ye.blockSpec.onVkMessengerOpen,c.formFinePaymentUrl=ye.blockSpec.formFinePaymentUrl,c.isLetterTranslated=ye.blockSpec.isLetterTranslated,c.isTranslationLoading=ye.blockSpec.isTranslationLoading,c.isTranslatorVisible=ye.blockSpec.isTranslatorVisible,c.isTooltipVisible=ye.blockSpec.isTooltipVisible,c.isImagesHiddenTooltipVisible=ye.blockSpec.isImagesHiddenTooltipVisible,c.getAttachmentsDowloadLink=ye.blockSpec.getAttachmentsDowloadLink,c.getOriginalEvent=ye.blockSpec.getOriginalEvent,c.getLetterBody=ye.blockSpec.getLetterBody,c.getLetterBodyKey=ye.blockSpec.getLetterBodyKey,c.getLetterBodyTranslation=ye.blockSpec.getLetterBodyTranslation,c.getMessageCorrespondents=ye.blockSpec.getMessageCorrespondents,c.isLetterIdEq=ye.blockSpec.isLetterIdEq,c.canCallTo=ye.blockSpec.canCallTo,c.updateSticky=ye.blockSpec.updateSticky,c.updateStickyStatus=ye.blockSpec.updateStickyStatus,c.updateOnlineStatus=ye.blockSpec.updateOnlineStatus,c.updateSenderLastSeen=ye.blockSpec.updateSenderLastSeen,c.updateLastSeenUnsubscribe=ye.blockSpec.updateLastSeenUnsubscribe,c._showFilterButton=ye.blockSpec._showFilterButton,c._showSpam=ye.blockSpec._showSpam,c._startStickyTracking=ye.blockSpec._startStickyTracking,c._stopStickyTracking=ye.blockSpec._stopStickyTracking,c._showDropdownCallButton=ye.blockSpec._showDropdownCallButton,c._showHeadCallButton=ye.blockSpec._showHeadCallButton,c._showDropdownCalendarButton=ye.blockSpec._showDropdownCalendarButton,c._showHeadCalendarButton=ye.blockSpec._showHeadCalendarButton,c._showUnsubscribeButton=ye.blockSpec._showUnsubscribeButton,c._showUnsubscribeInMoreMenu=ye.blockSpec._showUnsubscribeInMoreMenu,c._showVkMessengerButton=ye.blockSpec._showVkMessengerButton,c._getVkMessengerParams=ye.blockSpec._getVkMessengerParams,c._sendVkMessengerEvent=ye.blockSpec._sendVkMessengerEvent,c._windowResizeListeners=ye.blockSpec._windowResizeListeners,c.hasReplyAll=ye.blockSpec.hasReplyAll,c.isAMPLetter=ye.blockSpec.isAMPLetter,c.isAMPLetterWithoutTheme=ye.blockSpec.isAMPLetterWithoutTheme,c.setCssSelectorThemeAMP=ye.blockSpec.setCssSelectorThemeAMP,c.isDarkMode=ye.blockSpec.isDarkMode,c.isDarkModePossible=ye.blockSpec.isDarkModePossible,c.isProbablyPhishing=ye.blockSpec.isProbablyPhishing,c.checkFolderGrant=ye.blockSpec.checkFolderGrant,c.isEnableReply=ye.blockSpec.isEnableReply,c.isEnableCall=ye.blockSpec.isEnableCall,c.isEnableForward=ye.blockSpec.isEnableForward,c.isEnableMark=ye.blockSpec.isEnableMark,c.isEnableAttach=ye.blockSpec.isEnableAttach,c.isDatesMetadataEnabled=ye.blockSpec.isDatesMetadataEnabled,c.isEnableConfirmationReceipt=ye.blockSpec.isEnableConfirmationReceipt,c.isSmartRepliesAvailable=ye.blockSpec.isSmartRepliesAvailable,c.isMarusiaReadLetterEnabled=ye.blockSpec.isMarusiaReadLetterEnabled,c.getMarusiaReadLetterRadarPrefix=ye.blockSpec.getMarusiaReadLetterRadarPrefix,c.hasCloudStockAttach=ye.blockSpec.hasCloudStockAttach,c.getLetterMetaHeaderType=ye.blockSpec.getLetterMetaHeaderType,c.isShowSmartReplyAndMarusia=ye.blockSpec.isShowSmartReplyAndMarusia,c.isShowFooter=ye.blockSpec.isShowFooter,c.isShowFakeCreateTodo=ye.blockSpec.isShowFakeCreateTodo,c.useNewToolbar=ye.blockSpec.useNewToolbar,c.getAttachSafetyStatus=ye.blockSpec.getAttachSafetyStatus,c.hasSmartCardIcsMeta=ye.blockSpec.hasSmartCardIcsMeta,c.attrs=oh(oh({},c.props),c.state),c.render=mh,c.letterRef=h().createRef(),c.letterBody=h().createRef(),c.checkIfShouldEnableDarkMode(),ph.forEach(function(a){c[a]=c[a].bind(c)}),c}return nh(b,a),Object.defineProperty(b.prototype,"el",{get:function(){return this.letterRef.current},enumerable:!1,configurable:!0}),b.prototype.componentDidMount=function(){ye.blockSpec.didMount.bind(this)(),this.updateModel(oh(oh({},this.props),this.state)),this.updateStickyAttrs(oh(oh({},this.props),this.state),{}),this.updateStickyPositionAttrs(oh(oh({},this.props),this.state)),this.updateDatasetMetadataAttrs(oh(oh({},this.props),this.state))},b.prototype.componentDidUpdate=function(a,b){var c=oh(oh({},this.props),this.state),d=oh(oh({},a),b);if(c.model!==d.model)this.updateModel(c);if(c.sticky!==d.sticky)this.updateStickyAttrs(c,d);if(c["sticky-position"]!==d["sticky-position"])this.updateStickyPositionAttrs(c);if(c["dates-metadata"]!==d["dates-metadata"])this.updateDatasetMetadataAttrs(c)},b.prototype.componentWillUnmount=function(){ye.blockSpec.didUnmount.bind(this)()},b.prototype.handleInnerEvent=function(a){var b=a.type;switch(b){case Qg.mount:return void ce()(["thread_letter","mount"],1,(0,Ae.getModelData)(this));case Qg.unmount:return void ce()(["thread_letter","unmount"],1,(0,Ae.getModelData)(this));case Qg.toggleStatusUnread:return void ce()(["thread_letter",(0,Ae.renameRadarOnStatusToggle)(this,"unread")]);case Qg.toggleStatusFlagged:return void ce()(["thread_letter",(0,Ae.renameRadarOnStatusToggle)(this,"flagged")]);case Qg.composeReply:case Qg.composeReplyAll:case Qg.composeForward:case Qg.composeSmartReply:ce()(["thread_letter",b],1,(0,Ae.getModelData)(this))}},b.prototype.checkIfShouldEnableDarkMode=function(){if(this.get("model").getCalendarFromAttach().length)this.setState({"dark-mode-enabled":!1})},b.prototype.get=function(a){return oh(oh({},this.props),this.state)[a]},b.prototype.updateModel=function(a){var b=this,c=a.model;if(window.setTimeout(function(){var a=c.get("attaches").list;ce()("letter_attaches",a.length);try{(0,ve.sendSMIMEAttachmentsMetrics)(a)}catch(a){}},500),this.isSmartRepliesAvailable(c)){this.setState({smart_replies_ready:!!c.getSmartReply()});var d=c.is("flags.smart_reply_stage")?"_stage":"";ce()("smart_replies"+d+"_try-show"),c.fetchSmartReply().then(function(a){if(b.setState({smart_replies:a.get("replies")}),ce()("smart_replies"+d+"_show"),a.is("is_default"))ce()("smart_replies_default"+d+"_show");xe().update()},function(){ce()("smart_replies"+d+"_show-fail")})}},b.prototype.updateStickyAttrs=function(a,b){var c=a.sticky||{},d=b.sticky||{};if(d.head!==c.head)this.updateSticky("head",c.top,c.headFade,!!c.maxWidth);if(d.footer!==c.footer)this.updateSticky("footer",c.bottom,c.footerFade,!!c.maxWidth)},b.prototype.updateStickyPositionAttrs=function(a){var b=a["sticky-position"],c=a.sticky;if(c)this.updateSticky("head",c.top,!1,!!b.maxWidth),this.updateSticky("footer",c.bottom,!1,!!b.maxWidth)},b.prototype.updateDatasetMetadataAttrs=function(a){var b=a["dates-metadata"];a.model.set("dates_metadata.priority_date",b)},b}(h().Component),rh=(0,ze.v$)("letter",qh,{syncMediatorsOnRender:!1});rh.defaultProps=ye.blockSpec.defaults;var sh,th,uh,vh,wh,xh,yh,zh,Ah,Bh,Ch,Dh,Eh,Fh=rh,Gh=["remove","compose:reply","compose:replyall","compose:forward","remove","archive","spam","unspam","mark:allreaded","mark:readed","select:all","select:drop","select:drop","letter:prev","letter:next","letter:back","move:click","ctrl-click","ctrl-click","search","dropdown-change","compose:reply","compose:replyall","compose:forward","remove","archive","spam","click:unsubscribe","unspam","superspam","mark:readed","mark:unreaded","mark:flagged","mark:unflagged","calls:invite","calendar:create","spam","click:unsubscribe","print","settingsfilters:create","translator:show","forward","search:from","redirect","forward","headers","download","newtab","move","clear"].reduce(function(a,b){return a[b]=b,a},{}),Hh=nc(2707),Ih=function(a){var b=a.element,c=a.breakpoints,d=a.pureBreakpoints,e=a.initialState,f=(0,g.useState)(e),h=f[0],i=f[1];return(0,g.useLayoutEffect)(function(){if(b){var a="current"in b?b.current:b;if(a){var e=new Hh.GetAdaptive({element:a,pureBreakpoints:d,breakpoints:c,onResize:i});return function(){return e.destroy()}}}},[c,b,d]),h},Jh=nc(4312);!function(a){a.more="more",a.remove="remove",a.archive="archive",a.spam="spam",a.unsubscribe="unsubscribe",a.unspam="unspam",a.move="move",a.read="read",a.replyAll="reply-all",a.reply="reply",a.forward="forward"}(Dh||(Dh={})),function(a){a.ru="ru_RU",a.uk="uk_UA",a.be="be_BY",a.hy="hy_AM",a.kk="kk_KZ",a.uz="uz_UZ",a.mo="mo_MD",a.ro="ro_RO",a.en="en_US",a.es="es_ES"}(Eh||(Eh={}));var Kh,Lh=((sh={})[Eh.ru]=((th={})[Dh.remove]=[60,52],th[Dh.archive]=[55,48],th[Dh.spam]=[38,33],th[Dh.unsubscribe]=[83,72],th[Dh.unspam]=[58,50],th[Dh.move]=[55,48],th[Dh.read]=[75,65],th[Dh.replyAll]=[105,91],th[Dh.reply]=[67,58],th[Dh.forward]=[75,65],th),sh[Eh.uk]=((uh={})[Dh.remove]=[70,61],uh[Dh.archive]=[66,57],uh[Dh.spam]=[38,33],uh[Dh.unsubscribe]=[87,76],uh[Dh.unspam]=[58,50],uh[Dh.move]=[55,48],uh[Dh.read]=[76,66],uh[Dh.replyAll]=[108,93],uh[Dh.reply]=[74,64],uh[Dh.forward]=[77,66],uh),sh[Eh.be]=((vh={})[Dh.remove]=[66,57],vh[Dh.archive]=[49,43],vh[Dh.spam]=[38,33],vh[Dh.unsubscribe]=[72,63],vh[Dh.unspam]=[58,50],vh[Dh.move]=[53,46],vh[Dh.read]=[78,68],vh[Dh.replyAll]=[100,87],vh[Dh.reply]=[68,59],vh[Dh.forward]=[76,66],vh),sh[Eh.hy]=((wh={})[Dh.remove]=[39,34],wh[Dh.archive]=[98,85],wh[Dh.spam]=[83,72],wh[Dh.unsubscribe]=[73,63],wh[Dh.unspam]=[78,67],wh[Dh.move]=[114,98],wh[Dh.read]=[70,60],wh[Dh.replyAll]=[50,44],wh[Dh.reply]=[112,97],wh[Dh.forward]=[79,69],wh),sh[Eh.kk]=((xh={})[Dh.remove]=[35,30],xh[Dh.archive]=[74,64],xh[Dh.spam]=[38,33],xh[Dh.unsubscribe]=[69,60],xh[Dh.unspam]=[76,66],xh[Dh.move]=[106,92],xh[Dh.read]=[27,23],xh[Dh.replyAll]=[132,114],xh[Dh.reply]=[84,73],xh[Dh.forward]=[95,82],xh),sh[Eh.uz]=((yh={})[Dh.remove]=[58,50],yh[Dh.archive]=[50,43],yh[Dh.spam]=[39,34],yh[Dh.unsubscribe]=[117,101],yh[Dh.unspam]=[80,69],yh[Dh.move]=[39,34],yh[Dh.read]=[43,37],yh[Dh.replyAll]=[156,135],yh[Dh.reply]=[40,35],yh[Dh.forward]=[101,87],yh),sh[Eh.mo]=((zh={})[Dh.remove]=[52,45],zh[Dh.archive]=[58,50],zh[Dh.spam]=[39,34],zh[Dh.unsubscribe]=[82,71],zh[Dh.unspam]=[93,80],zh[Dh.move]=[54,47],zh[Dh.read]=[29,25],zh[Dh.replyAll]=[123,107],zh[Dh.reply]=[76,66],zh[Dh.forward]=[92,79],zh),sh[Eh.ro]=((Ah={})[Dh.remove]=[52,45],Ah[Dh.archive]=[58,50],Ah[Dh.spam]=[39,34],Ah[Dh.unsubscribe]=[82,71],Ah[Dh.unspam]=[93,80],Ah[Dh.move]=[54,47],Ah[Dh.read]=[29,25],Ah[Dh.replyAll]=[123,107],Ah[Dh.reply]=[76,66],Ah[Dh.forward]=[92,79],Ah),sh[Eh.en]=((Bh={})[Dh.remove]=[43,38],Bh[Dh.archive]=[50,43],Bh[Dh.spam]=[39,34],Bh[Dh.unsubscribe]=[83,72],Bh[Dh.unspam]=[64,56],Bh[Dh.move]=[53,46],Bh[Dh.read]=[36,31],Bh[Dh.replyAll]=[58,50],Bh[Dh.reply]=[38,33],Bh[Dh.forward]=[55,48],Bh),sh[Eh.es]=((Ch={})[Dh.remove]=[54,47],Ch[Dh.archive]=[88,76],Ch[Dh.spam]=[39,34],Ch[Dh.unsubscribe]=[93,81],Ch[Dh.unspam]=[80,69],Ch[Dh.move]=[79,69],Ch[Dh.read]=[30,26],Ch[Dh.replyAll]=[127,110],Ch[Dh.reply]=[73,64],Ch[Dh.forward]=[60,52],Ch),sh),Mh=Lh[r().get("LANG")]||Lh[Eh.ru],Nh=function(){return(Nh=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++)for(var e in b=arguments[c])if(Object.prototype.hasOwnProperty.call(b,e))a[e]=b[e];return a}).apply(this,arguments)},Oh=function(a,b){var c=b.ponyMode;return b.short||a===Dh.more?c?28:36:Mh[a][+c]+48},Ph={order:Array.from(new Set(s.ORDER_BUTTONS.concat([Dh.remove,Dh.move,Dh.spam,Dh.unsubscribe,Dh.unspam,Dh.archive,Dh.read,Dh.more,Dh.replyAll,Dh.reply,Dh.forward]))).slice(0,11)},Qh=function(a,b,c){return b.selectMode?function(a,b,c){var d=a.deselectAll,e=a.folder,f=b.selectedStats,g=b.isSpam,h=b.isDisableEdit,i=b.isUnspam,j=b.hasSuperSpam,k=b.readMode,l=b.selectMode,m=c.unsubscribeInsteadSpam,n=c.unsubscribeInMoreDropdown;return{if:k||l,read:f.unread>0,unread:f.read>0,flag:f.noflagged>0,unflag:f.flagged>0,print:1===f.all,archive:!!(null==e?void 0:e.isArchive())&&f.noarchive&&!s.ARCHIVE_DISABLED,spam:!s.FORBID_SPAM&&g&&!f.metathread,spamDisabled:h||d||f.metathread,spamAbovePrint:!s.FORBID_SPAM&&!f.metathread&&m,unsubscribeAbovePrint:n,unspam:i,superspam:j&&!f.metathread&&!d,forward:!f.metathread&&!d,"create-filter":!s.FORBID_FILTERS&&!f.metathread&&!d}}(a,b,c):b.readMode?function(a,b,c){var d=b.isNewsletter,e=b.isSpam,f=b.isDisableEdit,g=b.letter,h=b.hasSuperSpam,i=b.readMode,j=b.selectMode,k=c.unsubscribeInsteadSpam,l=c.unsubscribeInMoreDropdown;return{if:i||j,readletter:!0,print:!0,"invite-call":s.CALLS&&!s.CALLS_DISABLE_LETTER_CALL&&!(d&&s.CALLS_DISABLE_LETTER_CALL_NEWSLETTERS),"create-event":!(s.DISABLE_CREATE_EVENT||d&&s.DISABLE_LETTER_CALENDAR_NEWSLETTERS),"create-filter":!s.FORBID_FILTERS,translate:!s.DISABLE_TRANSLATE,"disable-edit":f,read:null==g?void 0:g.is("flags.unread"),unread:!(null==g?void 0:g.is("flags.unread")),flag:!(null==g?void 0:g.is("flags.flagged")),unflag:null==g?void 0:g.is("flags.flagged"),archive:!1,spam:!s.FORBID_SPAM&&!!k&&e,spamAbovePrint:!s.FORBID_SPAM&&k,unsubscribeAbovePrint:l,unspam:!1,superspam:h}}(0,b,c):{}},Rh=function(a,b,c){var d;if(void 0===c)c=function(a,b){if(void 0===b)b=(0,Jh.isLettersFromTrustedMailer)(a);return{unsubscribeInMoreDropdown:b&&s.UNSUBSCRIBE_IN_MORE_DROPDOWN,unsubscribeInsteadSpam:b&&s.UNSUBSCRIBE_INSTEAD_SPAM}}(b);var e=a.folder,f=a.folders,g=b.selectMode,h=b.selectedStats,i=b.isDisableEdit,j=b.letter,k=b.isReplyAll,l=b.readMode,m=b.isRemoveVisible,n=b.isSpam,o=b.isUnspam,p=c.unsubscribeInsteadSpam;return(d={})[Dh.archive]={if:!(null==e?void 0:e.isArchive())&&!s.ARCHIVE_DISABLED,disabled:i},d[Dh.forward]={if:l,letter:j,disabled:i},d[Dh.move]={if:!0,"radar-id":g?"selected":"letter-header",folders:f,disabled:i},d[Dh.remove]={if:m,disabled:i},d[Dh.read]={if:g&&h.unread>0,"radar-id":g?"selected":"letter-header"},d[Dh.reply]={if:l,letter:j,short:k,disabled:i},d[Dh.replyAll]={if:l&&k,letter:j,disabled:i},d[Dh.spam]={if:!s.FORBID_SPAM&&n&&!p,disabled:i||g&&(a.deselectAll||h.metathread)},d[Dh.unsubscribe]={if:p,letter:j,disabled:i||g&&(a.deselectAll||h.metathread)},d[Dh.unspam]={if:o,disabled:i||g&&a.deselectAll},d[Dh.more]=Qh(a,b,c),d},Sh=function(a,b){return b.order.filter(function(b){return!1!==a[b].if}).map(function(b){return{button:b,short:a[b].short}})},Th=nc(9330),Uh=nc.n(Th),Vh={display_mode:"gAcvN_c1t4iWLAJYQ1SlM",short_padding:"aTAS5KdpbXyncYpFeXSu-",middle_padding:"_2hm49I9FFgP8z8ZU7rWcrl",display_none:"_21PBNMJJQByYLRBKWFgTrK",not_single:"PYX2x2Y9DQJtpynuTDxr2",not_border:"_1MR0VsGEI_ZMntKazIIt57",next_prev:"_1Y3atN_TG7HeoIjcqPqcBu",read_letter:"_2NFZ6ld1bW3r51BcglLdff",back:"_3s9BW3cG2EDQ_ySBGAaZVY",hidden:"_3xeiH5OhjutFQPtKYKgyA7",space_after_more:"_1sghwH_uINT5R506Bp80xC",deselectButtonContainer:"_3vu8Kn6SYTyOTTkCOCBV-f"},Wh=function(){return(Wh=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++)for(var e in b=arguments[c])if(Object.prototype.hasOwnProperty.call(b,e))a[e]=b[e];return a}).apply(this,arguments)},Xh=function(a){var b,c="back"===a.type||"backToParentFolder"===a.type||"deselect-back"===a.type,d=ca()(((b={})[Vh.deselectButtonContainer]="deselect"===a.type,b[Vh.space_after_more]=s.SPACE_AFTER_MORE&&"more"===a.type,b[Vh.back]=c,b[Vh.hidden]=a.hidden,b));return a.hidden&&!a.notDelete?null:h().createElement(Jc,Wh({},a,{className:d,useMediators:["letters-selection"],component:Uh()}))},Yh=function(){return(Yh=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++)for(var e in b=arguments[c])if(Object.prototype.hasOwnProperty.call(b,e))a[e]=b[e];return a}).apply(this,arguments)},Zh=function(a){var b=a.attrs,c=a.globals,d=a.selectedLettersInfo,e=a.globalEnv,f=a.displayMode,g=h().useState(null),i=g[0],j=g[1],k=function(a,b){var c=a.folder,d=a.folders,e=a.deselectAll,f=b.isRemoveVisible,g=b.isReplyAll,i=b.isNewsletter,j=b.letter,k=b.selectedStats,l=b.isSpam,m=b.isDisableEdit,n=b.isUnspam,o=b.hasSuperSpam,p=b.readMode,q=b.selectMode;return h().useMemo(function(){return Rh({folder:c,folders:d,deselectAll:e},{isRemoveVisible:f,isReplyAll:g,isNewsletter:i,letter:j,selectedStats:k,isSpam:l,isDisableEdit:m,isUnspam:n,hasSuperSpam:o,readMode:p,selectMode:q})},[e,c,d,o,m,i,f,g,l,n,j,p,q,k])}(b,c),l=c.ponyMode,m=c.letterId,n=c.store,o=c.isDisableEdit,p=h().useMemo(function(){var a=Sh(k,Ph),b=a.reduce(function(a,b){var c=b.button,d=b.short;return a+Oh(c,{ponyMode:l,short:d})+1},36),c=[{minWidth:b,countShort:0}];return a.reduceRight(function(b,d,e){var f=d.button,g=d.short;if(!g)b+=36-Oh(f,{ponyMode:l,short:g}),c.push({minWidth:b,countShort:a.length-e});return b},b),c.map(function(a){return function(b,c,d){return{props:b,conditions:c===d.length-1?null:function(e){return a(e,b,c,d)}}}}(function(a,b){return b.minWidth<=a.width}))},[k,l]),q=Ih({element:i,breakpoints:p,pureBreakpoints:!0,initialState:function(){return p.at(-1).props}}),r=h().useMemo(function(){return function(a,b,c){return Sh(a,c).map(function(c,d,e){var f=c.button,g=c.short;return Nh(Nh({},a[f]),{type:f,short:g||e.length-d<=b.countShort})})}(k,q,Ph)},[q,k]);return h().createElement("div",{className:Vh.read_letter,ref:j},r.map(function(a){return h().createElement(Xh,Yh({},e,{key:a.type,"letter-id":m,selectedLettersIds:d.ids,selectedLettersSenders:d.senders,store:n,hidden:!f,"radar-id":null,disabled:o},a))}))},$h=nc(1015),_h=nc.n($h),ai=nc(6792),bi=function(){return(bi=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++)for(var e in b=arguments[c])if(Object.prototype.hasOwnProperty.call(b,e))a[e]=b[e];return a}).apply(this,arguments)},ci=function(a){var b=(0,ai.C)({name:"portal-menu",mediators:["compose-manager","filter-manager","layout-manager","letters-actions","letters-selection","pony-mode","progress-bar-manager","search-manager","themes-manager","translator-manager","user-info","folders-navigation"],forRadar:{radar:Jh.radarPortalMenu,syntheticBlock:function(){return{is:ze.zf}}}}),c=b[0],d=b[1],e=b[2],f=h().useCallback(function(a){return Object.entries(a).map(function(a){return[a[0],typeof a[1]]})},[]);h().useEffect(function(){if(!a.folder||!a.route)l().send("crossnav-upme-no-val-err",{rlog:"crossnav-upme-no-val-err",rlog_message:{props:f(a),state:f(a)}})},[a.folder,a.route]);var g=c.selected,i=function(a){var b=h().useRef(0);function c(){b.current++}return h().useEffect(function(){return a.forEach(function(a){return a.on("change",c)}),function(){a.forEach(function(a){return a.off("change",c)})}},[a]),b.current}(g),j=h().useMemo(function(){return _h()(g)},[i,g]),k=h().useMemo(function(){return bi(bi(bi({},a),c),{selectedStats:j})},[a,j,c]),m=h().useMemo(function(){return(0,Jh.getGlobals)(k)},[k]),n=h().useMemo(function(){return(0,Jh.getSelectedLettersIdsAndSenders)(m,{selected:g})},[m,g]);return{state:c,broadcast:d,selectedLettersInfo:n,attrs:k,props:a,globals:m,syntheticBlock:e}},di=function(){return(di=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++)for(var e in b=arguments[c])if(Object.prototype.hasOwnProperty.call(b,e))a[e]=b[e];return a}).apply(this,arguments)},ei="_2bU-4861SLM6KzZeT9w7Le",fi="FClTaZ32w6rW2cRN9mlR5",gi="jg3HafoGPtODOJmBVxXx4",hi="_1xNRxLigVanrEcuqOjbGCY",ii="_1Kh8Jyr2zWkZOjXpRNlJ3P",ji="aPIXZRdAwdr5Op9C00D-D",ki="_2NzA62gdKyyjboI7YXqOD0",li="P0SlSCWwjvmid_61j5bvz",mi="_2Z8MjNFe2bbXM_8oNEkfNY",ni="_3Un83sJ9BmboNFib8JFCqm",oi="_3uUr9nxSskaU2eu7woDRQJ",pi=function(a){var b,c,d=a.darkMode,e=a.round,f=a.noAnimation,g=ca()(ji,((b={})[ni]=e,b[oi]=e&&d,b[li]=d,b)),i=ca()(ki,((c={})[mi]=d,c));return h().createElement("div",{style:a,className:g},!f&&h().createElement("div",{className:i}))},qi=function(a){var b,c,d=a.darkMode,e=a.animateContent,i=a.onMount;(0,g.useEffect)(function(){null==i||i()},[i]);var j=ca()(ei,((b={})[fi]=d,b)),k=ca()(((c={})[gi]=e,c));return h().createElement(f.Responsive,{mode:"desktopS"},h().createElement("div",{className:j,"data-test-id":"letter-meta-skeleton"},h().createElement("div",{className:k},h().createElement("div",{className:hi},h().createElement(pi,{darkMode:d,height:32,width:32,round:!0,noAnimation:!0}),h().createElement(pi,{darkMode:d,height:28,width:341})),h().createElement("div",{className:ca()(hi,ii)},h().createElement(pi,{darkMode:d,height:20,width:244})),h().createElement("div",{className:ca()(hi,ii)},h().createElement(pi,{darkMode:d,height:20,width:205})),h().createElement("div",{className:ca()(hi,ii)},h().createElement(pi,{darkMode:d,height:20,width:244})))))},ri=nc(7022),si="_13g9TwPADGlVYjejUp8ylL",ti="_1ejZpbKssklxkVV-RWwRM8",ui="_1MOB49N0M6vLY2he1ovt8h",vi="_1sMVyod4jfYEzh0YFImyIu",wi="_3v8nLxqBPulORxXkBPr8b_",xi=function(a){var b,c;b=function(){var b,c,d,e,f,g;if(a){var h,i=(0,ri.getAppRouter)(),j={folder_id:+(null===(d=null===(c=null===(b=null==i?void 0:i.model)||void 0===b?void 0:b.folder)||void 0===c?void 0:c.attributes)||void 0===d?void 0:d.id),folder_name:null===(g=null===(f=null===(e=null==i?void 0:i.model)||void 0===e?void 0:e.folder)||void 0===f?void 0:f.attributes)||void 0===g?void 0:g.name};switch(a.type){case"latest":h=a.when;break;case"month":h="month",j.month="".concat(a.date.month+1),j.year="".concat(a.date.year);break;case"alpha_to":case"alpha_from":case"alpha_subj":h="alphabet",j.alphabet=a.alpha||"empty",j.sorting="alpha_subj"===a.type?"subject":"account";break;default:return}l().send("divider_".concat(h,"_show"),{dwh:j})}},c=[a],(0,g.useEffect)(b,c)},yi=function(a){var b,c=a.title,d=a.counter,e=a.ponyMode,g=a.compact,i=a.fit,j=a.meta,k=a.id;return xi(j),h().createElement("div",{className:ca()(si,(b={},b[vi]=e,b[ui]=g,b[ti]=i,b)),"data-test-id":(0,Ub.qa)("letters-".concat(k))},h().createElement(f.Text,{mode:"h6"},c),null!=d&&h().createElement("div",{className:wi},h().createElement(f.Text,{mode:"h6",secondary:!0},d)))},zi=nc(1559),Ai=nc(525),Bi=nc(2685),Ci=nc(2036),Di=nc(1434),Ei=nc(7353),Fi=nc(6820),Gi=nc(9985),Hi=nc(3277);!function(a){a.unread="togglestatus:unread",a.flagged="togglestatus:flagged",a.clickAvatar="clickavatar"}(Kh||(Kh={}));var Ii=nc(5535),Ji=nc(4284),Ki=nc.n(Ji),Li=nc(3754),Mi=nc.n(Li),Ni=nc(2471),Oi=nc.n(Ni),Pi=nc(6577),Qi=nc.n(Pi),Ri=nc(6827),Si=nc.n(Ri),Ti=nc(5483),Ui=nc.n(Ti),Vi=nc(7641),Wi=nc.n(Vi),Xi=nc(604),Yi=nc.n(Xi),Zi=nc(1730),$i=nc.n(Zi),_i=nc(4517),aj=nc.n(_i),bj=nc(5135),cj=nc.n(bj),dj=nc(5872),ej=nc.n(dj),fj="_2do3axVBzmQmuLd6aHClPf",gj="_3QXWm7rXRd5ppI0PF8B93E",hj="_3EcLHBwY49GuUe9wOSMue5",ij="_2hM7sf2_hYDteiZvJFFREQ",jj="_38B_Uk9C1EWxdJmr0vqPHl",kj="MZcs_Gu85H-gL1D1YNWoT",lj="_1X113C2HkLhV0kuqb4PsO3",mj="_3zDpN_PKRNLeuyUuOBKZGw",nj="_1mTTNQURuNxepEsU4dTsSp",oj="_1d5Pelmzhos18mvmY3Zxzx",pj="_3VDEhLR_WceIP1LJeJMBZB",qj="_1fFXFBMlChQhwzfjYWLVfH",rj="_2wxDqGQ2HhUlUNSU0LWJQi",sj="_3-4EfCYsLtHNXpqNyRj7_j",tj="_1HjBUZXt6snvoOCVX7Ta_S",uj="_29sIqWb3n6OMDBPbatrA4Y",vj=function(a){var b=a.text,c=a.icon,d=a.iconElement,e=a.className,g=a.onClick,i=a.qaId;return h().createElement(E.Z,null,function(a){var j=a.Caption;return h().createElement("div",{className:ca()(e,pj),onMouseDown:function(a){a.preventDefault(),g(a)},"data-qa-id":(0,Ub.qa)(i)},null!=d?d:h().createElement(f.Icon,{icon:c}),h().createElement(j,{level:"2",className:rj},b))})},wj=function(a){var b,c=a.model,d=a.common,e=(0,ai.C)({name:"letter-swipe-actions",mediators:["letters-actions"]}),f=(e[0],e[1]),i=(0,g.useState)(c.is("flags.flagged"))[0],j=(0,g.useState)(c.is("flags.unread"))[0],k=(0,g.useState)(c.getFolder().isSpam())[0],l=(0,g.useCallback)(function(){ej().open("move-to-folder",{letter:c},{dimmer:!0,mobile:!0,resolvable:!1})},[]),m=function(a){return function(){return f({type:a,details:{model:c}})}};return h().createElement("div",{className:ca()(gj,(b={},b[jj]=d,b)),onClick:function(a){return a.preventDefault()}},h().createElement("div",{className:fj},j?h().createElement(vj,{onClick:m("togglestatus:unread"),text:i18n("Прочитано"),iconElement:h().createElement("div",{className:tj}),qaId:"unread"}):h().createElement(vj,{onClick:m("togglestatus:unread"),text:i18n("Не прочитано"),iconElement:h().createElement("div",{className:ca()(tj,uj)}),qaId:"unread"}),i?h().createElement(vj,{onClick:m("togglestatus:flagged"),text:i18n("Снять флаг"),icon:t.ACTIONS_FAVORITE_ON,className:qj,qaId:"unflag"}):h().createElement(vj,{onClick:m("togglestatus:flagged"),text:i18n("Флаг"),icon:t.ACTIONS_FAVORITE_OFF,qaId:"flag"}),h().createElement(vj,{onClick:l,text:i18n("Перенести"),icon:t.ACTION_FOLDER_MOVE,qaId:"move"}),k?h().createElement(vj,{onClick:m("unspam"),text:i18n("Не спам"),icon:t.ACTIONS_LIKE,qaId:"unspam"}):h().createElement(vj,{onClick:m("spam"),text:i18n("Спам"),icon:t.ACTIONS_DISLIKE,qaId:"spam"})),h().createElement("div",{className:ca()(fj,sj)},h().createElement(vj,{onClick:m("remove"),text:i18n("Удалить"),icon:t.ACTIONS_DELETE,className:qj,qaId:"remove"})))},xj=function(){return(xj=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++)for(var e in b=arguments[c])if(Object.prototype.hasOwnProperty.call(b,e))a[e]=b[e];return a}).apply(this,arguments)},yj=new nf("swipeable"),zj=h().createContext(!1);function Aj(){var a=xj(xj({},this.props),this.state);return h().createElement("div",{ref:this.swipeableRef,className:yj.root({react:!0,animated:a.animated,swiped:a.underlay})},!!a.underlay&&h().createElement(h().Fragment,null,h().createElement("div",{className:yj.elem("underlay"),ref:this.swipeUnderlayRef},a.swipeUnderlay),h().createElement("div",{className:yj.elem("underlay-right"),ref:this.swipeUnderlayRightRef},h().createElement(zj.Provider,{value:a.rightActive},a.swipeUnderlayRight))),h().createElement("div",{className:yj.elem("content-wrapper",{react:!0})},h().createElement("div",{ref:this.swipeableContentRef,className:yj.elem("content")},h().createElement("div",{className:yj.elem("header",{react:!0})},a.swipeHeader),h().createElement("div",{className:yj.elem("content-element",{react:!0})},a.swipeContent))))}var Bj=function(){return(Bj=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++)for(var e in b=arguments[c])if(Object.prototype.hasOwnProperty.call(b,e))a[e]=b[e];return a}).apply(this,arguments)},Cj=function(a){var b,c=a.model,d=a.onFastAction,e=a.common,f=(0,j.useGlobalStateSelector)(u.getFastAction),i=(0,g.useContext)(zj),k=function(a,b,c){var d=(0,j.useGlobalStateSelector)(u.getFastAction),e=x().getSelectedModel().isDarkMode(),f=(0,g.useState)(b.is("flags.unread"))[0];return(0,g.useMemo)(function(){var b;if(d===v.LetterFastActionType.remove)return{className:kj,actionProps:{onClick:c,icon:a?t.STATUS_DONE:t.ACTIONS_DELETE,text:i18n("Удалить"),qaId:"remove"}};if(d===v.LetterFastActionType.archive)return{className:lj,actionProps:{onClick:c,icon:a?t.STATUS_DONE:t.ACTIONS_ARCHIVE,text:i18n("В архив"),qaId:"archive"}};if(d===v.LetterFastActionType.unread){var g=f?i18n("Прочитано"):i18n("Не прочитано");if(a)return{className:nj,actionProps:{onClick:c,text:g,icon:t.STATUS_DONE,qaId:"unread"}};else return{className:nj,actionProps:{onClick:c,text:g,iconElement:h().createElement("div",{className:f?tj:ca()(tj,uj)}),qaId:"unread"}}}return{className:ca()(mj,(b={},b[oj]=e,b)),actionProps:{onClick:c,icon:a?t.STATUS_DONE:t.NAVIGATION_SETTINGS,text:i18n("Настроить"),qaId:"settings"}}},[a,d,e,f,c])}(i,c,d),l=k.className,m=k.actionProps;return(0,g.useEffect)(function(){if(f===v.LetterFastActionType.settings)A()},[f]),(0,g.useEffect)(function(){var a;if(i)null===(a=navigator.vibrate)||void 0===a||a.call(navigator,10)},[i]),h().createElement("div",{className:ca()(gj,(b={},b[jj]=e,b)),onClick:function(a){return a.preventDefault()}},h().createElement("div",{className:ca()(hj,ij,l)},h().createElement(vj,Bj({},m))))},Dj=nc(7386),Ej=nc.n(Dj),Fj=nc(8383),Gj=nc.n(Fj),Hj=function(){var a=function(b,c){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)if(Object.prototype.hasOwnProperty.call(b,c))a[c]=b[c]})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw new TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),Ij=new nf("ll-av"),Jj=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}return Hj(b,a),b.prototype.renderAvatar=function(){var a,b,c,d=this.props,e=d.state,g=d.disabledHover,i=d.disabled,j=d.centered,k=d.isTouch,l=d.imgUrl,m=d.darkMode,n=d.verified,o=d.official,p=d.size;return h().createElement(h().Fragment,null,h().createElement("button",{"data-qa-id":(0,Ub.qa)("selected:".concat(!!e)),className:Ij.root((a={"is-active":e,"disable-hover":g,disabled:i,centered:j},a["size_".concat(p)]=!0,a)),onClick:(0,ze.CH)(this,{stop:!0,name:"toggle"})},h().createElement("div",{className:Ij.elem("container",{touch:k})},!k&&h().createElement("span",{className:Ij.elem("checkbox")},h().createElement(Jc,{checked:e,component:Gj()})),h().createElement("div",{className:Ij.elem("img-container")},h().createElement("span",{className:Ij.elem("img"),style:{backgroundImage:"url(".concat(l||s.DEFAULT_AVATAR_SRC,")")}}),n&&h().createElement("span",{className:Ij.elem("reliable-icon",(b={},b["size_".concat(p)]=!0,b))},h().createElement(f.Icon,{icon:m?t.STATUS_RELIABLE_SENDER_DARK:t.STATUS_RELIABLE_SENDER_LIGHT,testId:"reliable-icon"})),o&&h().createElement("span",{className:Ij.elem("official-icon",(c={},c["size_".concat(p)]=!0,c))},h().createElement(f.Icon,{icon:m?t.STATUS_OFFICIAL_SENDER_DARK:t.STATUS_OFFICIAL_SENDER_LIGHT,testId:"official-icon"}))))))},b.prototype.didMount=function(){Ej().findDOMNode(this).classList.add("stop-animate")},b.prototype.render=function(){return h().createElement("div",null,this.renderAvatar())},b}(h().PureComponent),Kj=(0,ze.v$)("list-letter-avatar",Jj),Lj=nc(8796),Mj=function(){return(Mj=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++)for(var e in b=arguments[c])if(Object.prototype.hasOwnProperty.call(b,e))a[e]=b[e];return a}).apply(this,arguments)},Nj=new nf("ll-crpt");function Oj(){var a=Mj(Mj({},this.props),this.state);return h().createElement("span",{title:a.title,"data-qa-id":(0,Ub.qa)(a["qa-id"]),className:Nj.root({dangerous:a.dangerous}),"data-qa-state":(0,Ub.qa)(a.dangerous?"dangerous":"")},(0,Lj.correspondent)(a.state))}var Pj=function(){var a=function(b,c){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)if(Object.prototype.hasOwnProperty.call(b,c))a[c]=b[c]})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw new TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),Qj=function(a){function b(){var b=null!==a&&a.apply(this,arguments)||this;return b.render=Oj,b}return Pj(b,a),b}(h().Component),Rj=new nf("ll-fs"),Sj={lightning:{icon:t.STATUS_BREAKING,mod:"auto"},important:{icon:t.STATUS_ERROR,mod:"important"}};function Tj(){var a,b=this.props,c=b.state,d=b["disable-hover"],e=b.priority,g=b.important,i=b.hideInactive,j=!c&&(e||g),k=g?Sj.important:Sj.lightning,l=j||c;return h().createElement("button",{type:"button","data-qa-id":(0,Ub.qa)("flagged:".concat(c)),title:this.getTitle(),disabled:d,onClick:(0,ze.CH)(this,{stop:!0,name:"toggle"}),className:Rj.root({"is-active":c,"disabled-hover":d,new:!0,hidden:!l&&i})},j&&h().createElement("span",{"data-qa-id":(0,Ub.qa)("priority:".concat(k.mod)),className:Rj.elem("priority",(a={},a[k.mod]=!0,a))},h().createElement(f.Icon,{icon:k.icon})),h().createElement("span",{className:Rj.elem("icon")},h().createElement(Jc,{component:Ac(),name:c?"actions:favorite_on":"actions:favorite_off"})))}var Uj=function(){var a=function(b,c){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)if(Object.prototype.hasOwnProperty.call(b,c))a[c]=b[c]})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw new TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),Vj=function(a){function b(){var b=null!==a&&a.apply(this,arguments)||this;return b.render=Tj,b}return Uj(b,a),b.prototype.getTitle=function(){return this.props.state?i18n("Снять флажок"):i18n("Пометить флажком")},b}(h().Component),Wj=(0,ze.v$)("list-letter-flag-status",Vj),Xj=nc(7996),Yj=nc.n(Xj),Zj="_2CLP5EDizFXFzke5NvcyKs",$j="_1mPquQiMTAd3lfdW_MXt8e",_j="bImaDXqmj5mh5ErK3gX3d",ak="_2rgVbU6Vu_-2prCkAp6qQl",bk="_3Tqi3OGe3Nrsykdxa0E5y-",ck="G5yeOQbBym7C0cp0xuzuR",dk=function(a){var b,c,d=a.model,e=a.layoutMode,f=a.meta,i=a.mode,j=f||{},k=j.description,l=j.potentialAction,m=(0,g.useRef)(null),n=d.id;(0,g.useEffect)(function(){ce()({type:"show_go_to_action",rlog:"show_go_to_action-log",rlog_message:{senderEmail:d.get("correspondents.from.0.email"),letterId:n,description:k,buttonText:l.name},dwh:{letterId:n,mode:i}})},[n,i]),(0,g.useEffect)(function(){m.current&&Yj().getNodeInfo(m.current)},[]);var o=(0,g.useCallback)(function(a){if(a.target instanceof HTMLAnchorElement)a.preventDefault(),ce()({type:"click_go_to_action",rlog:"click_go_to_action-log",rlog_message:{senderEmail:d.get("correspondents.from.0.email"),letterId:n,description:k,buttonText:l.name},dwh:{letterId:n,mode:i}}),P()(a.target.href)},[n,i]),p=(0,g.useCallback)(function(a){if(function(a){return 0===a.button}(a))if(a.target)Yj().revertUrl(a.target)},[]),q=h().createElement("span",{className:ca()(_j,bk,(b={},b[ak]="3pane"===e,b)),"data-test-id":(0,Ub.qa)("description")},k),r=ca()(((c={})[Zj]=!0,c[$j]="3pane"===e,c)),s=ca()(ck,bk);return h().createElement("div",{className:r,"data-test-id":(0,Ub.qa)("go-to-action")},"full"===i&&k&&q,l&&h().createElement("a",{ref:m,className:s,href:l.url,onClick:o,onMouseDown:p,"data-test-id":(0,Ub.qa)("link")},l.name))},ek="Q3j19R3rSmXoGe5COVsXj",fk="_3IiDTCqKsEQVOKpAwhE1FW",gk=function(a){var b;return h().createElement("div",{className:ca()(ek,(b={},b[fk]=a.unread,b)),"data-qa-id":(0,Ub.qa)("list-letter-mention"),"data-qa-state":(0,Ub.qa)(a.unread?"unread":"read")},h().createElement(f.Icon,{icon:t.STATUS_MENTION,sizeX:4}))},hk=nc(2258),ik=new nf("ll-rs");function jk(){var a,b=this.props,c=this.getIconName();return h().createElement("span",{"data-qa-id":(0,Ub.qa)("unread:".concat(b.state)),title:this.getTitle(),onClickCapture:(0,ze.CH)(this,{stop:!0,name:"toggle"}),className:ik.root((a={"is-active":b.state,"disabled-hover":b["disable-hover"],shift:b.shift},a["dotSize_".concat(b.dotSize)]=!0,a))},c&&h().createElement("span",{className:ik.elem("ico")},h().createElement(Jc,{component:Ac(),name:c})))}var kk=function(){var a=function(b,c){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)if(Object.prototype.hasOwnProperty.call(b,c))a[c]=b[c]})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw new TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),lk=function(a){function b(){var b=null!==a&&a.apply(this,arguments)||this;return b.render=jk,b.getIconName=hk.blockData.getIconName,b.getTitle=hk.blockData.getTitle,b}return kk(b,a),b.defaultProps={dotSize:"small"},b}(h().Component),mk=(0,ze.v$)("list-letter-read-status",lk),nk="s5n59zaNPp54dj77xFK2a",ok="_1A2UxpwAMeuU4_yQMQ5Wop",pk="_1lm5U1dZ5cVA37X8RV1CuC",qk="_2uuSUYl5qUQDmbrOxOrH8",rk="_1MCWuJ4OOiOswf0JvFeDoj",sk=function(a){var b=a.model,c=a.tags,d=a.active,e=a.rightSideDropdown,g=a.compact,i=a.folder,j=function(){var a,b;if(!(null==c?void 0:c.length))return h().createElement("div",{className:ca()(qk,(a={},a[rk]=d,a))},h().createElement(Of,{compact:g}));var e=s.TAGS_ORDER.filter(function(a){return null==c?void 0:c.includes(a)}).map(function(a,b){var d,e=b===c.length-1&&!i;return h().createElement("div",{key:a,style:{"--octavius-list-letter-tags-indent":"".concat(10*b,"px"),"--2kit-chip-width":e?"auto":"30px"},className:ca()(ok,(d={},d[pk]=e,d))},h().createElement(Of,{tag:a,empty:!e,compact:g}))});if(i)e.push(h().createElement("div",{key:"search_folder_name",style:{"--octavius-list-letter-tags-indent":"".concat(10*c.length,"px"),"--2kit-chip-width":"auto","--2kit-chip-height":g?"var(--vkui--x5)":"var(--vkui--x6)","--2kit-chip-background-color":"var(--vkui--color_background_secondary)","--2kit-chip-background-color--hover":"var(--2kit-chip-background-color)","--2kit-chip-background-color--active":"var(--2kit-chip-background-color)"},className:ca()(ok,(b={},b[pk]=!0,b))},h().createElement(f.Chip,{text:i,textProps:{mode:"small"},testId:"list-letter-tag-folder"})));return e};if(a.readonly)return h().createElement("div",{"data-qa-id":(0,Ub.qa)("list-letter-tags"),className:nk},j());else return h().createElement(f.Dropdown,{overlay:h().createElement(xg,{model:b,tags:c,xrayFrom:"message_list"}),pureOverlay:!0,placement:e?"bottomLeft":"bottomRight",reservePlacement:e?"topLeft":"topRight",overlayContainer:document.body,onClick:function(a){a.preventDefault()}},h().createElement("div",{"data-qa-id":(0,Ub.qa)("list-letter-tags"),className:nk,onClick:function(a){var c;a.preventDefault();var d=null===(c=null==b?void 0:b.getFolder())||void 0===c?void 0:c.id;l().send("click_on_add_label_button",{dwh:{folder_id:Number(d),from:"message_change_menu",letter_id:null==b?void 0:b.get("last"),mode:Mf().getType(),is_compact:Mf().getUiLayout().ponyMode}})}},j()))},tk=nc(894),uk=nc.n(tk),vk=nc(2590),wk=function(){var a=function(b,c){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)if(Object.prototype.hasOwnProperty.call(b,c))a[c]=b[c]})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw new TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),xk=function(){return(xk=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++)for(var e in b=arguments[c])if(Object.prototype.hasOwnProperty.call(b,e))a[e]=b[e];return a}).apply(this,arguments)},yk=uk().capabilities["touch-support"],zk=function(a){return a.SUPPORT_POINTER_EVENTS?"pointerdown":"touchstart"},Ak=function(a){function b(b){var c=a.call(this,b)||this;return c.reactComponent=!0,c.swipeableMounted=!1,c.touchEventsReady=!1,c.swipeWidthLessElWidth=!1,c.elWidth=0,c.currentPos=vk.SwipeTarget.CENTER,c.watchSwipe=vk.blockSpec.watchSwipe,c.onOutsideClick=vk.blockSpec.onOutsideClick,c.activateTouchEvents=vk.blockSpec.activateTouchEvents,c.onSwipe=vk.blockSpec.onSwipe,c.onPanStart=vk.blockSpec.onPanStart,c.onPan=vk.blockSpec.onPan,c.onPanEnd=vk.blockSpec.onPanEnd,c.swipe=vk.blockSpec.swipe,c.moveContainerX=vk.blockSpec.moveContainerX,c.setContainerPos=vk.blockSpec.setContainerPos,c.getSwipeWidth=vk.blockSpec.getSwipeWidth,c.watchOutsideClick=vk.blockSpec.watchOutsideClick,c.addInsideTarget=vk.blockSpec.addInsideTarget,c.swipeWidthLessElWidthFunc=vk.blockSpec.swipeWidthLessElWidthFunc,c.reset=vk.blockSpec.reset,c.render=Aj,c.attrs=xk(xk({},c.props),c.state),c.swipeableRef=h().createRef(),c.swipeableContentRef=h().createRef(),c.swipeUnderlayRef=h().createRef(),c.swipeUnderlayRightRef=h().createRef(),c.timeouts={},c}return wk(b,a),Object.defineProperty(b.prototype,"el",{get:function(){return this.swipeableRef.current},enumerable:!1,configurable:!0}),b.prototype.componentDidMount=function(){var a=this;if(this.swipeableMounted=!0,this._insiders=[],this._pos={x:0,y:0},this.addInsideTarget(this.el),yk)(0,Ce.lazyHammerJS)().then((0,Ce.uniqCallback)(this,function(b){if(a.swipeableMounted&&!s.DISABLE_LETTER_SWIPE)a.Hammer=b,a.handleTouchStart=function(){a.activateTouchEvents()},a.el.addEventListener(zk(b),a.handleTouchStart,!0)}))},b.prototype.componentDidUpdate=function(a,b){var c=this,d=xk(xk({},this.props),this.state);this.attrs=d;var e=xk(xk({},a),b);if(d.disabled!==e.disabled)this.touchEventsReady&&this.watchSwipe(!d.disabled);if(d.animated!==e.animated)if(clearTimeout(this.timeouts.animated),(0,ze.CH)(this,{name:"animation-changed",details:{value:d.animated}}),d.animated)this.timeouts.animated=setTimeout(function(){return c.setState({animated:!1})},350);if(d.underlay!==e.underlay)(0,ze.CH)(this,{name:"underlay-changed",details:{value:d.underlay}})},b.prototype.componentWillUnmount=function(){if(this.swipeableMounted=!1,yk&&this.Hammer&&this.el.removeEventListener(zk(this.Hammer),this.handleTouchStart,!0),Object.values(this.timeouts).forEach(function(a){window.clearTimeout(a)}),this.touchEventsReady)this.watchOutsideClick(!1),this.watchSwipe(!1),this._insiders=[]},b}(h().Component),Bk=(0,ze.v$)("swipeable",Ak,{syncMediatorsOnRender:!1}),Ck=function(){return(Ck=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++)for(var e in b=arguments[c])if(Object.prototype.hasOwnProperty.call(b,e))a[e]=b[e];return a}).apply(this,arguments)},Dk=new nf("llct-t"),Ek=function(a){var b=a.children,c=a.enabled,d=a.className;return c?h().createElement("div",{className:d},b):h().createElement(h().Fragment,null,b)};function Fk(a){var b=a.model,c=a["pony-mode"];return h().createElement(h().Fragment,null,h().createElement("div",{"data-qa-id":(0,Ub.qa)("unread"),className:Dk.elem("read-status",{react:!0})},h().createElement(mk,{state:b.is("flags.unread"),"is-forwarded":b.is("flags.forward"),"is-replied":b.is("flags.reply"),model:b,shift:c,remitEvents:{toggle:{prevent:!0,name:Kh.unread}},remitDetails:{model:b},broadcastEvent:(0,ze.Yv)(this)})),h().createElement("div",{"data-qa-id":(0,Ub.qa)("avatar"),className:Dk.elem("avatar",{unread:b.is("flags.unread")})},h().createElement(Kj,{state:a.selected,imgUrl:this.getImageSrc(),darkMode:this.props.darkMode,verified:a.isReliable,official:a.isOfficial,isTouch:!0,size:c?"common":"compact",remitEvents:{toggle:{prevent:!0,name:Kh.clickAvatar}},broadcastEvent:(0,ze.Yv)(this)})))}function Gk(a,b,c){var d=s.ENABLE_TAGS&&!this.getCounter();return h().createElement("div",{className:Dk.elem("underlay-actions")},d&&s.ENABLE_ADD_TAGS_TOUCH&&h().createElement("div",{className:Dk.elem("tags")},h().createElement(sk,{model:c,tags:c.get("flags.tags"),rightSideDropdown:!0,compact:a&&!b,readonly:!d,active:!0})),h().createElement(wj,{model:c,common:!this.compact}))}function Hk(a){return h().createElement("div",{className:Dk.elem("underlay-actions-right")},h().createElement(Cj,{model:a,onFastAction:function(){return(0,Ii.callFastAction)(a)},common:!this.compact}))}function Ik(a){var b,c,d,e,f=a.model,g=a["pony-mode"],i=this.getSubject(),j=this.getGoToActionDisplayMode(),k="none"===j?this.getPaymentDieDisplayMode():"none",l=this.getUnsubscribeSender(),m="none"===j&&this.shouldShowUniversalPaymentDie(),n=(0,Be.isListLetterActionButtonsEnabled)(f,a.search),o="full"===k?a["payment-die-with-indent"]:"",p=!!(null===(e=null==f?void 0:f.isSchedule)||void 0===e?void 0:e.call(f)),q=f.getFolder(),r=p?(0,Bi.scheduleDate)(f.get("send_date")):q.get("name"),t=f.is("flags.attach"),u=f.is("flags.flagged"),v=s.ENABLE_TAGS&&!this.getCounter(),w=s.ENABLE_TAGS&&f.is("flags.tags")&&!!f.get("flags.tags").length,x=w&&!a.showfolder,y=l&&!m&&"none"===k,z=!("none"!==j||w&&!a.search||m||(a.search||y)&&g),A=g||n||w||s.ENABLE_TAGS,B=this.getCategory(),C=this.isImportant(),D=this.hasBadge()&&h().createElement("div",{"data-qa-id":(0,Ub.qa)("letter:badge"),className:Dk.elem("badge")},h().createElement(Jc,{counter:this.getCounter(),compact:!0,unread:f.is("flags.unread"),component:Oi()})),E=this.getSnippetValue();return h().createElement("div",{className:Dk.elem("content",{unread:f.is("flags.unread"),react:!0})},h().createElement("div",{className:Dk.elem("row",{top:!0})},h().createElement("div",{className:Dk.elem("correspondent",{new:!0})},h().createElement(Qj,{"qa-id":(0,Ub.qa)("correspondent"),state:this.getCorrespondent(),title:this.getCorrespondentTooltip(),dangerous:this.isProbablyPhishing()})),h().createElement("div",{className:Dk.elem("secondary-data")},!!B&&h().createElement("div",{className:Dk.elem("panel-item",{category:!0})},h().createElement(Jc,{flat:!0,short:!0,name:B,size:"m",component:Te()})),p&&h().createElement("div",{className:Dk.elem("panel-item")},h().createElement(Jc,{date:f.get("send_date"),component:Yi(),key:"list-letter-schedule-status"})),s.ENABLE_MENTIONS&&(f.is("flags.mention")||f.is("flags.mention_unread"))&&h().createElement("div",{className:Dk.elem("panel-item")},h().createElement(gk,{unread:f.is("flags.mention_unread")})),t&&!a["disable-attach"]&&h().createElement("div",{className:Dk.elem("panel-item",{"attach-status":!0})},h().createElement(Jc,{component:Mi(),compact:!0,key:"list-letter-attach-status"})),h().createElement("div",{title:this.getDateTooltip(p),className:Dk.elem("date",{new:!0,react:!0})},(0,Bi.letterDate)(f.get("date"),p)),h().createElement("div",{className:Dk.elem("flag",{new:!0,react:!0,nonActive:!u&&!C})},h().createElement(Wj,{hideInactive:!0,priority:a.priority,important:C,state:u,remitEvents:{toggle:{prevent:!0,name:Kh.flagged}},remitDetails:{model:f},broadcastEvent:(0,ze.Yv)(this)})))),h().createElement("div",{className:Dk.elem("row",{middle:!0,search:a.search,columns:A}),ref:this.contentRowRef},!A&&D,h().createElement(Ek,{enabled:A,className:Dk.elem("main-content")},!a["disable-subject"]&&h().createElement("div",{"data-qa-id":(0,Ub.qa)("subject"),title:this.getSubjectTooltip(),className:Dk.elem("subject")},h().createElement(Jc,{key:i,inlineRoot:!0,subject:i,color:a.search?f.meta("search_subject.color"):null,search:a.search,component:aj()})),z&&h().createElement("div",{"data-qa-id":(0,Ub.qa)("snippet"),className:Dk.elem("snippet",(b={search:a.search,overflow:y},b["hide-on-hover"]=v&&!a.search,b))},h().createElement(Jc,{key:E,inlineRoot:!0,value:E,color:a.search?f.meta("search_snippet.color"):null,search:a.search,component:$i()})),h().createElement("div",{className:Dk.elem("content-buttons")},m&&h().createElement(Jc,{className:Dk.elem("content-button-wrapper"),fluid:!0,model:a.model,"layout-type":a["layout-mode"],"pony-mode":g,component:Wi(),"pud-fluid":!0}),"none"!==j&&h().createElement(dk,{model:f,meta:this.goToActionMetadata,layoutMode:"3pane",mode:j}),y&&h().createElement(Jc,{className:Dk.elem("content-button-wrapper"),fluid:!0,"layout-mode":"3pane","pony-mode":g,unsubscribeSender:l,model:f,useMediators:["unsubscribe-actions","themes-manager"],component:cj()}),x&&s.ENABLE_ADD_TAGS_TOUCH&&h().createElement("div",{className:Dk.elem("tags")},h().createElement(sk,{model:f,tags:f.get("flags.tags"),rightSideDropdown:!0,compact:g&&!a.search,readonly:!v})))),A&&D),k&&"none"!==k&&h().createElement("div",{className:Dk.elem("payment-die-container",{noindent:!1===o,"pony-mode":g,compact:"compact"===k,metathread:a["in-metathread"]})},"compact"===k&&h().createElement(Jc,{model:a.model,standalone:!0,"layout-mode":"3pane","pony-mode":g,component:Si()}),"full"===k&&h().createElement(Jc,{model:a.model,"layout-mode":"3pane","icon-container-mode":!1===o?"wide":"narrow",component:Ui()})),a.showfolder&&!w&&h().createElement("div",{className:Dk.elem("folder",(c={},c["hide-on-hover"]=v&&!w,c))},h().createElement(Jc,{title:r,text:q.get("name"),"data-qa-id":(0,Ub.qa)("folder"),component:Qi()})),a.showfolder&&h().createElement("div",{className:Dk.elem("folder-tags",(d={hidden:!w},d["show-on-hover"]=v&&!w,d))},h().createElement(sk,{model:f,tags:f.get("flags.tags"),folder:q.get("name"),rightSideDropdown:!0})))}function Jk(){var a=Ck(Ck({},this.props),this.state),b=(0,u.getFastActionCurrent)(),c=a.model,d=a.indent,e=a["pony-mode"],f=this.getGoToActionDisplayMode(),g="none"===f?this.getPaymentDieDisplayMode():"none",i=this.getUnsubscribeSender(),j="none"===f&&this.shouldShowUniversalPaymentDie(),k=(0,Be.isListLetterActionButtonsEnabled)(c,a.search),l="full"!==f&&(e||!j&&!(i&&!j&&"none"===g)&&k);return h().createElement("a",{style:a.style,"data-qa-id":(0,Ub.qa)(this.rootQaId()),"data-qa-safe":(0,Ub.qa)(String(a.isReliable)),"data-qa-official":(0,Ub.qa)(String(a.isOfficial)),"data-qa-index":(0,Ub.qa)(c.meta("_ui-index")),onClick:(0,ze.CH)(this,"click"),onDragStart:(0,ze.CH)(this,{prevent:!0,name:"unused"}),onContextMenu:(0,ze.CH)(this,"contextmenu"),className:Dk.root({"enable-user-select":a["enable-user-select"],"pony-mode":e,"has-indent":d,active:a.selected||a.active,selected:a.selected,open:a.active,first:a.first,last:a.last,firstSelected:a.isFirstSelected,lastSelected:a.isLastSelected,new:!0,"new-selection":!0,reliable:a.isImportantReliable,official:a.isOfficialGreen,"small-snippet":l},{addClass:["js-letter-list-item"]}),href:a.href,tabIndex:-1,"data-id":c.get("id"),"data-draggable-id":c.get("id"),"data-uidl-id":c.get("last")},h().createElement("div",{className:Dk.elem("background",{active:a.selected||a.active,react:!0})}),h().createElement(Bk,{swipeUnderlay:this.swipeUnderlay(a["pony-mode"],a.search,a.model),swipeUnderlayRight:this.swipeUnderlayRight(a.model),swipeContent:this.content(a),swipeHeader:this.header(a),canFullSwipe:b!==v.LetterFastActionType.unread,"max-offset":String(470),maxOffsetPartLeft:110,onRightAction:function(){return(0,Ii.callFastAction)(a.model)},useMediators:["swipe-manager"]}),!a.hideDelimeter&&h().createElement(Jc,{compact:!0,full:a["full-delimiter"],ponymode:e,indent:a.indent,indentRight:!0,component:Ki()}),h().createElement(Jc,{last:!0,compact:!0,ponymode:e,indent:a.indent,indentRight:!0,component:Ki()}))}var Kk=nc(8853),Lk=nc.n(Kk),Mk=nc(9896),Nk=nc.n(Mk),Ok=nc(1433),Pk=nc.n(Ok),Qk=nc(5013),Rk=nc.n(Qk),Sk="_37J-vCOZWtwN-4gYmCSm54",Tk="_24rgKrnXmhmqEzAGVG0a-D",Uk="_3FbQ1z6Mr3ycTGwulQfcaI",Vk="_1jRagkd_B1UWNQ-Kp_4oIJ",Wk={approve:i18n("Одобрить"),block:i18n("Заблокировать")},Xk=function(a){var b,c=a.broadcastEvent,d=a.model,e=a.ponyMode,f=a.compact,g=h().useCallback(function(a){a.preventDefault(),c((0,Dc.BU)("move",{id:s.PARENTAL_CONTROL_APPROVE_FOLDER_ID,model:d},a)),l().send("ll_btn_approve")},[c,d]),i=h().useCallback(function(a){a.preventDefault(),c((0,Dc.BU)("move",{id:s.PARENTAL_CONTROL_DENY_FOLDER_ID,model:d},a)),l().send("ll_btn_block")},[c,d]),j=ca()(Sk,((b={})[Uk]=!!f,b[Tk]=!!e,b));return h().createElement("div",{className:j,"data-test-id":"ll-actions-wrap"},h().createElement(E.Z,null,function(a){var b=a.ConfigProvider,c=a.Button;return h().createElement(b,null,h().createElement(c,{size:"s",onClick:g,mode:"tertiary",className:Vk,"data-test-id":"ll-action-approve"},Wk.approve),h().createElement(c,{size:"s",onClick:i,mode:"tertiary","data-test-id":"ll-action-block"},Wk.block))}))},Yk=new nf("llc-t");function Zk(a){var b=a.model,c=a["pony-mode"];return h().createElement(h().Fragment,null,h().createElement("div",{"data-qa-id":(0,Ub.qa)("unread"),className:Yk.elem("read-status",{"pony-mode":c,small:!0,react:!0})},h().createElement(mk,{state:b.is("flags.unread"),"is-forwarded":b.is("flags.forward"),"is-replied":b.is("flags.reply"),model:b,remitEvents:{toggle:{prevent:!0,name:Kh.unread}},remitDetails:{model:b},broadcastEvent:(0,ze.Yv)(this)})),h().createElement("div",{"data-qa-id":(0,Ub.qa)("avatar"),className:Yk.elem("avatar",{"pony-mode":c,unread:b.is("flags.unread")})},h().createElement(Kj,{state:a.selected,disabledHover:a["disable-avatar-hover"],disabled:a["disable-select"],centered:!0,isTouch:!0,imgUrl:this.getImageSrc(),verified:a.isReliable,official:a.isOfficial,darkMode:a.darkMode,size:"common",remitEvents:{toggle:{prevent:!0,name:Kh.clickAvatar}},broadcastEvent:(0,ze.Yv)(this)})))}function $k(a){var b,c,d,e,f,g,i=a.model,j=this.getSubject(),k=this.getSnippetValue(),l=this.getGoToActionDisplayMode(),m="none"===l?this.getPaymentDieDisplayMode():"none",n=a["pony-mode"],o=this.getTransactionMetadata(),p="none"===l&&this.showOrder(a.model,o),q=this.getUnsubscribeSender(),r="none"===l&&this.shouldShowUniversalPaymentDie(),t=(0,Be.isListLetterActionButtonsEnabled)(i,a.search),u=s.ENABLE_TAGS&&!this.getCounter(),v=s.ENABLE_TAGS&&i.is("flags.tags")&&!!i.get("flags.tags").length,w=!!(null===(c=null==i?void 0:i.isSchedule)||void 0===c?void 0:c.call(i)),x=this.letterDate(i.get("date"),w),y=i.getFolder(),z=this.getSearchAttaches(),A=this.getAllAttaches(),B=this.getAttachesModes(!1,A,z),C=null===(d=this.getAttaches(B,A,z))||void 0===d?void 0:d.attachesList,D=null===(e=this.getAttaches(B,A,z))||void 0===e?void 0:e.moreAttachesList,E=this.state.messagesAttaches,F=a["show-attaches"]&&this.getAttachesPreviewCondition()&&"none"===l,G=this.getAttachesModes(!1,E),H=this.getAttaches(G,E),I=this.getCategory();return h().createElement("div",{className:Yk.elem("main-content")},h().createElement("div",{className:Yk.elem("container",{react:!0})},h().createElement("div",{className:Yk.elem("content",{"pony-mode":n,react:!0})},h().createElement("div",{className:Yk.elem("item",{correspondent:!0,unread:i.is("flags.unread")})},h().createElement(Qj,{"qa-id":(0,Ub.qa)("correspondent"),state:this.getCorrespondent(),title:this.getCorrespondentTooltip(),dangerous:this.isProbablyPhishing()})),h().createElement("div",{"data-qa-id":(0,Ub.qa)("flagged"),className:Yk.elem("item",{flag:!0})},h().createElement(Wj,{priority:a.priority,important:this.isImportant(),state:i.is("flags.flagged"),remitEvents:{toggle:{prevent:!0,name:Kh.flagged}},remitDetails:{model:i},broadcastEvent:(0,ze.Yv)(this)})),this.hasBadge()&&h().createElement("div",{"data-qa-id":(0,Ub.qa)("letter:badge"),className:Yk.elem("item",{badge:!0})},h().createElement(Jc,{counter:this.getCounter(),unread:i.is("flags.unread"),component:Oi()})),h().createElement("div",{ref:this.subjectRef,className:Yk.elem("item",{title:!0})},!a["disable-subject"]&&h().createElement("span",{className:Yk.elem("subject",{unread:i.is("flags.unread")})},h().createElement(Jc,{key:j,inlineRoot:!0,subject:j,color:a.search?i.meta("search_subject.color"):null,search:a.search,component:aj()})),h().createElement("span",{"data-qa-id":(0,Ub.qa)("snippet"),className:Yk.elem("snippet")},h().createElement(Jc,{key:k,inlineRoot:!0,value:k,color:a.search?i.meta("search_snippet.color"):null,search:a.search,component:$i()})),h().createElement("div",null)),v&&s.ENABLE_ADD_TAGS_TOUCH&&h().createElement("div",{className:Yk.elem("item",{tags:!0})},h().createElement(sk,{model:i,tags:i.get("flags.tags"),folder:a.showfolder&&y.get("name"),readonly:!u})),"compact"===m&&h().createElement("div",{className:Yk.elem("item")},h().createElement(Jc,{model:a.model,standalone:!0,"layout-mode":"2pane","pony-mode":a["pony-mode"],component:Si()})),q&&h().createElement(Jc,{"layout-mode":"2pane","pony-mode":n,unsubscribeSender:q,model:i,useMediators:["unsubscribe-actions","themes-manager"],component:cj()}),a.showfolder&&!v&&h().createElement("div",{className:Yk.elem("item",(b={folder:!0},b["hide-on-hover"]=u,b))},(null===(f=null==i?void 0:i.isSchedule)||void 0===f?void 0:f.call(i))?h().createElement(h().Fragment,null,h().createElement(Jc,{title:(0,Bi.scheduleDate)(i.get("send_date")),text:y.get("name"),"data-qa-id":(0,Ub.qa)("folder"),component:Qi()})):h().createElement(Jc,{title:y.get("name"),text:y.get("name"),"data-qa-id":(0,Ub.qa)("folder"),component:Qi()})),h().createElement("div",{className:Yk.elem("secondary-data")},!!I&&h().createElement("div",{className:Yk.elem("item",{category:!0})},h().createElement(Jc,{flat:!0,short:!0,name:I,component:Te()})),s.ENABLE_MENTIONS&&(i.is("flags.mention")||i.is("flags.mention_unread"))&&h().createElement("div",{className:Yk.elem("item",{mention:!0})},h().createElement(gk,{unread:i.is("flags.mention_unread")})),!a["disable-attach"]&&i.is("flags.attach")&&h().createElement("div",{className:Yk.elem("item",{"attach-status":!0})},h().createElement(Jc,{component:Lk(),small:!0,model:a.model,useMediators:["attachments-manager","pony-mode"]})),!a.showfolder&&!!(null===(g=null==i?void 0:i.isSchedule)||void 0===g?void 0:g.call(i))&&h().createElement("div",{className:Yk.elem("item")},h().createElement(Jc,{date:i.get("send_date"),component:Yi()}))),h().createElement("div",{title:this.getDateTooltip(w),"data-qa-id":(0,Ub.qa)("time:".concat(x)),className:Yk.elem("item",{date:!0})},x)),"full"===m&&h().createElement("div",{className:Yk.elem("payment-die-container")},h().createElement(Jc,{fluid:!0,model:a.model,"layout-mode":"2pane",component:Ui()})),C&&A&&h().createElement(Jc,{fluid:!0,model:a.model,"attaches-list":C,"more-attaches-list":D,"layout-mode":"2pane","all-count":A.length,vertical:B.vertical,"pony-mode":n,remitEvents:{attach:"previewattach",more:"previewattach",moreinvalid:"openletter"},broadcastEvent:(0,ze.Yv)(this),component:Pk()}),F&&h().createElement(h().Fragment,null,E?h().createElement(Jc,{fluid:!0,key:"list-letter-preview-attaches",component:Pk(),model:a.model,"attaches-list":H.attachesList,"more-attaches-list":H.moreAttachesList,"layout-mode":"2pane","all-count":E.length,vertical:G.vertical,"pony-mode":n,remitEvents:{attach:"previewattach",more:"previewattach",moreinvalid:"openletter"},broadcastEvent:(0,ze.Yv)(this)}):h().createElement(h().Fragment,null,h().createElement(Jc,{fluid:!0,key:"list-letter-preview-stub",attachesCount:i.get("attachments_count"),isCompact:!1,"pony-mode":n,component:Rk()}))),o&&p&&h().createElement(Jc,{fluid:!0,component:Nk(),useMediators:["orders-manager"],metadata:o,"pony-mode":n}),r&&h().createElement(Jc,{fluid:!0,component:Wi(),model:a.model,"layout-type":a["layout-mode"],"pony-mode":n}),"none"!==l&&h().createElement(dk,{model:i,meta:this.goToActionMetadata,layoutMode:"2pane",mode:l}),t&&h().createElement(Xk,{model:i,ponyMode:n,broadcastEvent:(0,ze.Yv)(this)})))}function _k(){var a=this.props,b=(0,u.getFastActionCurrent)(),c=a.model,d=a.model,e=a["pony-mode"];return h().createElement("a",{style:a.style,"data-qa-id":(0,Ub.qa)(this.rootQaId()),"data-qa-index":(0,Ub.qa)(d.meta("_ui-index")),"data-qa-safe":(0,Ub.qa)(String(a.isReliable)),"data-qa-official":(0,Ub.qa)(String(a.isOfficial)),className:Yk.root({"enable-user-select":a["enable-user-select"],"pony-mode":e,"has-indent":a.indent,normal:!a.indent,active:a.selected,firstSelected:a.isFirstSelected,lastSelected:a.isLastSelected,first:a.first,last:a.last,new:!0,"new-selection":!0,reliable:a.isImportantReliable,official:a.isOfficialGreen},{addClass:["js-letter-list-item","js-tooltip-direction_letter-bottom"]}),onDragStart:(0,ze.CH)(this,{name:"unused",prevent:!0}),onClick:(0,ze.CH)(this,"click"),onContextMenu:(0,ze.CH)(this,"contextmenu"),href:a.href?a.href:null,tabIndex:-1,"data-id":c.get("id"),"data-draggable-id":c.get("id"),"data-uidl-id":c.get("last")},h().createElement("div",{className:Yk.elem("background",{active:a.selected,react:!0})}),h().createElement(Bk,{swipeUnderlay:this.swipeUnderlay(a["pony-mode"],a.search,a.model),swipeUnderlayRight:this.swipeUnderlayRight(a.model),swipeContent:this.content(a),swipeHeader:this.header(a),"max-offset":String(470),canFullSwipe:b!==v.LetterFastActionType.unread,maxOffsetPartLeft:110,onRightAction:function(){return(0,Ii.callFastAction)(a.model)},useMediators:["swipe-manager"]}),a.fromThread||!a.hideDelimeter&&h().createElement(Jc,{component:Ki(),full:a["full-delimiter"],ponymode:e,indent:a.indent,indentRight:!0}),h().createElement(Jc,{component:Ki(),ponymode:e,indent:a.indent,indentRight:!0,last:!0}))}var al=function(){var a=function(b,c){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)if(Object.prototype.hasOwnProperty.call(b,c))a[c]=b[c]})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw new TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),bl=function(){return(bl=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++)for(var e in b=arguments[c])if(Object.prototype.hasOwnProperty.call(b,e))a[e]=b[e];return a}).apply(this,arguments)},cl=function(a){function b(b){var c=a.call(this,b)||this;return c.state={},c.subjectRef=h().createRef(),c.compact=!1,c.content=$k,c.swipeUnderlay=Gk,c.header=Zk,c.swipeUnderlayRight=Hk,c.getSubject=Fi.getSubject,c.getImageSrc=Fi.getImageSrc,c.isProbablyPhishing=Fi.isProbablyPhishing,c.getCorrespondent=Fi.getCorrespondent,c.getCorrespondentTooltip=Fi.getCorrespondentTooltip,c.getDateTooltip=Fi.getDateTooltip,c.getCounter=Fi.getCounter,c.getCategory=Fi.getCategory,c.getAllAttaches=Di.getAllAttaches,c.getSearchAttaches=Di.getSearchAttaches,c.getAttaches=Ci.getAttaches,c.getAttachesModes=Ei.getAttachesModes,c.isImportant=Fi.isImportant,c.getSnippetValue=Fi.getSnippetValue,c.getPaymentDieDisplayMode=Gi.getPaymentDieDisplayMode,c.getGoToActionDisplayMode=zi.getGoToActionDisplayMode,c.shouldShowUniversalPaymentDie=Gi.shouldShowUniversalPaymentDie,c.shouldHideTransactionCategory=Gi.shouldHideTransactionCategory,c.showOrder=Hi.showOrder,c.getTransactionMetadata=Hi.getTransactionMetadata,c.rootQaId=Fi.rootQaId,c.letterDate=Bi.letterDate,c.getUnsubscribeSender=Fi.getUnsubscribeSender,c.handleIntersectViewport=Fi.handleIntersectViewport,c.attrs=bl(bl({},c.props),c.state),c.render=_k,c.meta=b.model.getPaymentMeta(),c.goToActionMetadata=b.model.getGoToActionMeta(),c}return al(b,a),b.prototype.componentDidUpdate=function(){var a;(0,Ai.emojiFallback)(null===(a=this.subjectRef)||void 0===a?void 0:a.current,"r-ll-cmn")},b.prototype.didMount=function(){var a;this.handleIntersectViewport(),(0,Ai.emojiFallback)(null===(a=this.subjectRef)||void 0===a?void 0:a.current,"r-ll-cmn")},b.prototype.handleInnerEvent=function(a){var b=this.props.model;switch(a.type){case Kh.flagged:return void ce()(["letters_letter-item","toggle_flagged_".concat(!b.get("flags.flagged"))]);case Kh.unread:return void ce()(["letters_letter-item","toggle_unread_".concat(!b.get("flags.unread"))]);case Kh.clickAvatar:ce()(["letters_letter-item",this.props.selected?"deselect":"select"])}},b.prototype.hasBadge=function(){return!this.props["disable-subject"]&&!!this.getCounter()},b.prototype.getAttachesPreviewCondition=function(){return!(this.state.fetchAttaches&&!this.state.messagesAttaches)&&"none"===Gi.getPaymentDieDisplayMode.call(this)},b.defaultProps={"layout-mode":"2pane"},b}(h().Component),dl=(0,ze.v$)("list-letter-common-touch",cl),el=function(){var a=function(b,c){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)if(Object.prototype.hasOwnProperty.call(b,c))a[c]=b[c]})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw new TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),fl=function(a){function b(b){var c=a.call(this,b)||this;return c.state={},c.contentRowRef=h().createRef(),c.compact=!0,c.content=Ik,c.header=Fk,c.swipeUnderlay=Gk,c.swipeUnderlayRight=Hk,c.getSubject=Fi.getSubject,c.getImageSrc=Fi.getImageSrc,c.isProbablyPhishing=Fi.isProbablyPhishing,c.getCorrespondent=Fi.getCorrespondent,c.getCorrespondentTooltip=Fi.getCorrespondentTooltip,c.getDateTooltip=Fi.getDateTooltip,c.getSubjectTooltip=Fi.getSubjectTooltip,c.getSnippetValue=Fi.getSnippetValue,c.getCounter=Fi.getCounter,c.getCategory=Fi.getCategory,c.getAttaches=Ci.getAttaches,c.getAttachesModes=Ei.getAttachesModes,c.isImportant=Fi.isImportant,c.getGoToActionDisplayMode=zi.getGoToActionDisplayMode,c.getPaymentDieDisplayMode=Gi.getPaymentDieDisplayMode,c.shouldShowUniversalPaymentDie=Gi.shouldShowUniversalPaymentDie,c.shouldHideTransactionCategory=Gi.shouldHideTransactionCategory,c.getUnsubscribeSender=Fi.getUnsubscribeSender,c.handleIntersectViewport=Fi.handleIntersectViewport,c.rootQaId=Fi.rootQaId,c.letterDate=Bi.letterDate,c.render=Jk,c.meta=b.model.getPaymentMeta(),c.goToActionMetadata=b.model.getGoToActionMeta(),c}return el(b,a),b.prototype.componentDidUpdate=function(){var a;(0,Ai.emojiFallback)(null===(a=this.contentRowRef)||void 0===a?void 0:a.current,"r-ll-cmp")},b.prototype.didMount=function(){var a;this.handleIntersectViewport(),(0,Ai.emojiFallback)(null===(a=this.contentRowRef)||void 0===a?void 0:a.current,"r-ll-cmp")},b.prototype.handleInnerEvent=function(a){var b=this.props.model;switch(a.type){case Kh.flagged:return void ce()(["letters_letter-item","toggle_flagged_".concat(!b.get("flags.flagged"))]);case Kh.unread:return void ce()(["letters_letter-item","toggle_unread_".concat(!b.get("flags.unread"))]);case Kh.clickAvatar:ce()(["letters_letter-item",this.props.selected?"deselect":"select"])}},b.prototype.getAttachesPreviewCondition=function(){return!(this.state.fetchAttaches&&!this.state.messagesAttaches)&&"none"===Gi.getPaymentDieDisplayMode.call(this)},b.prototype.hasBadge=function(){return!this.props["disable-subject"]&&!!this.getCounter()},b.prototype.getAvatarIndent=function(){if(this.props["pony-mode"])if(this.props.indent)return"left";else return"right";return!1},b.defaultProps={"layout-mode":"3pane"},b}(h().Component),gl=(0,ze.v$)("list-letter-compact-touch",fl,{syncMediatorsOnRender:!1}),hl=nc(3910),il=nc(4821),jl=nc(34),kl=function(){return(kl=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++)for(var e in b=arguments[c])if(Object.prototype.hasOwnProperty.call(b,e))a[e]=b[e];return a}).apply(this,arguments)},ll=function(a,b,c){return"3pane"===c?b:a};function ml(a){return a.width+24<=4*this.props}var nl,ol,pl,ql,rl=[{props:jl.columnSidebarM,conditions:ml},{props:jl.columnSidebarXl,conditions:ml},{props:1/0}],sl=nc(3898),tl=nc.n(sl),ul=nc(935),vl=nc.n(ul),wl=nc(2269),xl=function(a){return{wrapper:{position:"relative",padding:"18px 16px 16px",margin:"0px 16px 16px 0px"},wrapperShort:{width:"268px",height:"184px",boxShadow:"0px 4px 24px rgba(18, 31, 52, 0.08)",borderRadius:"12px"},wrapperBackground:{backgroundColor:"var(--vkui--color_background_secondary, #3A3A3B)"},itemWrapper:{display:"flex"},itemWrapperDisabled:{opacity:"0.5"},infoWrapper:{display:"flex",flexDirection:"column",flex:"auto"},metathreadInfo:{marginTop:"14px",marginBottom:"9px"},loaderWrapper:{position:"absolute",top:0,left:0,display:"flex",justifyContent:"center",alignItems:"center",width:"100%",height:"calc(100% - 16px)"},social:{fill:"var(--vkui--octavius_color_icon_social)"},newsLetters:{fill:"var(--vkui--octavius_color_icon_mailings)"},toMyself:{fill:"var(--vkui--octavius_color_icon_to_myself)"},news:{fill:"var(--vkui--octavius_color_icon_news)"},official:{fill:"var(--vkui--octavius_color_icon_official)"},school:{fill:"var(--vkui--octavius_color_icon_school)"},games:{fill:"var(--vkui--octavius_color_icon_games)"},receipts:{fill:"var(--vkui--octavius_color_icon_receipts)"},headerWrapper:{display:"flex",justifyContent:"space-between",marginBottom:a.x05.value},folderWrapper:{display:"flex",alignItems:"flex-end"},iconWrapper:{display:"flex",alignSelf:"center",marginRight:"12px"},iconOff:{fill:"var(--vkui--color_icon_secondary, #A5A7AD)"}}},yl=function(){var a=function(b,c){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)if(Object.prototype.hasOwnProperty.call(b,c))a[c]=b[c]})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw new TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),zl=function(a,b,c,d){var e,f=arguments.length,g=f<3?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)if(e=a[h])g=(f<3?e(g):f>3?e(b,c,g):e(b,c))||g;return f>3&&g&&Object.defineProperty(b,c,g),g},Al=function(a){function b(b,c){var d=a.call(this,b,c)||this;d.element=null,d.handleSubSettingChange=function(a){return function(){for(var b=[],c=0;c<arguments.length;c++)b[c]=arguments[c];var e=a.onChange(b[0]);if(e)d.setState({settingsInProgress:!0}),e.catch(function(){}).then(function(){d.setState({settingsInProgress:!1})})}};var e=b.metathreadSettings.state;return d.state={settingsInProgress:!1,metathreadState:e},d}return yl(b,a),b.prototype.setFolderInProgress=function(a,b){this.setState({settingsInProgress:b})},b.prototype.getMetathreadsData=function(){return[{type:"inbox",folderId:tl().INBOX},{type:"toMyself",folderId:tl().TOMYSELF},{type:"newsLetters",folderId:tl().NEWSLETTERS},{type:"social",folderId:tl().SOCIAL},{type:"news",folderId:tl().NEWS},{type:"official",folderId:tl().OFFICIAL},{type:"receipts",folderId:tl().RECEIPTS},{type:"school",folderId:tl().SCHOOL},{type:"games",folderId:tl().GAMES}]},b.prototype.onSettingsEdit=function(a,b){var c,d=this,e=this.props.onSettingsEdit;this.setState({settingsInProgress:!0}),e((c={},c[a]=b,c)).then(function(){l().send("tggl_metahread_sttng_".concat(a,"_").concat(b));var c=d.getMetathreadsData().find(function(b){return b.folderId===a}).type;if(l().send("metathread_select",{dwh:{category:a,name:c,state:b}}),b===vl().METATHREADS_STATES.OFF&&s.METATHREADS_FORCED_EXP){var e=d.getMetathreadsData().find(function(b){return b.folderId===a}).type,f=s.METATHREADS_FORCED_EXP.split("|")[0];l().send("metathreads-forced-exp-off",{dwh:{group:f,folder:e}})}if(b===vl().METATHREADS_STATES.ON&&s.METATHREADS_FORCED_EXP){e=d.getMetathreadsData().find(function(b){return b.folderId===a}).type,f=s.METATHREADS_FORCED_EXP.split("|")[0];l().send("metathreads-forced-exp-on",{dwh:{group:f,folder:e}})}}).finally(function(){return d.setState({settingsInProgress:!1,metathreadState:b})})},b.prototype.onMetathreadToggle=function(a,b){var c=a?vl().METATHREADS_STATES.ON:vl().METATHREADS_STATES.OFF;this.onSettingsEdit(b,c)},b.prototype.onHideMetathreadOnLetterList=function(a,b){var c=a?vl().METATHREADS_STATES.HIDDEN:vl().METATHREADS_STATES.ON;this.onSettingsEdit(b,c)},b.prototype.renderHideMetathreadOnLetterList=function(){var a=this,b=this.state.metathreadState,c=this.props.metathreadSettings.folderId,d=(0,wl.getMetathreadSettingsFromState)(b),e=d.isOn,g=d.isHiddenOnLetterList;return void 0!==b?h().createElement(h().Fragment,null,h().createElement(f.Margin,{desktopX:1,mobileX:1}),h().createElement(f.Checkbox,{label:h().createElement(f.Text,{mode:"small",secondary:!0,text:i18n("Показывать только в списке папок")}),checked:g,onChange:function(b){return a.onHideMetathreadOnLetterList(b,c)},testId:"metathread-hidden",disabled:!e})):null},b.prototype.renderSubSettings=function(){var a=this,b=this.props.metathreadSettings.subSettings,c=this.state.metathreadState,d=(0,wl.getMetathreadSettingsFromState)(c).isOn;if(!b||!b.length)return null;else return h().createElement(h().Fragment,null,b.filter(Boolean).map(function(b,e){return h().createElement(h().Fragment,null,h().createElement(f.Margin,{key:"margin_".concat(e),desktopX:1,mobileX:1}),h().createElement(f.Checkbox,{key:"input_".concat(e),label:h().createElement(f.Text,{mode:"small",secondary:!0,text:b.text}),checked:b.value,onChange:a.handleSubSettingChange(b),testId:b.testId,disabled:!d&&void 0!==c}))}))},b.prototype.render=function(){var a,b,c,d=this,e=this.props,g=e.metathreadSettings,i=g.type,j=g.title,k=g.folderId,l=g.text,m=g.icon,n=e.classes,o=e.layerMode,p=e.ponymode,q=e.darkMode,r=this.state,t=r.metathreadState,u=r.settingsInProgress,v=(0,wl.getMetathreadSettingsFromState)(t),w=v.isOn,x=v.isHiddenOnLetterList,y=k===tl().INBOX?!1:!w,z=ca()(((a={})[n.wrapper]=!0,a[n.wrapperShort]=!o,a[n.wrapperBackground]=q,a)),A=ca()(((b={})[n.itemWrapper]=!0,b[n.itemWrapperDisabled]=u,b)),B=ca()(((c={})[n.iconWrapper]=!0,c[n[i]]=!0,c[n.iconOff]=!s.ACCENT_DISABLED_METATHREAD_SETTINGS_ITEM&&y,c));return h().createElement("div",{className:z,"data-test-id":"metathread-setting-".concat(i),"data-qa-state":"".concat(w?"on":"off",":").concat(x?"hidden":"shown")},h().createElement("div",{className:A},h().createElement("div",{className:n.infoWrapper},h().createElement("div",{className:n.headerWrapper},h().createElement("div",{className:n.folderWrapper},Nb[m]&&h().createElement(h().Fragment,null,h().createElement("div",{className:B},h().createElement(f.Icon,{icon:Nb[m],testId:"metathread-icon"}))),h().createElement(f.Text,{text:j,secondary:!s.ACCENT_DISABLED_METATHREAD_SETTINGS_ITEM&&y,bold:!0,testId:"metathread-title",mode:p?"small":"base"})),void 0!==t&&h().createElement(f.Switch,{compact:!0,checked:w,onChange:function(a){return d.onMetathreadToggle(a,k)},testId:"metathread-switch"})),l&&h().createElement("div",{className:n.metathreadInfo},h().createElement(f.Margin,{desktopX:.5,mobileX:.5}),h().createElement(f.Text,{text:l,mode:"small",secondary:!0,testId:"metathread-info"})),this.renderHideMetathreadOnLetterList(),this.renderSubSettings(),h().createElement(f.Margin,{mobileX:p?3:6,desktopX:p?3:6}))),u&&h().createElement("div",{className:n.loaderWrapper},h().createElement(f.Progress,{size:16,primary:!0,testId:"metathread-loader"})))},b=zl([(0,f.withStyles)(xl)],b)}(h().Component),Bl=Al,Cl=function(){return{wrapper:{position:"relative",margin:"0px 16px 16px 0px"},wrapperLoading:{display:"flex"},wrapperNotLoading:{cursor:"pointer"},wrapperShort:{width:"300px",height:"216px",boxShadow:"0px 4px 24px rgba(18, 31, 52, 0.08)",borderRadius:"12px",overflow:"hidden"},wrapperEmpty:{width:"268px",padding:"18px 16px 0",height:"200px",overflow:"hidden","&:hover":{boxShadow:"0px 4px 24px rgba(18, 31, 52, 0.12)"}},wrapperBackground:{backgroundColor:"var(--vkui--color_background_secondary, #3A3A3B)"},infoWrapperNotEmpty:{"&:hover $divider":{borderBottomColor:"var(--vkui--color_background_modal)"}},infoWrapper:{display:"flex",flexDirection:"column",flex:"auto",height:"100%"},metathreadInfo:{marginTop:"4px"},titleWrapper:{display:"flex",justifyContent:"space-between",width:"100%",boxSizing:"border-box",color:"var(--vkui--color_text_primary, #333333)",fill:"var(--vkui--color_text_primary, #333333)","&:hover":{color:"inherit"}},titleWrapperNotEmpty:{padding:"16px",height:"100%",alignItems:"center","&:hover":{background:"var(--vkui--color_transparent--hover)"}},imgClass:{width:"100%",height:"100%",objectFit:"contain"},divider:{width:"calc(100% - 32px)",margin:"0 16px",borderBottom:"1px solid var(--vkui--color_separator_primary_alpha)"},loader:{margin:"auto"}}},Dl=function(){var a=function(b,c){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)if(Object.prototype.hasOwnProperty.call(b,c))a[c]=b[c]})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw new TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),El=function(a,b,c,d){var e,f=arguments.length,g=f<3?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)if(e=a[h])g=(f<3?e(g):f>3?e(b,c,g):e(b,c))||g;return f>3&&g&&Object.defineProperty(b,c,g),g},Fl=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}return Dl(b,a),b.prototype.onFiltersClick=function(){l().send("metathreads_filters-shortcut_link_click")},b.prototype.onOpenFilterClick=function(){l().send("metathreads_filters-shortcut_add_click"),this.props.onCreateFilter()},b.prototype.render=function(){var a,b=this,c=this.props,d=c.classes,e=c.layerMode,g=c.ponymode,i=c.darkMode,j=c.filtersCount,k=c.filtersCountLoading,l=!j&&!k,m=ca()(((a={})[d.wrapper]=!0,a[d.wrapperShort]=!e,a[d.wrapperBackground]=i,a[d.wrapperEmpty]=l,a[d.wrapperLoading]=k,a[d.wrapperNotLoading]=!k,a)),n=ca()([d.titleWrapper,d.titleWrapperNotEmpty]),o=ca()([d.infoWrapper,d.infoWrapperNotEmpty]),p="".concat(s.PACKAGES_URL,"/static.promo/octavius/metathread/filters/net_with_letter_").concat(i?"dark":"light",".png");return h().createElement("div",{className:m,"data-test-id":"metathread-filters-all"},k?h().createElement("div",{className:d.loader},h().createElement(f.Progress,{secondary:!0})):l?h().createElement("div",{className:d.infoWrapper,onClick:function(){return b.onOpenFilterClick()},"data-test-id":(0,Ub.qa)("metathread-filters-add")},h().createElement("div",{className:d.titleWrapper},h().createElement(f.Text,{text:i18n("Добавить фильтр"),bold:!0,testId:"metathread-add-title",mode:g?"small":"base"}),h().createElement(f.Icon,{icon:t.ACTIONS_ADD_BIG})),h().createElement("img",{src:p,className:d.imgClass})):h().createElement("div",{className:o},h().createElement("a",{href:s.FILTERS_URL,target:"_blank",className:n,onClick:this.onFiltersClick,rel:"noreferrer","data-test-id":(0,Ub.qa)("metathread-filters-link")},h().createElement("div",null,h().createElement(f.Text,{text:i18n("Посмотреть все фильтры"),bold:!0,testId:"metathread-filters-title",mode:g?"small":"base"}),h().createElement("div",{className:d.metathreadInfo},h().createElement(f.Text,{text:i18n.plural(j,[i18n("{filtersCount} фильтров создано",{filtersCount:j}),i18n("{filtersCount} фильтр создан",{filtersCount:j}),i18n("{filtersCount} фильтра создано",{filtersCount:j})]),mode:"small",secondary:!0,testId:"metathread-filters-info"}))),h().createElement(f.Icon,{icon:t.NAVIGATION_ARROW_LIST_NEXT})),h().createElement("div",{className:d.divider}),h().createElement("div",{className:n,onClick:function(){return b.onOpenFilterClick()},"data-test-id":(0,Ub.qa)("metathread-filters-add")},h().createElement(f.Text,{text:i18n("Добавить фильтр"),bold:!0,testId:"metathread-add-title",mode:g?"small":"base"}),h().createElement(f.Icon,{icon:t.ACTIONS_ADD_BIG}))))},b=El([(0,f.withStyles)(Cl)],b)}(h().Component),Gl=Fl,Hl=f.TwoKitTheming.createUseStyles(function(){return{header:{paddingRight:38},metathreadsData:{display:"flex",flexDirection:"row",flexWrap:"wrap"},description:{maxWidth:600}}}),Il=function(a){var b=a.metathreadsData,c=a.onClose,d=a.onSettingsEdit,e=a.onHelpClick,i=a.onCreateFilter,j=a.updateFilters,k=a.filtersCount,l=a.filtersCountLoading,m=a.layer,n=a.ponymode,o=a.darkMode;(0,g.useEffect)(function(){if(s.ENABLE_METATHREAD_FILTERS_SHORTCUT)j()},[]);var p=Hl(a),q=b.filter(function(a){return!a.isHidden});q.sort(function(a,b){return a.sortOrder-b.sortOrder});var r=function(){return h().createElement(h().Fragment,null,!m&&h().createElement(f.Margin,{desktopX:n?5:6.5,mobileX:n?5:6.5}),h().createElement(f.Text,{mode:n?"small":"base",text:i18n("Умная сортировка автоматически распределяет по папкам некоторые категории писем. Можно группировать рассылки, письма себе, уведомления от соцсетей, новости и другие категории."),testId:"metathreads-subtitle"}),m?h().createElement(h().Fragment,null," ",h().createElement(f.Link,{small:n,onClick:function(){return e()},testId:"metathreads-help-link"},i18n("Всё об умной сортировке"))):h().createElement(h().Fragment,null,h().createElement("br",null),h().createElement(f.Link,{small:n,onClick:function(){return e()},testId:"metathreads-help-link"},i18n("Всё об умной сортировке"))),h().createElement(f.Margin,{desktopX:n?3:5,mobileX:n?3:5}))},t=function(){return h().createElement(h().Fragment,null,q.map(function(a){return h().createElement(Bl,{key:a.folderId,metathreadSettings:a,onSettingsEdit:d,layerMode:m,ponymode:n,darkMode:o})}))};return h().createElement(h().Fragment,null,m?h().createElement(f.Popup,{show:!0,width:"var(--vkui--size_popup_small--regular)",testId:"metathread-settings-popup"},h().createElement(f.Panel,{popup:!0,onClose:c,mobileCross:!0},h().createElement("div",null,h().createElement(h().Fragment,null,h().createElement(f.Text,{mode:"h1",bold:!0,text:i18n("Умная сортировка"),testId:"metathreads-title"}),h().createElement(f.Margin,{desktopX:n?3:5,mobileX:n?3:5})),r(),t()))):h().createElement("div",{className:p.header},h().createElement("div",{className:p.description},r()),h().createElement("div",{className:p.metathreadsData},t(),s.ENABLE_METATHREAD_FILTERS_SHORTCUT&&h().createElement(Gl,{layerMode:m,ponymode:n,darkMode:o,onCreateFilter:i,filtersCount:k,filtersCountLoading:l}))))},Jl=nc(769),Kl=nc.n(Jl),Ll=f.TwoKitTheming.createUseStyles(function(a){var b=a.sizeBasePadding,c=a.x12,d=a.sizeIllustrationL;return{layout:{display:"flex",flexDirection:"column",alignItems:"center",height:"100vh",padding:b.auto.value,boxSizing:"border-box"},content:{flexGrow:1,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},image:{paddingLeft:c.value,paddingRight:c.value,boxSizing:"border-box",maxWidth:"100vw",maxHeight:d.auto.value}}}),Ml=function(a){var b=Ll(a),c=a.errorText,d=a.actionText,e=a.onActionClick;return h().createElement("div",{className:b.layout},h().createElement("div",{className:b.content},h().createElement("img",{className:b.image,src:"".concat(Kl().urls.hbPackagesUrl,"/static/vk-mini-app/images/unknown-error.png"),srcSet:"".concat(Kl().urls.hbPackagesUrl,"/static/vk-mini-app/images/unknown-error@2x.png 2x"),alt:""}),h().createElement(f.Space,null),h().createElement(f.Text,{mode:"h1",text:c})),h().createElement(f.Button,{primary:!0,fluid:!0,text:d,onClick:e}))},Nl=function(a){var b;return h().createElement(f.Icon,{icon:Mb[null!==(b=null==a?void 0:a.emptyStateType)&&void 0!==b?b:Cb]})},Ol={title:i18n("Вы уверены, что хотите {br}отменить загрузку файла?",{"unsafe-br":"<br/>"}),textCompose:i18n("Загрузка файла отменится и вы не сможете отправить его по почте."),textDnd:i18n("Загрузка файла отменится и вы не сможете сохранить его в Облако."),button:i18n("Загрузить с Облаком"),closeButton:i18n("Отменить загрузку")},Pl=function(a){var b=(0,g.useState)(!0),c=b[0],d=b[1],e=function(){a.onClose(),d(!1)},i=function(){a.onSubmit(),d(!1)},j=(s.LAYER_IFRAME_PARAMS.cloud_tariff||{}).width,k=void 0===j?491:j,l=a.from,m=null;if("dnd"===l)m=Ol.textDnd;if("compose"===l)m=Ol.textCompose;return h().createElement(f.Popup,{show:c,onHide:e,width:"".concat(k,"px"),testId:"oversize-attach-cancel-popup",closeByEsc:!1},h().createElement(f.Panel,{popup:!0,onClose:e,header:h().createElement(f.Text,{mode:"h1"},h().createElement("span",{dangerouslySetInnerHTML:{__html:Ol.title}})),content:h().createElement(h().Fragment,null,h().createElement(f.Margin,{desktopX:1,mobileX:1}),h().createElement(f.Text,null,m)),controls:h().createElement(E.Z,null,function(a){var b=a.Button;return h().createElement(h().Fragment,null,h().createElement(b,{size:"l",onClick:i,"data-test-id":"submit-button"},Ol.button),h().createElement(f.Space,null),h().createElement(b,{size:"l",mode:"secondary",appearance:"neutral",onClick:e,"data-test-id":"close-button"},Ol.closeButton))})}))},Ql=function(a){var b=a.colorIconSecondary,c=a.colorBackgroundAccentAlternative;return{base:{display:"inline-block","& svg":{width:"16px",height:"16px",fill:b.normal.value}},disabled:{pointerEvents:"none"},container:{whiteSpace:"nowrap"},selected:{"& svg":{fill:c.normal.value}},ico:{cursor:"pointer","& svg":{width:20,height:20}}}},Rl=function(){var a=function(b,c){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)if(Object.prototype.hasOwnProperty.call(b,c))a[c]=b[c]})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw new TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),Sl=function(a,b,c,d){var e,f=arguments.length,g=f<3?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)if(e=a[h])g=(f<3?e(g):f>3?e(b,c,g):e(b,c))||g;return f>3&&g&&Object.defineProperty(b,c,g),g},Tl=function(a){function b(){var b=null!==a&&a.apply(this,arguments)||this;return b.onMouseDown=function(a){a.preventDefault()},b}return Rl(b,a),b.prototype.render=function(){var a=this.props,b=a.icon,c=a.text,d=a.classes,e=a.selected,g=a.onClick,i=a.disabled;return h().createElement("div",{className:ca()(d.base,e&&d.selected)},h().createElement(f.Tooltip,{placement:"top",overlay:h().createElement("div",{className:d.container},h().createElement(f.Text,null,c))},h().createElement("div",{className:ca()(d.ico,i&&d.disabled),onClick:g,onMouseDown:this.onMouseDown},h().createElement(f.Icon,{icon:b}))))},b=Sl([(0,f.withStyles)(Ql)],b)}(h().PureComponent),Ul=Tl,Vl=function(){return{base:{}}},Wl=function(){var a=function(b,c){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)if(Object.prototype.hasOwnProperty.call(b,c))a[c]=b[c]})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw new TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),Xl=function(a,b,c,d){var e,f=arguments.length,g=f<3?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)if(e=a[h])g=(f<3?e(g):f>3?e(b,c,g):e(b,c))||g;return f>3&&g&&Object.defineProperty(b,c,g),g},Yl=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}return Wl(b,a),b.prototype.render=function(){var a=this.props,b=a.selected,c=a.onClick,d=a.disabled;return h().createElement(Ul,{icon:t.STATUS_WARNING_ROUND,text:i18n("Важное"),selected:b,onClick:c,disabled:d})},b=Xl([(0,f.withStyles)(Vl)],b)}(h().PureComponent),Zl=Yl,$l="_3Ryo8YfRYbW1DDQPAQGRzX",_l="_3B87h5P5qaEzs4B-2LUf93",am="_1Sisr-tGB-UGZRVggYsBzB",bm=function(){return(bm=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++)for(var e in b=arguments[c])if(Object.prototype.hasOwnProperty.call(b,e))a[e]=b[e];return a}).apply(this,arguments)},cm=(0,Cd.isAdInfo)(s.PROMT_ABOUT_AD_RAW)?s.PROMT_ABOUT_AD_RAW:s.PROMT_ABOUT_AD_DEFAULT,dm=function(a){var b,c=a.children;return h().createElement("div",{className:$l},c,h().createElement("span",{className:_l},"•"),h().createElement("div",{className:am},s.TRANSLATE_ABOUT_AD?i18n("реклама"):"реклама"),h().createElement(Od,{adDescription:bm((b={},b[Cd.AdDescriptionKeys.Subject]=s.PROMT_LOGO_HREF,b),cm),placement:"topRight",reservePlacement:"bottomRight"}))},em="_3md5s6vZdEy2J2jPt9bmli",fm="_2S5z2vgnamhQiI_bV20p_p",gm=function(){return(gm=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++)for(var e in b=arguments[c])if(Object.prototype.hasOwnProperty.call(b,e))a[e]=b[e];return a}).apply(this,arguments)},hm=(0,Cd.isAdInfo)(s.PROMT_ABOUT_AD_RAW)?s.PROMT_ABOUT_AD_RAW:s.PROMT_ABOUT_AD_DEFAULT,im=function(a){var b,c=h().useRef(),d=h().useCallback(function(a){a.preventDefault()},[]),e=s.PROMT_LOGO_WITH_AD_DROPDOWN?"div":h().Fragment;return h().createElement(e,gm({},s.PROMT_LOGO_WITH_AD_DROPDOWN&&"div"===e&&{ref:c,className:em}),h().createElement(f.Tooltip,{testId:"promt-tooltip",delayBeforeAnimation:2e3,arrow:!0,arrowMode:"soft",placement:s.PROMT_LOGO_WITH_AD_DROPDOWN?"topRight":"top",overlay:h().createElement("div",{className:"promt_tooltip_content"},i18n("Переведено с помощью"),h().createElement("div",{className:"icon"},h().createElement(f.Icon,{icon:t.STATIC_PROMT_WITH_LOGO}))),overlayContainer:document.querySelector('[data-container-id="tooltip-container"]'),paddingsMode:"none"},h().createElement("a",{href:s.PROMT_LOGO_HREF,target:"_blank",rel:"noreferrer",className:"tooltip_icon"},s.PROMT_LOGO_WITH_AD_DROPDOWN?h().createElement(h().Fragment,null,h().createElement("div",{className:fm},h().createElement(f.Icon,{icon:t.STATIC_PROMT}),h().createElement("div",null,s.TRANSLATE_ABOUT_AD?i18n("реклама"):"реклама")),h().createElement(Od,{adDescription:gm((b={},b[Cd.AdDescriptionKeys.Subject]=s.PROMT_LOGO_HREF,b),hm),mode:"vertical",overlayContainer:c.current,onClick:d,placement:"bottomRight",reservePlacement:"topRight"})):h().createElement(f.Icon,{icon:t.STATIC_PROMT}))))},jm=function(){return{base:{"& svg":{width:"20px",height:"20px"}}}},km=function(){var a=function(b,c){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)if(Object.prototype.hasOwnProperty.call(b,c))a[c]=b[c]})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw new TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),lm=function(a,b,c,d){var e,f=arguments.length,g=f<3?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)if(e=a[h])g=(f<3?e(g):f>3?e(b,c,g):e(b,c))||g;return f>3&&g&&Object.defineProperty(b,c,g),g},mm=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}return km(b,a),b.prototype.render=function(){var a=this.props,b=a.classes,c=a.selected,d=a.onClick,e=a.disabled;return h().createElement("div",{className:b.base},h().createElement(Ul,{icon:t.WYSIWYG_MAIL_READ,text:i18n("С уведомлением"),selected:c,onClick:d,disabled:e}))},b=lm([(0,f.withStyles)(jm)],b)}(h().PureComponent),nm=function(a){var b=a.colorIconSecondary,c=a.colorBackgroundAccentAlternative,d=a.colorBackgroundSecondary,e=a.colorTextPrimary;return{base:{display:"inline-block","& svg":{width:"20px",height:"20px",fill:b.normal.value}},container:{padding:"4px",whiteSpace:"nowrap",display:"flex",flexDirection:"column",alignItems:"center"},selected:{"& svg":{fill:c.normal.value}},ico:{cursor:"pointer"},disabled:{pointerEvents:"none"},items:{paddingTop:"4px"},item:{"&:hover":{backgroundColor:d.hover.value},"& a":{color:e.normal.value},"& a:hover":{color:e.normal.value},cursor:"pointer",borderRadius:"2px",padding:"2px 10px",display:"inline-block"},itemSelecteded:{backgroundColor:d.active.value,fontWeight:"bold","& a":{textDecoration:"none"},"&:hover":{backgroundColor:d.active.value}}}},om=function(){var a=function(b,c){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)if(Object.prototype.hasOwnProperty.call(b,c))a[c]=b[c]})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw new TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),pm=function(a,b,c,d){var e,f=arguments.length,g=f<3?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)if(e=a[h])g=(f<3?e(g):f>3?e(b,c,g):e(b,c))||g;return f>3&&g&&Object.defineProperty(b,c,g),g},qm=function(a){return i18n.plural(a,[i18n("{count} часов",{count:a}),i18n("{count} час",{count:a}),i18n("{count} часа",{count:a})])},rm=function(a){return i18n.plural(a,[i18n("{count} дней",{count:a}),i18n("{count} день",{count:a}),i18n("{count} дня",{count:a})])},sm=[{time:3600,label:qm(1)},{time:7200,label:qm(2)},{time:86400,label:rm(1)},{time:172800,label:rm(2)},{time:432e3,label:rm(5)}],tm=function(a){function b(){var b=null!==a&&a.apply(this,arguments)||this;return b.onMouseDown=function(a){a.preventDefault()},b}return om(b,a),b.prototype.getOptions=function(){var a=this,b=this.props,c=b.selected,d=b.timeSelected,e=b.classes,g=b.onChange;return sm.map(function(b,i){return h().createElement("div",{key:i,className:ca()(e.item,c&&d===b.time?e.itemSelecteded:""),onClick:g&&g.bind(a,b.time)},h().createElement(f.Link,{secondary:!0},b.label))})},b.prototype.render=function(){var a=this.props,b=a.classes,c=a.selected,d=a.onClick,e=a.disabled;return h().createElement("div",{className:ca()(b.base,c&&b.selected)},h().createElement(f.Tooltip,{delay:2e3,placement:"topRight",overlay:h().createElement("div",{className:b.container},h().createElement("div",null,h().createElement(f.Text,null,i18n("Напомнить, если нет ответа через"))),h().createElement("div",{className:b.items},this.getOptions()))},h().createElement("div",{className:ca()(b.ico,e&&b.disabled),onClick:d&&d.bind(this,sm[0].time),onMouseDown:this.onMouseDown},h().createElement(f.Icon,{icon:t.NAVIGATION_NOTIFICATION}))))},b=pm([(0,f.withStyles)(nm)],b)}(h().PureComponent),um=f.TwoKitTheming.createUseStyles(function(a){var b=a.x1,c=a.colorTextSecondary,d=a.colorTextPrimary;return{base:{color:c.normal.value,wordBreak:"break-all","&:hover":{color:d.normal.value}},dropdown:{},dropdownRow:{"&:not(:last-child)":{paddingBottom:b.value}},noWrap:{whiteSpace:"nowrap"}}}),vm=function(a){return a.map(function(a){var b=a.name,c=a.email;return b?"".concat(c," (").concat(b,")"):c}).join(", ")},wm=function(a){var b=a.resendFrom,c=a.resendTo,d=a.resendDate,e=a.receivedDate,i=a.qaEnabled,j=(0,g.useState)(!1),k=j[0],m=j[1],n=um(a),o=vm(c),p=vm(b),q=(0,g.useCallback)(function(a){return i?a:void 0},[i]);(0,g.useEffect)(function(){l().send("resend_show")},[]);var r=(0,g.useCallback)(function(a){if(a)l().send("resend_open");else if(k)l().send("resend_close");if(a&&o.length>875)l().send("resend_overflow");m(a)},[o.length,p.length,k]),s=h().createElement("div",{className:n.dropdown,"data-test-id":q("resend-overlay")},h().createElement("div",{className:n.dropdownRow},h().createElement(f.Text,{secondary:!0},i18n("Переадресовано для:"))," ",h().createElement(f.Text,{testId:q("resend-to")},o)),h().createElement("div",{className:n.dropdownRow},h().createElement(f.Text,{secondary:!0},i18n("Переадресовано от:"))," ",h().createElement(f.Text,{testId:q("resend-from")},p)),d&&h().createElement("div",{className:ca()(n.dropdownRow,n.noWrap)},h().createElement(f.Text,{secondary:!0},i18n("Письмо получено:"))," ",h().createElement(f.Text,{testId:q("resend-date")},d)),h().createElement("div",{className:ca()(n.dropdownRow,n.noWrap)},h().createElement(f.Text,{secondary:!0},i18n("Перенаправлено вам:"))," ",h().createElement(f.Text,{testId:q("received-date")},e)));return h().createElement(f.Dropdown,{placement:"bottomLeft",overlay:s,testId:q("resend-dropdown"),onChangeExpandState:r},h().createElement("div",{className:n.base,"data-test-id":q("resend-dropdown-title")},h().createElement(f.Text,null,i18n("Переадресовано от:"))," ",h().createElement(f.Text,{testId:q("resend-from")},p)))},xm=nc(381),ym=nc.n(xm),zm=nc(8078),Am={sameDay:"[".concat(zm.TRANSLATE_STRINGS_TO_MOMENT.today,"]"),nextDay:"[".concat(zm.TRANSLATE_STRINGS_TO_MOMENT.tomorrow,"]"),lastDay:"[".concat(zm.TRANSLATE_STRINGS_TO_MOMENT.yesterday,"]"),nextWeek:"Do MMMM",lastWeek:"Do MMMM",sameElse:"DD.MM.YYYY"},Bm=function(){var a={},b=i18n("в");for(var c in Am)a[c]="".concat(Am[c]," [").concat(b,"] HH:mm");return a}(),Cm=function(a){var b=a.colorIconSecondary,c=a.colorBackgroundAccentAlternative;return{base:{position:"relative",display:"inline-block"},container:{whiteSpace:"nowrap"},disabled:{pointerEvents:"none"},ico:{cursor:"pointer","& > svg":{width:"20px",height:"20px",fill:b.normal.value}},selected:{"& > svg":{fill:c.normal.value}}}},Dm=function(){var a=function(b,c){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)if(Object.prototype.hasOwnProperty.call(b,c))a[c]=b[c]})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw new TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),Em=function(a,b,c,d){var e,f=arguments.length,g=f<3?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)if(e=a[h])g=(f<3?e(g):f>3?e(b,c,g):e(b,c))||g;return f>3&&g&&Object.defineProperty(b,c,g),g},Fm=function(a){function b(){var b=null!==a&&a.apply(this,arguments)||this;return b.onMouseDown=function(a){a.preventDefault()},b}return Dm(b,a),b.prototype.getDateData=function(a,b){var c=[],d=String(a.getHours()),e=String(a.getMinutes()),f=new Date,g=0;if(a.toDateString()===f.toDateString())g=b.getHours();for(var h=g;h<24;h++)c.push({label:(h<10?"0":"")+String(h),value:String(h)});var i=[];for(h=0;h<60;h++)i.push({label:(h<10?"0":"")+String(h),value:String(h)});return{hoursList:c,hoursSelected:d,minutesList:i,minutesSelected:e}},b.prototype.onHourChange=function(a){var b=this.props.onChange;this._currentDate.setHours(+a),b&&b(this._currentDate)},b.prototype.onMinuteChange=function(a){var b=this.props.onChange;this._currentDate.setMinutes(+a),b&&b(this._currentDate)},b.prototype.render=function(){var a=this,b=this.props,c=b.selected,d=b.onClick,e=b.classes,g=b.onChange,i=b.date,j=b.disabled,k=b.datePickerPosition,l=ym()().endOf("hour").add(1).toDate(),m=ym()().add(2,"years").toDate();if(i<l)this._currentDate=l;else this._currentDate=i;var n=this.getDateData(this._currentDate,l),o=n.hoursList,p=n.hoursSelected,q=n.minutesList,r=n.minutesSelected;return h().createElement(f.Responsive,{mode:s.TOUCH_MODE?"auto":"desktopS"},h().createElement("div",{className:ca()(e.base,c&&e.selected)},h().createElement(f.Tooltip,{delay:2e3,placement:"topRight",overlay:h().createElement("div",{className:e.container},h().createElement(f.Text,null,"".concat(i18n("Отправить письмо")," ")),h().createElement(f.Dropdown,{placement:k,overlay:function(b){var c=b.closeOverlay;return h().createElement(f.DatePicker,{onChange:function(b){a.setState({date:b}),c(),a._currentDate=b,g&&g(b)},value:a._currentDate,min:l,max:m})}},h().createElement(f.Link,{inherit:!0},ym()(this._currentDate).calendar(null,Am))),h().createElement(f.Text,null," ".concat(i18n("в")," ")),h().createElement(f.Select,{link:!0,inline:!0,menuForceTop:!0,value:p,options:o,onChange:this.onHourChange.bind(this),menuMaxHeight:280}),h().createElement(f.Text,null,":"),h().createElement(f.Select,{inline:!0,link:!0,menuForceTop:!0,value:r,options:q,onChange:this.onMinuteChange.bind(this),menuMaxHeight:280}))},h().createElement("div",{className:ca()(e.ico,c&&e.selected,j&&e.disabled),onClick:function(){d&&d(a._currentDate)},onMouseDown:this.onMouseDown},h().createElement(f.Icon,{icon:t.STATUS_TIME})))))},b=Em([(0,f.withStyles)(Cm)],b)}(h().PureComponent),Gm=nc(5822),Hm=nc(3054),Im=nc.n(Hm),Jm="_2RmxAnLvfdCONYhg4uASIf",Km="_2PA5M7Vw6eLWI_Xh1G00HN",Lm="_2iFfScYRkHGPXQXvhEXbxg",Mm="pkNVAYT5C1iX5E_P-x9h",Nm="NJc1CT41GjaL5VUtO8oa3",Om="qi2vTYbjfjF14skBLdynk",Pm="_3pugQ5TZxOSiRThKhkpekw",Qm=function(){var a=function(b,c){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)if(Object.prototype.hasOwnProperty.call(b,c))a[c]=b[c]})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw new TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),Rm=function(a){function b(){var b=null!==a&&a.apply(this,arguments)||this;return b.state={checked:b.props.currentLang,submitSeen:!1},b.saveBtnRef=h().createRef(),b.handleSaveBtnClick=function(){var a=b.props.currentLang,c=b.state.checked;if(a!==c)Im().user.save("lang",c).then(function(){l().send("settings_save_lang_".concat(c)),window.location.reload()}).catch(function(){l().send("settings_save_lang_error")})},b}return Qm(b,a),b.prototype.onRadioBtnClick=function(a){var b,c=this.props.onChangeLang,d=this.state,e=d.checked,f=d.submitSeen;if(a.key!==e){if(c)c(a.key);if(l().send("settings_change_lang_".concat(a.key)),!(f||(g=this.saveBtnRef.current,(null==g?void 0:g.getBoundingClientRect().top)<window.innerHeight)))null===(b=this.saveBtnRef.current)||void 0===b||b.scrollIntoView();var g;this.setState({checked:a.key,submitSeen:!0})}},b.prototype.getRadioButtons=function(a){var b=this,c=this.props,d=c.currentLang,e=c.ponymode,g=this.state.checked;return a.map(function(a){var c=a.index,i=a.key,j=a.label,k=a.src;return h().createElement("div",{key:c,className:Km,onClick:b.onRadioBtnClick.bind(b,a)},h().createElement("div",{className:Om},h().createElement(f.Radio,{name:"languageRadioBtn",defaultChecked:d===i,checked:g===i,testId:"checkbox-".concat(i)})),h().createElement("div",{className:Nm,style:{backgroundImage:'url("'.concat(k,'")')}}),h().createElement(f.Text,{mode:e?"small":"base"},j))})},b.prototype.render=function(){var a,b=this,c=this.props,d=c.popupMode,e=c.ponymode;return h().createElement("div",{className:ca()(Jm,(a={},a[Pm]=e,a))},!d&&h().createElement(h().Fragment,null,h().createElement(f.Text,{mode:e?"small":"base"},i18n("Изменить язык")),h().createElement(f.Margin,{mobileX:e?3:5,desktopX:e?3:5})),h().createElement("div",{className:Lm},h().createElement("div",{className:Mm},this.getRadioButtons(Gm.LANG_ARRAY.slice(0,5))),h().createElement("div",{className:Mm},this.getRadioButtons(Gm.LANG_ARRAY.slice(5)))),!d&&h().createElement(h().Fragment,null,h().createElement(f.Margin,{mobile:20,desktop:20}),h().createElement("div",{ref:this.saveBtnRef},h().createElement(E.Z,null,function(a){var c=a.Button;return h().createElement(c,{"data-test-id":"submit",size:e?"s":"l",onClick:b.handleSaveBtnClick},i18n("Выбрать язык"))}))))},b}(h().PureComponent),Sm=nc(5857),Tm=nc(32),Um=nc(6201),Vm=nc.n(Um),Wm=nc(3040),Xm=nc.n(Wm),Ym="_1D9hSrDIA9z3kWjTZSYaTB",Zm="c7lIeZjcScbF8teC-Ggf_",$m=function(){var a=function(b,c){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)if(Object.prototype.hasOwnProperty.call(b,c))a[c]=b[c]})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw new TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),_m=function(){return(_m=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++)for(var e in b=arguments[c])if(Object.prototype.hasOwnProperty.call(b,e))a[e]=b[e];return a}).apply(this,arguments)},an=function(a){var b,c=null===(b=a.contacts)||void 0===b?void 0:b.length;return c&&i18n.plural(c,[i18n("{count} контактов",{count:c}),i18n("{count} контакт",{count:c}),i18n("{count} контакта",{count:c})])},bn=function(a){return a?(0,Tm.checkTextValidity)(a).valid:!1},cn=function(a){function b(b){var c=a.call(this,b)||this;return c.suggests=new Sm.Suggests({jssdkMethodContactSuggest:Vm(),avatarMapper:function(a){return Xm()({email:a.email,name:a.display_name,size:45})},labelSuggestIcon:t.NAVIGATION_USERS,limit:10,onStateChange:function(a){return c.setState(a)},mapLabelOptionToDescription:an}),c.state=c.suggests.state,c.onSelect=c.onSelect.bind(c),c.onInputChange=c.onInputChange.bind(c),c.onDeselect=c.onDeselect.bind(c),c.onEmailSelect=c.onEmailSelect.bind(c),c.onPaste=c.onPaste.bind(c),c}return $m(b,a),b.prototype.componentDidMount=function(){l().send("l_redirect_form_show")},b.prototype.componentWillUnmount=function(){this.suggests.clearMemCache()},b.prototype.getAddresses=function(){return this.state.selected.map(function(a){return a.email})},b.prototype.getAddressesCount=function(){return this.suggests.state.selected.length},b.prototype.changeValidity=function(a,b){this.suggests.changeValidity(this.state.selected.find(function(b){return b.email===a}),b)},b.prototype.selectCorrespondentsFromString=function(a){var b=this;if(void 0===a)a=this.state.searchValue;(0,Tm.getCorrespondentsFromString)(a).forEach(function(a){var c=(0,Tm.checkTextValidity)(a.email),d=c.str,e=c.valid;b.suggests.selectEmail({email:d,isEmailValid:e,name:a.name||d})})},b.prototype.onInputChange=function(a){var b=(0,Tm.checkTextValidity)(a).valid,c=a;if(a.endsWith(" ")&&b)c="",this.selectCorrespondentsFromString(a),l().send("l_redirect_form_email-select");this.suggests.changeSearchValue(c),this.props.onChange()},b.prototype.onSelect=function(a){this.suggests.select(_m(_m({},a),{invalid:!bn(a.email),contacts:a.contacts.map(function(a){return _m(_m({},a),{invalid:!bn(a.email)})})})),this.props.onChange(),l().send("l_redirect_form_select")},b.prototype.onDeselect=function(a){this.suggests.deselect(a),this.props.onChange(),l().send("l_redirect_form_deselect")},b.prototype.onEmailSelect=function(a){if(0===this.suggests.state.options.length)this.selectCorrespondentsFromString(a),this.props.onChange(),l().send("l_redirect_form_email-select")},b.prototype.onPaste=function(a){a.preventDefault();var b=a.clipboardData.getData("text");this.selectCorrespondentsFromString(b),this.props.onChange(),l().send("l_redirect_form_paste")},b.prototype.render=function(){return h().createElement("div",{"data-test-id":"input-container",className:Zm},h().createElement("div",{className:Ym},h().createElement(f.FormField,{label:i18n("Кому"),errorMessage:this.props.error,errorMessageTestId:this.props.errorId},h().createElement(f.Hr,{mobileVisible:!0,oversize:!1,mode:this.props.error?"error":"normal"}),h().createElement(f.ContactsAutoComplete,{selected:this.state.selected,options:this.state.options,value:this.state.searchValue,highlightWords:this.state.searchWords,autoFocus:this.props.autoFocus,onChange:this.onInputChange,onPaste:this.onPaste,onDelete:this.onDeselect,onEmailSelect:this.onEmailSelect,onSelect:this.onSelect,dropdownOverlayContainer:document.body,placeholder:0===this.state.selected.length?i18n("Начните вводить имя адресата"):"",testIds:{chipPrefix:"autocomplete-chip-",dropdown:"autocomplete-dropdown",dropdownItemPrefix:"autocomplete-dropdownItem-",input:"autocomplete-input"},hideDropdownOnSelect:!0,checkEmailValidityOnEnter:!1,focusOnInputAfterDelete:!1}),h().createElement(f.Hr,{mobileVisible:!0,oversize:!1,mode:this.props.error?"error":"normal"}))))},b}(h().PureComponent),dn="unsubscribe_action",en="unsubscribe_read_action",fn="unsubscribe_remove_action",gn=function(){return(gn=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++)for(var e in b=arguments[c])if(Object.prototype.hasOwnProperty.call(b,e))a[e]=b[e];return a}).apply(this,arguments)},hn=function(a){var b=a.x2,c=a.x4,d=a.x5,e=a.x12,g=a.fontFootnote,h=a.fontText;return{base:gn(gn({width:"328px",minWidth:"328px",margin:c.value},(0,f.getValuesStyles)(h.compact)),{whiteSpace:"normal"}),header:{display:"flex",flexDirection:"row",justifyContent:"space-between"},title:{display:"block",marginBottom:c.value},ico:{width:d.value,height:d.value,cursor:"pointer"},radio:{display:"block",margin:"0 ".concat(e.value," ").concat(c.value," 0"),"& > p":gn(gn({},(0,f.getValuesStyles)(g.compact)),{marginLeft:"26px"})},radioGroup:{paddingBottom:b.value},progressWrapper:{display:"flex",flexDirection:"row",alignItems:"center"},progressText:{marginLeft:"7px"}}},jn=function(){var a=function(b,c){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)if(Object.prototype.hasOwnProperty.call(b,c))a[c]=b[c]})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw new TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),kn=function(){return(kn=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++)for(var e in b=arguments[c])if(Object.prototype.hasOwnProperty.call(b,e))a[e]=b[e];return a}).apply(this,arguments)},ln=function(a,b,c,d){var e,f=arguments.length,g=f<3?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)if(e=a[h])g=(f<3?e(g):f>3?e(b,c,g):e(b,c))||g;return f>3&&g&&Object.defineProperty(b,c,g),g},mn=[{key:0,action:fn,label:i18n("Отписаться и удалить все письма"),footNote:i18n("Это не затронет письма с особыми отметками, например, учётные записи или заказы"),buttonText:i18n("Отписаться и удалить"),checked:!0,testId:"unsub-delete"},{key:1,action:en,label:i18n("Отписаться и отметить все письма прочитанными"),buttonText:i18n("Отписаться и пометить прочитанными"),testId:"unsub-read"},{key:2,action:dn,label:i18n("Отписаться от адресата"),buttonText:i18n("Отписаться"),testId:"unsub"}],nn=i18n("Отписываем от рассылки..."),on=function(a){function b(){var b=null!==a&&a.apply(this,arguments)||this;return b.state={buttonText:mn[0].buttonText,currentAction:mn[0].action},b.onRadioBtnClick=function(a,c){if(c)b.setState({buttonText:a.buttonText,currentAction:a.action})},b.onSubmit=function(){b.setState({buttonText:nn},function(){return b.props.onButtonClick(b.state.currentAction)})},b.onClose=function(){b.props.onClose()},b}return jn(b,a),b.prototype.getRadioButton=function(a){var b=this,c=this.props,d=c.classes,e=c.inProgress,g=c.qaEnabled;return a.map(function(a){var c=a.key,i=a.label,j=a.footNote,k=a.checked,l=a.testId;return h().createElement("div",kn({key:c,className:d.radio},g?{"data-test-id":"unsubscribe-radio-".concat(l)}:{}),h().createElement(f.Radio,{label:i,defaultChecked:k,name:"unsubscribeRadioBtn",onChange:b.onRadioBtnClick.bind(b,a),disabled:e}),h().createElement(f.Text,{block:!0,secondary:!0},j))})},b.prototype.getButtonComponent=function(){var a=this,b=this.state.buttonText,c=this.props,d=c.inProgress,e=c.classes;return h().createElement(E.Z,null,function(c){var f=c.Button,g=c.Spinner;return h().createElement(f,{type:"submit",onClick:a.onSubmit,disabled:d,size:"l",mode:"secondary",appearance:"neutral"},d?h().createElement("div",{className:e.progressWrapper},h().createElement(g,{size:"small"}),h().createElement("div",{className:e.progressText},b)):b)})},b.prototype.getTitle=function(){var a=this.props.lettersCount;if(a)return i18n.plural(a,[i18n("У вас {lettersCount} писем от адресата",{lettersCount:a}),i18n("У вас {lettersCount} письмо от адресата",{lettersCount:a}),i18n("У вас {lettersCount} письма от адресата",{lettersCount:a})]);else return i18n("Больше не получать таких писем от")},b.prototype.getSenders=function(){var a=this.props.senderName;if(Array.isArray(a)){return Array.from(new Set(a)).map(function(a){return h().createElement(f.Text,{block:!0,bold:!0,key:a},a)})}return h().createElement(f.Text,{block:!0,bold:!0},a)},b.prototype.render=function(){var a=this.props,b=a.classes,c=a.qaEnabled;return h().createElement("div",{className:b.base},h().createElement("div",{className:b.header},h().createElement("div",{className:b.title},h().createElement(f.Text,{block:!0},this.getTitle()),this.getSenders()),h().createElement("div",kn({className:b.ico,onClick:this.onClose},c?{"data-test-id":"unsubscribe-close"}:{}),h().createElement(f.Icon,{icon:t.ACTIONS_CLOSE}))),h().createElement("div",{className:b.radioGroup},this.getRadioButton(mn)),h().createElement("span",kn({},c?{"data-test-id":"unsubscribe-submit"}:{}),this.getButtonComponent()))},b=ln([f.withResponsive,(0,f.withStyles)(hn)],b)}(h().PureComponent),pn=function(){var a=(0,g.useRef)(null),b=(0,g.useRef)(!1),c=(0,ai.C)({name:"vk-messenger-provider",mediators:["layout-manager","themes-manager"]})[0];return(0,g.useEffect)(function(){if((d=c).hasOwnProperty("offset")&&d.hasOwnProperty("darkMode")){var d;if(!b.current)b.current=!0,Promise.resolve().then(nc.t.bind(nc,5246,23)).then(function(b){var d,e;a.current=b.vkMessengerLoader,null===(d=a.current)||void 0===d||d.setThemeMode(c.darkMode),null===(e=a.current)||void 0===e||e.setOffset(c.offset),a.current.restoreOnReload()})}},[c.darkMode,c.offset]),(0,g.useEffect)(function(){var b;null===(b=a.current)||void 0===b||b.setThemeMode(c.darkMode)},[c.darkMode]),(0,g.useEffect)(function(){var b;null===(b=a.current)||void 0===b||b.setOffset(c.offset)},[c.offset]),null},qn=nc(7511),rn=nc(8521),sn=nc(6366),tn="_2OcADvRuKwnEeGQk1gBfLL",un="_6bPGl7j3_N65cKhVRUDtJ",vn=function(){return(vn=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++)for(var e in b=arguments[c])if(Object.prototype.hasOwnProperty.call(b,e))a[e]=b[e];return a}).apply(this,arguments)},wn=i18n("Что делать с письмом, когда вы проводите по нему слева направо?"),xn=function(a){var b=(0,u.getFastActionReal)(),c=(0,g.useState)(b===v.LetterFastActionType.settings?v.LetterFastActionType.unread:b),d=c[0],e=c[1],f=(0,sn.useModalRootContext)().updateModalHeight,i=(0,g.useMemo)(function(){return{img:z(d),imgHidpi:z(d,!0)}},[d]);(0,g.useEffect)(function(){y.forEach(function(a){return A(a)})},[]);var j=(0,g.useCallback)(function(a){e(a.currentTarget.value)},[]),k=(0,g.useCallback)(function(){(0,Ii.setFastAction)(d),(0,o.popModal)()},[d]);return h().createElement(E.Z,null,function(b){var c=b.ModalPage,e=b.RadioGroup,g=b.Radio,l=b.Button,m=b.Group,n=b.Title,o=b.Text,p=b.Div,q=b.Spacing;return h().createElement(c,vn({},a),h().createElement("img",{src:i.img,srcSet:"".concat(i.imgHidpi," 2x"),className:tn,onLoad:f}),h().createElement(m,{className:un},h().createElement(p,null,h().createElement(n,null,i18n("Выберите действие")),h().createElement(q,{size:12}),h().createElement(o,null,wn)),h().createElement(p,null,h().createElement(e,null,h().createElement(g,{checked:d===v.LetterFastActionType.archive,value:v.LetterFastActionType.archive,onChange:j},i18n("Отправлять в архив")),h().createElement(g,{checked:d===v.LetterFastActionType.unread,value:v.LetterFastActionType.unread,onChange:j},i18n("Отмечать прочитанным")),h().createElement(g,{checked:d===v.LetterFastActionType.remove,value:v.LetterFastActionType.remove,onChange:j},i18n("Удалять")))),h().createElement(p,null,h().createElement(l,{stretched:!0,size:"l",onClick:k},i18n("Сохранить")))))})},yn=nc(9559),zn=nc.n(yn),An=nc(9604),Bn=nc.n(An),Cn=function(a,b,c){!function(a,b,c,d){var e=(0,g.useRef)(c);e.current=c,(0,g.useEffect)(function(){if(a&&a.addEventListener){var c=function(a){return e.current(a)};return a.addEventListener(b,c,d),function(){a.removeEventListener(b,c,d)}}},[b,a,d])}(window,"click",function(d){if(a){var e;if(!Array.isArray(a))e=[a];else e=a;if(e.every(function(a){return a.current&&!a.current.contains(d.target)})){if(c)d.stopPropagation(),d.stopImmediatePropagation(),d.preventDefault();b(d)}}},{capture:!0})},Dn=function(){var a=(0,g.useState)(void 0),b=a[0],c=a[1],d=(0,g.useRef)(),e=(0,g.useRef)(),f=(0,g.useCallback)(function(a){d.current=document.querySelector('[data-folder-link-id="'.concat(a.attributes.id,'"]')),c(a)},[]),h=(0,g.useCallback)(function(){c(void 0)},[]);return Cn(e,function(a){if(b)a.stopPropagation(),c(void 0)},!0),{actionsRef:e,letterRef:d,onPress:f,onActionsClick:h,popoverModel:b}},En="_2MKo-BN7iw_iLXBkXYtDNR",Fn=function(){return(Fn=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++)for(var e in b=arguments[c])if(Object.prototype.hasOwnProperty.call(b,e))a[e]=b[e];return a}).apply(this,arguments)},Gn=function(a){var b=(0,j.useGlobalStateSelector)(n.getCurrentAccount),c=Dn(),d=c.onPress,e=c.onActionsClick,f=c.popoverModel,g=c.letterRef,i=c.actionsRef;return h().createElement(E.Z,null,function(c){var j,k,l,m=c.ModalPage,n=c.Headline,o=c.Div,p=c.unstable_Popper;return h().createElement(m,Fn({},a,{header:h().createElement(D,{onClick:a.onClose})}),h().createElement(o,null,h().createElement(n,{weight:"1",className:En},null==b?void 0:b.email)),!!f&&h().createElement(p,{getRef:i,forcePortal:!0,targetRef:g,onClick:e},h().createElement(Jc,{component:zn(),model:f})),!!a.data&&h().createElement(Jc,{component:Bn(),useMediator:["letters-actions","folders-actions","user-info","letters-loader","pony-mode","folders-navigation"],onFolderClick:a.onClose,active:null===(j=a.data)||void 0===j?void 0:j.folderActive,models:null===(k=a.data)||void 0===k?void 0:k.models,router:null===(l=a.data)||void 0===l?void 0:l.router,sidebar:!0,"with-clear":!0,onPress:d,"without-press-context-menu":!0,touch:!0}))})},Hn=function(){return(Hn=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++)for(var e in b=arguments[c])if(Object.prototype.hasOwnProperty.call(b,e))a[e]=b[e];return a}).apply(this,arguments)},In=function(a){var b=(0,ai.C)({name:"mobile-folders-settings-modal",mediators:["folders-actions"]}),c=(b[0],b[1]),d=Dn(),e=d.onPress,i=d.onActionsClick,j=d.popoverModel,k=d.letterRef,l=d.actionsRef,m=(0,g.useCallback)(function(){c({type:"add",details:{model:{params:{isSidebar:!0}}}})},[]);return h().createElement(E.Z,null,function(b){var c=b.ModalPage,d=b.ModalPageHeader,g=b.PanelHeaderBack,n=b.PanelHeaderButton,o=b.unstable_Popper,p=b.Headline,q=b.Div;return h().createElement(c,Hn({},a,{header:h().createElement(d,{before:h().createElement(g,{onClick:a.onClose}),after:h().createElement(n,{onClick:m,primary:!0},s.IS_IOS?i18n("Добавить"):h().createElement(f.Icon,{icon:t.UNION_ADD_OUTLINE_28}))},i18n("Папки"))}),h().createElement(q,null,h().createElement(p,{level:"2",className:En},i18n("Коснитесь папки для редактирования"))),!!j&&h().createElement(o,{getRef:l,forcePortal:!0,targetRef:k,onClick:i},h().createElement(Jc,{component:zn(),model:j})),!!a.data&&h().createElement(Jc,{component:Bn(),useMediator:["letters-actions","folders-actions","user-info","letters-loader","pony-mode","folders-navigation"],models:a.data.models,router:a.data.router,sidebar:!0,onPress:e,onFolderClick:e,"without-press-context-menu":!0,"counters-off":!0,touch:!0,"read-only":!0,"hide-add-folder":!0}))})},Jn=function(){return(Jn=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++)for(var e in b=arguments[c])if(Object.prototype.hasOwnProperty.call(b,e))a[e]=b[e];return a}).apply(this,arguments)},Kn="_1CmMArJgps9vtBvocm1bc0",Ln=function(){var a=(0,j.useGlobalState)(qn.VKOverlayState)[0],b=a.snackbar,c=a.popout,d=function(){var a=(0,j.useGlobalState)(qn.VKOverlayState)[0],b=a.modalData,c=a.modalHistory,d=(0,j.useGlobalStateSelector)(rn.getModalActual),e=function(a){return{id:a,dynamicContentHeight:!0,onClose:o.popModalHistory,onClosed:function(){if(!c.includes(a))(0,o.popModalDataById)(a)},data:b[a]}};return h().createElement(E.Z,null,function(a){var b=a.ModalRoot;return h().createElement(b,{activeModal:d,onClose:o.popModal},h().createElement(aa,Jn({},e(p.ModalPages.account))),h().createElement(xn,Jn({},e(p.ModalPages.letterFastActionSettings))),h().createElement(Gn,Jn({},e(p.ModalPages.folders))),h().createElement(In,Jn({},e(p.ModalPages.foldersSettings))))})}();return h().createElement("div",{className:Kn},h().createElement(E.Z,null,function(a){var e=a.SplitLayout;return h().createElement(h().Fragment,null,h().createElement(e,{popout:c,modal:d}),b)}))},Mn="_3WUN2v5JZWC8qq7MjJWQ-x",Nn="_2e15S0-qIlEqKmW5_oaQMa",On="_29m8FeNwZx_V-0UfFmonv0",Pn="PGq1t3Gmk8fYUgOx5F9Kg",Qn="_1fSw2zKY3t56fnlL27DS3s",Rn="_2ElecynG1ZCBLnwT74Nnah",Sn="_3oF1BVpAI582FhP0zuL9OX",Tn="_1nJssa_iP3RPmap2PwIlh6",Un=s.DEFAULT_AVATAR_SRC+"&width=52&height=52&email="+(null===(nl=r().get("initialUser"))||void 0===nl?void 0:nl.email)+"&name="+(null===(pl=null===(ol=r().get("initialUser"))||void 0===ol?void 0:ol.name)||void 0===pl?void 0:pl.first),Vn=function(a){var b=a.folderActive,c=a.models,d=a.router,e=(0,ai.C)({name:"webview-mobile-footer",mediators:["compose-manager","mobile-sidebar-manager"]}),i=(e[0],e[1]);(0,g.useEffect)(function(){(0,o.updateModalData)({ids:[p.ModalPages.account,p.ModalPages.folders,p.ModalPages.foldersSettings],data:{folderActive:b,models:c,router:d}})},[b,c,d]);var j=(0,g.useCallback)(function(){(0,o.pushModal)({id:p.ModalPages.account,data:{folderActive:b,models:c,router:d}}),l().send("mobile-account-dock_open")},[b,c,d]),k=(0,g.useCallback)(function(){if(s.USE_NEW_MOBILE_FOLDERS_MODAL)(0,o.pushModal)({id:p.ModalPages.folders,data:{folderActive:b,models:c,router:d}});else i(new Event("mobilesidebar:open"))},[i,b,c,d]),m=(0,g.useCallback)(function(){i(new Event("compose:new"))},[i]);return(0,g.useEffect)(function(){return document.documentElement.style.setProperty("--vkui--octavius_size_portal-footer_height--regular","48px"),function(){return document.documentElement.style.setProperty("--vkui--octavius_size_portal-footer_height--regular","0px")}},[]),h().createElement("div",{className:Mn,"data-qa-id":(0,Ub.qa)("webview-mobile-footer")},h().createElement("div",{className:Nn},h().createElement("div",{className:On,"data-qa-id":(0,Ub.qa)("open-sidebar"),onClick:k},h().createElement("div",{className:Qn},h().createElement(f.Icon,{icon:t.NAVIGATION_MENU})),h().createElement("span",{className:Pn},i18n("Папка"))),h().createElement("div",{className:Sn,"data-qa-id":(0,Ub.qa)("open-compose"),onClick:m},h().createElement("div",{className:Tn},h().createElement(f.Icon,{icon:t.UNION_ADD_24}))),h().createElement("div",{className:On,"data-qa-id":(0,Ub.qa)("open-account"),onClick:j},h().createElement("img",{alt:"avatar",src:Un,className:Rn}),h().createElement("span",{className:Pn},i18n("Аккаунт")))))},Wn=nc(1146),Xn={"widget-todo":"todo","widget-calendar":"calendar"},Yn=function(a){return l().send("click_widget_tab",{dwh:{widget:a}})},Zn=function(){return l().send("click_widget_goto_todo")},$n=function(){return l().send("click_widget_goto_calendar")},_n=nc(4707),ao=nc.n(_n),bo="_2dtAUhRJMbnovo5dAjWHBL",co="_1MNjK4_X3IqXF3-c5ac_nm",eo=function(a){var b,c=a.hidden,d=a.onMessage,e=a.src,f=a.className,i=a.postMessage;(0,g.useEffect)(function(){var a=new URL(e).origin,b=function(b){if(a===b.origin)d(b)};return window.addEventListener("message",b),function(){window.removeEventListener("message",b)}},[d,e]);var j=(0,g.useRef)(!1);return j.current||(j.current=!c),j.current&&h().createElement("iframe",{className:ca()(bo,f,(b={},b[co]=c,b)),src:e,ref:function(a){if(i)i.current=function(b){return a.contentWindow.postMessage(b,e)}}})},fo="_32_kr8DC3xEi-OrPzFO-oA",go="_1wtVYBN1nyXd5ra-a94t81",ho="_1zr7Bz-LVC_-VNJ7o0oSkL",io="_3goyNdcNLjzZ1aajjzXA0G",jo="_5d6YoT8q7C_dFyNU21-QH",ko="_1EjBJ7Y5qIyJX2k6aHhsOK",lo="_21tYZgpZkzyTbfP-si9HGj",mo=E.j.Spinner,no=E.j.Button,oo=function(a){var b,c=a.onGoTo,d=a.hidden,e=a.ready,f=a.children,g=a.buttonHref,i=a.buttonText;return h().createElement("div",{className:ca()(fo,(b={},b[go]=d,b[jo]=!e,b[io]=e,b[ho]=s.WIDGET_COLUMN,b))},h().createElement("div",{className:ko},h().createElement(mo,{size:"large"})),f,h().createElement(no,{size:"l",mode:s.WIDGET_COLUMN?"secondary":"tertiary",appearance:"neutral",className:lo,onClick:c,href:g,target:"_blank"},i))},po=function(a){var b=a.hidden,c=(0,ai.C)({name:"CalendarIframe",mediators:["themes-manager"]})[0].darkMode,d=(0,g.useState)(function(){return ao()(s.CALENDAR_URL,{utm_source:"mail",utm_medium:"widget_noad",utm_campaign:"calendar.mail.ru",source:"octavius",theme:c?"dark":"light"})})[0],e=(0,g.useState)(!1),f=e[0],i=e[1],j=(0,g.useRef)(null),k=(0,g.useCallback)(function(){var a,b;null===(a=j.current)||void 0===a||a.call(j,{type:"SetTheme",data:c?"dark":"light"}),null===(b=j.current)||void 0===b||b.call(j,{type:"SetBgColor",data:getComputedStyle(document.documentElement).getPropertyValue("--vkui--color_background_content")})},[c]);return(0,g.useEffect)(k,[k]),h().createElement(oo,{hidden:b,ready:f,buttonHref:s.WIDGET_X_CALENDAR_URL,buttonText:i18n("Перейти в Календарь"),onGoTo:$n},h().createElement(eo,{src:d,hidden:b,onMessage:(0,g.useCallback)(function(a){var b;switch(null===(b=null==a?void 0:a.data)||void 0===b?void 0:b.handler){case"onAppLoaded":k(),i(!0)}},[k]),postMessage:j}))},qo="bysVRe7CKysr1GyqmP4nW",ro="_2ct4ANbUMjS2FKRm_0vRCo",so=function(a){var b,c=a.active,d=a.onClick,e=a.onMouseOver,f=a.children,g=a.className;return h().createElement("div",{className:ca()(qo,g,(b={},b[ro]=c,b)),onClick:d,onMouseOver:e},f)},to=function(a){var b=a.showCalendar,c=a.onClick;return h().createElement(so,{active:b,onClick:c},i18n("Календарь"))},uo=function(a){var b=a.showTodo,c=a.onClick;return h().createElement(so,{active:b,onClick:c},i18n("Задачи"))},vo="_2CfM6gTzEjkumgdnQtbEOu",wo="_3v1vhdA3mRnOU5r3fUx9lX",xo=function(a){var b=a.widget,c=a.setWidget,d=a.open,e=a.setOpen;return h().createElement("div",{className:vo},s.SHOW_TODO_TOGGLE&&h().createElement(uo,{showTodo:d&&"widget-todo"===b,onClick:function(){Yn(Xn["widget-todo"]),c("widget-todo")}}),s.WIDGET_CALENDAR&&h().createElement(to,{showCalendar:d&&"widget-calendar"===b,onClick:function(){Yn(Xn["widget-calendar"]),c("widget-calendar")}}),h().createElement("div",{className:wo,onClick:function(){!function(a){l().send("click_close_widget",{dwh:{widget:a}})}(Xn[b]),e(!1)}},h().createElement(f.Icon,{icon:Nb[ua.ACTIONS_CLOSE_BIG]})))},yo=nc(4132),zo=nc(1286),Ao=nc.n(zo),Bo=(ql=!1,(0,zo.debounce)(function(a){if(!ql)ql=!0,function(a){l().send("so_count_tasks",{p:"todo",dwh:{cnt:a}})}(a)},100)),Co=function(a){var b=a.hidden,c=(0,ai.C)({name:"ToDoIframe",mediators:["todo-manager","themes-manager"]}),d=c[0].darkMode,e=c[1],f=(0,g.useState)(!1),i=f[0],j=f[1],k=(0,g.useState)(function(){return ao()(s.TODO_URL,{source:"octavius",theme:d?"dark":"light"})})[0],l=(0,g.useRef)(null),m=(0,g.useCallback)(function(){var a,b;null===(a=l.current)||void 0===a||a.call(l,{type:"todo:set-theme",theme:d?"dark":"light"}),null===(b=l.current)||void 0===b||b.call(l,{type:"todo:set-bg-color",bgColor:getComputedStyle(document.documentElement).getPropertyValue("--vkui--color_background_content")})},[d]);return(0,g.useEffect)(m,[m]),h().createElement(oo,{hidden:b,ready:i,buttonHref:s.WIDGET_TODO_URL,buttonText:i18n("Перейти в Задачи"),onGoTo:Zn},h().createElement(eo,{src:k,hidden:b,onMessage:(0,g.useCallback)(function(a){var b;switch(null===(b=null==a?void 0:a.data)||void 0===b?void 0:b.type){case"todo:tasks":return void Bo(a.data.tasksCount);case yo.FROM_TODO_READY:return ce()(["todo_block_visible"]),m(),void j(!0)}a.data.sendAns=l.current,e((0,Dc.BU)(Wn.TODO_IFRAME_MESSAGE,a))},[e,m]),postMessage:l}))},Do=function(a){var b,c,d,e,f=a.widgetType,h=a.widgetIsOpen,i=a.broadcast,j=(0,g.useState)(f),k=j[0],l=j[1],m=(0,g.useState)(h),n=m[0],o=m[1],p=(b=function(){if(k!==f||n!==h)i((0,Dc.BU)(Wn.WIDGET_COLUMN_SET_WIDGET,{value:{widget:k,open:n}}))},c=200,(e=(0,g.useRef)(b)).current=b,(0,g.useMemo)(function(){return(0,zo.debounce)(function(){return e.current()},c,d)},[]));(0,g.useEffect)(function(){if(k!==f)l(f);if(n!==h)o(h)},[f,h]);var q=(0,g.useCallback)(function(a){if(k!==a)p(),l(a)},[p,k]),r=(0,g.useCallback)(function(a){if(n!==a)p(),o(a)},[n,p]);return{widget:k,setWidget:q,open:n,setOpen:r}},Eo={border:"_2IRpRccFCfe36ihBTjV1pj",open:"A7oaoZsaW4Ml9vya9dgyt",content:"_3kA4UokSTaL2WbtIlUwPbH",openerWrapper:"wQFurHTKB81kQgnN-ihyM",opener:"svANd540n043bB5YxteNg",tooltip:"SWo-nlMY709XRe2NeuOEu",list:"NPjmvNXLPZaAN18IQ-FFf",hidden:"_22KK-B2H4WzS9bjAa-gOrr",disabledEvents:"A4U5xWKkENf43LZGcIhvH"},Fo=E.j.Text,Go=function(){return a="arrow",l().send("show_widget_hover",{dwh:{type_button:a}});var a},Ho=nc(7050),Io=nc.n(Ho),Jo="_3jPEmD1Z8udC_cjjX9EKVE",Ko="_2wSQYRNu6bHO7yiuXBJBeD",Lo="B2sZCwno_KqnL5KGK-Omq",Mo="_2FIN-YZDQLsv6h0kzQ6nK1",No="_1K3DIcVIz3SR0Uvej6ppka",Oo="_3GvTN9SIpXghthZn4cxRt3",Po=i18n("Спасибо за ваш интерес! Мы обязательно сообщим, когда всё будет готово"),Qo=i18n("Функция вот-вот появится"),Ro=i18n("Создать задачу"),So=function(a){var b,c=a.compact,d=a.onClick,e=a.ponyMode,i=(0,g.useState)(!1),j=i[0],k=i[1];return h().createElement(f.Tooltip,{promo:!0,placement:c?"topRight":"top",visible:j,onClose:function(){k(!1)},overlay:h().createElement("div",{className:No},h().createElement("div",{className:Oo},h().createElement(f.Text,{mode:"h5"},Qo)),h().createElement(f.Text,null,Po))},h().createElement("button",{className:ca()(Jo,(b={},b[Ko]=e,b[Lo]=j,b)),onClick:function(){k(!0),null==d||d()}},h().createElement(f.Icon,{icon:t.STATUS_DONEROUND}),h().createElement("span",{className:Mo},Ro)))},To=function(a){var b=a.compact,c=a.letterId,d=a.ponyMode;return(0,g.useEffect)(function(){l().send("show_task_from_letter_fake",{dwh:{letter_id:c}})},[]),h().createElement(So,{compact:b,ponyMode:d,onClick:function(){l().send("create_task_from_letter_fake",{dwh:{letter_id:c}}),Io().set("create_todo_fake_button_shown","true")}})},Uo=nc(4002),Vo=nc(198),Wo=nc(9138),Xo=nc(7830),Yo=nc(1802),Zo=nc.n(Yo),$o=nc(7632),_o=nc(7094),ap=nc(1314),bp=nc(6732),cp=nc(7494),dp=nc.n(cp),ep=nc(3481),fp=nc(3634),gp=nc(5572),hp=nc(3738),ip=nc.n(hp);function jp(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function kp(a,b){for(var c=0;c<b.length;c++){var d=b[c];if(d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d)d.writable=!0;Object.defineProperty(a,d.key,d)}}function lp(a,b,c){if(b)kp(a.prototype,b);if(c)kp(a,c);return Object.defineProperty(a,"prototype",{writable:!1}),a}function mp(a){return(mp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a})(a)}function np(a){if(void 0===a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function op(a,b){if(b&&("object"===mp(b)||"function"==typeof b))return b;else if(void 0!==b)throw new TypeError("Derived constructors may only return object or undefined");return np(a)}function pp(a){return(pp=Object.setPrototypeOf?Object.getPrototypeOf:function(a){return a.__proto__||Object.getPrototypeOf(a)})(a)}function qp(a,b){return(qp=Object.setPrototypeOf||function(a,b){return a.__proto__=b,a})(a,b)}function rp(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function");if(a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,writable:!0,configurable:!0}}),Object.defineProperty(a,"prototype",{writable:!1}),b)qp(a,b)}function sp(a,b,c){if(b in a)Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0});else a[b]=c;return a}function tp(a,b){var c;if(void 0!==b)c=b;else if("undefined"!=typeof window)c=window;else if("undefined"!=typeof self)c=self;else c=nc.g;var d=void 0!==c.document&&c.document.attachEvent;if(!d){var e=function(){var a=c.requestAnimationFrame||c.mozRequestAnimationFrame||c.webkitRequestAnimationFrame||function(a){return c.setTimeout(a,20)};return function(b){return a(b)}}(),f=function(){var a=c.cancelAnimationFrame||c.mozCancelAnimationFrame||c.webkitCancelAnimationFrame||c.clearTimeout;return function(b){return a(b)}}(),g=function(a){var b=a.__resizeTriggers__,c=b.firstElementChild,d=b.lastElementChild,e=c.firstElementChild;d.scrollLeft=d.scrollWidth,d.scrollTop=d.scrollHeight,e.style.width=c.offsetWidth+1+"px",e.style.height=c.offsetHeight+1+"px",c.scrollLeft=c.scrollWidth,c.scrollTop=c.scrollHeight},h=function(a){if(!(a.target.className&&"function"==typeof a.target.className.indexOf&&a.target.className.indexOf("contract-trigger")<0&&a.target.className.indexOf("expand-trigger")<0)){var b=this;if(g(this),this.__resizeRAF__)f(this.__resizeRAF__);this.__resizeRAF__=e(function(){if(function(a){return a.offsetWidth!=a.__resizeLast__.width||a.offsetHeight!=a.__resizeLast__.height}(b))b.__resizeLast__.width=b.offsetWidth,b.__resizeLast__.height=b.offsetHeight,b.__resizeListeners__.forEach(function(c){c.call(b,a)})})}},i=!1,j="",k="animationstart",l="Webkit Moz O ms".split(" "),m="webkitAnimationStart animationstart oAnimationStart MSAnimationStart".split(" "),n=c.document.createElement("fakeelement");if(void 0!==n.style.animationName)i=!0;if(!1===i)for(var o=0;o<l.length;o++)if(void 0!==n.style[l[o]+"AnimationName"]){j="-"+l[o].toLowerCase()+"-",k=m[o],i=!0;break}var p="resizeanim",q="@"+j+"keyframes "+p+" { from { opacity: 0; } to { opacity: 0; } } ",r=j+"animation: 1ms "+p+"; "}return{addResizeListener:function(b,e){if(d)b.attachEvent("onresize",e);else{if(!b.__resizeTriggers__){var f=b.ownerDocument,i=c.getComputedStyle(b);if(i&&"static"==i.position)b.style.position="relative";if(function(b){if(!b.getElementById("detectElementResize")){var c=(q?q:"")+".resize-triggers { "+(r?r:"")+'visibility: hidden; opacity: 0; } .resize-triggers, .resize-triggers > div, .contract-trigger:before { content: " "; display: block; position: absolute; top: 0; left: 0; height: 100%; width: 100%; overflow: hidden; z-index: -1; } .resize-triggers > div { background: #eee; overflow: auto; } .contract-trigger:before { width: 200%; height: 200%; }',d=b.head||b.getElementsByTagName("head")[0],e=b.createElement("style");if(e.id="detectElementResize",e.type="text/css",null!=a)e.setAttribute("nonce",a);if(e.styleSheet)e.styleSheet.cssText=c;else e.appendChild(b.createTextNode(c));d.appendChild(e)}}(f),b.__resizeLast__={},b.__resizeListeners__=[],(b.__resizeTriggers__=f.createElement("div")).className="resize-triggers",b.__resizeTriggers__.innerHTML='<div class="expand-trigger"><div></div></div><div class="contract-trigger"></div>',b.appendChild(b.__resizeTriggers__),g(b),b.addEventListener("scroll",h,!0),k)b.__resizeTriggers__.__animationListener__=function(a){if(a.animationName==p)g(b)},b.__resizeTriggers__.addEventListener(k,b.__resizeTriggers__.__animationListener__)}b.__resizeListeners__.push(e)}},removeResizeListener:function(a,b){if(d)a.detachEvent("onresize",b);else if(a.__resizeListeners__.splice(a.__resizeListeners__.indexOf(b),1),!a.__resizeListeners__.length){if(a.removeEventListener("scroll",h,!0),a.__resizeTriggers__.__animationListener__)a.__resizeTriggers__.removeEventListener(k,a.__resizeTriggers__.__animationListener__),a.__resizeTriggers__.__animationListener__=null;try{a.__resizeTriggers__=!a.removeChild(a.__resizeTriggers__)}catch(a){}}}}}var up,vp;nc(5099);function wp(a,b){var c=Object.keys(a);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(a);if(b)d=d.filter(function(b){return Object.getOwnPropertyDescriptor(a,b).enumerable});c.push.apply(c,d)}return c}function xp(a){for(var b=1;b<arguments.length;b++){var c=null!=arguments[b]?arguments[b]:{};if(b%2)wp(c,!0).forEach(function(b){sp(a,b,c[b])});else if(Object.getOwnPropertyDescriptors)Object.defineProperties(a,Object.getOwnPropertyDescriptors(c));else wp(c).forEach(function(b){Object.defineProperty(a,b,Object.getOwnPropertyDescriptor(c,b))})}return a}var yp=(vp=up=function(a){function b(){var a,c;jp(this,b);for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return sp(np(c=op(this,(a=pp(b)).call.apply(a,[this].concat(e)))),"state",{height:c.props.defaultHeight||0,width:c.props.defaultWidth||0}),sp(np(c),"_parentNode",void 0),sp(np(c),"_autoSizer",void 0),sp(np(c),"_window",void 0),sp(np(c),"_detectElementResize",void 0),sp(np(c),"_onResize",function(){var a=c.props,b=a.disableHeight,d=a.disableWidth,e=a.onResize;if(c._parentNode){var f=c._parentNode.offsetHeight||0,g=c._parentNode.offsetWidth||0,h=(c._window||window).getComputedStyle(c._parentNode)||{},i=parseInt(h.paddingLeft,10)||0,j=parseInt(h.paddingRight,10)||0,k=parseInt(h.paddingTop,10)||0,l=parseInt(h.paddingBottom,10)||0,m=f-k-l,n=g-i-j;if(!b&&c.state.height!==m||!d&&c.state.width!==n)c.setState({height:f-k-l,width:g-i-j}),e({height:f,width:g})}}),sp(np(c),"_setRef",function(a){c._autoSizer=a}),c}return rp(b,a),lp(b,[{key:"componentDidMount",value:function(){var a=this.props.nonce;if(this._autoSizer&&this._autoSizer.parentNode&&this._autoSizer.parentNode.ownerDocument&&this._autoSizer.parentNode.ownerDocument.defaultView&&this._autoSizer.parentNode instanceof this._autoSizer.parentNode.ownerDocument.defaultView.HTMLElement)this._parentNode=this._autoSizer.parentNode,this._window=this._autoSizer.parentNode.ownerDocument.defaultView,this._detectElementResize=tp(a,this._window),this._detectElementResize.addResizeListener(this._parentNode,this._onResize),this._onResize()}},{key:"componentWillUnmount",value:function(){if(this._detectElementResize&&this._parentNode)this._detectElementResize.removeResizeListener(this._parentNode,this._onResize)}},{key:"render",value:function(){var a=this.props,b=a.children,c=a.className,d=a.disableHeight,e=a.disableWidth,f=a.style,h=this.state,i=h.height,j=h.width,k={overflow:"visible"},l={};if(!d)k.height=0,l.height=i;if(!e)k.width=0,l.width=j;return g.createElement("div",{className:c,ref:this._setRef,style:xp({},k,{},f)},b(l))}}]),b}(g.Component),sp(up,"propTypes",1?null:0),vp);sp(yp,"defaultProps",{onResize:function(){},disableHeight:!1,disableWidth:!1,style:{}});var zp,Ap,Bp=(Ap=zp=function(a){function b(){var a,c;jp(this,b);for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return sp(np(c=op(this,(a=pp(b)).call.apply(a,[this].concat(e)))),"_child",void 0),sp(np(c),"_measure",function(){var a=c.props,b=a.cache,d=a.columnIndex,e=void 0===d?0:d,f=a.parent,g=a.rowIndex,h=void 0===g?c.props.index||0:g,i=c._getCellMeasurements(),j=i.height,k=i.width;if(j!==b.getHeight(h,e)||k!==b.getWidth(h,e))if(b.set(h,e,k,j),f&&"function"==typeof f.recomputeGridSize)f.recomputeGridSize({columnIndex:e,rowIndex:h})}),sp(np(c),"_registerChild",function(a){if(a&&!(a instanceof Element))console.warn("CellMeasurer registerChild expects to be passed Element or null");if(c._child=a,a)c._maybeMeasureCell()}),c}return rp(b,a),lp(b,[{key:"componentDidMount",value:function(){this._maybeMeasureCell()}},{key:"componentDidUpdate",value:function(){this._maybeMeasureCell()}},{key:"render",value:function(){var a=this.props.children;return"function"==typeof a?a({measure:this._measure,registerChild:this._registerChild}):a}},{key:"_getCellMeasurements",value:function(){var a=this.props.cache,b=this._child||(0,Dj.findDOMNode)(this);if(b&&b.ownerDocument&&b.ownerDocument.defaultView&&b instanceof b.ownerDocument.defaultView.HTMLElement){var c=b.style.width,d=b.style.height;if(!a.hasFixedWidth())b.style.width="auto";if(!a.hasFixedHeight())b.style.height="auto";var e=Math.ceil(b.offsetHeight),f=Math.ceil(b.offsetWidth);if(c)b.style.width=c;if(d)b.style.height=d;return{height:e,width:f}}else return{height:0,width:0}}},{key:"_maybeMeasureCell",value:function(){var a=this.props,b=a.cache,c=a.columnIndex,d=void 0===c?0:c,e=a.parent,f=a.rowIndex,g=void 0===f?this.props.index||0:f;if(!b.has(g,d)){var h=this._getCellMeasurements(),i=h.height,j=h.width;if(b.set(g,d,j,i),e&&"function"==typeof e.invalidateCellSizeAfterRender)e.invalidateCellSizeAfterRender({columnIndex:d,rowIndex:g})}}}]),b}(g.PureComponent),sp(zp,"propTypes",1?null:0),Ap);if(sp(Bp,"__internalCellMeasurerFlag",!1),0);var Cp=function(){function a(){var b=this,c=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};jp(this,a),sp(this,"_cellHeightCache",{}),sp(this,"_cellWidthCache",{}),sp(this,"_columnWidthCache",{}),sp(this,"_rowHeightCache",{}),sp(this,"_defaultHeight",void 0),sp(this,"_defaultWidth",void 0),sp(this,"_minHeight",void 0),sp(this,"_minWidth",void 0),sp(this,"_keyMapper",void 0),sp(this,"_hasFixedHeight",void 0),sp(this,"_hasFixedWidth",void 0),sp(this,"_columnCount",0),sp(this,"_rowCount",0),sp(this,"columnWidth",function(a){var c=a.index,d=b._keyMapper(0,c);return void 0!==b._columnWidthCache[d]?b._columnWidthCache[d]:b._defaultWidth}),sp(this,"rowHeight",function(a){var c=a.index,d=b._keyMapper(c,0);return void 0!==b._rowHeightCache[d]?b._rowHeightCache[d]:b._defaultHeight});var d=c.defaultHeight,e=c.defaultWidth,f=c.fixedHeight,g=c.fixedWidth,h=c.keyMapper,i=c.minHeight,j=c.minWidth;if(this._hasFixedHeight=!0===f,this._hasFixedWidth=!0===g,this._minHeight=i||0,this._minWidth=j||0,this._keyMapper=h||Dp,this._defaultHeight=Math.max(this._minHeight,"number"==typeof d?d:30),this._defaultWidth=Math.max(this._minWidth,"number"==typeof e?e:100),0);}return lp(a,[{key:"clear",value:function(a){var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,c=this._keyMapper(a,b);delete this._cellHeightCache[c],delete this._cellWidthCache[c],this._updateCachedColumnAndRowSizes(a,b)}},{key:"clearAll",value:function(){this._cellHeightCache={},this._cellWidthCache={},this._columnWidthCache={},this._rowHeightCache={},this._rowCount=0,this._columnCount=0}},{key:"hasFixedHeight",value:function(){return this._hasFixedHeight}},{key:"hasFixedWidth",value:function(){return this._hasFixedWidth}},{key:"getHeight",value:function(a){var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(this._hasFixedHeight)return this._defaultHeight;else{var c=this._keyMapper(a,b);return void 0!==this._cellHeightCache[c]?Math.max(this._minHeight,this._cellHeightCache[c]):this._defaultHeight}}},{key:"getWidth",value:function(a){var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(this._hasFixedWidth)return this._defaultWidth;else{var c=this._keyMapper(a,b);return void 0!==this._cellWidthCache[c]?Math.max(this._minWidth,this._cellWidthCache[c]):this._defaultWidth}}},{key:"has",value:function(a){var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,c=this._keyMapper(a,b);return void 0!==this._cellHeightCache[c]}},{key:"set",value:function(a,b,c,d){var e=this._keyMapper(a,b);if(b>=this._columnCount)this._columnCount=b+1;if(a>=this._rowCount)this._rowCount=a+1;this._cellHeightCache[e]=d,this._cellWidthCache[e]=c,this._updateCachedColumnAndRowSizes(a,b)}},{key:"_updateCachedColumnAndRowSizes",value:function(a,b){if(!this._hasFixedWidth){for(var c=0,d=0;d<this._rowCount;d++)c=Math.max(c,this.getWidth(d,b));var e=this._keyMapper(0,b);this._columnWidthCache[e]=c}if(!this._hasFixedHeight){for(var f=0,g=0;g<this._columnCount;g++)f=Math.max(f,this.getHeight(a,g));var h=this._keyMapper(a,0);this._rowHeightCache[h]=f}}},{key:"defaultHeight",get:function(){return this._defaultHeight}},{key:"defaultWidth",get:function(){return this._defaultWidth}}]),a}();function Dp(a,b){return"".concat(a,"-").concat(b)}function Ep(){return(Ep=Object.assign||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)if(Object.prototype.hasOwnProperty.call(c,d))a[d]=c[d]}return a}).apply(this,arguments)}function Fp(a){var b,c,d="";if("string"==typeof a||"number"==typeof a)d+=a;else if("object"==typeof a)if(Array.isArray(a)){for(b=0;b<a.length;b++)if(a[b])if(c=Fp(a[b]))d&&(d+=" "),d+=c}else for(b in a)if(a[b])d&&(d+=" "),d+=b;return d}function Gp(){for(var a,b,c=0,d="";c<arguments.length;)if(a=arguments[c++])if(b=Fp(a))d&&(d+=" "),d+=b;return d}function Hp(a){var b=a.cellCount,c=a.cellSize,d=a.computeMetadataCallback,e=a.computeMetadataCallbackProps,f=a.nextCellsCount,g=a.nextCellSize,h=a.nextScrollToIndex,i=a.scrollToIndex,j=a.updateScrollOffsetForScrollToIndex;if(b!==f||("number"==typeof c||"number"==typeof g)&&c!==g)if(d(e),i>=0&&i===h)j()}function Ip(a,b){if(null==a)return{};var c,d,e=function(a,b){if(null==a)return{};var c,d,e={},f=Object.keys(a);for(d=0;d<f.length;d++)if(c=f[d],!(b.indexOf(c)>=0))e[c]=a[c];return e}(a,b);if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(a);for(d=0;d<f.length;d++)if(c=f[d],!(b.indexOf(c)>=0))if(Object.prototype.propertyIsEnumerable.call(a,c))e[c]=a[c]}return e}var Jp=function(){function a(b){var c=b.cellCount,d=b.cellSizeGetter,e=b.estimatedCellSize;jp(this,a),sp(this,"_cellSizeAndPositionData",{}),sp(this,"_lastMeasuredIndex",-1),sp(this,"_lastBatchedIndex",-1),sp(this,"_cellCount",void 0),sp(this,"_cellSizeGetter",void 0),sp(this,"_estimatedCellSize",void 0),this._cellSizeGetter=d,this._cellCount=c,this._estimatedCellSize=e}return lp(a,[{key:"areOffsetsAdjusted",value:function(){return!1}},{key:"configure",value:function(a){var b=a.cellCount,c=a.estimatedCellSize,d=a.cellSizeGetter;this._cellCount=b,this._estimatedCellSize=c,this._cellSizeGetter=d}},{key:"getCellCount",value:function(){return this._cellCount}},{key:"getEstimatedCellSize",value:function(){return this._estimatedCellSize}},{key:"getLastMeasuredIndex",value:function(){return this._lastMeasuredIndex}},{key:"getOffsetAdjustment",value:function(){return 0}},{key:"getSizeAndPositionOfCell",value:function(a){if(a<0||a>=this._cellCount)throw Error("Requested index ".concat(a," is outside of range 0..").concat(this._cellCount));if(a>this._lastMeasuredIndex)for(var b=this.getSizeAndPositionOfLastMeasuredCell(),c=b.offset+b.size,d=this._lastMeasuredIndex+1;d<=a;d++){var e=this._cellSizeGetter({index:d});if(void 0===e||isNaN(e))throw Error("Invalid size returned for cell ".concat(d," of value ").concat(e));else if(null===e)this._cellSizeAndPositionData[d]={offset:c,size:0},this._lastBatchedIndex=a;else this._cellSizeAndPositionData[d]={offset:c,size:e},c+=e,this._lastMeasuredIndex=a}return this._cellSizeAndPositionData[a]}},{key:"getSizeAndPositionOfLastMeasuredCell",value:function(){return this._lastMeasuredIndex>=0?this._cellSizeAndPositionData[this._lastMeasuredIndex]:{offset:0,size:0}}},{key:"getTotalSize",value:function(){var a=this.getSizeAndPositionOfLastMeasuredCell();return a.offset+a.size+(this._cellCount-this._lastMeasuredIndex-1)*this._estimatedCellSize}},{key:"getUpdatedOffsetForIndex",value:function(a){var b=a.align,c=void 0===b?"auto":b,d=a.containerSize,e=a.currentOffset,f=a.targetIndex;if(d<=0)return 0;var g,h=this.getSizeAndPositionOfCell(f),i=h.offset,j=i-d+h.size;switch(c){case"start":g=i;break;case"end":g=j;break;case"center":g=i-(d-h.size)/2;break;default:g=Math.max(j,Math.min(i,e))}var k=this.getTotalSize();return Math.max(0,Math.min(k-d,g))}},{key:"getVisibleCellRange",value:function(a){var b=a.containerSize,c=a.offset;if(0===this.getTotalSize())return{};var d=c+b,e=this._findNearestCell(c),f=this.getSizeAndPositionOfCell(e);c=f.offset+f.size;for(var g=e;c<d&&g<this._cellCount-1;)g++,c+=this.getSizeAndPositionOfCell(g).size;return{start:e,stop:g}}},{key:"resetCell",value:function(a){this._lastMeasuredIndex=Math.min(this._lastMeasuredIndex,a-1)}},{key:"_binarySearch",value:function(a,b,c){for(;b<=a;){var d=b+Math.floor((a-b)/2),e=this.getSizeAndPositionOfCell(d).offset;if(e===c)return d;else if(e<c)b=d+1;else if(e>c)a=d-1}if(b>0)return b-1;else return 0}},{key:"_exponentialSearch",value:function(a,b){for(var c=1;a<this._cellCount&&this.getSizeAndPositionOfCell(a).offset<b;)a+=c,c*=2;return this._binarySearch(Math.min(a,this._cellCount-1),Math.floor(a/2),b)}},{key:"_findNearestCell",value:function(a){if(isNaN(a))throw Error("Invalid offset ".concat(a," specified"));a=Math.max(0,a);var b=this.getSizeAndPositionOfLastMeasuredCell(),c=Math.max(0,this._lastMeasuredIndex);if(b.offset>=a)return this._binarySearch(c,0,a);else return this._exponentialSearch(c,a)}}]),a}(),Kp=function(){if("undefined"!=typeof window)if(window.chrome)return 16777100;return 15e5},Lp=function(){function a(b){var c=b.maxScrollSize,d=void 0===c?Kp():c,e=Ip(b,["maxScrollSize"]);jp(this,a),sp(this,"_cellSizeAndPositionManager",void 0),sp(this,"_maxScrollSize",void 0),this._cellSizeAndPositionManager=new Jp(e),this._maxScrollSize=d}return lp(a,[{key:"areOffsetsAdjusted",value:function(){return this._cellSizeAndPositionManager.getTotalSize()>this._maxScrollSize}},{key:"configure",value:function(a){this._cellSizeAndPositionManager.configure(a)}},{key:"getCellCount",value:function(){return this._cellSizeAndPositionManager.getCellCount()}},{key:"getEstimatedCellSize",value:function(){return this._cellSizeAndPositionManager.getEstimatedCellSize()}},{key:"getLastMeasuredIndex",value:function(){return this._cellSizeAndPositionManager.getLastMeasuredIndex()}},{key:"getOffsetAdjustment",value:function(a){var b=a.containerSize,c=a.offset,d=this._cellSizeAndPositionManager.getTotalSize(),e=this.getTotalSize(),f=this._getOffsetPercentage({containerSize:b,offset:c,totalSize:e});return Math.round(f*(e-d))}},{key:"getSizeAndPositionOfCell",value:function(a){return this._cellSizeAndPositionManager.getSizeAndPositionOfCell(a)}},{key:"getSizeAndPositionOfLastMeasuredCell",value:function(){return this._cellSizeAndPositionManager.getSizeAndPositionOfLastMeasuredCell()}},{key:"getTotalSize",value:function(){return Math.min(this._maxScrollSize,this._cellSizeAndPositionManager.getTotalSize())}},{key:"getUpdatedOffsetForIndex",value:function(a){var b=a.align,c=void 0===b?"auto":b,d=a.containerSize,e=a.currentOffset,f=a.targetIndex;e=this._safeOffsetToOffset({containerSize:d,offset:e});var g=this._cellSizeAndPositionManager.getUpdatedOffsetForIndex({align:c,containerSize:d,currentOffset:e,targetIndex:f});return this._offsetToSafeOffset({containerSize:d,offset:g})}},{key:"getVisibleCellRange",value:function(a){var b=a.containerSize,c=a.offset;return c=this._safeOffsetToOffset({containerSize:b,offset:c}),this._cellSizeAndPositionManager.getVisibleCellRange({containerSize:b,offset:c})}},{key:"resetCell",value:function(a){this._cellSizeAndPositionManager.resetCell(a)}},{key:"_getOffsetPercentage",value:function(a){var b=a.containerSize,c=a.offset,d=a.totalSize;return d<=b?0:c/(d-b)}},{key:"_offsetToSafeOffset",value:function(a){var b=a.containerSize,c=a.offset,d=this._cellSizeAndPositionManager.getTotalSize(),e=this.getTotalSize();if(d===e)return c;else{var f=this._getOffsetPercentage({containerSize:b,offset:c,totalSize:d});return Math.round(f*(e-b))}}},{key:"_safeOffsetToOffset",value:function(a){var b=a.containerSize,c=a.offset,d=this._cellSizeAndPositionManager.getTotalSize(),e=this.getTotalSize();if(d===e)return c;else{var f=this._getOffsetPercentage({containerSize:b,offset:c,totalSize:e});return Math.round(f*(d-b))}}}]),a}();function Mp(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:!0,b={};return function(c){var d=c.callback,e=c.indices,f=Object.keys(e),g=!a||f.every(function(a){var b=e[a];return Array.isArray(b)?b.length>0:b>=0}),h=f.length!==Object.keys(b).length||f.some(function(a){var c=b[a],d=e[a];return Array.isArray(d)?c.join(",")!==d.join(","):c!==d});if(b=e,g&&h)d(e)}}function Np(a){var b=a.cellCount,c=a.overscanCellsCount,d=a.scrollDirection,e=a.startIndex,f=a.stopIndex;if(1===d)return{overscanStartIndex:Math.max(0,e),overscanStopIndex:Math.min(b-1,f+c)};else return{overscanStartIndex:Math.max(0,e-c),overscanStopIndex:Math.min(b-1,f)}}function Op(a){var b=a.cellSize,c=a.cellSizeAndPositionManager,d=a.previousCellsCount,e=a.previousCellSize,f=a.previousScrollToAlignment,g=a.previousScrollToIndex,h=a.previousSize,i=a.scrollOffset,j=a.scrollToAlignment,k=a.scrollToIndex,l=a.size,m=a.sizeJustIncreasedFromZero,n=a.updateScrollIndexCallback,o=c.getCellCount(),p=k>=0&&k<o;if(p&&(l!==h||m||!e||"number"==typeof b&&b!==e||j!==f||k!==g))n(k);else if(!p&&o>0&&(l<h||o<d))if(i>c.getTotalSize()-l)n(o-1)}var Pp,Qp,Rp=!("undefined"==typeof window||!window.document||!window.document.createElement);function Sp(){var a=this.constructor.getDerivedStateFromProps(this.props,this.state);if(null!=a)this.setState(a)}function Tp(a){this.setState(function(b){var c=this.constructor.getDerivedStateFromProps(a,b);return null!=c?c:null}.bind(this))}function Up(a,b){try{var c=this.props,d=this.state;this.props=a,this.state=b,this.__reactInternalSnapshotFlag=!0,this.__reactInternalSnapshot=this.getSnapshotBeforeUpdate(c,d)}finally{this.props=c,this.state=d}}if(Sp.__suppressDeprecationWarning=!0,Tp.__suppressDeprecationWarning=!0,Up.__suppressDeprecationWarning=!0,"undefined"!=typeof window)Qp=window;else if("undefined"!=typeof self)Qp=self;else Qp={};var Vp,Wp,Xp=Qp.requestAnimationFrame||Qp.webkitRequestAnimationFrame||Qp.mozRequestAnimationFrame||Qp.oRequestAnimationFrame||Qp.msRequestAnimationFrame||function(a){return Qp.setTimeout(a,1e3/60)},Yp=Qp.cancelAnimationFrame||Qp.webkitCancelAnimationFrame||Qp.mozCancelAnimationFrame||Qp.oCancelAnimationFrame||Qp.msCancelAnimationFrame||function(a){Qp.clearTimeout(a)},Zp=Xp,$p=Yp,_p=function(a){return $p(a.id)};function aq(a,b){var c=Object.keys(a);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(a);if(b)d=d.filter(function(b){return Object.getOwnPropertyDescriptor(a,b).enumerable});c.push.apply(c,d)}return c}function bq(a){for(var b=1;b<arguments.length;b++){var c=null!=arguments[b]?arguments[b]:{};if(b%2)aq(c,!0).forEach(function(b){sp(a,b,c[b])});else if(Object.getOwnPropertyDescriptors)Object.defineProperties(a,Object.getOwnPropertyDescriptors(c));else aq(c).forEach(function(b){Object.defineProperty(a,b,Object.getOwnPropertyDescriptor(c,b))})}return a}var cq="observed",dq="requested",eq=(Wp=Vp=function(a){function b(a){var c;jp(this,b),sp(np(c=op(this,pp(b).call(this,a))),"_onGridRenderedMemoizer",Mp()),sp(np(c),"_onScrollMemoizer",Mp(!1)),sp(np(c),"_deferredInvalidateColumnIndex",null),sp(np(c),"_deferredInvalidateRowIndex",null),sp(np(c),"_recomputeScrollLeftFlag",!1),sp(np(c),"_recomputeScrollTopFlag",!1),sp(np(c),"_horizontalScrollBarSize",0),sp(np(c),"_verticalScrollBarSize",0),sp(np(c),"_scrollbarPresenceChanged",!1),sp(np(c),"_scrollingContainer",void 0),sp(np(c),"_childrenToDisplay",void 0),sp(np(c),"_columnStartIndex",void 0),sp(np(c),"_columnStopIndex",void 0),sp(np(c),"_rowStartIndex",void 0),sp(np(c),"_rowStopIndex",void 0),sp(np(c),"_renderedColumnStartIndex",0),sp(np(c),"_renderedColumnStopIndex",0),sp(np(c),"_renderedRowStartIndex",0),sp(np(c),"_renderedRowStopIndex",0),sp(np(c),"_initialScrollTop",void 0),sp(np(c),"_initialScrollLeft",void 0),sp(np(c),"_disablePointerEventsTimeoutId",void 0),sp(np(c),"_styleCache",{}),sp(np(c),"_cellCache",{}),sp(np(c),"_debounceScrollEndedCallback",function(){c._disablePointerEventsTimeoutId=null,c.setState({isScrolling:!1,needToResetStyleCache:!1})}),sp(np(c),"_invokeOnGridRenderedHelper",function(){var a=c.props.onSectionRendered;c._onGridRenderedMemoizer({callback:a,indices:{columnOverscanStartIndex:c._columnStartIndex,columnOverscanStopIndex:c._columnStopIndex,columnStartIndex:c._renderedColumnStartIndex,columnStopIndex:c._renderedColumnStopIndex,rowOverscanStartIndex:c._rowStartIndex,rowOverscanStopIndex:c._rowStopIndex,rowStartIndex:c._renderedRowStartIndex,rowStopIndex:c._renderedRowStopIndex}})}),sp(np(c),"_setScrollingContainerRef",function(a){c._scrollingContainer=a}),sp(np(c),"_onScroll",function(a){if(a.target===c._scrollingContainer)c.handleScrollEvent(a.target)});var d=new Lp({cellCount:a.columnCount,cellSizeGetter:function(c){return b._wrapSizeGetter(a.columnWidth)(c)},estimatedCellSize:b._getEstimatedColumnSize(a)}),e=new Lp({cellCount:a.rowCount,cellSizeGetter:function(c){return b._wrapSizeGetter(a.rowHeight)(c)},estimatedCellSize:b._getEstimatedRowSize(a)});if(c.state={instanceProps:{columnSizeAndPositionManager:d,rowSizeAndPositionManager:e,prevColumnWidth:a.columnWidth,prevRowHeight:a.rowHeight,prevColumnCount:a.columnCount,prevRowCount:a.rowCount,prevIsScrolling:!0===a.isScrolling,prevScrollToColumn:a.scrollToColumn,prevScrollToRow:a.scrollToRow,scrollbarSize:0,scrollbarSizeMeasured:!1},isScrolling:!1,scrollDirectionHorizontal:1,scrollDirectionVertical:1,scrollLeft:0,scrollTop:0,scrollPositionChangeReason:null,needToResetStyleCache:!1},a.scrollToRow>0)c._initialScrollTop=c._getCalculatedScrollTop(a,c.state);if(a.scrollToColumn>0)c._initialScrollLeft=c._getCalculatedScrollLeft(a,c.state);return c}return rp(b,a),lp(b,[{key:"getOffsetForCell",value:function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},b=a.alignment,c=void 0===b?this.props.scrollToAlignment:b,d=a.columnIndex,e=void 0===d?this.props.scrollToColumn:d,f=a.rowIndex,g=void 0===f?this.props.scrollToRow:f,h=bq({},this.props,{scrollToAlignment:c,scrollToColumn:e,scrollToRow:g});return{scrollLeft:this._getCalculatedScrollLeft(h),scrollTop:this._getCalculatedScrollTop(h)}}},{key:"getTotalRowsHeight",value:function(){return this.state.instanceProps.rowSizeAndPositionManager.getTotalSize()}},{key:"getTotalColumnsWidth",value:function(){return this.state.instanceProps.columnSizeAndPositionManager.getTotalSize()}},{key:"handleScrollEvent",value:function(a){var b=a.scrollLeft,c=void 0===b?0:b,d=a.scrollTop,e=void 0===d?0:d;if(!(e<0)){this._debounceScrollEnded();var f=this.props,g=f.autoHeight,h=f.autoWidth,i=f.height,j=f.width,k=this.state.instanceProps,l=k.scrollbarSize,m=k.rowSizeAndPositionManager.getTotalSize(),n=k.columnSizeAndPositionManager.getTotalSize(),o=Math.min(Math.max(0,n-j+l),c),p=Math.min(Math.max(0,m-i+l),e);if(this.state.scrollLeft!==o||this.state.scrollTop!==p){var q={isScrolling:!0,scrollDirectionHorizontal:o!==this.state.scrollLeft?o>this.state.scrollLeft?1:-1:this.state.scrollDirectionHorizontal,scrollDirectionVertical:p!==this.state.scrollTop?p>this.state.scrollTop?1:-1:this.state.scrollDirectionVertical,scrollPositionChangeReason:cq};if(!g)q.scrollTop=p;if(!h)q.scrollLeft=o;q.needToResetStyleCache=!1,this.setState(q)}this._invokeOnScrollMemoizer({scrollLeft:o,scrollTop:p,totalColumnsWidth:n,totalRowsHeight:m})}}},{key:"invalidateCellSizeAfterRender",value:function(a){var b=a.columnIndex,c=a.rowIndex;this._deferredInvalidateColumnIndex="number"==typeof this._deferredInvalidateColumnIndex?Math.min(this._deferredInvalidateColumnIndex,b):b,this._deferredInvalidateRowIndex="number"==typeof this._deferredInvalidateRowIndex?Math.min(this._deferredInvalidateRowIndex,c):c}},{key:"measureAllCells",value:function(){var a=this.props,b=a.columnCount,c=a.rowCount,d=this.state.instanceProps;d.columnSizeAndPositionManager.getSizeAndPositionOfCell(b-1),d.rowSizeAndPositionManager.getSizeAndPositionOfCell(c-1)}},{key:"recomputeGridSize",value:function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},b=a.columnIndex,c=void 0===b?0:b,d=a.rowIndex,e=void 0===d?0:d,f=this.props,g=f.scrollToColumn,h=f.scrollToRow,i=this.state.instanceProps;i.columnSizeAndPositionManager.resetCell(c),i.rowSizeAndPositionManager.resetCell(e),this._recomputeScrollLeftFlag=g>=0&&(1===this.state.scrollDirectionHorizontal?c<=g:c>=g),this._recomputeScrollTopFlag=h>=0&&(1===this.state.scrollDirectionVertical?e<=h:e>=h),this._styleCache={},this._cellCache={},this.forceUpdate()}},{key:"scrollToCell",value:function(a){var b=a.columnIndex,c=a.rowIndex,d=this.props.columnCount,e=this.props;if(d>1&&void 0!==b)this._updateScrollLeftForScrollToColumn(bq({},e,{scrollToColumn:b}));if(void 0!==c)this._updateScrollTopForScrollToRow(bq({},e,{scrollToRow:c}))}},{key:"componentDidMount",value:function(){var a=this.props,c=a.getScrollbarSize,d=a.height,e=a.scrollLeft,f=a.scrollToColumn,g=a.scrollTop,h=a.scrollToRow,i=a.width,j=this.state.instanceProps;if(this._initialScrollTop=0,this._initialScrollLeft=0,this._handleInvalidatedGridSize(),!j.scrollbarSizeMeasured)this.setState(function(a){var b=bq({},a,{needToResetStyleCache:!1});return b.instanceProps.scrollbarSize=c(),b.instanceProps.scrollbarSizeMeasured=!0,b});if("number"==typeof e&&e>=0||"number"==typeof g&&g>=0){var k=b._getScrollToPositionStateUpdate({prevState:this.state,scrollLeft:e,scrollTop:g});if(k)k.needToResetStyleCache=!1,this.setState(k)}if(this._scrollingContainer){if(this._scrollingContainer.scrollLeft!==this.state.scrollLeft)this._scrollingContainer.scrollLeft=this.state.scrollLeft;if(this._scrollingContainer.scrollTop!==this.state.scrollTop)this._scrollingContainer.scrollTop=this.state.scrollTop}var l=d>0&&i>0;if(f>=0&&l)this._updateScrollLeftForScrollToColumn();if(h>=0&&l)this._updateScrollTopForScrollToRow();this._invokeOnGridRenderedHelper(),this._invokeOnScrollMemoizer({scrollLeft:e||0,scrollTop:g||0,totalColumnsWidth:j.columnSizeAndPositionManager.getTotalSize(),totalRowsHeight:j.rowSizeAndPositionManager.getTotalSize()}),this._maybeCallOnScrollbarPresenceChange()}},{key:"componentDidUpdate",value:function(a,b){var c=this,d=this.props,e=d.autoHeight,f=d.autoWidth,g=d.columnCount,h=d.height,i=d.rowCount,j=d.scrollToAlignment,k=d.scrollToColumn,l=d.scrollToRow,m=d.width,n=this.state,o=n.scrollLeft,p=n.scrollPositionChangeReason,q=n.scrollTop,r=n.instanceProps;this._handleInvalidatedGridSize();var s=g>0&&0===a.columnCount||i>0&&0===a.rowCount;if(p===dq){if(!f&&o>=0&&(o!==this._scrollingContainer.scrollLeft||s))this._scrollingContainer.scrollLeft=o;if(!e&&q>=0&&(q!==this._scrollingContainer.scrollTop||s))this._scrollingContainer.scrollTop=q}var t=(0===a.width||0===a.height)&&h>0&&m>0;if(this._recomputeScrollLeftFlag)this._recomputeScrollLeftFlag=!1,this._updateScrollLeftForScrollToColumn(this.props);else Op({cellSizeAndPositionManager:r.columnSizeAndPositionManager,previousCellsCount:a.columnCount,previousCellSize:a.columnWidth,previousScrollToAlignment:a.scrollToAlignment,previousScrollToIndex:a.scrollToColumn,previousSize:a.width,scrollOffset:o,scrollToAlignment:j,scrollToIndex:k,size:m,sizeJustIncreasedFromZero:t,updateScrollIndexCallback:function(){return c._updateScrollLeftForScrollToColumn(c.props)}});if(this._recomputeScrollTopFlag)this._recomputeScrollTopFlag=!1,this._updateScrollTopForScrollToRow(this.props);else Op({cellSizeAndPositionManager:r.rowSizeAndPositionManager,previousCellsCount:a.rowCount,previousCellSize:a.rowHeight,previousScrollToAlignment:a.scrollToAlignment,previousScrollToIndex:a.scrollToRow,previousSize:a.height,scrollOffset:q,scrollToAlignment:j,scrollToIndex:l,size:h,sizeJustIncreasedFromZero:t,updateScrollIndexCallback:function(){return c._updateScrollTopForScrollToRow(c.props)}});if(this._invokeOnGridRenderedHelper(),o!==b.scrollLeft||q!==b.scrollTop){var u=r.rowSizeAndPositionManager.getTotalSize(),v=r.columnSizeAndPositionManager.getTotalSize();this._invokeOnScrollMemoizer({scrollLeft:o,scrollTop:q,totalColumnsWidth:v,totalRowsHeight:u})}this._maybeCallOnScrollbarPresenceChange()}},{key:"componentWillUnmount",value:function(){if(this._disablePointerEventsTimeoutId)_p(this._disablePointerEventsTimeoutId)}},{key:"render",value:function(){var a=this.props,b=a.autoContainerWidth,c=a.autoHeight,d=a.autoWidth,e=a.className,f=a.containerProps,h=a.containerRole,i=a.containerStyle,j=a.height,k=a.id,l=a.noContentRenderer,m=a.role,n=a.style,o=a.tabIndex,p=a.width,q=this.state,r=q.instanceProps,s=q.needToResetStyleCache,t=this._isScrolling(),u={boxSizing:"border-box",direction:"ltr",height:c?"auto":j,position:"relative",width:d?"auto":p,WebkitOverflowScrolling:"touch",willChange:"transform"};if(s)this._styleCache={};if(!this.state.isScrolling)this._resetStyleCache();this._calculateChildrenToRender(this.props,this.state);var v=r.columnSizeAndPositionManager.getTotalSize(),w=r.rowSizeAndPositionManager.getTotalSize(),x=w>j?r.scrollbarSize:0,y=v>p?r.scrollbarSize:0;if(y!==this._horizontalScrollBarSize||x!==this._verticalScrollBarSize)this._horizontalScrollBarSize=y,this._verticalScrollBarSize=x,this._scrollbarPresenceChanged=!0;u.overflowX=v+x<=p?"hidden":"auto",u.overflowY=w+y<=j?"hidden":"auto";var z=this._childrenToDisplay,A=0===z.length&&j>0&&p>0;return g.createElement("div",Ep({ref:this._setScrollingContainerRef},f,{"aria-label":this.props["aria-label"],"aria-readonly":this.props["aria-readonly"],className:Gp("ReactVirtualized__Grid",e),id:k,onScroll:this._onScroll,role:m,style:bq({},u,{},n),tabIndex:o}),z.length>0&&g.createElement("div",{className:"ReactVirtualized__Grid__innerScrollContainer",role:h,style:bq({width:b?"auto":v,height:w,maxWidth:v,maxHeight:w,overflow:"hidden",pointerEvents:t?"none":"",position:"relative"},i)},z),A&&l())}},{key:"_calculateChildrenToRender",value:function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.state,c=a.cellRenderer,d=a.cellRangeRenderer,e=a.columnCount,f=a.deferredMeasurementCache,g=a.height,h=a.overscanColumnCount,i=a.overscanIndicesGetter,j=a.overscanRowCount,k=a.rowCount,l=a.width,m=a.isScrollingOptOut,n=b.scrollDirectionHorizontal,o=b.scrollDirectionVertical,p=b.instanceProps,q=this._initialScrollTop>0?this._initialScrollTop:b.scrollTop,r=this._initialScrollLeft>0?this._initialScrollLeft:b.scrollLeft,s=this._isScrolling(a,b);if(this._childrenToDisplay=[],g>0&&l>0){var t=p.columnSizeAndPositionManager.getVisibleCellRange({containerSize:l,offset:r}),u=p.rowSizeAndPositionManager.getVisibleCellRange({containerSize:g,offset:q}),v=p.columnSizeAndPositionManager.getOffsetAdjustment({containerSize:l,offset:r}),w=p.rowSizeAndPositionManager.getOffsetAdjustment({containerSize:g,offset:q});this._renderedColumnStartIndex=t.start,this._renderedColumnStopIndex=t.stop,this._renderedRowStartIndex=u.start,this._renderedRowStopIndex=u.stop;var x=i({direction:"horizontal",cellCount:e,overscanCellsCount:h,scrollDirection:n,startIndex:"number"==typeof t.start?t.start:0,stopIndex:"number"==typeof t.stop?t.stop:-1}),y=i({direction:"vertical",cellCount:k,overscanCellsCount:j,scrollDirection:o,startIndex:"number"==typeof u.start?u.start:0,stopIndex:"number"==typeof u.stop?u.stop:-1}),z=x.overscanStartIndex,A=x.overscanStopIndex,B=y.overscanStartIndex,C=y.overscanStopIndex;if(f){if(!f.hasFixedHeight())for(var D=B;D<=C;D++)if(!f.has(D,0)){z=0,A=e-1;break}if(!f.hasFixedWidth())for(var E=z;E<=A;E++)if(!f.has(0,E)){B=0,C=k-1;break}}this._childrenToDisplay=d({cellCache:this._cellCache,cellRenderer:c,columnSizeAndPositionManager:p.columnSizeAndPositionManager,columnStartIndex:z,columnStopIndex:A,deferredMeasurementCache:f,horizontalOffsetAdjustment:v,isScrolling:s,isScrollingOptOut:m,parent:this,rowSizeAndPositionManager:p.rowSizeAndPositionManager,rowStartIndex:B,rowStopIndex:C,scrollLeft:r,scrollTop:q,styleCache:this._styleCache,verticalOffsetAdjustment:w,visibleColumnIndices:t,visibleRowIndices:u}),this._columnStartIndex=z,this._columnStopIndex=A,this._rowStartIndex=B,this._rowStopIndex=C}}},{key:"_debounceScrollEnded",value:function(){var a=this.props.scrollingResetTimeInterval;if(this._disablePointerEventsTimeoutId)_p(this._disablePointerEventsTimeoutId);this._disablePointerEventsTimeoutId=function(a,b){var c;Promise.resolve().then(function(){c=Date.now()});var d={id:Zp(function e(){if(Date.now()-c>=b)a.call();else d.id=Zp(e)})};return d}(this._debounceScrollEndedCallback,a)}},{key:"_handleInvalidatedGridSize",value:function(){if("number"==typeof this._deferredInvalidateColumnIndex&&"number"==typeof this._deferredInvalidateRowIndex){var a=this._deferredInvalidateColumnIndex,b=this._deferredInvalidateRowIndex;this._deferredInvalidateColumnIndex=null,this._deferredInvalidateRowIndex=null,this.recomputeGridSize({columnIndex:a,rowIndex:b})}}},{key:"_invokeOnScrollMemoizer",value:function(a){var b=this,c=a.scrollLeft,d=a.scrollTop,e=a.totalColumnsWidth,f=a.totalRowsHeight;this._onScrollMemoizer({callback:function(a){var c=a.scrollLeft,d=a.scrollTop,g=b.props,h=g.height;(0,g.onScroll)({clientHeight:h,clientWidth:g.width,scrollHeight:f,scrollLeft:c,scrollTop:d,scrollWidth:e})},indices:{scrollLeft:c,scrollTop:d}})}},{key:"_isScrolling",value:function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.state;return Object.hasOwnProperty.call(a,"isScrolling")?Boolean(a.isScrolling):Boolean(b.isScrolling)}},{key:"_maybeCallOnScrollbarPresenceChange",value:function(){if(this._scrollbarPresenceChanged){var a=this.props.onScrollbarPresenceChange;this._scrollbarPresenceChanged=!1,a({horizontal:this._horizontalScrollBarSize>0,size:this.state.instanceProps.scrollbarSize,vertical:this._verticalScrollBarSize>0})}}},{key:"scrollToPosition",value:function(a){var c=a.scrollLeft,d=a.scrollTop,e=b._getScrollToPositionStateUpdate({prevState:this.state,scrollLeft:c,scrollTop:d});if(e)e.needToResetStyleCache=!1,this.setState(e)}},{key:"_getCalculatedScrollLeft",value:function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.state;return b._getCalculatedScrollLeft(a,c)}},{key:"_updateScrollLeftForScrollToColumn",value:function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.state,d=b._getScrollLeftForScrollToColumnStateUpdate(a,c);if(d)d.needToResetStyleCache=!1,this.setState(d)}},{key:"_getCalculatedScrollTop",value:function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.state;return b._getCalculatedScrollTop(a,c)}},{key:"_resetStyleCache",value:function(){var a=this._styleCache,b=this._cellCache,c=this.props.isScrollingOptOut;this._cellCache={},this._styleCache={};for(var d=this._rowStartIndex;d<=this._rowStopIndex;d++)for(var e=this._columnStartIndex;e<=this._columnStopIndex;e++){var f="".concat(d,"-").concat(e);if(this._styleCache[f]=a[f],c)this._cellCache[f]=b[f]}}},{key:"_updateScrollTopForScrollToRow",value:function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.state,d=b._getScrollTopForScrollToRowStateUpdate(a,c);if(d)d.needToResetStyleCache=!1,this.setState(d)}}],[{key:"getDerivedStateFromProps",value:function(a,c){var d={};if(0===a.columnCount&&0!==c.scrollLeft||0===a.rowCount&&0!==c.scrollTop)d.scrollLeft=0,d.scrollTop=0;else if(a.scrollLeft!==c.scrollLeft&&a.scrollToColumn<0||a.scrollTop!==c.scrollTop&&a.scrollToRow<0)Object.assign(d,b._getScrollToPositionStateUpdate({prevState:c,scrollLeft:a.scrollLeft,scrollTop:a.scrollTop}));var e,f,g=c.instanceProps;if(d.needToResetStyleCache=!1,a.columnWidth!==g.prevColumnWidth||a.rowHeight!==g.prevRowHeight)d.needToResetStyleCache=!0;if(g.columnSizeAndPositionManager.configure({cellCount:a.columnCount,estimatedCellSize:b._getEstimatedColumnSize(a),cellSizeGetter:b._wrapSizeGetter(a.columnWidth)}),g.rowSizeAndPositionManager.configure({cellCount:a.rowCount,estimatedCellSize:b._getEstimatedRowSize(a),cellSizeGetter:b._wrapSizeGetter(a.rowHeight)}),0===g.prevColumnCount||0===g.prevRowCount)g.prevColumnCount=0,g.prevRowCount=0;if(a.autoHeight&&!1===a.isScrolling&&!0===g.prevIsScrolling)Object.assign(d,{isScrolling:!1});if(Hp({cellCount:g.prevColumnCount,cellSize:"number"==typeof g.prevColumnWidth?g.prevColumnWidth:null,computeMetadataCallback:function(){return g.columnSizeAndPositionManager.resetCell(0)},computeMetadataCallbackProps:a,nextCellsCount:a.columnCount,nextCellSize:"number"==typeof a.columnWidth?a.columnWidth:null,nextScrollToIndex:a.scrollToColumn,scrollToIndex:g.prevScrollToColumn,updateScrollOffsetForScrollToIndex:function(){e=b._getScrollLeftForScrollToColumnStateUpdate(a,c)}}),Hp({cellCount:g.prevRowCount,cellSize:"number"==typeof g.prevRowHeight?g.prevRowHeight:null,computeMetadataCallback:function(){return g.rowSizeAndPositionManager.resetCell(0)},computeMetadataCallbackProps:a,nextCellsCount:a.rowCount,nextCellSize:"number"==typeof a.rowHeight?a.rowHeight:null,nextScrollToIndex:a.scrollToRow,scrollToIndex:g.prevScrollToRow,updateScrollOffsetForScrollToIndex:function(){f=b._getScrollTopForScrollToRowStateUpdate(a,c)}}),g.prevColumnCount=a.columnCount,g.prevColumnWidth=a.columnWidth,g.prevIsScrolling=!0===a.isScrolling,g.prevRowCount=a.rowCount,g.prevRowHeight=a.rowHeight,g.prevScrollToColumn=a.scrollToColumn,g.prevScrollToRow=a.scrollToRow,g.scrollbarSize=a.getScrollbarSize(),void 0===g.scrollbarSize)g.scrollbarSizeMeasured=!1,g.scrollbarSize=0;else g.scrollbarSizeMeasured=!0;return d.instanceProps=g,bq({},d,{},e,{},f)}},{key:"_getEstimatedColumnSize",value:function(a){return"number"==typeof a.columnWidth?a.columnWidth:a.estimatedColumnSize}},{key:"_getEstimatedRowSize",value:function(a){return"number"==typeof a.rowHeight?a.rowHeight:a.estimatedRowSize}},{key:"_getScrollToPositionStateUpdate",value:function(a){var b=a.prevState,c=a.scrollLeft,d=a.scrollTop,e={scrollPositionChangeReason:dq};if("number"==typeof c&&c>=0)e.scrollDirectionHorizontal=c>b.scrollLeft?1:-1,e.scrollLeft=c;if("number"==typeof d&&d>=0)e.scrollDirectionVertical=d>b.scrollTop?1:-1,e.scrollTop=d;if("number"==typeof c&&c>=0&&c!==b.scrollLeft||"number"==typeof d&&d>=0&&d!==b.scrollTop)return e;else return{}}},{key:"_wrapSizeGetter",value:function(a){return"function"==typeof a?a:function(){return a}}},{key:"_getCalculatedScrollLeft",value:function(a,b){var c=a.columnCount,d=a.height,e=a.scrollToAlignment,f=a.scrollToColumn,g=a.width,h=b.scrollLeft,i=b.instanceProps;if(c>0){var j=c-1,k=f<0?j:Math.min(j,f),l=i.rowSizeAndPositionManager.getTotalSize(),m=i.scrollbarSizeMeasured&&l>d?i.scrollbarSize:0;return i.columnSizeAndPositionManager.getUpdatedOffsetForIndex({align:e,containerSize:g-m,currentOffset:h,targetIndex:k})}return 0}},{key:"_getScrollLeftForScrollToColumnStateUpdate",value:function(a,c){var d=c.scrollLeft,e=b._getCalculatedScrollLeft(a,c);if("number"==typeof e&&e>=0&&d!==e)return b._getScrollToPositionStateUpdate({prevState:c,scrollLeft:e,scrollTop:-1});else return{}}},{key:"_getCalculatedScrollTop",value:function(a,b){var c=a.height,d=a.rowCount,e=a.scrollToAlignment,f=a.scrollToRow,g=a.width,h=b.scrollTop,i=b.instanceProps;if(d>0){var j=d-1,k=f<0?j:Math.min(j,f),l=i.columnSizeAndPositionManager.getTotalSize(),m=i.scrollbarSizeMeasured&&l>g?i.scrollbarSize:0;return i.rowSizeAndPositionManager.getUpdatedOffsetForIndex({align:e,containerSize:c-m,currentOffset:h,targetIndex:k})}return 0}},{key:"_getScrollTopForScrollToRowStateUpdate",value:function(a,c){var d=c.scrollTop,e=b._getCalculatedScrollTop(a,c);if("number"==typeof e&&e>=0&&d!==e)return b._getScrollToPositionStateUpdate({prevState:c,scrollLeft:-1,scrollTop:e});else return{}}}]),b}(g.PureComponent),sp(Vp,"propTypes",1?null:0),Wp);sp(eq,"defaultProps",{"aria-label":"grid","aria-readonly":!0,autoContainerWidth:!1,autoHeight:!1,autoWidth:!1,cellRangeRenderer:function(a){for(var b=a.cellCache,c=a.cellRenderer,d=a.columnSizeAndPositionManager,e=a.columnStartIndex,f=a.columnStopIndex,g=a.deferredMeasurementCache,h=a.horizontalOffsetAdjustment,i=a.isScrolling,j=a.isScrollingOptOut,k=a.parent,l=a.rowSizeAndPositionManager,m=a.rowStartIndex,n=a.rowStopIndex,o=a.styleCache,p=a.verticalOffsetAdjustment,q=a.visibleColumnIndices,r=a.visibleRowIndices,s=[],t=d.areOffsetsAdjusted()||l.areOffsetsAdjusted(),u=!i&&!t,v=m;v<=n;v++)for(var w=l.getSizeAndPositionOfCell(v),x=e;x<=f;x++){var y=d.getSizeAndPositionOfCell(x),z=x>=q.start&&x<=q.stop&&v>=r.start&&v<=r.stop,A="".concat(v,"-").concat(x),B=void 0;if(u&&o[A])B=o[A];else if(g&&!g.has(v,x))B={height:"auto",left:0,position:"absolute",top:0,width:"auto"};else B={height:w.size,left:y.offset+h,position:"absolute",top:w.offset+p,width:y.size},o[A]=B;var C={columnIndex:x,isScrolling:i,isVisible:z,key:A,parent:k,rowIndex:v,style:B},D=void 0;if((j||i)&&!h&&!p){if(!b[A])b[A]=c(C);D=b[A]}else D=c(C);if(null!=D&&!1!==D){if(0);s.push(D)}}return s},containerRole:"rowgroup",containerStyle:{},estimatedColumnSize:100,estimatedRowSize:30,getScrollbarSize:function(a){if(!Pp&&0!==Pp||a)if(Rp){var b=document.createElement("div");b.style.position="absolute",b.style.top="-9999px",b.style.width="50px",b.style.height="50px",b.style.overflow="scroll",document.body.appendChild(b),Pp=b.offsetWidth-b.clientWidth,document.body.removeChild(b)}return Pp},noContentRenderer:function(){return null},onScroll:function(){},onScrollbarPresenceChange:function(){},onSectionRendered:function(){},overscanColumnCount:0,overscanIndicesGetter:Np,overscanRowCount:10,role:"grid",scrollingResetTimeInterval:150,scrollToAlignment:"auto",scrollToColumn:-1,scrollToRow:-1,style:{},tabIndex:0,isScrollingOptOut:!1}),function(a){var b=a.prototype;if(!b||!b.isReactComponent)throw new Error("Can only polyfill class components");if("function"!=typeof a.getDerivedStateFromProps&&"function"!=typeof b.getSnapshotBeforeUpdate)return a;var c=null,d=null,e=null;if("function"==typeof b.componentWillMount)c="componentWillMount";else if("function"==typeof b.UNSAFE_componentWillMount)c="UNSAFE_componentWillMount";if("function"==typeof b.componentWillReceiveProps)d="componentWillReceiveProps";else if("function"==typeof b.UNSAFE_componentWillReceiveProps)d="UNSAFE_componentWillReceiveProps";if("function"==typeof b.componentWillUpdate)e="componentWillUpdate";else if("function"==typeof b.UNSAFE_componentWillUpdate)e="UNSAFE_componentWillUpdate";if(null!==c||null!==d||null!==e){var f=a.displayName||a.name,g="function"==typeof a.getDerivedStateFromProps?"getDerivedStateFromProps()":"getSnapshotBeforeUpdate()";throw Error("Unsafe legacy lifecycles will not be called for components using new component APIs.\n\n"+f+" uses "+g+" but also contains the following legacy lifecycles:"+(null!==c?"\n  "+c:"")+(null!==d?"\n  "+d:"")+(null!==e?"\n  "+e:"")+"\n\nThe above lifecycles should be removed. Learn more about this warning here:\nhttps://fb.me/react-async-component-lifecycle-hooks")}if("function"==typeof a.getDerivedStateFromProps)b.componentWillMount=Sp,b.componentWillReceiveProps=Tp;if("function"==typeof b.getSnapshotBeforeUpdate){if("function"!=typeof b.componentDidUpdate)throw new Error("Cannot polyfill getSnapshotBeforeUpdate() for components that do not define componentDidUpdate() on the prototype");b.componentWillUpdate=Up;var h=b.componentDidUpdate;b.componentDidUpdate=function(a,b,c){var d=this.__reactInternalSnapshotFlag?this.__reactInternalSnapshot:c;h.call(this,a,b,d)}}}(eq);var fq=eq;function gq(a,b){if(null==b||b>a.length)b=a.length;for(var c=0,d=new Array(b);c<b;c++)d[c]=a[c];return d}function hq(a){return function(a){if(Array.isArray(a))return gq(a)}(a)||function(a){if("undefined"!=typeof Symbol&&null!=a[Symbol.iterator]||null!=a["@@iterator"])return Array.from(a)}(a)||function(a,b){if(a){if("string"==typeof a)return gq(a,b);var c=Object.prototype.toString.call(a).slice(8,-1);if("Object"===c&&a.constructor)c=a.constructor.name;if("Map"===c||"Set"===c)return Array.from(a);if("Arguments"===c||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(c))return gq(a,b);else return}}(a)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var iq=function(a){function b(a,c){var d;return jp(this,b),(d=op(this,pp(b).call(this,a,c)))._loadMoreRowsMemoizer=Mp(),d._onRowsRendered=d._onRowsRendered.bind(np(d)),d._registerChild=d._registerChild.bind(np(d)),d}return rp(b,a),lp(b,[{key:"resetLoadMoreRowsCache",value:function(a){if(this._loadMoreRowsMemoizer=Mp(),a)this._doStuff(this._lastRenderedStartIndex,this._lastRenderedStopIndex)}},{key:"render",value:function(){return(0,this.props.children)({onRowsRendered:this._onRowsRendered,registerChild:this._registerChild})}},{key:"_loadUnloadedRanges",value:function(a){var b=this,c=this.props.loadMoreRows;a.forEach(function(a){var d=c(a);if(d)d.then(function(){if(c={lastRenderedStartIndex:b._lastRenderedStartIndex,lastRenderedStopIndex:b._lastRenderedStopIndex,startIndex:a.startIndex,stopIndex:a.stopIndex},d=c.lastRenderedStartIndex,e=c.lastRenderedStopIndex,f=c.startIndex,g=c.stopIndex,!(f>e||g<d))if(b._registeredChild)!function(a){var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,c="function"==typeof a.recomputeGridSize?a.recomputeGridSize:a.recomputeRowHeights;if(c)c.call(a,b);else a.forceUpdate()}(b._registeredChild,b._lastRenderedStartIndex);var c,d,e,f,g})})}},{key:"_onRowsRendered",value:function(a){var b=a.startIndex,c=a.stopIndex;this._lastRenderedStartIndex=b,this._lastRenderedStopIndex=c,this._doStuff(b,c)}},{key:"_doStuff",value:function(a,b){var c,d=this,e=this.props,f=e.isRowLoaded,g=e.minimumBatchSize,h=e.rowCount,i=e.threshold,j=function(a){for(var b=a.isRowLoaded,c=a.minimumBatchSize,d=a.rowCount,e=a.startIndex,f=a.stopIndex,g=[],h=null,i=null,j=e;j<=f;j++){if(!b({index:j})){if(i=j,null===h)h=j}else if(null!==i)g.push({startIndex:h,stopIndex:i}),h=i=null}if(null!==i){for(var k=Math.min(Math.max(i,h+c-1),d-1),l=i+1;l<=k&&!b({index:l});l++)i=l;g.push({startIndex:h,stopIndex:i})}if(g.length)for(var m=g[0];m.stopIndex-m.startIndex+1<c&&m.startIndex>0;){var n=m.startIndex-1;if(!b({index:n}))m.startIndex=n;else break}return g}({isRowLoaded:f,minimumBatchSize:g,rowCount:h,startIndex:Math.max(0,a-i),stopIndex:Math.min(h-1,b+i)}),k=(c=[]).concat.apply(c,hq(j.map(function(a){return[a.startIndex,a.stopIndex]})));this._loadMoreRowsMemoizer({callback:function(){d._loadUnloadedRanges(j)},indices:{squashedUnloadedRanges:k}})}},{key:"_registerChild",value:function(a){this._registeredChild=a}}]),b}(g.PureComponent);sp(iq,"defaultProps",{minimumBatchSize:10,rowCount:0,threshold:15}),iq.propTypes=0?0:{};var jq,kq,lq=(kq=jq=function(a){function b(){var a,c;jp(this,b);for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return sp(np(c=op(this,(a=pp(b)).call.apply(a,[this].concat(e)))),"Grid",void 0),sp(np(c),"_cellRenderer",function(a){var b=a.parent,d=a.rowIndex,e=a.style,f=a.isScrolling,g=a.isVisible,h=a.key,i=c.props.rowRenderer,j=Object.getOwnPropertyDescriptor(e,"width");if(j&&j.writable)e.width="100%";return i({index:d,style:e,isScrolling:f,isVisible:g,key:h,parent:b})}),sp(np(c),"_setRef",function(a){c.Grid=a}),sp(np(c),"_onScroll",function(a){var b=a.clientHeight,d=a.scrollHeight,e=a.scrollTop;(0,c.props.onScroll)({clientHeight:b,scrollHeight:d,scrollTop:e})}),sp(np(c),"_onSectionRendered",function(a){var b=a.rowOverscanStartIndex,d=a.rowOverscanStopIndex,e=a.rowStartIndex,f=a.rowStopIndex;(0,c.props.onRowsRendered)({overscanStartIndex:b,overscanStopIndex:d,startIndex:e,stopIndex:f})}),c}return rp(b,a),lp(b,[{key:"forceUpdateGrid",value:function(){if(this.Grid)this.Grid.forceUpdate()}},{key:"getOffsetForRow",value:function(a){var b=a.alignment,c=a.index;if(this.Grid){return this.Grid.getOffsetForCell({alignment:b,rowIndex:c,columnIndex:0}).scrollTop}return 0}},{key:"invalidateCellSizeAfterRender",value:function(a){var b=a.columnIndex,c=a.rowIndex;if(this.Grid)this.Grid.invalidateCellSizeAfterRender({rowIndex:c,columnIndex:b})}},{key:"measureAllRows",value:function(){if(this.Grid)this.Grid.measureAllCells()}},{key:"recomputeGridSize",value:function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},b=a.columnIndex,c=void 0===b?0:b,d=a.rowIndex,e=void 0===d?0:d;if(this.Grid)this.Grid.recomputeGridSize({rowIndex:e,columnIndex:c})}},{key:"recomputeRowHeights",value:function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(this.Grid)this.Grid.recomputeGridSize({rowIndex:a,columnIndex:0})}},{key:"scrollToPosition",value:function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(this.Grid)this.Grid.scrollToPosition({scrollTop:a})}},{key:"scrollToRow",value:function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(this.Grid)this.Grid.scrollToCell({columnIndex:0,rowIndex:a})}},{key:"render",value:function(){var a=this.props,b=a.className,c=a.noRowsRenderer,d=a.scrollToIndex,e=a.width,f=Gp("ReactVirtualized__List",b);return g.createElement(fq,Ep({},this.props,{autoContainerWidth:!0,cellRenderer:this._cellRenderer,className:f,columnWidth:e,columnCount:1,noContentRenderer:c,onScroll:this._onScroll,onSectionRendered:this._onSectionRendered,ref:this._setRef,scrollToRow:d}))}}]),b}(g.PureComponent),sp(jq,"propTypes",1?null:0),kq);sp(lq,"defaultProps",{autoHeight:!1,estimatedRowSize:30,onScroll:function(){},noRowsRenderer:function(){return null},onRowsRendered:function(){},overscanIndicesGetter:function(a){var b=a.cellCount,c=a.overscanCellsCount,d=a.scrollDirection,e=a.startIndex,f=a.stopIndex;if(c=Math.max(1,c),1===d)return{overscanStartIndex:Math.max(0,e-1),overscanStopIndex:Math.min(b-1,f+c)};else return{overscanStartIndex:Math.max(0,e-c),overscanStopIndex:Math.min(b-1,f+1)}},overscanRowCount:10,scrollToAlignment:"auto",scrollToIndex:-1,style:{}});var mq=nc(7678),nq=nc.n(mq),oq=nc(5456),pq=nc.n(oq),qq=nc(3178),rq=nc.n(qq),sq=nc(6766),tq=nc.n(sq),uq=nc(9497),vq=nc.n(uq),wq=nc(8441),xq=nc.n(wq),yq=nc(348),zq=nc.n(yq),Aq=nc(5207),Bq=nc.n(Aq),Cq=nc(7770),Dq=nc.n(Cq),Eq=nc(973),Fq=nc.n(Eq),Gq=nc(7863),Hq=nc.n(Gq),Iq=nc(748),Jq=nc.n(Iq),Kq=nc(7611),Lq=nc.n(Kq),Mq=new nf("llc");function Nq(){var a,b,c,d,e,f,g=this.props,i=g.model,j=g.model,k=this.getSubject(),l=this.getSnippetValue(),m=this.getGoToActionDisplayMode(),n="none"===m?this.getPaymentDieDisplayMode():"none",o=g["pony-mode"],p=this.getTransactionMetadata(),q="none"===m&&this.showOrder(g.model,p),r=this.getUnsubscribeSender(),t="none"===m&&this.shouldShowUniversalPaymentDie(),u=(0,Be.isListLetterActionButtonsEnabled)(i,g.search),v=s.ENABLE_TAGS&&!this.getCounter(),w=s.ENABLE_TAGS&&i.is("flags.tags")&&!!i.get("flags.tags").length,x=!!(null===(b=null==i?void 0:i.isSchedule)||void 0===b?void 0:b.call(i)),y=this.letterDate(i.get("date"),x),z=i.getFolder(),A=this.getSearchAttaches(),B=this.getAllAttaches(),C=this.getAttachesModes(!1,B,A),D=null===(c=this.getAttaches(C,B,A))||void 0===c?void 0:c.attachesList,E=null===(d=this.getAttaches(C,B,A))||void 0===d?void 0:d.moreAttachesList,F=this.state.messagesAttaches,G=g["show-attaches"]&&this.getAttachesPreviewCondition()&&"none"===m,H=this.getAttachesModes(!1,F),I=this.getAttaches(H,F),J=this.getCategory();return h().createElement("a",{style:g.style,"data-qa-id":(0,Ub.qa)(this.rootQaId()),"data-qa-index":(0,Ub.qa)(j.meta("_ui-index")),"data-qa-safe":(0,Ub.qa)(String(g.isReliable)),"data-qa-official":(0,Ub.qa)(String(g.isOfficial)),className:Mq.root({"enable-user-select":g["enable-user-select"],"pony-mode":o,"has-indent":g.indent,normal:!g.indent,active:g.selected,firstSelected:g.isFirstSelected,lastSelected:g.isLastSelected,first:g.first,last:g.last,new:!0,"new-selection":!0,reliable:g.isImportantReliable,official:g.isOfficialGreen},{addClass:["js-letter-list-item","js-tooltip-direction_letter-bottom"]}),onDragStart:(0,ze.CH)(this,{name:"unused",prevent:!0}),onClick:(0,ze.CH)(this,"click"),onContextMenu:(0,ze.CH)(this,"contextmenu"),href:g.href?g.href:null,tabIndex:-1,"data-id":i.get("id"),"data-draggable-id":i.get("id"),"data-uidl-id":i.get("last")},h().createElement("div",{className:Mq.elem("background",{active:g.selected})}),h().createElement("div",{"data-qa-id":(0,Ub.qa)("unread"),className:Mq.elem("read-status",{"pony-mode":o,small:!0})},h().createElement(mk,{state:i.is("flags.unread"),"is-forwarded":i.is("flags.forward"),"is-replied":i.is("flags.reply"),model:i,remitEvents:{toggle:{prevent:!0,name:Kh.unread}},remitDetails:{model:i},broadcastEvent:(0,ze.Yv)(this)})),h().createElement("div",{"data-qa-id":(0,Ub.qa)("avatar"),className:Mq.elem("avatar",{"pony-mode":o,unread:i.is("flags.unread")})},h().createElement(Kj,{state:g.selected,disabledHover:g["disable-avatar-hover"],disabled:g["disable-select"],centered:!0,imgUrl:this.getImageSrc(),verified:g.isReliable,official:g.isOfficial,darkMode:g.darkMode,size:"common",remitEvents:{toggle:{prevent:!0,name:Kh.clickAvatar}},broadcastEvent:(0,ze.Yv)(this)})),h().createElement("div",{className:Mq.elem("container")},h().createElement("div",{className:Mq.elem("content",{"pony-mode":o})},h().createElement("div",{className:Mq.elem("item",{correspondent:!0,unread:i.is("flags.unread")})},h().createElement(Qj,{"qa-id":(0,Ub.qa)("correspondent"),state:this.getCorrespondent(),title:this.getCorrespondentTooltip(),dangerous:this.isProbablyPhishing()})),h().createElement("div",{"data-qa-id":(0,Ub.qa)("flagged"),className:Mq.elem("item",{flag:!0})},h().createElement(Wj,{priority:g.priority,important:this.isImportant(),state:i.is("flags.flagged"),remitEvents:{toggle:{prevent:!0,name:Kh.flagged}},remitDetails:{model:i},broadcastEvent:(0,ze.Yv)(this)})),this.hasBadge()&&h().createElement("div",{"data-qa-id":(0,Ub.qa)("letter:badge"),className:Mq.elem("item",{badge:!0})},h().createElement(Jc,{counter:this.getCounter(),unread:i.is("flags.unread"),component:Oi()})),h().createElement("div",{ref:this.subjectRef,className:Mq.elem("item",{title:!0})},!g["disable-subject"]&&h().createElement("span",{className:Mq.elem("subject",{unread:i.is("flags.unread")})},h().createElement(Jc,{key:k,inlineRoot:!0,subject:k,color:g.search?i.meta("search_subject.color"):null,search:g.search,component:aj()})),h().createElement("span",{"data-qa-id":(0,Ub.qa)("snippet"),className:Mq.elem("snippet")},h().createElement(Jc,{key:l,inlineRoot:!0,value:l,color:g.search?i.meta("search_snippet.color"):null,search:g.search,component:$i()})),h().createElement("div",null)),(v||w)&&h().createElement("div",{className:Mq.elem("item",{tags:!0})},h().createElement(sk,{model:i,tags:i.get("flags.tags"),folder:g.showfolder&&z.get("name"),readonly:!v})),"compact"===n&&h().createElement("div",{className:Mq.elem("item")},h().createElement(Jc,{model:g.model,standalone:!0,"layout-mode":"2pane","pony-mode":g["pony-mode"],component:Si()})),r&&h().createElement(Jc,{"layout-mode":"2pane","pony-mode":o,unsubscribeSender:r,model:i,useMediators:["unsubscribe-actions","themes-manager"],component:cj()}),g.showfolder&&!w&&h().createElement("div",{className:Mq.elem("item",(a={folder:!0},a["hide-on-hover"]=v,a))},(null===(e=null==i?void 0:i.isSchedule)||void 0===e?void 0:e.call(i))?h().createElement(h().Fragment,null,h().createElement(Jc,{title:(0,Bi.scheduleDate)(i.get("send_date")),text:z.get("name"),"data-qa-id":(0,Ub.qa)("folder"),component:Qi()})):h().createElement(Jc,{title:z.get("name"),text:z.get("name"),"data-qa-id":(0,Ub.qa)("folder"),component:Qi()})),h().createElement("div",{className:Mq.elem("secondary-data")},!!J&&h().createElement("div",{className:Mq.elem("item",{category:!0})},h().createElement(Jc,{flat:!0,short:!0,name:J,component:Te()})),s.ENABLE_MENTIONS&&(i.is("flags.mention")||i.is("flags.mention_unread"))&&h().createElement("div",{className:Mq.elem("item",{mention:!0})},h().createElement(gk,{unread:i.is("flags.mention_unread")})),!g["disable-attach"]&&i.is("flags.attach")&&h().createElement("div",{className:Mq.elem("item",{"attach-status":!0})},h().createElement(Jc,{component:Lk(),small:!0,model:g.model,useMediators:["attachments-manager","pony-mode"]})),!g.showfolder&&!!(null===(f=null==i?void 0:i.isSchedule)||void 0===f?void 0:f.call(i))&&h().createElement("div",{className:Mq.elem("item")},h().createElement(Jc,{date:i.get("send_date"),component:Yi()}))),h().createElement("div",{title:this.getDateTooltip(x),"data-qa-id":(0,Ub.qa)("time:".concat(y)),className:Mq.elem("item",{date:!0})},y)),"full"===n&&h().createElement("div",{className:Mq.elem("payment-die-container")},h().createElement(Jc,{fluid:!0,model:g.model,"layout-mode":"2pane",component:Ui()})),D&&B&&h().createElement(Jc,{fluid:!0,model:g.model,"attaches-list":D,"more-attaches-list":E,"layout-mode":"2pane","all-count":B.length,vertical:C.vertical,"pony-mode":o,remitEvents:{attach:"previewattach",more:"previewattach",moreinvalid:"openletter"},broadcastEvent:(0,ze.Yv)(this),component:Pk()}),G&&h().createElement(h().Fragment,null,F?h().createElement(Jc,{fluid:!0,key:"list-letter-preview-attaches",component:Pk(),model:g.model,"attaches-list":I.attachesList,"more-attaches-list":I.moreAttachesList,"layout-mode":"2pane","all-count":F.length,vertical:H.vertical,"pony-mode":o,remitEvents:{attach:"previewattach",more:"previewattach",moreinvalid:"openletter"},broadcastEvent:(0,ze.Yv)(this)}):h().createElement(h().Fragment,null,h().createElement(Jc,{fluid:!0,key:"list-letter-preview-stub",attachesCount:i.get("attachments_count"),isCompact:!1,"pony-mode":o,component:Rk()}))),p&&q&&h().createElement(Jc,{fluid:!0,component:Nk(),useMediators:["orders-manager"],metadata:p,"pony-mode":o}),t&&h().createElement(Jc,{fluid:!0,component:Wi(),model:g.model,"layout-type":g["layout-mode"],"pony-mode":o}),"none"!==m&&h().createElement(dk,{model:i,meta:this.goToActionMetadata,layoutMode:"2pane",mode:m}),u&&h().createElement(Xk,{model:i,ponyMode:o,broadcastEvent:(0,ze.Yv)(this)})),g.fromThread||!g.hideDelimeter&&h().createElement(Jc,{component:Ki(),full:g["full-delimiter"],ponymode:o,indent:g.indent,indentRight:!0}),h().createElement(Jc,{component:Ki(),ponymode:o,indent:g.indent,indentRight:!0,last:!0}))}var Oq=function(){var a=function(b,c){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)if(Object.prototype.hasOwnProperty.call(b,c))a[c]=b[c]})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw new TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),Pq=function(a){function b(b){var c=a.call(this,b)||this;return c.state={},c.subjectRef=h().createRef(),c.getSubject=Fi.getSubject,c.getImageSrc=Fi.getImageSrc,c.isProbablyPhishing=Fi.isProbablyPhishing,c.getCorrespondent=Fi.getCorrespondent,c.getCorrespondentTooltip=Fi.getCorrespondentTooltip,c.getDateTooltip=Fi.getDateTooltip,c.getCounter=Fi.getCounter,c.getCategory=Fi.getCategory,c.getAllAttaches=Di.getAllAttaches,c.getSearchAttaches=Di.getSearchAttaches,c.getAttaches=Ci.getAttaches,c.getAttachesModes=Ei.getAttachesModes,c.isImportant=Fi.isImportant,c.getSnippetValue=Fi.getSnippetValue,c.getPaymentDieDisplayMode=Gi.getPaymentDieDisplayMode,c.getGoToActionDisplayMode=zi.getGoToActionDisplayMode,c.shouldShowUniversalPaymentDie=Gi.shouldShowUniversalPaymentDie,c.shouldHideTransactionCategory=Gi.shouldHideTransactionCategory,c.showOrder=Hi.showOrder,c.getTransactionMetadata=Hi.getTransactionMetadata,c.rootQaId=Fi.rootQaId,c.letterDate=Bi.letterDate,c.getUnsubscribeSender=Fi.getUnsubscribeSender,c.handleIntersectViewport=Fi.handleIntersectViewport,c.render=Nq,c.meta=b.model.getPaymentMeta(),c.goToActionMetadata=b.model.getGoToActionMeta(),c}return Oq(b,a),b.prototype.componentDidUpdate=function(){var a;(0,Ai.emojiFallback)(null===(a=this.subjectRef)||void 0===a?void 0:a.current,"r-ll-cmn")},b.prototype.didMount=function(){var a;this.handleIntersectViewport(),(0,Ai.emojiFallback)(null===(a=this.subjectRef)||void 0===a?void 0:a.current,"r-ll-cmn")},b.prototype.handleInnerEvent=function(a){var b=this.props.model;switch(a.type){case Kh.flagged:return void ce()(["letters_letter-item","toggle_flagged_".concat(!b.get("flags.flagged"))]);case Kh.unread:return void ce()(["letters_letter-item","toggle_unread_".concat(!b.get("flags.unread"))]);case Kh.clickAvatar:ce()(["letters_letter-item",this.props.selected?"deselect":"select"])}},b.prototype.hasBadge=function(){return!this.props["disable-subject"]&&!!this.getCounter()},b.prototype.getAttachesPreviewCondition=function(){return!(this.state.fetchAttaches&&!this.state.messagesAttaches)&&"none"===Gi.getPaymentDieDisplayMode.call(this)},b.defaultProps={"layout-mode":"2pane"},b}(h().Component),Qq=(0,ze.v$)("list-letter-common",Pq),Rq=function(){return(Rq=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++)for(var e in b=arguments[c])if(Object.prototype.hasOwnProperty.call(b,e))a[e]=b[e];return a}).apply(this,arguments)},Sq=new nf("llct"),Tq=function(a){var b=a.children,c=a.enabled,d=a.className;return c?h().createElement("div",{className:d},b):h().createElement(h().Fragment,null,b)};function Uq(){var a,b,c,d,e=Rq(Rq({},this.props),this.state),f=e.model,g=e.indent,i=e["pony-mode"],j=e.messagesAttaches,k=this.getSubject(),l=this.getGoToActionDisplayMode(),m="none"===l?this.getPaymentDieDisplayMode():"none",n=this.getUnsubscribeSender(),o="none"===l&&this.shouldShowUniversalPaymentDie(),p=this.getAttachesModes(!0,j),q=this.getAttaches(p,j),r=(0,Be.isListLetterActionButtonsEnabled)(f,e.search),t=!!(null===(d=null==f?void 0:f.isSchedule)||void 0===d?void 0:d.call(f)),u=f.getFolder(),v=t?(0,Bi.scheduleDate)(f.get("send_date")):u.get("name"),w=f.is("flags.attach"),x=f.is("flags.flagged"),y=s.ENABLE_TAGS&&!this.getCounter(),z=s.ENABLE_TAGS&&f.is("flags.tags")&&!!f.get("flags.tags").length,A=(y||z)&&!e.showfolder,B=n&&!o&&"none"===m,C=e["show-attaches"]&&this.getAttachesPreviewCondition()&&"none"===l;e["show-attaches"]&&this.getAttachesPreviewCondition();var D=!("none"!==l||z&&!e.search||o||(e.search||B)&&i),E="full"===m?e["payment-die-with-indent"]:"",F=i||r||z||s.ENABLE_TAGS,G="full"!==l&&(i||!o&&!B&&r),H=this.getCategory(),I=this.hasBadge()&&h().createElement("div",{"data-qa-id":(0,Ub.qa)("letter:badge"),className:Sq.elem("badge")},h().createElement(Jc,{counter:this.getCounter(),compact:!0,unread:f.is("flags.unread"),component:Oi()})),J=this.getSnippetValue();return h().createElement("a",{style:e.style,"data-qa-id":(0,Ub.qa)(this.rootQaId()),"data-qa-safe":(0,Ub.qa)(String(e.isReliable)),"data-qa-official":(0,Ub.qa)(String(e.isOfficial)),"data-qa-index":(0,Ub.qa)(f.meta("_ui-index")),onClick:(0,ze.CH)(this,"click"),onDragStart:(0,ze.CH)(this,{prevent:!0,name:"unused"}),onContextMenu:(0,ze.CH)(this,"contextmenu"),className:Sq.root({"enable-user-select":e["enable-user-select"],"pony-mode":i,"has-indent":g,active:e.selected||e.active,selected:e.selected,open:e.active,first:e.first,last:e.last,firstSelected:e.isFirstSelected,lastSelected:e.isLastSelected,new:!0,"new-selection":!0,reliable:e.isImportantReliable,official:e.isOfficialGreen,"small-snippet":G},{addClass:["js-letter-list-item"]}),href:e.href,tabIndex:-1,"data-id":f.get("id"),"data-draggable-id":f.get("id"),"data-uidl-id":f.get("last")},h().createElement("div",{className:Sq.elem("container",{"pony-mode":i,"small-snippet-container":G})},h().createElement("div",{className:Sq.elem("background",{active:e.selected||e.active})}),h().createElement("div",{className:Sq.elem("header")},h().createElement("div",{"data-qa-id":(0,Ub.qa)("unread"),className:Sq.elem("read-status")},h().createElement(mk,{state:f.is("flags.unread"),"is-forwarded":f.is("flags.forward"),"is-replied":f.is("flags.reply"),model:f,shift:i,remitEvents:{toggle:{prevent:!0,name:Kh.unread}},remitDetails:{model:f},broadcastEvent:(0,ze.Yv)(this)})),h().createElement("div",{"data-qa-id":(0,Ub.qa)("avatar"),className:Sq.elem("avatar",{unread:f.is("flags.unread")})},h().createElement(Kj,{state:e.selected,imgUrl:this.getImageSrc(),darkMode:this.props.darkMode,verified:e.isReliable,official:e.isOfficial,size:i?"common":"compact",remitEvents:{toggle:{prevent:!0,name:Kh.clickAvatar}},broadcastEvent:(0,ze.Yv)(this)}))),h().createElement("div",{className:Sq.elem("content",{unread:f.is("flags.unread")})},h().createElement("div",{className:Sq.elem("row",{top:!0})},h().createElement("div",{className:Sq.elem("correspondent",{new:!0})},h().createElement(Qj,{"qa-id":(0,Ub.qa)("correspondent"),state:this.getCorrespondent(),title:this.getCorrespondentTooltip(),dangerous:this.isProbablyPhishing()})),h().createElement("div",{className:Sq.elem("secondary-data")},!!H&&h().createElement("div",{className:Sq.elem("panel-item",{category:!0})},h().createElement(Jc,{flat:!0,short:!0,name:H,size:"m",component:Te()})),t&&h().createElement("div",{className:Sq.elem("panel-item")},h().createElement(Jc,{date:f.get("send_date"),component:Yi(),key:"list-letter-schedule-status"})),s.ENABLE_MENTIONS&&(f.is("flags.mention")||f.is("flags.mention_unread"))&&h().createElement("div",{className:Sq.elem("panel-item")},h().createElement(gk,{unread:f.is("flags.mention_unread")})),w&&!e["disable-attach"]&&h().createElement("div",{className:Sq.elem("panel-item",{"attach-status":!0})},h().createElement(Jc,{component:Mi(),compact:!0,key:"list-letter-attach-status"})),h().createElement("div",{title:this.getDateTooltip(t),className:Sq.elem("date",{new:!0})},(0,Bi.letterDate)(f.get("date"),t)),h().createElement("div",{className:Sq.elem("flag",{new:!0})},h().createElement(Wj,{hideInactive:!0,priority:e.priority,important:this.isImportant(),state:x,remitEvents:{toggle:{prevent:!0,name:Kh.flagged}},remitDetails:{model:f},broadcastEvent:(0,ze.Yv)(this)})))),h().createElement("div",{className:Sq.elem("row",{middle:!0,search:e.search,columns:F}),ref:this.contentRowRef},!F&&I,h().createElement(Tq,{enabled:F,className:Sq.elem("main-content")},!e["disable-subject"]&&h().createElement("div",{"data-qa-id":(0,Ub.qa)("subject"),title:this.getSubjectTooltip(),className:Sq.elem("subject")},h().createElement(Jc,{key:k,inlineRoot:!0,subject:k,color:e.search?f.meta("search_subject.color"):null,search:e.search,component:aj()})),D&&h().createElement("div",{"data-qa-id":(0,Ub.qa)("snippet"),className:Sq.elem("snippet",(a={search:e.search,overflow:B},a["hide-on-hover"]=y&&!e.search,a))},h().createElement(Jc,{key:J,inlineRoot:!0,value:J,color:e.search?f.meta("search_snippet.color"):null,search:e.search,component:$i()})),h().createElement("div",{className:Sq.elem("content-buttons")},o&&h().createElement(Jc,{className:Sq.elem("content-button-wrapper"),fluid:!0,model:e.model,"layout-type":e["layout-mode"],"pony-mode":i,component:Wi(),"pud-fluid":!0}),"none"!==l&&h().createElement(dk,{model:f,meta:this.goToActionMetadata,layoutMode:"3pane",mode:l}),B&&h().createElement(Jc,{className:Sq.elem("content-button-wrapper"),fluid:!0,"layout-mode":"3pane","pony-mode":i,unsubscribeSender:n,model:f,useMediators:["unsubscribe-actions","themes-manager"],component:cj()}),A&&h().createElement("div",{className:Sq.elem("tags")},h().createElement(sk,{model:f,tags:f.get("flags.tags"),rightSideDropdown:!0,compact:i&&!e.search,readonly:!y})))),F&&I),e.showfolder&&!z&&h().createElement("div",{className:Sq.elem("folder",(b={},b["hide-on-hover"]=y&&!z,b))},h().createElement(Jc,{title:v,text:u.get("name"),"data-qa-id":(0,Ub.qa)("folder"),component:Qi()})),e.showfolder&&h().createElement("div",{className:Sq.elem("folder-tags",(c={hidden:!z},c["show-on-hover"]=y&&!z,c))},h().createElement(sk,{model:f,tags:f.get("flags.tags"),folder:u.get("name"),rightSideDropdown:!0})))),m&&"none"!==m&&h().createElement("div",{className:Sq.elem("payment-die-container",{noindent:!1===E,"pony-mode":i,compact:"compact"===m,metathread:e["in-metathread"]})},"compact"===m&&h().createElement(Jc,{model:e.model,standalone:!0,"layout-mode":"3pane","pony-mode":i,component:Si()}),"full"===m&&h().createElement(Jc,{model:e.model,"layout-mode":"3pane","icon-container-mode":!1===E?"wide":"narrow",component:Ui()})),C&&h().createElement(h().Fragment,null,j?h().createElement(Jc,{fluid:!0,model:e.model,"attaches-list":q.attachesList,"more-attaches-list":q.moreAttachesList,"layout-mode":"3pane","all-count":j.length,vertical:p.vertical,"pony-mode":i,metathread:e["in-metathread"],remitEvents:{attach:"previewattach",more:"previewattach",moreinvalid:"openletter"},broadcastEvent:(0,ze.Yv)(this),key:"list-letter-preview-attaches",component:Pk()}):h().createElement(h().Fragment,null,h().createElement(Jc,{fluid:!0,attachesCount:f.get("attachments_count"),isCompact:!0,"pony-mode":i,metathread:e["in-metathread"],key:"list-letter-preview-stub",component:Rk()}))),r&&h().createElement(Xk,{compact:!0,model:f,ponyMode:i,broadcastEvent:(0,ze.Yv)(this)}),!e.hideDelimeter&&h().createElement(Jc,{compact:!0,full:e["full-delimiter"],ponymode:i,indent:e.indent,indentRight:!0,component:Ki()}),h().createElement(Jc,{last:!0,compact:!0,ponymode:i,indent:e.indent,indentRight:!0,component:Ki()}))}var Vq=function(){var a=function(b,c){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)if(Object.prototype.hasOwnProperty.call(b,c))a[c]=b[c]})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw new TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),Wq=function(a){function b(b){var c=a.call(this,b)||this;return c.state={},c.contentRowRef=h().createRef(),c.getSubject=Fi.getSubject,c.getImageSrc=Fi.getImageSrc,c.isProbablyPhishing=Fi.isProbablyPhishing,c.getCorrespondent=Fi.getCorrespondent,c.getCorrespondentTooltip=Fi.getCorrespondentTooltip,c.getDateTooltip=Fi.getDateTooltip,c.getSubjectTooltip=Fi.getSubjectTooltip,c.getSnippetValue=Fi.getSnippetValue,c.getCounter=Fi.getCounter,c.getCategory=Fi.getCategory,c.getAttaches=Ci.getAttaches,c.getAttachesModes=Ei.getAttachesModes,c.isImportant=Fi.isImportant,c.getGoToActionDisplayMode=zi.getGoToActionDisplayMode,c.getPaymentDieDisplayMode=Gi.getPaymentDieDisplayMode,c.shouldShowUniversalPaymentDie=Gi.shouldShowUniversalPaymentDie,c.shouldHideTransactionCategory=Gi.shouldHideTransactionCategory,c.getUnsubscribeSender=Fi.getUnsubscribeSender,c.handleIntersectViewport=Fi.handleIntersectViewport,c.rootQaId=Fi.rootQaId,c.letterDate=Bi.letterDate,c.render=Uq,c.meta=b.model.getPaymentMeta(),c.goToActionMetadata=b.model.getGoToActionMeta(),c}return Vq(b,a),b.prototype.componentDidUpdate=function(){var a;(0,Ai.emojiFallback)(null===(a=this.contentRowRef)||void 0===a?void 0:a.current,"r-ll-cmp")},b.prototype.didMount=function(){var a;this.handleIntersectViewport(),(0,Ai.emojiFallback)(null===(a=this.contentRowRef)||void 0===a?void 0:a.current,"r-ll-cmp")},b.prototype.handleInnerEvent=function(a){var b=this.props.model;switch(a.type){case Kh.flagged:return void ce()(["letters_letter-item","toggle_flagged_".concat(!b.get("flags.flagged"))]);case Kh.unread:return void ce()(["letters_letter-item","toggle_unread_".concat(!b.get("flags.unread"))]);case Kh.clickAvatar:ce()(["letters_letter-item",this.props.selected?"deselect":"select"])}},b.prototype.getAttachesPreviewCondition=function(){return!(this.state.fetchAttaches&&!this.state.messagesAttaches)&&"none"===Gi.getPaymentDieDisplayMode.call(this)},b.prototype.hasBadge=function(){return!this.props["disable-subject"]&&!!this.getCounter()},b.prototype.getAvatarIndent=function(){if(this.props["pony-mode"])if(this.props.indent)return"left";else return"right";return!1},b.defaultProps={"layout-mode":"3pane"},b}(h().Component),Xq=(0,ze.v$)("list-letter-compact",Wq,{syncMediatorsOnRender:!1}),Yq=nc(3316),Zq=nc(3248),$q=nc.n(Zq),_q=nc(9834),ar=nc.n(_q),br=nc(7400),cr=nc.n(br);function dr(a){var b=this.props,c=b.model,d=b.ponymode,e=b.first,f=b.last,g=b.compact,i=b.selected,j=b.router,k=c.isExpanded(),l=this.state["short-dropdown"],m=this.state["short-text"];switch(!0){case!g:return h().createElement(Jc,{expanded:k,first:e,last:f,model:c,"pony-mode":d,selected:i,isFirstSelected:b.isFirstSelected,isLastSelected:b.isLastSelected,"has-selected":b["has-selected"],"short-text":m,sticky:a,touch:b.touch,newSelection:b.newSelection,smallUnreadBtn:!0,useMediators:["letters-actions","folders-actions","folders-navigation"],remitEvents:{click:"click:metathread-item",contextmenu:"rightclick",avatar:"click:metathreadavatar",link:"click:metathread-link",cleanmaster:"click:cleanmaster",scrollintoself:"scrollintoself",disable:"click:disable"},broadcastEvent:(0,ze.Yv)(this),remitDetails:c,component:$q(),router:j,redirectUrl:s.METATHREAD_REDIRECT&&this.getUrl(),key:"metathread-head-common"});case g&&k:return h().createElement(Jc,{first:e,last:f,model:c,"pony-mode":d,selected:i,isFirstSelected:b.isFirstSelected,isLastSelected:b.isLastSelected,"has-selected":b["has-selected"],"short-dropdown":l,sticky:a,touch:b.touch,newSelection:b.newSelection,smallUnreadBtn:!0,useMediators:["letters-actions","folders-actions","folders-navigation"],remitEvents:{click:"click:metathread-item",contextmenu:"rightclick",avatar:"click:metathreadavatar",link:"click:metathread-link",cleanmaster:"click:cleanmaster",scrollintoself:"scrollintoself",disable:"click:disable"},broadcastEvent:(0,ze.Yv)(this),remitDetails:c,component:cr(),router:j,redirectUrl:s.METATHREAD_REDIRECT&&this.getUrl(),key:"metathread-head-compact-expanded"});default:return h().createElement(Jc,{first:e,last:f,model:c,"pony-mode":d,selected:i,isFirstSelected:b.isFirstSelected,isLastSelected:b.isLastSelected,"short-dropdown":l,newSelection:b.newSelection,smallUnreadBtn:!0,touch:b.touch,useMediators:["letters-actions","folders-actions","folders-navigation"],remitEvents:{click:"click:metathread-item",contextmenu:"rightclick",avatar:"click:metathreadavatar",link:"click:metathread-link",cleanmaster:"click:cleanmaster",scrollintoself:"scrollintoself"},broadcastEvent:(0,ze.Yv)(this),remitDetails:c,component:ar(),router:j,redirectUrl:s.METATHREAD_REDIRECT&&this.getUrl(),key:"metathread-head-compact"})}}var er=new nf("metathread");function fr(){var a=this.props,b=a.model,c=a.ponymode,d=a.first,e=a.last,f=a.compact,g=a.selected,i=a.disableSpacer,j=b.isExpanded(),k=this.isStickyEnabled()&&j&&a.sticky;return h().createElement("div",{style:a.style,className:er.root({first:d,last:e,expanded:j,collapsed:!j,sticky:k,"first-sticky":d&&k,active:g,"new-selection":a.newSelection,firstSelected:a.isFirstSelected,lastSelected:a.isLastSelected}),onContextMenu:(0,ze.CH)(this,"contextmenu")},!d&&!i&&h().createElement("div",{className:er.elem("spacer")}),h().createElement("div",{className:er.elem("contain"),ref:this.containRef},this.renderMetathreadBlock(k),!a.hideDelimeter&&h().createElement(Jc,{full:j,compact:f,ponymode:c,"data-qa-id":(0,Ub.qa)("qqq1"),indentRight:a.newSelection,component:Ki()}),!a.newSelection&&h().createElement(Jc,{last:!0,compact:f,ponymode:c,"data-qa-id":(0,Ub.qa)("qqq2"),indentRight:a.newSelection,component:Ki()})))}var gr,hr=function(){var a=function(b,c){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)if(Object.prototype.hasOwnProperty.call(b,c))a[c]=b[c]})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw new TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),ir=function(a){function b(){var b=null!==a&&a.apply(this,arguments)||this;return b.containRef=h().createRef(),b.events={"click:metathread-item":"onMetathreadItemClick",scrollintoself:"scrollIntoSelf"},b.state={},b.getUrl=Yq.block.getUrl.bind(b),b.onMetathreadItemClickRedirect=Yq.block.onMetathreadItemClickRedirect.bind(b),b.onMetathreadItemClick=Yq.block.onMetathreadItemClick.bind(b),b.scrollIntoSelf=Yq.block.scrollIntoSelf.bind(b),b.isStickyEnabled=Yq.block.isStickyEnabled,b.renderMetathreadBlock=dr,b.render=fr,b}return hr(b,a),b.prototype.componentDidMount=function(){var a;(0,Ai.emojiFallback)(null===(a=this.containRef)||void 0===a?void 0:a.current,"r-mtr")},b.prototype.componentDidUpdate=function(){var a;(0,Ai.emojiFallback)(null===(a=this.containRef)||void 0===a?void 0:a.current,"r-mtr")},b}(h().Component),jr=(0,ze.v$)("metathread",ir),kr=!(!window.performance||"function"!=typeof performance.now||"function"!=typeof requestAnimationFrame),lr=function(a,b,c){if(void 0===c)c={measureFps:!0,silent:!1};var d=this;this.component=a,this.name=b,this.options=c,this.mounted=function(){(0,ze.pd)(d.component).broadcast("scrollable:mount",{scrollableElement:d.component.getScrollableEl(),name:d.name})},this.unmounted=function(){(0,ze.pd)(d.component).broadcast("scrollable:unmount",{scrollableElement:d.component.getScrollableEl(),name:d.name}),delete d.component,window.clearTimeout(d._scrollingPid)},this.handleScroll=function(){if(!d.options.silent)(0,ze.pd)(d.component).broadcast("scroll:change");if(kr&&d.options.measureFps){if(!d._scrollingPid)d._scrollingFrames=0,d._scrollingStartTs=performance.now(),requestAnimationFrame(d.handleAnimationFrame);window.clearTimeout(d._scrollingPid),d._scrollingPid=window.setTimeout(d.handleScrollEnd,200)}},this.handleScrollEnd=function(){delete d._scrollingPid;var a=(performance.now()-d._scrollingStartTs)/1e3,b=Math.round(d._scrollingFrames/a);if(ce()({type:"fps_scroll_".concat(d.name),value:b,intervals:[["new",b]]}),s.IS_DEBUG)console.log("FPS",d.name,b);(0,ze.pd)(d.component).broadcast("scroll:end")},this.handleAnimationFrame=function(){if(d._scrollingPid)d._scrollingFrames++,requestAnimationFrame(d.handleAnimationFrame)}},mr="_1m5uryaWr_PmTQwTKgydf_",nr="_29RYYLK9KxqKFihwIfEQr_",or="_3Sjr0E9K1fxOKRTJZ7iy6-",pr="JCa22DvD8NGFYyrDy_3k0",qr="_22oo5Jw76aH7Lp2x0dkTaj",rr="VYmG5ahAslUPGaE0E2k2X",sr="_2DJwXZy25x4HEF_r6bIjiG",tr="_1qD1jUuUWka8LTJXa3_2qk",ur=function(){var a=function(b,c){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)if(Object.prototype.hasOwnProperty.call(b,c))a[c]=b[c]})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw new TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),vr=function(){return(vr=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++)for(var e in b=arguments[c])if(Object.prototype.hasOwnProperty.call(b,e))a[e]=b[e];return a}).apply(this,arguments)},wr=function(a,b,c){if(c||2===arguments.length)for(var d,e=0,f=b.length;e<f;e++)if(d||!(e in b)){if(!d)d=Array.prototype.slice.call(b,0,e);d[e]=b[e]}return a.concat(d||Array.prototype.slice.call(b))}([],Object.values(gp.blockDescription.events),!0),xr=Bf().getScope("dataset-letters");!function(a){a.heightChange="height:change",a.heightChangeClearCache="height:change:clear",a.heightChangeImmediate="height:change:immediate"}(gr||(gr={}));var yr,zr=new nf("dataset-letters"),Ar=function(a){var b=a.enabled,c=a.children;if(!b)return h().createElement(h().Fragment,null,c);else return h().createElement("div",{className:pr},c)},Br=function(a){var b,c=a.ponyMode,d=a.compact,e=a.withScrollbar,f=a.overEmpty,g=a.folder,i=a.parentFolder,j=a.broadcastEvent;return h().useEffect(function(){l().send("back-to-parent-show",{dwh:{pos:"letters",folder:g.id,parentFolder:i.id}})},[g.id,i.id]),h().createElement("span",{className:ca()(or,(b={},b[tr]=c,b[sr]=d,b[qr]=e,b[rr]=f,b))},h().createElement(Jc,{component:Je(),remitEvents:{click:{name:"back:to:parent:folder"}},remitDetails:{pos:"letters"},broadcastEvent:j,text:i.get("name"),title:i.get("name"),annotation:i.get("name"),ico:"arrow-back","data-qa-id":"letter_back_to_parent_folder",compact:c,pure:!0,"ico-text-top":!0,size:"m",nowrap:!0,useMediator:["folders-navigation"]}))},Cr=function(a){function b(b){var c,d=a.call(this,b)||this;if(d.state={name:"dataset-letters",darkMode:!1,withScrollbar:!1},d.list=h().createRef(),d.lastScrollTop=0,d.wasSmokescreenEnabled=!1,d.mountScrollPassed=!1,d.rootRef=h().createRef(),d.getScrollableEl=function(){return Ej().findDOMNode(d).querySelector(".ReactVirtualized__List")},d.scrollable=new lr(d,"dataset-letters"),d.events=vr(vr({},gp.blockDescription.events),((c={})[gr.heightChange]="updateHeights",c[gr.heightChangeClearCache]="updateHeightsWithClear",c[gr.heightChangeImmediate]="onRecalculateFromItem",c)),d._modelHeights={},d.detectScrollbar=Ao().debounce(function(){var a=d.props.showBackToParentFolder;if(s.METATHREAD_BACK_TO_INBOX&&s.BACK_TO_PARENT_AT_LETTERS&&a){var b=d.rootRef.current;if(b){var c=b.querySelector((0,kf.selector)(".ReactVirtualized__Grid")),e=b.querySelector((0,kf.selector)(".ReactVirtualized__Grid__innerScrollContainer"));if(c&&e){var f=window.getComputedStyle(c).width,g=window.getComputedStyle(e).width;if(f.endsWith("px")&&g.endsWith("px")){var h=+f.slice(0,f.length-2)-+g.slice(0,g.length-2)>6;if(d.state.withScrollbar!==h)d.setState({withScrollbar:h})}}}}},100,d),d.getEl=function(){return Ej().findDOMNode(d)},d.updateHeightsWithClear=function(a){d.updateHeights(a,!0)},d.overscanIndicesGetter=function(a){var b,c=Np(a);if(c.overscanStartIndex>0){for(var e=c.overscanStartIndex-1;e>0&&(null===(b=d.props.models[e])||void 0===b?void 0:b.is("datasetModel"));e--);c.overscanStartIndex=e}return c},d.updateHeights=function(a,b){var c,e;if(void 0===b)b=!1;var f=a.details.index;if("number"==typeof f){if(null===(c=d.list.current)||void 0===c||c.invalidateCellSizeAfterRender({columnIndex:0,rowIndex:f}),b)d.cache.clear(f,0),null===(e=d.list.current)||void 0===e||e.recomputeRowHeights(f)}else(0,m.coreLoggerDispatchSelfError)("rlist-update",new Error("index should be a number"))},d.onRecalculateFromItem=function(a){var b=a.details.index;if("number"==typeof b)d.recalculateItemsFromIndex(b);else(0,m.coreLoggerDispatchSelfError)("rlist-update",new Error("index should be a number"))},d.onAvatarClick=gp.blockDescription.onAvatarClick,d.preloadThreads=gp.blockDescription.preloadThreads,d.openDraft=gp.blockDescription.openDraft,d.isLetterSelected=gp.blockDescription.isLetterSelected,d.isEnableAttach=gp.blockDescription.isEnableAttach,d.getMainField=gp.blockDescription.getMainField,d.isSearch=gp.blockDescription.isSearch,d.shouldShowLetterPreview=gp.blockDescription.shouldShowLetterPreview,d.getLetterHref=gp.blockDescription.getLetterHref,d.isPriorityMessage=gp.blockDescription.isPriorityMessage,d.onPrepareDragElement=gp.blockDescription.onPrepareDragElement,d.onRightClick=gp.blockDescription.onRightClick,d.onLetterClick=gp.blockDescription.onLetterClick,d.onPreviewAttachClick=gp.blockDescription.onPreviewAttachClick,d.setDetailsForRightClick=gp.blockDescription.setDetailsForRightClick,d.goToLetter=gp.blockDescription.goToLetter,d.isTouchDevice=gp.blockDescription.isTouchDevice,d.isModelExpandedMetathread=gp.blockDescription.isModelExpandedMetathread,d.getItemHeight=gp.blockDescription.getItemHeight,d.isLetterActive=gp.blockDescription.isLetterActive,d.onPaginatorUp=gp.blockDescription.onPaginatorUp,d.letterMediators=["letters-actions","letter-attaches-preview","layout-manager","unsubscribe-actions"],d.remitEvents={clickavatar:"click:avatar",click:"click:letter",contextmenu:"rightclick",previewattach:"click:previewattach"},d.getKey=function(a){var b,c=d.props.models[a];if(!c)return(0,m.coreLoggerDispatchSelfError)("rlist",new Error("no model for index")),"invalid";var e=c.id;if(null===(b=c.isInMetathread)||void 0===b?void 0:b.call(c))return"".concat(c.get("folder"),":").concat(e);if(dp().isSpinner(c))return"".concat(c.is("visible"),":").concat(e);else return e},d.hasAdsBefore=function(a){for(var b=d.props.models,c=0;c<a;c+=1)if(b[c].is(Xo.advModelLabel))return!0;return!1},d.getRowHeight=function(a){var b=a.index,c=d.props,e=c.models,f=c.compact,g=c["pony-mode"],h=e[b];if(h.is($o.dividerModelLabel)){var i=8,j=0;if(0===h.get("idx")&&!d.hasAdsBefore(b))i=0;if(!f&&!g)j=32;else if(!f&&g)j=30;else if(f&&!g)j=28;else j=26;return j+i}if(dp().isSpinner(h)){var k=0;if(h.is("visible"))k=(0,Uo.getGenericItemHeight)(f,g);return d.cache.set(b,0,0,k),k}if((null==h?void 0:h.is("datasetModel"))||(null==h?void 0:h.is(ap.searchActionLetterLabel)))return d.cache.rowHeight({index:b});var l=d.getItemHeight(h);return d.cache.set(b,0,0,l),l},d.onScroll=function(a){if(d.lastScrollTop=a.scrollTop,d.mountScrollPassed)Lk().resetAttachmentDropdown(),d.props.onScroll(a),d.scrollable.handleScroll();else d.mountScrollPassed=!0},d.renderRow=function(a){var b=d.props.models,c=a.index,e=d.getPrevModel(b,c),f=d.getNextModel(b,c),g=b[a.index],i=(null==e?void 0:e.is("flags.bimi_important_msg"))&&s.SHOW_RELIABLE_ON_LETTER_LIST&&!s.DISABLE_GREEN_RELIABLE_ON_LETTER_LIST,j=(null==e?void 0:e.is("flags.official"))&&s.SHOW_OFFICIAL_ON_LETTER_LIST&&!s.DISABLE_GREEN_OFFICIAL_ON_LETTER_LIST,k=!1,l=!1,m=(0,Be.checkOfficialGreen)(g),n=(0,Be.checkOfficial)(g);if(!m&&!n)k=(0,Be.checkReliable)(g),l=(0,Be.checkImportantReliable)(g);var o,p=0===c||(null==e?void 0:e.is(_o.promoBlockLabel))||(null==e?void 0:e.is(bp.specProjectLetterLabel))||(null==e?void 0:e.is(Xo.advModelLabel))||(null==e?void 0:e.is(ep.tipLetterLabel))||(null==e?void 0:e.is($o.dividerModelLabel))||(null==e?void 0:e.is(ap.searchActionLetterLabel)),q={index:c,search:d.isSearch(),touch:d.isTouchDevice(),isFirst:p,hideDelimeter:p||i||j||l||m||s.HIDE_DELIMITER,isLast:!1,isReliable:k,isImportantReliable:l,isOfficialGreen:m,isOfficial:n,isPrevItemExpandedMetathread:null==e?void 0:e.is("metathreadFooter"),isNextItemExpandedMetathread:d.isModelExpandedMetathread(f),isNextSelected:f&&d.isLetterSelected(f),isPrevSelected:e&&d.isLetterSelected(e)},r={useMediators:d.letterMediators,remitDetails:{model:g,index:a.index},broadcastEvent:(0,ze.Yv)(d),style:a.style},t=function(a,b,c,d,e,f){var g,i,j;switch(!0){case a.is("heightCompensation"):return{component:tq()};case a.is("skeletonLetter"):return{component:xq()};case a.is($o.dividerModelLabel):return{component:ip(),title:a.get("title"),counter:a.get("counter"),compact:b.compact,ponyMode:b["pony-mode"],fit:f(),meta:a.get("meta"),id:a.get("id")};case a.is("promoBlockLetter"):return{component:Jq(),useMediators:["layout-manager","advert-manager"],remitEvents:{"promoblockletter:render":gr.heightChangeClearCache}};case a.is("welcomeBlockLetter"):return{component:Dq(),model:a,useMediators:["layout-manager","user-info","welcome-block-manager"]};case a.is("discountsBlockLetter"):return{component:nq(),discounts:b.router.model.discounts,"3pane":b.compact,search:e.search,threadsEnabled:c.threadsEnabled,router:b.router,folder:b.folder,useMediators:["layout-manager"]};case a.is("specProjectLetter"):return{skipWrapper:!1,el:h().createElement(Jc,vr({},d,{style:null,cacheKey:a.id,component:Lq(),compact:b.compact,"no-delimeter":!0,uid:a.id,remitEvents:{"specline:render":gr.heightChangeClearCache},useMediators:["letter-list-adv-optimizer","advert-manager"]}))};case a.is("advModel"):return{skipWrapper:!1,el:h().createElement(Jc,{cacheKey:a.id,component:pq(),rounded:!0,router:b.router,compact:b.compact,folder:b.folder.id,ponymode:b["pony-mode"],metathreadLastToggle:a.get("metathreadLastToggle"),uid:a.id,indent:a.is("inMetathread"),position:a.get("position"),index:a.get("index"),"no-delimeter":!0,"full-delimiter":e.isPrevItemExpandedMetathread,useMediators:["letter-list-adv-optimizer","advert-manager"]})};case a.is("baitLetter"):return{component:rq()};case a.is("spinnerLetter"):return{model:a,component:zq(),compact:b.compact,ponymode:b["pony-mode"],useMediators:["letters-loader"],remitEvents:{"state:toggle":gr.heightChangeImmediate}};case a.is("searchActionLetter"):return{component:vq(),model:a,compact:b.compact,href:c["search-in-excluded-folders-url"],useMediators:["search-manager"]};case a.is("tipLetter")&&(null===(g=tl().get(a.get("folder")))||void 0===g?void 0:g.isTrashLike()):return{component:Bq(),rounded:!0,borderless:!0,isNextSelected:e.isNextSelected,compact:b.compact,ponymode:b["pony-mode"],folder:b.folder,type:"trash:cleanup",useMediators:["folders-actions"]};case a.is("tipLetter")&&(null===(i=tl().get(a.get("folder")))||void 0===i?void 0:i.isSpam()):return{component:Bq(),rounded:!0,borderless:!0,isNextSelected:e.isNextSelected,compact:b.compact,ponymode:b["pony-mode"],folder:b.folder,type:"spam:cleanup",useMediators:["folders-actions"]};case a.is("flags.metathread"):var k=c.selected[a.id];return{skipWrapper:!0,el:h().createElement(jr,vr({},d,{model:a,compact:b.compact,ponymode:b["pony-mode"],first:e.isFirst,last:e.isLast,touch:e.touch,selected:k,hideDelimeter:e.hideDelimeter,isLastSelected:k&&!e.isNextSelected,isFirstSelected:k&&!e.isPrevSelected,sticky:!1,"full-delimiter":e.isPrevItemExpandedMetathread,"has-selected":null===(j=c.metathreadsWithSelected)||void 0===j?void 0:j[a.id],newSelection:!0,disableSpacer:!0,remitEvents:{"expand:toggle":gr.heightChange,contextmenu:"rightclick","click:metathreadavatar":"click:metathreadavatar","click-metathread-link":"click:metathread-link",scrollintoself:"scrollintoself"},useMediators:["metathreads-manager","letters-selection","layout-manager","folders-navigation"],router:b.router}))};case a.is("metathreadFooter"):return{component:Fq(),model:a,compact:b.compact,ponymode:b["pony-mode"],router:b.router,"hide-footer-spacer":e.isNextItemExpandedMetathread,useMediators:["layout-manager"]}}}(g,d.props,d.state,r,q,function(){return g.is($o.dividerModelLabel)&&0===g.get("idx")&&!d.hasAdsBefore(c)}),u=d.getKey(c);if(t&&"component"in t)return h().createElement(Bd,{id:"ltr-spec",key:u,logData:{key:u}},h().createElement(Bp,{cache:d.cache,parent:a.parent,rowIndex:a.index,width:d._mostRecentWidth},h().createElement("div",{style:a.style,"data-debug-key":(0,Ub.qa)(u)},h().createElement(Jc,vr({key:t.component},r,t,{style:null})))));else if(t){var v=t;return o=v.skipWrapper?v.el:h().createElement("div",{style:a.style,"data-debug-key":(0,Ub.qa)(u)},v.el),h().createElement(Bd,{id:"ltr-spec",key:u,logData:{key:u}},h().createElement(Bp,{cache:d.cache,parent:a.parent,rowIndex:a.index,width:d._mostRecentWidth},o))}var w=d.getLetterType();switch(w){case"list-letter-compact":return h().createElement(Bd,{id:"ltr-cmp",key:u,logData:{key:u}},h().createElement(Xq,vr({style:a.style,remitEvents:d.remitEvents},r,d.letterProps(b,c,q),d.letterPropsByType(w,g))));case"list-letter-common-touch":return h().createElement(Bd,{id:"llc-t",key:u,logData:{key:u}},h().createElement(dl,vr({style:a.style,remitEvents:d.remitEvents},r,d.letterProps(b,c,q),d.letterPropsByType(w,g))));case"list-letter-compact-touch":return h().createElement(Bd,{id:"llct-t",key:u,logData:{key:u}},h().createElement(gl,vr({style:a.style,remitEvents:d.remitEvents},r,d.letterProps(b,c,q),d.letterPropsByType(w,g))));case"list-letter-common":default:return h().createElement(Bd,{id:"ltr-cmn",key:u,logData:{key:u}},h().createElement(Qq,vr({style:a.style,remitEvents:d.remitEvents},r,d.letterProps(b,c,q),d.letterPropsByType(w,g))))}},d.renderNoLetters=function(a){var b=a.needShowBackToParentFolder,c=a.parentFolder,e=d.props,f=e.folder,g=e.router,i=e["letter-not-found"],j=e.search,k=e["search-letter"],l="empty-folder";switch(!0){case j&&!k:l="no-search";break;case i:l="no-letter"}return h().createElement("div",{className:ca()(mr,zr.root({empty:!0})),"data-qa-id":(0,Ub.qa)("dataset-letters")},h().createElement("div",{className:ca()(mr,lf().lookup("dataset__items"))},b&&s.BACK_TO_PARENT_AT_EMPTY_LETTERS&&h().createElement(Br,{broadcastEvent:(0,ze.Yv)(d),folder:f,parentFolder:c,ponyMode:d.props["pony-mode"],compact:d.props.compact,overEmpty:!0}),h().createElement(Jc,{component:Hq(),"full-height":!0,type:l,folder:f,router:g,useMediators:["layout-manager","folders-navigation","filter-manager","settings-filters-manager","compose-manager","search-manager","themes-manager","pony-mode"],className:lf().lookup("dataset-letters__empty")})))},d.cache=new Cp({fixedWidth:!0,keyMapper:d.getKey}),wr.forEach(function(a){d[a]=d[a].bind(d)}),s.IS_DEBUG)window.DatasetLetters=d;return d}return ur(b,a),b.prototype.componentDidMount=function(){var a=["scrollable-manager","advert-manager","letter-list-adv-optimizer"];(0,ze.Nh)("scrollable",this,a),(0,ze.Ce)(this,a),this.preloadThreads(),this.scrollable.mounted(),this.detectScrollbar();var b=this.props.folder;if(null==b?void 0:b.isMetathread())l().send("metathread_view",{dwh:{category:b.id,name:b.get("name")}});(0,Wo.sendAfterMountMetric)("letters"),(0,Vo.checkAdvertVisibility)()},b.prototype.UNSAFE_componentWillUpdate=function(a){if(a.folder!==this.props.folder||a["pony-mode"]!==this.props["pony-mode"]||a.compact!==this.props.compact)Jc.clearCache("letter-list-item-adv"),Jc.clearCache("spec-project-letter")},b.prototype.componentDidUpdate=function(a){var b;if(a.folder!==this.props.folder){this.preloadThreads();var c=this.props.folder;if(null==c?void 0:c.isMetathread())l().send("metathread_view",{dwh:{category:c.id,name:c.get("name")}})}if(a["pony-mode"]===this.props["pony-mode"]){if(a.models!==this.props.models)null===(b=this.list.current)||void 0===b||b.recomputeRowHeights();if(lf().isEnabled()&&!this.wasSmokescreenEnabled)this.wasSmokescreenEnabled=!0,this.recomputeHeightsWithClear();this.detectScrollbar()}else this.recomputeHeightsWithClear()},b.prototype.componentWillUnmount=function(){this.scrollable.unmounted()},b.prototype.isMounted=function(){return!0},b.prototype.recalculateItemsFromIndex=function(a){var b;null===(b=this.list.current)||void 0===b||b.recomputeRowHeights(a)},b.prototype.onScrollIntoModelByIndex=function(){},b.prototype.onPaginatorNavigate=function(){},b.prototype.scrollToTop=function(){this.list.current.scrollToPosition(0)},b.prototype.letterPropsByType=function(a,b){var c,d=null===(c=b.isInMetathread)||void 0===c?void 0:c.call(b);switch(a){case"list-letter-compact":return{active:this.isLetterActive(b),"pony-mode":this.props["pony-mode"]||d}}},b.prototype.getModelWithSkip=function(a,b,c){var d=c?1:-1,e=a[b+d];if(e&&!Zo().isBait(e))return e;else return a[b+2*d]},b.prototype.getPrevModel=function(a,b){return this.getModelWithSkip(a,b,!1)},b.prototype.getNextModel=function(a,b){return this.getModelWithSkip(a,b,!0)},b.prototype.letterProps=function(a,b,c){var d,e=this.getPrevModel(a,b),f=this.getNextModel(a,b),g=a[b],h=a.length,i=null===(d=g.isInMetathread)||void 0===d?void 0:d.call(g),j=null==e?void 0:e.is("metathreadFooter"),k=this.isLetterSelected(g);return{model:g,last:b===h-1||b===h-2&&(null==f?void 0:f.is("spinnerLetter")),first:c.isFirst,hideDelimeter:c.hideDelimeter,isReliable:c.isReliable,isImportantReliable:c.isImportantReliable,isOfficialGreen:c.isOfficialGreen,isOfficial:c.isOfficial,router:this.props.router,"pony-mode":this.props["pony-mode"],darkMode:this.state.darkMode,"disable-attach":!this.isEnableAttach(),"main-field":this.getMainField(g),"show-attaches":this.shouldShowLetterPreview(g),selected:k,isLastSelected:k&&(!f||!this.isLetterSelected(f)),isFirstSelected:k&&(!e||!this.isLetterSelected(e)),folder:this.props.folder,search:this.isSearch(),showfolder:this.isSearch(),indent:i,priority:this.isPriorityMessage(g),"in-metathread":i,"full-delimiter":j,href:this.getLetterHref(g,this.props.folder),qaIndex:g.meta("_ui-index")}},b.prototype.recomputeHeightsWithClear=function(){var a;this.cache.clearAll(),null===(a=this.list.current)||void 0===a||a.recomputeRowHeights()},b.prototype.checkIfNeedsRecompute=function(a){var b=a.width;if(null!==this._mostRecentWidth&&this._mostRecentWidth!==b)this.recomputeHeightsWithClear();this._mostRecentWidth=b},b.prototype.scrollTo=function(a,b){var c;xr.add("scrollTo",{_posX:a}),null===(c=this.list.current)||void 0===c||c.scrollToPosition(b)},b.prototype.reset=function(){this.scrollTo(0,0)},b.prototype.getScrollPos=function(){return{x:0,y:this.lastScrollTop}},b.prototype.getLetterType=function(){var a=this.props.compact;switch(!0){case this.isTouchDevice()&&a:return"list-letter-compact-touch";case this.isTouchDevice():return"list-letter-common-touch";case a:return"list-letter-compact";default:return"list-letter-common"}},b.prototype.onRowsRendered=function(a){this._lastRenderedRows=a;var b=this.props.models.slice(a.startIndex,a.stopIndex);(0,fp.sendAttachesRadar)(b)},b.prototype.renderList=function(a){var b=this,c=a.needShowBackToParentFolder,d=a.parentFolder,e=this.props,f=e.models,g=e.onScrollToBottom,i=e.folder,j=vr({},this.state),k=this.state.withScrollbar;return h().createElement("div",{className:ca()(mr,zr.root({new:!0,withToolbar:c})),"data-qa-id":(0,Ub.qa)("dataset-letters"),ref:this.rootRef},c&&h().createElement(Br,{broadcastEvent:(0,ze.Yv)(this),folder:i,parentFolder:d,ponyMode:this.props["pony-mode"],compact:this.props.compact,withScrollbar:k}),h().createElement(Ar,{enabled:c},h().createElement(iq,{isRowLoaded:function(a){var b=a.index;return!!f[b]},loadMoreRows:function(a){return g(a),Promise.resolve()},rowCount:1/0},function(a){var c=a.onRowsRendered;return h().createElement(yp,null,function(a){var d=a.width,e=a.height;return b.checkIfNeedsRecompute({width:d}),h().createElement(lq,vr({className:ca()(lf().lookup("dataset__items"),lf().lookup("scrollable_styled"),lf().lookup("scrollable_content"),nr),overscanIndicesGetter:b.overscanIndicesGetter,deferredMeasurementCache:b.cache},j,{onRowsRendered:function(a){c(a),b.onRowsRendered(a)},onScroll:b.onScroll,ref:b.list,width:d,height:e,rowHeight:b.getRowHeight,rowCount:f.length,rowRenderer:b.renderRow}))})})))},b.prototype.render=function(){var a=this.props,b=a.folder,c=a.folders,d=a.showBackToParentFolder,e=null==c?void 0:c.find(function(a){return a.id===(null==b?void 0:b.get("parent"))}),f=!!(s.METATHREAD_BACK_TO_INBOX&&s.BACK_TO_PARENT_AT_LETTERS&&d&&e);if(!this.props.models.length||this.props["letter-not-found"])return this.renderNoLetters({needShowBackToParentFolder:f,parentFolder:e});else return this.renderList({needShowBackToParentFolder:f,parentFolder:e})},b}(h().Component),Dr=(0,ze.v$)("dataset-letters",Cr),Er=[i18n("январь"),i18n("февраль"),i18n("март"),i18n("апрель"),i18n("май"),i18n("июнь"),i18n("июль"),i18n("август"),i18n("сентябрь"),i18n("октябрь"),i18n("ноябрь"),i18n("декабрь")],Fr=((yr={})[ua.TODAY]=i18n("cегодня"),yr[ua.YESTERDAY]=i18n("вчера"),yr[ua.WEEK]=i18n("за эту неделю"),yr[ua.MONTH]=i18n("за этот месяц"),yr[ua.UNREAD]=i18n("Непрочитанные"),yr[ua.FLAGGED]=i18n("С флагом"),yr[ua.ATTACH]=i18n("С вложениями"),yr[ua.FROM]=i18n("От"),yr[ua.TO]=i18n("Кому"),yr[ua.SUBJECT]=i18n("Тема"),yr[ua.QUERY]=i18n("Везде"),yr[ua.ORDER]=i18n("Заказы"),yr[ua.FINANCE]=i18n("Финансы"),yr[ua.REGISTRATION]=i18n("Учётные записи"),yr[ua.TRAVEL]=i18n("Путешествия"),yr[ua.EVENT]=i18n("Билеты"),yr[ua.FEES]=i18n("Штрафы и налоги"),yr[ua.OFFICIAL_LETTERS]=i18n("Госписьма"),yr[ua.DOCUMENT_SCANS]=i18n("Сканы документов"),yr[ua.SEARCH_IN]=i18n("искать"),yr[ua.TAGGED_PERSONAL]=i18n("Личное"),yr[ua.TAGGED_DOCUMENTS]=i18n("Документы"),yr[ua.TAGGED_IMPORTANT]=i18n("Важно"),yr[ua.TAGGED_URGENT]=i18n("Срочно"),yr[ua.TAGGED_NEEDS_REPLY]=i18n("Ответить"),yr);var Gr,Hr=function(){var a=function(b,c){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)if(Object.prototype.hasOwnProperty.call(b,c))a[c]=b[c]})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw new TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),Ir=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}return Hr(b,a),b.prototype.render=function(){var a=this.props.nanoMode?Ob:Nb;return h().createElement(sa.ColouredIconContext.Provider,{value:a},this.props.children)},b}(h().PureComponent),Jr=function(){var a=function(b,c){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)if(Object.prototype.hasOwnProperty.call(b,c))a[c]=b[c]})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw new TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),Kr=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}return Jr(b,a),b.prototype.render=function(){return h().createElement(sa.LocalizationContext.Provider,{value:this.props.value},this.props.children)},b}(h().PureComponent);!function(a){a.NORMAL="normal",a.NORMAL_SMALL="normalSmall",a.COMPACT="compact"}(Gr||(Gr={}));var Lr=function(){var a=function(b,c){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)if(Object.prototype.hasOwnProperty.call(b,c))a[c]=b[c]})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw new TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),Mr=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}return Lr(b,a),b.prototype.render=function(){var a=this.props.ponyMode;return h().createElement(sa.ModeContext.Provider,{value:a?Gr.COMPACT:Gr.NORMAL},this.props.children)},b}(h().PureComponent),Nr=function(){var a=function(b,c){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)if(Object.prototype.hasOwnProperty.call(b,c))a[c]=b[c]})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw new TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),Or=function(){return(Or=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++)for(var e in b=arguments[c])if(Object.prototype.hasOwnProperty.call(b,e))a[e]=b[e];return a}).apply(this,arguments)},Pr=Or(Or({},Fr),{intervalText:function(a){var b=a.type,c="";if(Fr[b])c=Fr[b];var d=new Date(1e3*a.from);if(b===ua.MONTHS)c=Er[d.getMonth()]||"";if(b===ua.YEARS)c=i18n("за {year}",{year:d.getFullYear()});return c=c[0].toUpperCase()+c.slice(1)},moreText:function(a){return i18n("и ещё {n}",{n:a})},daysText:function(a){return i18n.plural(a,[i18n("{n} дней",{n:a}),i18n("{n} день",{n:a}),i18n("{n} дня",{n:a})])},addText:function(a){switch(a){case sa.OperandSuggestAddTypes.FROM:return i18n("по отправителю");case sa.OperandSuggestAddTypes.SEARCH_INTERNET:return i18n("в интернете");default:return""}}}),Qr=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}return Nr(b,a),b.prototype.render=function(){var a=this.props,b=a.ponyMode,c=a.nanoMode;return h().createElement(Ir,{nanoMode:b&&c},h().createElement(Kr,{value:Pr},h().createElement(Mr,{ponyMode:b},this.props.children)))},b}(h().PureComponent),Rr=nc(5920),Sr=nc(7115),Tr=nc(5264),Ur=nc(5125),Vr=nc.n(Ur),Wr=function(a){var b=void 0===a?{}:a,c=b.height,d=b.width,e=b.name,f=void 0===e?"":e,g=b.email,h=void 0===g?"":g;if(d<32||c<32)d=32,c=32;return Xm()({email:h,name:f,width:d,height:c})},Xr=function(a){var b=a.children,c=(0,g.useMemo)(function(){return{createUrl:Wr}},[]);return h().createElement(sa.AvatarContext.Provider,{value:c},b)},Yr="_3UG8ECLkpwEU8l49f--EUt",Zr="xIuO6wSw8nezfbcMvMfaq",$r="_2xkD24AINYqp-cRCPutgfJ",_r="_2Hrpw6lvdrwls5u2yLix4x",as="_3k0V5nFgoxSjmsqBX8ypFg",bs="_2e6OsQnv4_rgm5F8dE7ldQ",cs="e1vNIzlBa6UApOLrnaQMY",ds="_3z8wuQW-6-G865YKdF3iCO",es="_30NfWRY8h2ACt23xLycfYl",fs="_1hQ5Wi0Sf8XxCReuoM6Z_v";function gs(a){var b,c,d,e,g=a.contact,i=a.text,j=a.subject,k=a.found,l=a.onlyEmailText,m=a.avatarSmall,n=a.tooltip,o=a.boldText,p=a.avatarSize,q=void 0===p?sa.AvatarSizes.s32x32:p,r=ca()(((b={})[$r]=!0,b[_r]=!!i,b[as]=m,b)),s=ca()(((c={})[ds]=!0,c)),t=ca()(((d={})[es]=!0,d)),u=l||!g.name,v=ca()(((e={})[bs]=!0,e[cs]=u,e)),w=u?g.email:g.name,x=null!==(null!=k?k:null),y=h().createElement("div",{className:Zr},i&&h().createElement(Zf,{className:s,text:j||i}),h().createElement(Xr,null,h().createElement(sa.Avatar,{className:r,model:g,size:q})),h().createElement("div",{className:v},h().createElement(Zf,{className:t,text:w,bold:o}),!u&&h().createElement(Zf,{className:t,text:g.email,type:Uf.SECONDARY,bold:o})),x&&h().createElement(Zf,{className:fs,text:k.toString()}));return h().createElement("div",{className:Yr},function(a,b){if(b)return h().createElement(f.Tooltip,{placement:"rightTop",overlay:b,overlayContainer:document.body},a);else return a}(y,n))}var hs="_17BcqoINrJbfoEjkhS70b_",is="uWr0PMvnWHgtSeD5bZ7oc",js="_3A2PW_lqyMdSgl6JP7IYz5",ks="_1zYbF-t1YYgeSvkGivHBSO",ls=i18n("<Без темы>");function ms(a){var b,c,d,e=a.message,f=ca()(((b={})[is]=!0,b)),g=ca()(((c={})[ks]=!0,c)),i=ca()(((d={})[js]=!0,d));return h().createElement("div",{className:hs},h().createElement(Xr,null,h().createElement(sa.Avatar,{className:f,model:e,size:sa.AvatarSizes.s32x32})),h().createElement("div",{className:i},h().createElement(Zf,{className:g,text:e.subject||ls}),h().createElement(Zf,{className:g,text:e.name||e.email,type:Uf.SECONDARY})))}var ns="_2WVqp2iHOmm4cSPJ2JOofx",os="_36GwOVrRcJV4f6ql7FCTLr",ps=function(){var a=function(b,c){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)if(Object.prototype.hasOwnProperty.call(b,c))a[c]=b[c]})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw new TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),qs=function(){return(qs=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++)for(var e in b=arguments[c])if(Object.prototype.hasOwnProperty.call(b,e))a[e]=b[e];return a}).apply(this,arguments)};function rs(a){var b=String(a);if(1===b.length)return"0".concat(b);else return b}var ss,ts=function(a){function b(b){var c=a.call(this,b)||this;return c.handleGenericClick=c.handleGenericClick.bind(c),c.handleMouseEnter=c.handleMouseEnter.bind(c),c.handleMouseDown=c.handleMouseDown.bind(c),c.handleClick=c.handleClick.bind(c),c}return ps(b,a),b.renderRequest=function(a,b){var c,d,e,f,g,i,j,k,l=[],m=[];if(void 0!==a.query)l.push(h().createElement(h().Fragment,null,a.query)),m.push(a.query);if(void 0!==a.subject)l.push(h().createElement(h().Fragment,null,a.subject)),m.push(a.subject);if(a.flags){if(a.flags.unread)l.push(b[sa.OperandFilterTypes.UNREAD]),m.push(null===(f=null===(e=b[sa.OperandFilterTypes.UNREAD])||void 0===e?void 0:e.toLowerCase)||void 0===f?void 0:f.call(e));if(a.flags.flagged)l.push(b[sa.OperandFilterTypes.FLAGGED]),m.push(null===(i=null===(g=b[sa.OperandFilterTypes.FLAGGED])||void 0===g?void 0:g.toLowerCase)||void 0===i?void 0:i.call(g));if(a.flags.attach)l.push(b[sa.OperandFilterTypes.ATTACH]),m.push(null===(k=null===(j=b[sa.OperandFilterTypes.ATTACH])||void 0===j?void 0:j.toLowerCase)||void 0===k?void 0:k.call(j))}if(void 0!==a.transaction_category)l.push(i18n("в категории"),h().createElement(h().Fragment,null,"«",b[a.transaction_category],"»")),m.push("".concat(i18n("в категории")," «").concat(b[a.transaction_category],"»"));if(a.correspondents){if(void 0!==a.correspondents.to)l.push("".concat(i18n("кому"),":"),h().createElement(gs,{avatarSize:20,contact:{email:a.correspondents.to}})),m.push("".concat(i18n("кому"),": ").concat(a.correspondents.to));if(void 0!==a.correspondents.from)l.push("".concat(i18n("от кого"),":"),h().createElement(gs,{avatarSize:20,contact:{email:a.correspondents.from}})),m.push("".concat(i18n("от кого"),": ").concat(a.correspondents.from))}if(void 0!==a.folder)l.push("".concat(i18n("в папке")),h().createElement(h().Fragment,null,"«",a.folder,"»")),m.push("".concat(i18n("в папке")," «").concat(a.folder,"»"));if(void 0!==a.interval){var n=Vr().fromRPCInterval(a.interval).toDateAndDateEnd(),o=n.date,p=n.dateEnd;if(l.push(i18n("за"),h().createElement(h().Fragment,null,rs(o.getDate()),".",rs(o.getMonth()+1),".",o.getFullYear())),m.push("".concat(i18n("за")," ").concat(rs(o.getDate()),".").concat(rs(o.getMonth()+1),".").concat(o.getFullYear())),p)l.push("—",h().createElement(h().Fragment,null,rs(p.getDate()),".",rs(p.getMonth()+1),".",p.getFullYear())),m.push("— ".concat(rs(p.getDate()),".").concat(rs(p.getMonth()+1),".").concat(p.getFullYear()))}var q=ca()(((c={})[os]=!0,c)),r=m.join(" ");r=r[0].toUpperCase()+r.slice(1);var s=l.map(function(a,b){if("string"==typeof a)if(0===b)a=a[0].toUpperCase()+a.slice(1).toLowerCase();else a=a.toLowerCase();if(0!==b)a=h().createElement(h().Fragment,null," ",a);return h().createElement(Zf,{className:q,key:b},a)}),t=ca()(((d={})[ns]=!0,d));return{contentText:r,isFilter:!1,component:h().createElement("span",{className:t},s)}},b.prototype.applyOperand=function(a,b,c,d){var e=this.props,f=e.selected,g=e.onAppendSuggest;if(g)g(a,b,c,d,f)},b.prototype.addMailboxOperand=function(a,b){this.applyOperand(a,Rr.SearchOperandType.MAILBOX,void 0,b)},b.prototype.addFolderOperand=function(a,b){this.applyOperand(a,Rr.SearchOperandType.FOLDER,void 0,b.idNumber)},b.prototype.addDateOperand=function(a,b){this.applyOperand(a,Rr.SearchOperandType.DATE,void 0,Vr().fromRPCInterval(b).toDateAndDateEnd())},b.prototype.addFilterOperand=function(a,b){this.applyOperand(a,Rr.SearchOperandType.FILTER,b)},b.prototype.addCategoryOperand=function(a,b){this.applyOperand(a,Rr.SearchOperandType.CATEGORY,b)},b.prototype.addQueryOperand=function(a,b,c){this.applyOperand(a,Rr.SearchOperandType.QUERY,b,c)},b.prototype.addRequestSuggest=function(a,b){var c=this.props.onAppendSuggestQuery;if(c)c(a,b)},b.prototype.handleSearchInternetClick=function(a){l().send("suggest_".concat(sa.OperandSuggestAddTypes.SEARCH_INTERNET,"_click")),P()("".concat(s.SUGGEST_SEARCH_INTERNET_URL,"&q=").concat(encodeURIComponent(a)))},b.prototype.handleGenericClick=function(a){var b=this.props,c=b.search,d=b.type,e=b.operandType,f=b.contactSuggest,g=b.requestSuggest,h=b.messageSuggest,i=b.wordSuggest,j=b.folderSuggest,k=b.dateSuggest,l=b.mailboxSuggest,m=b.onClick,n=b.onSuggestClick;if(e!==sa.OperandSuggestAddTypes.SEARCH_INTERNET)if(!n)if(!m){if(f)if(!c.hiddenSuggestMap[sa.OperandQueryTypes.FROM])return void this.addQueryOperand(a,sa.OperandQueryTypes.TO,f.email);else return void this.addQueryOperand(a,sa.OperandQueryTypes.FROM,f.email);if(!i)if(!g)if(!j)if(!k){if(l)this.addMailboxOperand(a,l);switch(d){case sa.ColouredIconTypes.UNREAD:case sa.ColouredIconTypes.FLAGGED:case sa.ColouredIconTypes.ATTACH:return void this.addFilterOperand(a,d);case sa.ColouredIconTypes.ORDER:case sa.ColouredIconTypes.EVENT:case sa.ColouredIconTypes.FEES:case sa.ColouredIconTypes.FINANCE:case sa.ColouredIconTypes.REGISTRATION:case sa.ColouredIconTypes.DOCUMENT_SCANS:case sa.ColouredIconTypes.OFFICIAL:case sa.ColouredIconTypes.TRAVEL:case sa.ColouredIconTypes.TAGGED_PERSONAL:case sa.ColouredIconTypes.TAGGED_URGENT:case sa.ColouredIconTypes.TAGGED_NEEDS_REPLY:case sa.ColouredIconTypes.TAGGED_IMPORTANT:case sa.ColouredIconTypes.TAGGED_DOCUMENTS:this.addCategoryOperand(a,d)}}else this.addDateOperand(a,k);else this.addFolderOperand(a,j);else this.addRequestSuggest(a,g);else this.addQueryOperand(a,sa.OperandQueryTypes.QUERY,i.word)}else m(a);else n(a,h);else this.handleSearchInternetClick(c.value)},b.prototype.handleMouseDown=function(a){var b=this.props.onMouseDown;if(!b)this.handleGenericClick(a);else b(a)},b.prototype.handleClick=function(a){var b=this.props.onClick;if(b)b(a)},b.prototype.handleMouseEnter=function(){var a=this.props,b=a.search,c=a.navigationIndex;b&&b.setSuggestsInfo({selectedSuggest:c})},b.prototype.renderData=function(a,c){var d=this.props,e=d.iconName,f=d.rightIconName,g=d.type,i=d.contactSuggest,j=d.messageSuggest,k=d.requestSuggest,l=d.wordSuggest,m=d.folderSuggest,n=d.mailboxSuggest,o=d.dateSuggest,p=d.forceFilter,q=a;if(i)return{contentText:q,isFilter:p,component:h().createElement(gs,{avatarSize:i.avatarSize,contact:i,text:a})};if(n)return{contentText:q,isFilter:p,component:h().createElement(gs,{contact:n,onlyEmailText:!0,avatarSmall:!0,found:n.found,tooltip:n.tooltip,boldText:n.boldText})};if(j)return{contentText:q,isFilter:p,component:h().createElement(ms,{message:j})};if(m)return{contentText:q=a||m.folderName,isFilter:p,component:h().createElement(pg,{badgeText:m.found.toString(),contentText:q,iconName:Qb(m.folderModel)})};if(o)return{contentText:q=c.intervalText(o),isFilter:p,component:h().createElement(pg,{badgeText:o.found,contentText:q,iconEmpty:!0})};if(k)return b.renderRequest(k.query,c);if(l)return{contentText:q=a||l.word,isFilter:p,component:h().createElement(Zf,{text:a||l.word,type:Uf.NORMAL})};else return{contentText:q,isFilter:!0,component:h().createElement(pg,{iconName:e||g,rightIconName:f,contentText:q})}},b.prototype.renderOperand=function(a){var b=this.props,c=b.operandType,d=b.navigationIndex,e=b.selected,f=b.qaEnabled;switch(c){case"query":return h().createElement(sa.OperandSuggestQuery,{qaEnabled:f,onMouseDown:this.handleMouseDown,onClick:this.handleClick,onKeyDown:this.handleGenericClick,onMouseEnter:this.handleMouseEnter,value:a,active:e,dataCustom:{"data-navigation-index":d}});default:return h().createElement(sa.OperandSuggestAdd,{qaEnabled:f,type:c,onMouseDown:this.handleMouseDown,onClick:this.handleClick,onKeyDown:this.handleGenericClick,onMouseEnter:this.handleMouseEnter,active:e,dataCustom:{"data-navigation-index":d}})}},b.prototype.renderContent=function(a){var b=this.props,c=b.caption,d=b.hr,e=b.iconEmpty,f=b.listType,g=b.navigationIndex,i=b.selected,j=b.short,k=b.text,l=b.title,m=b.type,n=b.testId,o=b.mode,p=b.operandType,q=k||a[m];if(d)return h().createElement(qg,{iconEmpty:e,type:f});if(c)return h().createElement(rg,{testId:n,text:q});var r=this.renderData(q,a),s=r.contentText,t=r.isFilter,u=r.component,v=j?{title:l||s}:{};if(p)return this.renderOperand(s);else return h().createElement(sg,qs({navigationIndex:g,onMouseDown:this.handleMouseDown,onClick:this.handleClick,onKeyDown:this.handleGenericClick,onMouseEnter:this.handleMouseEnter,selected:i,short:j,type:f,isFilter:t,testId:n,mode:o},v),u)},b.prototype.render=function(){var a=this;return h().createElement(sa.LocalizationContext.Consumer,null,function(b){return a.renderContent(b)})},b}(h().PureComponent),us="_1P-oiOHEg-7UG9V2zQ4DfD",vs="_2z6zZwl0J3e39TB06hFMc",ws="_2ORPOPCCGymswJ4AuatjfS",xs="_12Mo6ra4zfkS6ta_akGWck",ys="q81CkrST1I80BkNFzPmqo",zs="_3ioWJT0qqGdOvrIEA3ft5C",As=function(){var a=function(b,c){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)if(Object.prototype.hasOwnProperty.call(b,c))a[c]=b[c]})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw new TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),Bs=function(){return(Bs=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++)for(var e in b=arguments[c])if(Object.prototype.hasOwnProperty.call(b,e))a[e]=b[e];return a}).apply(this,arguments)},Cs=function(a,b,c,d){var e,f=arguments.length,g=f<3?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)if(e=a[h])g=(f<3?e(g):f>3?e(b,c,g):e(b,c))||g;return f>3&&g&&Object.defineProperty(b,c,g),g};!function(a){a.Suggest="Suggest",a.Filters="Filters"}(ss||(ss={}));var Ds=function(a){function b(b){var c=a.call(this,b)||this;return c.handleDateClick=c.handleDateClick.bind(c),c.handleMessageClick=c.handleMessageClick.bind(c),c.handleColorTagClick=c.handleColorTagClick.bind(c),c.handleFolderClick=c.handleFolderClick.bind(c),c.handleRequestClick=c.handleRequestClick.bind(c),c}return As(b,a),b.prototype.handleFolderClick=function(a){var b=this.props,c=b.search,d=b.onAppendSuggest;if(d){var e=c.folders.map(function(a){return a.idNumber}),f=c.in_excluded_folders?sl.TRASH:sl.INBOX,g=e.length?e[0]:f;d(a,Rr.SearchOperandType.FOLDER,void 0,g)}},b.prototype.handleDateClick=function(a){var b=this.props.onAppendSuggest;if(b)b(a,Rr.SearchOperandType.DATE,void 0,{date:Date.now(),lapse:0})},b.prototype.handleColorTagClick=function(a){var b=this.props.onAppendSuggest;if(b)b(a,Rr.SearchOperandType.CATEGORY,sa.ColorTagTypes.TAGGED_URGENT,void 0)},b.prototype.handleMessageClick=function(a,b){var c=this.props.onAppendSuggest;if(c)c(a,Rr.SearchOperandType.MESSAGE,void 0,b)},b.prototype.handleRequestClick=function(a,b){var c=this.props.onAppendSuggestQuery;if(c)c(a,b)},b.prototype.renderRecent=function(a){var b=this,c=this.props.search,d=c.selectedSuggest,e=c.suggests.requests;if(!e.length)return[null,a];else return[h().createElement(h().Fragment,null,h().createElement(ts,{text:i18n("Вы недавно искали"),caption:!0}),e.map(function(e,f){return h().createElement(ts,{key:f,search:c,requestSuggest:e,onAppendSuggestQuery:b.handleRequestClick,selected:a+f===d,navigationIndex:a+f})})),a+e.length]},b.prototype.renderContacts=function(a){var b=this.props,c=b.search,d=b.onAppendSuggest,e=c.selectedSuggest,f=c.suggests.contacts;if(!f.length||!c.hiddenSuggestMap[sa.OperandQueryTypes.FROM]&&!c.hiddenSuggestMap[sa.OperandQueryTypes.TO])return[null,a];var g=f.slice();return g=g.slice(0,Mf().searchSuggestCount),[h().createElement("div",{key:"renderContacts","data-test-id":(0,Ub.qa)("suggest-contacts"),className:ys},h().createElement(ts,{text:i18n("Люди"),caption:!0}),g.map(function(b,f){return h().createElement(ts,{key:f,search:c,contactSuggest:b,onAppendSuggest:d,selected:a+f===e,navigationIndex:a+f,testId:"suggest-contact-".concat(b.email)})})),a+g.length]},b.prototype.renderWords=function(a){var b=this.props,c=b.search,d=b.onAppendSuggest,e=b.qaEnabled,f=c.selectedSuggest,g=c.suggests.words;if(!g.length||!c.hiddenSuggestMap[sa.OperandQueryTypes.QUERY])return[null,a];else return[h().createElement(h().Fragment,null,g.map(function(b,g){return h().createElement(ts,{key:b.word,search:c,wordSuggest:b,onAppendSuggest:d,selected:a+g===f,navigationIndex:a+g,operandType:"query",qaEnabled:e})})),a+g.length]},b.prototype.renderLetters=function(a){var b=this,c=this.props.search,d=c.selectedSuggest,e=c.suggests.messages;if(!e.length)return[null,a];var f=e.slice();return f=f.slice(0,Mf().searchSuggestCount),[h().createElement("div",{key:"renderLetters",className:xs,"data-test-id":(0,Ub.qa)("suggest-messages")},h().createElement(ts,{text:i18n("Письма"),caption:!0}),f.map(function(e,f){return h().createElement(ts,{key:f,search:c,messageSuggest:e,onSuggestClick:b.handleMessageClick,selected:a+f===d,navigationIndex:a+f})})),a+f.length]},b.prototype.getOperandData=function(a,b){switch(a){case sa.OperandSuggestAddTypes.FROM:return{contactSuggest:{email:b}};default:return{}}},b.prototype.renderOperands=function(a){var b=this,c=this.props,d=c.search,e=c.onAppendSuggestOperand,f=c.qaEnabled,g=d.suggests.operands;if(!g.length)return[null,a];else return[h().createElement(h().Fragment,null,g.map(function(c,g){var i=c.type,j=c.value;return h().createElement(ts,Bs({key:j,qaEnabled:f,search:d,onAppendSuggest:e,operandType:i,navigationIndex:a+g,selected:a+g===d.selectedSuggest},b.getOperandData(i,j)))})),a+g.length]},b.prototype.renderSuggestLine=function(a){if(this.props.search.hasOperands)return[null,a];var b=this.renderWords(a),c=b[0],d=b[1],e=this.renderOperands(d),f=e[0],g=e[1];if(!c&&!f)return[null,a];else return[h().createElement("div",{key:"renderSuggestLine",className:ws},c,f),g]},b.prototype.renderSuggests=function(a){var b,c=this.props.search,d=c.suggests,e=d.requests,f=d.words,g=d.messages,i=d.contacts,j=d.operands;if(!f.length&&!j.length&&!i.length&&!g.length&&(!e.length||c.hasOperands))return[null,a];var k=this.renderSuggestLine(a),l=k[0],m=k[1],n=this.renderContacts(m),o=n[0],p=n[1],q=this.renderRecent(p),r=q[0],s=q[1],t=this.renderLetters(s),u=t[0];if(a=t[1],!(r||o||l||u))return[null,a];var v=ca()(((b={})[vs]=!0,b));return[h().createElement("div",{key:"renderSuggests",className:v},l,r,o,u),a]},b.prototype.renderFilters=function(a){var b,c,d,e,f,g,i=this.props,j=i.search,k=i.onAppendSuggest,l=i.qaEnabled,m=i.darkMode,n=i.mobileView,o=i.onSuggestClick;if(a>0&&j.smartInput.operands.length&&!n)return[null,a];var p=j.hiddenSuggestMap,q=j.displayedFilter,r=j.query,t=j.selectedSuggest,u=ca()(((b={})[vs]=!0,b)),v=function(a){return function(b,c){return o(b,{addressee:a})}},w=function(a){return function(b,c){return o(b,{folder:a})}};return[h().createElement("div",{key:"renderFilters",className:u,"data-test-id":(0,Ub.qa)("suggest-operands")},Boolean(p[Rr.SearchOperandType.MAILBOX])&&h().createElement(h().Fragment,null,h().createElement(ts,{testId:l?"category-mailboxes":void 0,text:i18n("Ящики"),caption:!0}),p[Rr.SearchOperandType.MAILBOX].map(function(b,c){return h().createElement(ts,{key:c,mailboxSuggest:b,navigationIndex:a++,selected:!n&&a-1===t,onAppendSuggest:k,testId:l?"".concat(Rr.SearchOperandType.MAILBOX,":").concat(b.email):void 0})})),n&&q===Rr.SearchOperandType.ADDRESSEE&&h().createElement(h().Fragment,null,h().createElement(ts,{onSuggestClick:v(ua.FROM),testId:l?"addressee:".concat(ua.FROM):void 0,search:j,text:Fr[ua.FROM],rightIconName:void 0!==(null===(c=r.correspondents)||void 0===c?void 0:c.from)&&ua.STATUS_DONE}),h().createElement(ts,{onSuggestClick:v(ua.TO),testId:l?"addressee:".concat(ua.TO):void 0,search:j,text:Fr[ua.TO],rightIconName:void 0!==(null===(d=r.correspondents)||void 0===d?void 0:d.to)&&ua.STATUS_DONE}),h().createElement(ts,{onSuggestClick:v(ua.SUBJECT),testId:l?"addressee:".concat(ua.SUBJECT):void 0,search:j,text:Fr[ua.SUBJECT],rightIconName:void 0!==r.subject&&ua.STATUS_DONE}),h().createElement(ts,{onSuggestClick:v(ua.QUERY),testId:l?"addressee:".concat(ua.QUERY):void 0,search:j,text:Fr[ua.QUERY],rightIconName:void 0!==r.query&&ua.STATUS_DONE})),n&&q===Rr.SearchOperandType.FOLDER&&j.folders.map(function(a){return h().createElement(ts,{key:a.idNumber,onSuggestClick:w(a.idNumber),testId:l?"folder:".concat(a.idNumber):void 0,search:j,text:a.folderName,rightIconName:j.query.folder===a.idNumber&&ua.STATUS_DONE})}),(p[Rr.SearchOperandType.FILTER]||p[Rr.SearchOperandType.CATEGORY]||p[Rr.SearchOperandType.DATE]||p[Rr.SearchOperandType.FOLDER])&&!n&&h().createElement(ts,{text:i18n("Фильтры"),caption:!0}),p[Rr.SearchOperandType.FILTER]&&h().createElement(h().Fragment,null,p[sa.OperandFilterTypes.UNREAD]&&h().createElement(ts,{onAppendSuggest:k,type:sa.ColouredIconTypes.UNREAD,search:j,navigationIndex:a++,selected:!n&&a-1===t,rightIconName:(null===(e=r.flags)||void 0===e?void 0:e.unread)&&ua.STATUS_DONE,testId:l?"filter:".concat(sa.OperandFilterTypes.UNREAD):void 0}),p[sa.OperandFilterTypes.FLAGGED]&&h().createElement(ts,{onAppendSuggest:k,type:sa.ColouredIconTypes.FLAGGED,search:j,navigationIndex:a++,selected:!n&&a-1===t,rightIconName:(null===(f=r.flags)||void 0===f?void 0:f.flagged)&&ua.STATUS_DONE,testId:l?"filter:".concat(sa.OperandFilterTypes.FLAGGED):void 0}),p[sa.OperandFilterTypes.ATTACH]&&h().createElement(ts,{onAppendSuggest:k,type:sa.ColouredIconTypes.ATTACH,search:j,navigationIndex:a++,selected:!n&&a-1===t,rightIconName:(null===(g=r.flags)||void 0===g?void 0:g.attach)&&ua.STATUS_DONE,testId:l?"filter:".concat(sa.OperandFilterTypes.ATTACH):void 0})),p[Rr.SearchOperandType.FILTER]&&p[Rr.SearchOperandType.CATEGORY]&&h().createElement(ts,{iconEmpty:!0,hr:!0}),p[Rr.SearchOperandType.CATEGORY]&&h().createElement(h().Fragment,null,p[sa.CategoryTypes.DOCUMENT_SCANS]&&h().createElement(ts,{onAppendSuggest:k,type:sa.ColouredIconTypes.DOCUMENT_SCANS,search:j,navigationIndex:a++,selected:!n&&a-1===t,rightIconName:r.transaction_category===sa.ColouredIconTypes.DOCUMENT_SCANS&&ua.STATUS_DONE,testId:l?"category:".concat(sa.CategoryTypes.DOCUMENT_SCANS):void 0}),p[sa.CategoryTypes.ORDER]&&h().createElement(ts,{onAppendSuggest:k,type:sa.ColouredIconTypes.ORDER,search:j,navigationIndex:a++,selected:!n&&a-1===t,rightIconName:r.transaction_category===sa.ColouredIconTypes.ORDER&&ua.STATUS_DONE,testId:l?"category:".concat(sa.CategoryTypes.ORDER):void 0}),p[sa.CategoryTypes.FINANCE]&&h().createElement(ts,{onAppendSuggest:k,type:sa.ColouredIconTypes.FINANCE,search:j,navigationIndex:a++,selected:!n&&a-1===t,rightIconName:r.transaction_category===sa.ColouredIconTypes.FINANCE&&ua.STATUS_DONE,testId:l?"category:".concat(sa.CategoryTypes.FINANCE):void 0}),p[sa.CategoryTypes.REGISTRATION]&&h().createElement(ts,{onAppendSuggest:k,type:sa.ColouredIconTypes.REGISTRATION,search:j,navigationIndex:a++,selected:!n&&a-1===t,rightIconName:r.transaction_category===sa.ColouredIconTypes.REGISTRATION&&ua.STATUS_DONE,testId:l?"category:".concat(sa.CategoryTypes.REGISTRATION):void 0}),p[sa.CategoryTypes.TRAVEL]&&h().createElement(ts,{onAppendSuggest:k,type:sa.ColouredIconTypes.TRAVEL,search:j,navigationIndex:a++,selected:!n&&a-1===t,rightIconName:r.transaction_category===sa.ColouredIconTypes.TRAVEL&&ua.STATUS_DONE,testId:l?"category:".concat(sa.CategoryTypes.TRAVEL):void 0}),p[sa.CategoryTypes.EVENT]&&h().createElement(ts,{onAppendSuggest:k,type:sa.ColouredIconTypes.EVENT,search:j,navigationIndex:a++,selected:!n&&a-1===t,rightIconName:r.transaction_category===sa.ColouredIconTypes.EVENT&&ua.STATUS_DONE,testId:l?"category:".concat(sa.CategoryTypes.EVENT):void 0}),p[sa.CategoryTypes.FEES]&&h().createElement(ts,{onAppendSuggest:k,type:sa.ColouredIconTypes.FEES,search:j,navigationIndex:a++,selected:!n&&a-1===t,rightIconName:r.transaction_category===sa.ColouredIconTypes.FEES&&ua.STATUS_DONE,testId:l?"category:".concat(sa.CategoryTypes.FEES):void 0}),p[sa.CategoryTypes.OFFICIAL]&&h().createElement(ts,{onAppendSuggest:k,type:sa.ColouredIconTypes.OFFICIAL,search:j,navigationIndex:a++,selected:!n&&a-1===t,rightIconName:r.transaction_category===sa.ColouredIconTypes.OFFICIAL&&ua.STATUS_DONE,testId:l?"category:".concat(sa.CategoryTypes.OFFICIAL):void 0})),(p[Rr.SearchOperandType.FILTER]||p[Rr.SearchOperandType.CATEGORY])&&p[Rr.SearchOperandType.DATE]&&h().createElement(ts,{iconEmpty:!0,hr:!0}),p[Rr.SearchOperandType.DATE]&&h().createElement(ts,{text:i18n("Указать дату"),iconName:ua.CALENDAR,search:j,onClick:this.handleDateClick,navigationIndex:a++,selected:!n&&a-1===t}),s.ENABLE_COLOR_TAGS_SEARCH&&p.COLOR_TAG_CUSTOM&&h().createElement(ts,{text:i18n("Метки"),iconName:ua.STATUS_TAG,rightIconName:m?ua.COLOR_TAG_SUGGEST_DARK:ua.COLOR_TAG_SUGGEST_LIGHT,search:j,onClick:this.handleColorTagClick,navigationIndex:a++,selected:!n&&a-1===t}),(p[Rr.SearchOperandType.FILTER]||p[Rr.SearchOperandType.CATEGORY]||p[Rr.SearchOperandType.DATE])&&p[Rr.SearchOperandType.FOLDER]&&!n&&h().createElement(ts,{iconEmpty:!0,hr:!0}),p[Rr.SearchOperandType.FOLDER]&&!n&&h().createElement(ts,{testId:l?"".concat(Rr.SearchOperandType.FOLDER):void 0,text:i18n("В папке"),iconName:ua.FOLDER,search:j,onClick:this.handleFolderClick,navigationIndex:a++,selected:!n&&a-1===t})),a]},b.prototype.render=function(){var a,b=this.props,c=b.themeClassName,d=b.onItemsCounted,e=b.mobileView,f=ca()(((a={})[us]=!e,a[zs]=e,a[c]=!0,a)),g=this.renderSuggests(0),i=g[0],j=g[1],k=this.renderFilters(j),l=k[0],m=k[1];if(d)d(m);return h().createElement("div",{className:f,"data-test-id":(0,Ub.qa)("search-suggest")},(!e||e===ss.Suggest)&&i,(!e||e===ss.Filters)&&l)},b=Cs([Tf("r-search-suggest"),Tr.observer],b)}(h().Component),Es=nc(8182);function Fs(a,b){if(a.length!==b.length)return!1;for(var c=0;c<a.length;c++)if(a[c]!==b[c])return!1;return!0}var Gs=function(a,b){if(void 0===b)b=Fs;var c,d,e=[],f=!1;return function(){for(var g=[],h=0;h<arguments.length;h++)g[h]=arguments[h];if(f&&c===this&&b(g,e))return d;else return d=a.apply(this,g),f=!0,c=this,e=g,d}},Hs="_1SEcF0Q8NmDNoMXSpQHYm2",Is="Fu2egnKshAdgPYYtf3iIU",Js="_1bg0wx_JeuO_SqvEJRkdQx",Ks="_2ixMmj67tJABmCL-ZbSwIN",Ls=function(){var a=function(b,c){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)if(Object.prototype.hasOwnProperty.call(b,c))a[c]=b[c]})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw new TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),Ms=function(a,b,c,d){var e,f=arguments.length,g=f<3?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)if(e=a[h])g=(f<3?e(g):f>3?e(b,c,g):e(b,c))||g;return f>3&&g&&Object.defineProperty(b,c,g),g},Ns=function(a,b,c){if(c||2===arguments.length)for(var d,e=0,f=b.length;e<f;e++)if(d||!(e in b)){if(!d)d=Array.prototype.slice.call(b,0,e);d[e]=b[e]}return a.concat(d||Array.prototype.slice.call(b))},Os=function(a){function b(b){var c=a.call(this,b)||this;return c.handleValueChange=c.handleValueChange.bind(c),c.handleValueApply=c.handleValueApply.bind(c),c.handleSubtypeChange=c.handleSubtypeChange.bind(c),c.handleClose=c.handleClose.bind(c),c.handleEditingStarted=c.handleEditingStarted.bind(c),c.handleEditingEnd=c.handleEditingEnd.bind(c),c.render2kitDatePicker=c.render2kitDatePicker.bind(c),c.operandRef=h().createRef(),c}return Ls(b,a),b.prototype.render2kitDatePicker=function(a,b){return h().createElement(f.DatePicker,{value:a,onChange:b})},b.prototype.handleValueChange=function(a,b){this.props.operand.setValue(b)},b.prototype.handleValueApply=function(a,b){var c=this.props,d=c.operand,e=c.onValueApply;if(d.setValue(b),d.applyChanges(),e)e(d)},b.prototype.handleSubtypeChange=function(a,b){var c=this.props,d=c.search,e=c.operand;if(l().send(b,{t_feature:"operand_selector"}),a&&"keydown"===a.type)d.updateOperandSubtypeAndFocus(e,b);else d.updateOperandSubtypeAndBlur(e,b)},b.prototype.handleClose=function(){var a=this.props,b=a.search,c=a.index;if(a.operand.type===Rr.SearchOperandType.MAILBOX)b.removeOperand(Rr.SearchOperandType.FOLDER);b.smartInput[Es.SmartInputActions.REMOVE_AND_DEACTIVATE_ALL](c)},b.prototype.handleEditingStarted=function(){this.focus()},b.prototype.handleEditingEnd=function(){this.props.operand.applyChanges()},b.prototype.focus=function(){var a=this.operandRef.current;a.focus&&a.focus()},b.prototype.renderOperand=function(){var a=this.props,b=a.operand,c=a.search,d=a.active,e=a.editing,f=a.portalRef,g=a.categories,i=a.colorTags;switch(b.type){case Rr.SearchOperandType.FILTER:return h().createElement(sa.OperandFilter,{active:d,type:b.subtype,testId:(0,Ub.qa)("".concat(Rr.SearchOperandType.FILTER,":").concat(b.subtype)),onClose:this.handleClose});case Rr.SearchOperandType.CATEGORY:if(!(s.ENABLE_COLOR_TAGS_SEARCH?Ns(Ns([],g,!0),i,!0):g).includes(b.subtype))return;var j=g.includes(b.subtype);return h().createElement(sa.OperandCategory,{ref:this.operandRef,active:d,edit:e,type:b.subtype,onChange:this.handleSubtypeChange,onClose:this.handleClose,portal:f,portalOnly:!0,testId:(0,Ub.qa)("".concat(Rr.SearchOperandType.CATEGORY,":").concat(b.subtype)),qaEnabled:(0,Ub.U)(),categories:g,categoriesCaption:h().createElement(rg,{testId:"categories",text:i18n("Категория")}),colorTags:i,colorTagsCaption:h().createElement(rg,{testId:"colorTags",text:i18n("Метка")}),activeColumn:j?"category":"colorTag",hasColorTags:s.ENABLE_COLOR_TAGS_SEARCH});case Rr.SearchOperandType.QUERY:return h().createElement(sa.OperandQuery,{ref:this.operandRef,active:d,edit:e,type:b.subtype,value:b.editing?b.next.value:b.value,options:c.enabledQueryOptions|sa.OperandQueryOptions[b.subtype],onValueChange:this.handleValueChange,onTypeChange:this.handleSubtypeChange,onClose:this.handleClose,portal:f,portalOnly:!0,testId:(0,Ub.qa)("".concat(Rr.SearchOperandType.QUERY,":").concat(b.subtype)),qaEnabled:(0,Ub.U)()});case Rr.SearchOperandType.FOLDER:return h().createElement(sa.OperandFolder,{ref:this.operandRef,testId:(0,Ub.qa)("".concat(Rr.SearchOperandType.FOLDER,":").concat(b.value)),qaEnabled:(0,Ub.U)(),active:d,edit:e,folders:c.folders.map(function(a){return{id:a.idNumber,name:a.folderName}}),folder:b.value,folderListClassName:Ks,onChange:this.handleValueApply,onClose:this.handleClose,portal:f,portalOnly:!0});case Rr.SearchOperandType.DATE:var k=b.value;return h().createElement(sa.OperandCalendar,{ref:this.operandRef,active:d,edit:e,date:k.date,dateEnd:k.dateEnd,lapse:k.lapse,datePicker:this.render2kitDatePicker,onChange:this.handleValueApply,onClose:this.handleClose,portal:f,portalOnly:!0});case Rr.SearchOperandType.MAILBOX:var l=b.value;return h().createElement(sa.OperandMailbox,{ref:this.operandRef,testId:(0,Ub.qa)("".concat(Rr.SearchOperandType.MAILBOX,":").concat(l.email)),qaEnabled:(0,Ub.U)(),mailbox:l,prefixText:i18n("В ящике"),onClose:this.handleClose})}},b.prototype.render=function(){var a,b=this.props,c=b.first,d=b.last,e=b.operand,f=b.SmartOperand,g=ca()(((a={})[Hs]=!0,a[Is]=c,a[Js]=d,a));return h().createElement("span",{className:g},this.renderOperand(),f&&h().createElement(f,{editable:e.type!==Rr.SearchOperandType.FILTER,portal:!0,onEditingStarted:this.handleEditingStarted,onEditingEnd:this.handleEditingEnd}))},b=Ms([Tr.observer],b)}(h().Component),Ps="_3yyc668S45nbm2e_p3s6u7",Qs="_36095dscslW_jT6c3XD9Sn",Rs="qjkccY5fSKjR-EEl3clWJ",Ss="sIxCdzi8sUyUA4AFlh9C",Ts="_2ajszcoO292V4t_mDe2D_l",Us="_3d04684FcOlFUxXZ88FqWO",Vs="elRpivMputEG7xBpep9wM",Ws="_27_C7urvCgQfgdOXq-YkF3",Xs="_3CT2rIQA3H2c77_KeUpoIa",Ys="_1XeZVjWI3S6j3SYMYdnVbj",Zs="_1V_JAvJOg6UG9bdtsIgWBR",$s="_2X_edotp2dvQ6hgewUsEiT",_s="rKjxwyqW3E2qnBQWNn-Fw",at="_1T55H2cA44INJYueGj74KP",bt="_1RZoc6TqntWsBRAPwu80dM",ct="_3LyF0nmtnfsji64z95K44W",dt="_38o2ji9dqz8gS6DjWj6bW5",et="_1UVl4UDVOlGiWZG9a-EAeO",ft="_2U-voa2lJDe7WZJzWN5OFD",gt="CzzNiOhcrXFbRQkFwlcBo",ht=function(){var a=function(b,c){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)if(Object.prototype.hasOwnProperty.call(b,c))a[c]=b[c]})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw new TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),it=function(a,b,c,d){var e,f=arguments.length,g=f<3?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)if(e=a[h])g=(f<3?e(g):f>3?e(b,c,g):e(b,c))||g;return f>3&&g&&Object.defineProperty(b,c,g),g};var jt=function(a){function b(b){var c=a.call(this,b)||this;return c.searchInputRef=h().createRef(),c.ignoreBlur=!1,c.fetchSearchModel=Gs(function(a,b){if(void 0===b)b=!1;c.props.search.suggests.fetch({query:a,force:b})},function(a,b){if(a[0]!==b[0])return!1;else return!!a[1]==!!b[1]}),c.renderOperand=c.renderOperand.bind(c),c.renderInput=c.renderInput.bind(c),c.renderSuggest=c.renderSuggest.bind(c),c.handleInputChange=c.handleInputChange.bind(c),c.handleInputEditingStarted=c.handleInputEditingStarted.bind(c),c.handleAppendSuggest=c.handleAppendSuggest.bind(c),c.handleAppendSuggestQuery=c.handleAppendSuggestQuery.bind(c),c.handleKeyDown=c.handleKeyDown.bind(c),c.handleSuggestShow=c.handleSuggestShow.bind(c),c.handleSuggestItemsCounted=c.handleSuggestItemsCounted.bind(c),c.handleSuggestReposition=c.handleSuggestReposition.bind(c),c.handleSearchClick=c.handleSearchClick.bind(c),c.handlePageClick=c.handlePageClick.bind(c),c.handleOperandValueApply=c.handleOperandValueApply.bind(c),c.handleAppendSuggestOperand=c.handleAppendSuggestOperand.bind(c),c.fetchSearchModel=(0,zo.debounce)(c.fetchSearchModel,200,[]),c.portalContainer=document.createElement("DIV"),document.body.appendChild(c.portalContainer),c}return ht(b,a),Object.defineProperty(b.prototype,"searchInput",{get:function(){var a;return null===(a=this.searchInputRef)||void 0===a?void 0:a.current},enumerable:!1,configurable:!0}),b.prototype.componentDidMount=function(){var a=this.props.search;this.fetchSearchModel(a.value),window.addEventListener("click",this.handlePageClick),window.addEventListener("touchmove",this.handlePageClick)},b.prototype.componentDidUpdate=function(a){var b=this.props,c=b.search,d=b.active,e=d!==a.active;this.fetchSearchModel(c.value,e&&d)},b.prototype.componentWillUnmount=function(){window.removeEventListener("click",this.handlePageClick),window.removeEventListener("touchmove",this.handlePageClick),document.body.removeChild(this.portalContainer)},b.prototype.handleInputChange=function(a,b){this.props.search.setValue(b),this.fetchSearchModel(b)},b.prototype.handleInputEditingStarted=function(){var a;null===(a=this.inputRef.current)||void 0===a||a.focus()},b.prototype.handleAppendSuggest=function(a,b,c,d){var e=c?"_".concat(c):"";l().send("".concat(b).concat(e),{t_feature:"operand_select"}),this.handleAppendSuggestCommon(a,b,c,d)},b.prototype.handleAppendSuggestOperand=function(a,b,c,d){var e=c?"_".concat(c):"";l().send("suggest_".concat(b).concat(e,"_click")),this.handleAppendSuggestCommon(a,b,c,d)},b.prototype.activeElementBlur=function(){var a;null===(a=document.activeElement)||void 0===a||a.blur()},b.prototype.handleAppendSuggestCommon=function(a,b,c,d){var e=this,f=this.props,g=f.search,h=f.onSuggestSelect;if(b!==Rr.SearchOperandType.MESSAGE){g.applyOperandAndFocus(b,c,d);var i=g.smartInput.operands.length,j=b===Rr.SearchOperandType.DATE||b===Rr.SearchOperandType.FOLDER;if(!j&&"keydown"!==a.type)return null==h||h(),void this.activeElementBlur();window.setTimeout(function(){if(j)e.focusAfterExpand(i-1)},0)}else g.goToLetterAndClear(d)},b.prototype.handleAppendSuggestQuery=function(a,b){var c=this.props,d=c.search,e=c.onSuggestSelect;d.setQuery(b.query),l().send("recent",{t_feature:"operand_select"}),null==e||e(),this.activeElementBlur()},b.prototype.handleKeyDown=function(a){var b=this.props.search,c=b.selectedSuggest,d=b.totalSuggests;switch(a.keyCode){case 13:if(l().send("search",{t_feature:"operand_select"}),this.blur(),-1===c)return b.appendSearchQuery(a.target.value);var e=document.querySelector('[data-navigation-index="'.concat(c,'"]'));if(e)e.dispatchEvent(function(){var a;if("function"==typeof KeyboardEvent)a=new KeyboardEvent("keydown",{view:window,bubbles:!0,cancelable:!0});else(a=document.createEvent("KeyboardEvent")).initEvent("keydown",!0,!0);return a}());return;case 40:if(++c>=d)c=-1;return b.setSuggestsInfo({selectedSuggest:c});case 38:if(--c<-1)c=d-1;return b.setSuggestsInfo({selectedSuggest:c})}},b.prototype.handleSuggestShow=function(){this.props.search.setSuggestsInfo({selectedSuggest:-1})},b.prototype.handleSuggestItemsCounted=function(a){var b=this.props.search,c=b.selectedSuggest;if(c>=a)c=-1;b.setSuggestsInfo({totalSuggests:a,selectedSuggest:c})},b.prototype.handleSearchClick=function(a){a.stopPropagation(),this.ignoreBlur=!0,l().send("search",{t_feature:"operand_select"});var b=this.props.search,c=this.inputRef.current;if(null==c?void 0:c.value)b.appendSearchQuery(c.value),this.blur()},b.prototype.handleSuggestReposition=function(a,b){var c=this.props,d=c.search,e=c.ponyMode,f=d.smartInput;if(f.active!==f.operands.length)return{left:a+4,top:b};if(!f.operands.length)return{left:a-(e?30:37),top:b+2};else return{left:a,top:b+2}},b.prototype.handleOperandValueApply=function(a){var b=this;if(a.type===Rr.SearchOperandType.DATE)window.setTimeout(function(){b.blur()},1)},b.prototype.renderOperand=function(a,b){var c=this.props,d=c.search,e=c.categories,f=void 0===e?[]:e,g=c.colorTags,i=void 0===g?[]:g,j=c.darkMode,k=d.smartInput.operands.length;return h().createElement(Os,{ref:b.ref,active:b.active,editing:b.editing,first:0===b.index,last:b.index===k-1,SmartOperand:b.SmartOperand,operand:a,search:d,index:b.index,portalRef:b.portalRef,onValueApply:this.handleOperandValueApply,categories:f,colorTags:i,darkMode:j})},b.prototype.renderInput=function(a,b){var c,d,e,g=this.props.search,i=b.SmartOperand;this.inputRef=b.ref;var j=ca()(((c={})[$s]=!0,c)),k=ca()(((d={})[Ys]=!0,d[Zs]=s.SEARCH_PANEL_PORTAL,d)),l=ca()(((e={})[_s]=!0,e));return h().createElement("div",{className:j},g.progress&&h().createElement("span",{className:l},h().createElement(f.Progress,{size:20})),h().createElement(sa.DynamicInput,{ref:b.ref,static:!0,className:k,value:g.value,onChange:this.handleInputChange,onKeyDown:this.handleKeyDown}),h().createElement(i,{onEditingStarted:this.handleInputEditingStarted}))},b.prototype.renderSuggest=function(a,b){var c=this.props,d=c.search,e=c.darkMode;return h().createElement(Ds,{search:d,onAppendSuggest:this.handleAppendSuggest,onAppendSuggestQuery:this.handleAppendSuggestQuery,onAppendSuggestOperand:this.handleAppendSuggestOperand,onItemsCounted:this.handleSuggestItemsCounted,qaEnabled:(0,Ub.U)(),darkMode:e})},b.prototype.sendClickRadar=function(){ce()("srch-input-clk")},b.prototype.renderSearchPanel=function(){var a,b,c,d,e=this,g=this.props,i=g.search,j=g.ponyMode,k=g.themeClassName,l=g.onBlur,m=ca()(Ps,k,((a={})[gt]=j,a[Us]=s.SEARCH_PANEL_PORTAL,a)),n=ca()(Ts),o=ca()(Vs),p=ca()(Ws,((b={})[Xs]=j,b)),q=ca()(et,((c={})[ft]=j,c)),r=ca()(at,((d={})[dt]=j,d[bt]=s.SEARCH_PANEL_PORTAL&&s.SEARCH_CLEAR,d));return h().createElement("div",{className:m,onClick:this.sendClickRadar},h().createElement("div",{className:Qs},h().createElement("span",{className:q},h().createElement(f.Icon,{icon:j?t.NAVIGATION_SEARCH_S:t.NAVIGATION_SEARCH})),h().createElement("div",{"data-test-id":(0,Ub.qa)("search-input-container"),className:n},h().createElement(Es.SmartInput,{className:o,placementClassName:p,ref:this.searchInputRef,model:i.smartInput,operandRenderer:this.renderOperand,inputRenderer:this.renderInput,suggestRenderer:this.renderSuggest,onBlur:function(){if(!e.ignoreBlur||!s.SEARCH_PANEL_PORTAL)l()},onSuggestShow:this.handleSuggestShow,onSuggestReposition:this.handleSuggestReposition,portal:this.portalContainer})),s.SEARCH_CLEAR&&h().createElement("span",{className:ct,onMouseDown:function(a){a.stopPropagation(),e.ignoreBlur=!0;var b=e.inputRef.current;if(i.empty&&!(null==b?void 0:b.value))l();i.clear()}},h().createElement(Jc,{component:Ac(),className:et,name:"close","data-qa-id":"close"}))),s.SEARCH_PANEL_PORTAL&&s.SEARCH_CLEAR&&h().createElement("div",{className:Ss}),(!s.SEARCH_PANEL_PORTAL||s.SEARCH_CLEAR)&&h().createElement("div",{className:Rs},h().createElement("span",{"data-test-id":(0,Ub.qa)("search-button"),className:r,onMouseDown:this.handleSearchClick},i18n("Найти"))))},b.prototype.handlePageClick=function(a){var b,c=this.props,d=c.active,e=c.search;if(d){var f=Ej().findDOMNode(this.searchInput),g=e.smartInput.operands[e.smartInput.active],h=g&&g.type===Rr.SearchOperandType.DATE;if(!(f===a.target||(null===(b=null==f?void 0:f.contains)||void 0===b?void 0:b.call(f,a.target))||h&&this.portalContainer.contains(a.target))&&document.body.contains(a.target))this.blur()}},b.prototype.focus=function(){var a;null===(a=this.searchInput)||void 0===a||a.focus()},b.prototype.blur=function(){var a;null===(a=this.searchInput)||void 0===a||a.blur()},b.prototype.focusAfterExpand=function(a){var b=this.props.search;if(null!=a||(a=b.smartInput.operands.length),b.smartInput[Es.SmartInputActions.SET_OPERAND_FLAGS](a,{active:!0,editing:!0}),a===b.smartInput.operands.length)this.handleInputEditingStarted();else this.focus()},b.prototype.render=function(){var a=this.props.ponyMode;return h().createElement(Qr,{ponyMode:a},this.renderSearchPanel())},b.defaultProps={themeClassName:"r-search-panel"},b=it([Tr.observer],b)}(h().Component),kt=function(){var a=function(b,c){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)if(Object.prototype.hasOwnProperty.call(b,c))a[c]=b[c]})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw new TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),lt=function(a){function b(b){var c=a.call(this,b)||this;return c.handleSuggestClick=c.handleSuggestClick.bind(c),c}return kt(b,a),b.prototype.blur=function(){var a,b;null===(b=(a=this.props).onBlur)||void 0===b||b.call(a)},b.prototype.handleAppendSuggest=function(a,b,c,d){var e=this.props,f=e.search,g=e.onSuggestSelect,h=c?"_".concat(c):"";if(l().send("".concat(b).concat(h),{t_feature:"operand_select"}),(0,Sr.findOperand)(f.smartInput,b,c))f.removeOperand(b,c);else if(b===Rr.SearchOperandType.CATEGORY&&f.query.transaction_category)f.updateOperand(b,f.query.transaction_category,c,d);else f.applyOperand(b,c,d);if(!(b===Rr.SearchOperandType.DATE||b===Rr.SearchOperandType.FOLDER))null==g||g()},b.prototype.handleSuggestClick=function(a,b){var c,d,e=this.props.search;if(b.addressee){var f=b.addressee,g=e.query,h=void 0;if(void 0!==g.query)h=g.query,e.removeOperand(ua.QUERY,ua.QUERY);if(void 0!==g.subject)h=g.subject,e.removeOperand(ua.QUERY,ua.SUBJECT);if(void 0!==(null===(c=g.correspondents)||void 0===c?void 0:c.to))h=g.correspondents.to,e.removeOperand(ua.QUERY,ua.TO);if(void 0!==(null===(d=g.correspondents)||void 0===d?void 0:d.from))h=g.correspondents.from,e.removeOperand(ua.QUERY,ua.FROM);e.applyOperand(ua.QUERY,f,h||""),l().send("".concat(ua.QUERY,"_").concat(f,"}"),{t_feature:"operand_select"})}else if(void 0!==b.folder)if(e.query.folder===b.folder)e.removeOperand(Rr.SearchOperandType.FOLDER);else if(void 0!==e.query.folder)e.updateOperand(Rr.SearchOperandType.FOLDER,void 0,void 0,b.folder);else e.applyOperand(Rr.SearchOperandType.FOLDER,void 0,b.folder)},b.prototype.handlePageClick=function(){},b.prototype.render=function(){var a=this.props.search;return h().createElement(Ds,{mobileView:ss.Filters,search:a,onSuggestClick:this.handleSuggestClick,onAppendSuggest:this.handleAppendSuggest,onAppendSuggestQuery:this.handleAppendSuggestQuery,onAppendSuggestOperand:this.handleAppendSuggestOperand,onItemsCounted:this.handleSuggestItemsCounted,qaEnabled:(0,Ub.U)()})},b}(jt),mt="_17XzAbEZiUUoTm-P4fLgHx",nt="_3u3rD2hBpqQcsqvZvbm9jc",ot="_39LNx7UF6dCON4-x9cJsHt",pt="sGiygJdoYoEUL1uRF8WdG",qt="_2qJMu-IAUDqlnuq2WbkZ-I",rt="_1BSPA6S1GesUW0M02d3gzw",st="_1AulVtyP2EhrjSbQx1fJIO",tt="EbkIV0tIJ8o8Vgczbrjh-",ut="_2lNpZh5bHJxy8DAPv5XieW",vt="_3CsuB8lwSJrFzLSjgrIi7m",wt="_3NIQwXOwCgc4mdnqe6m9PC",xt=function(a){var b=a.searched;return h().createElement(E.Z,null,function(a){var c=a.Badge;return h().createElement("span",{className:st},b&&h().createElement(c,{className:tt,mode:"prominent"}),h().createElement(f.Icon,{icon:t.UNION_DROPDOWN_16}))})},yt=function(a,b,c){var d=function(a){return(0,g.useMemo)(function(){var b,c,d=a.query;if(void 0!==d.subject)return i18n("Тема");if(void 0!==(null===(b=d.correspondents)||void 0===b?void 0:b.to))return i18n("Кому");if(void 0!==(null===(c=d.correspondents)||void 0===c?void 0:c.from))return i18n("От");else return i18n("Везде")},[a.query])}(a);return(0,g.useMemo)(function(){var e,g=function(d){if(b&&a.displayedFilter===d)c(void 0);else c(d);a.setDisplayedFilters(d)},i=[{after:h().createElement(f.Icon,{icon:t.UNION_DROPDOWN_16}),type:Rr.SearchOperandType.ADDRESSEE,title:d,onClick:function(){return g(Rr.SearchOperandType.ADDRESSEE)}},{after:h().createElement(xt,{searched:!!a.query.flags}),type:Rr.SearchOperandType.FILTER,title:i18n("Фильтр"),onClick:function(){return g(Rr.SearchOperandType.FILTER)}}];if(a.hiddenSuggestMap[Rr.SearchOperandType.FOLDER]&&(null===(e=a.folders)||void 0===e?void 0:e.length)>1||void 0!==a.query.folder)i.push({after:h().createElement(xt,{searched:void 0!==a.query.folder}),type:Rr.SearchOperandType.FOLDER,title:i18n("Папка"),onClick:function(){return g(Rr.SearchOperandType.FOLDER)}});if(!s.SEARCH_HIDE_CATEGORIES)i.push({after:h().createElement(xt,{searched:!!a.query.transaction_category}),type:Rr.SearchOperandType.CATEGORY,title:i18n("Категория"),onClick:function(){return g(Rr.SearchOperandType.CATEGORY)}});return i},[d,a.query.folder,a.query.transaction_category,a.query.flags,a.displayedFilter,a.hiddenSuggestMap,a.folders,b])},zt=function(a){var b=a.search,c=a.activeFilter,d=a.setActiveFilter,e=h().useRef(null),f=h().useRef(null),i=yt(b,c,d);return(0,g.useEffect)(function(){return function(){b.setDisplayedFilters()}},[]),Cn(c===Rr.SearchOperandType.FILTER?[e,f]:f,function(){if(c)d(void 0)}),h().createElement("div",null,h().createElement(E.Z,null,function(a){var d=a.Group,g=a.HorizontalScroll,j=a.Tabs,k=a.TabsItem,l=a.FixedLayout;return h().createElement(d,{className:ut},h().createElement("div",{ref:f},h().createElement(j,{mode:"secondary","data-qa-id":(0,Ub.qa)("mobile-search-tabs")},h().createElement(g,null,i.map(function(a){return h().createElement(k,{key:a.type,"data-qa-id":(0,Ub.qa)("mobile-search-tab_"+a.type),after:a.after,onClick:a.onClick,selected:!0},a.title)})))),h().createElement(l,{className:vt},c&&h().createElement("div",{className:wt,ref:e},h().createElement(lt,{active:!0,search:b}))))}))},At=function(){var a=function(b,c){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)if(Object.prototype.hasOwnProperty.call(b,c))a[c]=b[c]})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw new TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),Bt=function(a){function b(b){var c=a.call(this,b)||this;return c.state={searchValue:null},c.onChange=c.onChange.bind(c),c.onClear=c.onClear.bind(c),c.onCancel=c.onCancel.bind(c),c.onKeyDown=c.onKeyDown.bind(c),c.state.searchValue=c.props.search.value||null,c}return At(b,a),b.prototype.setQueryValue=function(a){var b,c,d=this.props.search.query;this.setState({searchValue:a});var e=ua.QUERY;if(void 0!==d.query)e=ua.QUERY,this.props.search.removeOperand(ua.QUERY,ua.QUERY);if(void 0!==d.subject)e=ua.SUBJECT,this.props.search.removeOperand(ua.QUERY,ua.SUBJECT);if(void 0!==(null===(b=d.correspondents)||void 0===b?void 0:b.to))e=ua.TO,this.props.search.removeOperand(ua.QUERY,ua.TO);if(void 0!==(null===(c=d.correspondents)||void 0===c?void 0:c.from))e=ua.FROM,this.props.search.removeOperand(ua.QUERY,ua.FROM);this.props.search.applyOperand(ua.QUERY,e,a),this.props.search.setValue(a),this.fetchSearchModel(a)},b.prototype.onChange=function(a){var b=a.target.value;if(this.setState({searchValue:b}),this.props.search.setValue(b),!b)this.props.search.clear();this.fetchSearchModel(b)},b.prototype.onClear=function(){this.setState({searchValue:""}),this.props.search.clear()},b.prototype.onCancel=function(){var a,b;null===(b=(a=this.props).onCancel)||void 0===b||b.call(a)},b.prototype.handlePageClick=function(){},Object.defineProperty(b.prototype,"calcValue",{get:function(){var a,b,c=this.props.search.query;return this.state.searchValue||this.props.search.value||c.query||c.subject||(null===(a=c.correspondents)||void 0===a?void 0:a.to)||(null===(b=c.correspondents)||void 0===b?void 0:b.from)||""},enumerable:!1,configurable:!0}),b.prototype.onKeyDown=function(a){var b,c;if(13===a.keyCode)l().send("search",{t_feature:"operand_select"}),null===(c=(b=this.props).onEnter)||void 0===c||c.call(b),this.blur(),this.setQueryValue(a.target.value)},b.prototype.render=function(){var a=this;return h().createElement(E.Z,null,function(b){var c=b.Input,d=b.IconButton,e=b.AdaptivityProvider,g=b.SizeType;return h().createElement("div",{className:mt},h().createElement(d,{onClick:a.onCancel,className:pt},h().createElement(f.Icon,{icon:t.NAVIGATION_ARROW_LIST_PREVIOUS})),h().createElement(e,{sizeY:g.COMPACT},h().createElement(c,{className:nt,type:"search",placeholder:i18n("Поиск"),before:h().createElement("span",{className:ot},h().createElement(f.Icon,{icon:t.NAVIGATION_SEARCH_S})),after:a.calcValue&&h().createElement(d,{hoverMode:"opacity",onClick:a.onClear,className:ot},h().createElement(f.Icon,{icon:t.ACTIONS_CLOSE})),value:a.calcValue,onChange:a.onChange,onKeyDown:a.onKeyDown,autoFocus:!0,onFocus:a.props.onFocus})))})},b}(jt),Ct=function(){var a=function(b,c){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)if(Object.prototype.hasOwnProperty.call(b,c))a[c]=b[c]})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw new TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),Dt=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}return Ct(b,a),b.prototype.blur=function(){var a,b;null===(b=(a=this.props).onBlur)||void 0===b||b.call(a)},b.prototype.handlePageClick=function(a){var b,c=this.props,d=c.active,e=c.searchRoot;if(d){var f=Ej().findDOMNode(null==e?void 0:e.current);if(f!==a.target&&!(null===(b=null==f?void 0:f.contains)||void 0===b?void 0:b.call(f,a.target))&&document.body.contains(a.target))this.blur()}},b.prototype.render=function(){var a=this.props.search;return h().createElement(Ds,{mobileView:ss.Suggest,search:a,onAppendSuggest:this.handleAppendSuggest,onAppendSuggestQuery:this.handleAppendSuggestQuery,onAppendSuggestOperand:this.handleAppendSuggestOperand,onItemsCounted:this.handleSuggestItemsCounted,qaEnabled:(0,Ub.U)()})},b}(jt),Et=function(){document.documentElement.style.setProperty("--vkui--octavius_size_portal-menu_height--regular",s.DISABLE_FOOTER_APP_TOOLBAR?"148px":"112px")},Ft=function(a){var b,c=a.search,d=a.setSearchMode,e=a.searchMode,f=(0,ai.C)({name:"search-mobile-panel",mediators:["search-manager","letters-selection"]}),i=f[0],j=i.active,k=i.searching,l=i.selectMode,m=f[1],n=(0,g.useState)(),o=n[0],p=n[1],q=(0,g.useRef)(document.documentElement.style.getPropertyValue("--vkui--octavius_size_portal-menu_height--regular")),r=(0,g.useRef)(null),t=(0,g.useState)(!1),u=t[0],v=t[1],w=(0,g.useState)(0),x=w[0],y=w[1],z=(0,g.useCallback)(function(){document.documentElement.style.setProperty("--vkui--octavius_size_portal-menu_height--regular",q.current)},[]);(0,g.useEffect)(function(){if(j)m(new Event("searchpanel:focus")),null==d||d(!0),Et();return function(){z()}},[]),(0,g.useEffect)(function(){if(e&&!j)m(new Event("searchpanel:focus")),Et()},[e,m]);var A=(0,g.useCallback)(function(){if(v(!1),!k)null==d||d(!1),z(),m(new Event("searchpanel:blur"))},[k,m,d]);(0,g.useEffect)(function(){if(k)null==d||d(!0),Et();else A()},[k,d]);var B=(0,g.useCallback)(function(){m(new Event("searchpanel:blur")),m(new Event("back")),z(),null==d||d(!1)},[d,m]),C=(0,g.useCallback)(function(){v(!0)},[]),D=(0,g.useCallback)(function(){v(!1)},[]),E=(0,g.useCallback)(function(){y(x+1)},[x]);if(!c||!j)return null;else return h().createElement("div",{ref:r},!!c&&j&&h().createElement(Qr,null,!l&&h().createElement(Bt,{active:j,search:c,onCancel:B,onFocus:C,onEnter:D,key:x}),h().createElement(zt,{search:c,activeFilter:o,setActiveFilter:p}),u&&!o&&h().createElement("div",{className:ca()(qt,(b={},b[rt]=s.DISABLE_FOOTER_APP_TOOLBAR,b))},h().createElement(Dt,{searchRoot:r,active:j,search:c,onBlur:A,onSuggestSelect:E}))))},Gt=nc(5293),Ht=nc(9386),It=nc.n(Ht),Jt=nc(7916),Kt=function(){var a=function(b,c){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)if(Object.prototype.hasOwnProperty.call(b,c))a[c]=b[c]})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw new TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),Lt=h().lazy(function(){return Promise.resolve().then(nc.bind(nc,8609))}),Mt=new nf(Gt.searchPanelConfig.name),Nt=function(a){function b(){var b=null!==a&&a.apply(this,arguments)||this;return b.events=Gt.searchPanelConfig.events,b.focus=Gt.searchPanelConfig.focus,b.reset=Gt.searchPanelConfig.reset,b.expandSearchPanel=Gt.searchPanelConfig.expandSearchPanel.bind(b),b.handleSearchPanelBlur=Gt.searchPanelConfig.handleSearchPanelBlur.bind(b),b.searchPanelRef=h().createRef(),b.isMount=!1,b}return Kt(b,a),b.prototype.componentDidUpdate=function(a,b){if(s.SEARCH_PANEL_PORTAL&&b.active!==this.state.active)if(this.updatePortalHeader(),this.overflowPortalProjects(),this.state.active)this.broadcast("select:drop");if(s.SEARCH_PANEL_PORTAL&&b.onlyIcon!==this.state.onlyIcon)this.overflowPortalProjects()},b.prototype.overflowPortalProjects=function(){var a=document.querySelector("#headline");if(a)a.classList.remove("remove-overflow"),setTimeout(function(){a.classList.add("remove-overflow")},100)},b.prototype.updatePortalHeader=function(){var a,b,c=this.state.active?{eventName:"searchExtend",classAction:"add"}:{eventName:"searchCollapse",classAction:"remove"},d=c.eventName,e=c.classAction;__PH.emit(d),null===(a=document.querySelector(".ph-project_open"))||void 0===a||a.click(),null===(b=document.querySelector("#headline"))||void 0===b||b.classList[e]("search-extend")},b.prototype.getSearchInput=function(){return this.searchPanelRef.current},b.prototype.render=function(){var a,b=this.props,c=b.ponymode,d=b.store,e=b.categories,f=b.colorTags,i=this.state,j=i.rightColumn,k=i.whiteTheme,l=i.hide,m=i.darkMode,n=i.maxWidth,o=i.size,p=i.layoutType,q=i.active,r=i.onlyIcon,t=i.leftColumn;if(!this.isMount){if(q)this.updatePortalHeader();this.overflowPortalProjects(),this.isMount=!0}var u=s.SEARCH_PANEL_PORTAL?s.SEARCH_PANEL_SIZE:j;return h().createElement("div",{"data-qa-id":(0,Ub.qa)("portal"),"data-qa-type":(0,Ub.qa)("search-panel-wrapper"),className:Mt.root((a={active:q,"only-icon":r,hide:l},a["size_".concat(o)]=!0,a["type_".concat(p)]=!0,a["pony-mode"]=c,a)),style:{maxWidth:n}},h().createElement("div",{"data-qa-id":(0,Ub.qa)("search-panel".concat(q?":active":"")),style:{width:q?"100%":"auto"},className:Mt.elem("wrapper",{active:q,inactive:!q})},h().createElement("div",{className:Mt.elem("left-col")},h().createElement(Jc,{ico:"arrow-back",nowrap:!0,"radar-id":"back",text:i18n("Сбросить поиск"),compact:c,pure:!0,short:t<=50,centered:!0,remitEvents:{mousedown:"back"},broadcastEvent:(0,ze.Yv)(this),component:Je(),key:"button2",updateRemitEventsName:!0})),s.NEW_FEATURES_BELL&&h().createElement(Jt.Uo,{className:Mt.elem("bell"),isBottomRight:r}),h().createElement("div",{className:Mt.elem("right-col"),style:{width:!r&&u}},r?h().createElement(Jc,{ico:"search",compact:c,pure:!0,white:!k,centered:!0,remitEvents:{click:{stop:!0,name:"expandSearchPanel"}},broadcastEvent:(0,ze.Yv)(this),component:Je(),key:"button2",updateRemitEventsName:!0}):h().createElement(Jc,{shortcut:"/",short:j<240,useMixin:"shortcut-title",remitEvents:{click:{stop:!0,name:"expandSearchPanel"}},broadcastEvent:(0,ze.Yv)(this),component:It(),key:"search-panel-button",updateRemitEventsName:!0})),h().createElement("div",{className:Mt.elem("layer")},h().createElement(jt,{ref:this.searchPanelRef,active:q,onBlur:this.handleSearchPanelBlur,search:d.search,size:o,ponyMode:c,categories:e,colorTags:f,darkMode:m})),"none"!==s.WIDGET_HEADER_TYPE&&h().createElement("div",{className:Mt.elem("widget")},h().createElement(g.Suspense,{fallback:null},h().createElement(Lt,{onlyIcon:r})))))},b.defaultProps=Gt.searchPanelConfig.defaults,b}(h().Component),Ot=(0,ze.v$)(Gt.searchPanelConfig.name,Nt),Pt={container:"_1lwCBvq0cmXim-ZbQkhI4Z"},Qt=function(){var a=function(b,c){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)if(Object.prototype.hasOwnProperty.call(b,c))a[c]=b[c]})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw new TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),Rt=function(){return(Rt=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++)for(var e in b=arguments[c])if(Object.prototype.hasOwnProperty.call(b,e))a[e]=b[e];return a}).apply(this,arguments)},St=function(a,b,c,d){var e,f=arguments.length,g=f<3?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)if(e=a[h])g=(f<3?e(g):f>3?e(b,c,g):e(b,c))||g;return f>3&&g&&Object.defineProperty(b,c,g),g},Tt=[sa.OperandFilterTypes.UNREAD,sa.OperandFilterTypes.FLAGGED,sa.OperandFilterTypes.ATTACH];function Ut(a,b){if(!a||!b)return!1;else return Vr().fromRPCInterval(a).equalsEpsilon(Vr().fromRPCInterval(b))}var Vt=function(a){function b(b){var c=a.call(this,b)||this;return c.handleAppendSuggest=c.handleAppendSuggest.bind(c),c.handleAllFoldersClick=c.handleAllFoldersClick.bind(c),c.handleAllDatesClick=c.handleAllDatesClick.bind(c),c.handleDataPickerClick=c.handleDataPickerClick.bind(c),c}return Qt(b,a),b.prototype.handleAppendSuggest=function(a,b,c,d,e){var f=this.props.search,g=f.query,h=g.correspondents,i=g.folder,j=g.query,k=g.transaction_category,m=g.interval,n=c?"_".concat(c):"";if(l().send("".concat(b).concat(n,"_s"),{t_feature:"operand_select"}),!e){if(!e){if(b===Rr.SearchOperandType.CATEGORY&&k)return void f.updateOperand(b,k,c);if(b===Rr.SearchOperandType.FOLDER&&i>=0&&i!==f.currentMailbox.id)return void f.updateOperand(b,void 0,void 0,d);if(b===Rr.SearchOperandType.DATE&&m)return void f.updateOperand(b,void 0,void 0,d);if(b===Rr.SearchOperandType.QUERY){var o=h.to?"to":"from";if(j&&"query"===c)return f.updateOperand(b,Rr.SearchOperandType.QUERY,c,d+" "+j),void f.removeOperand(b,o);else return void f.updateOperand(b,o,c)}f.applyOperand(b,c,d)}}else if(b===Rr.SearchOperandType.FILTER||b===Rr.SearchOperandType.CATEGORY)f.removeOperand(b,c)},b.prototype.handleAllFoldersClick=function(){this.props.search.removeOperand(Rr.SearchOperandType.FOLDER)},b.prototype.handleAllDatesClick=function(){this.props.search.removeOperand(Rr.SearchOperandType.DATE)},b.prototype.handleDataPickerClick=function(a){var b=this.props,c=b.search,d=b.onSearchPanelFocus;a.stopPropagation(),c.setOperandActive(Rr.SearchOperandType.DATE,void 0,{date:Date.now(),lapse:0}),d&&d()},b.prototype.renderElement=function(a){var b=this.props,c=b.search,d=b.shortcut,e=b.qaEnabled,f=b.ponyMode,g=b.nanoMode,i=(a.key||0===a.key)&&a.key.toString(),j=f&&g?"nano":f?"compact":"normal";return h().createElement(ts,Rt({listType:jg.NAVIGATION,search:c,short:d,mode:j},a,{testId:e&&(a.testId||i),forceFilter:!0}))},b.prototype.renderMailboxes=function(){var a=this,b=this.props.search;if(1===b.allMailboxes.length)return null;var c=b.countedMailboxes,d=b.currentMailbox;return h().createElement(h().Fragment,null,c.map(function(b,c){var e=h().createElement(Zf,null,b.email),f=d.id===b.id,g=f,i=Rt(Rt({},b),{tooltip:e,boldText:g});return a.renderElement({key:c,testId:"".concat(Rr.SearchOperandType.MAILBOX,":").concat(b.email),mailboxSuggest:i,selected:f,onAppendSuggest:a.handleAppendSuggest})}))},b.prototype.renderContacts=function(){var a=this.props,b=a.search,c=a.shortcut,d=b.query.correspondents;if(d&&!c){var e=d.to,f=d.from;if(!e||!f){var g=e||f;return h().createElement(h().Fragment,null,b.allMailboxes.length>1&&this.renderElement({hr:!0}),this.renderElement({contactSuggest:{email:g,avatarSize:16},onAppendSuggest:this.handleAppendSuggest,selected:!!e,text:"".concat(i18n("Кому"),": "),title:"".concat(i18n("Кому"),": ")+g}),this.renderElement({contactSuggest:{email:g,avatarSize:16},onAppendSuggest:this.handleAppendSuggest,selected:!!f,text:"".concat(i18n("От кого"),": "),title:"".concat(i18n("От кого"),": ")+g}),this.renderElement({onAppendSuggest:this.handleAppendSuggest,text:i18n("Вся переписка"),wordSuggest:{word:g}}))}}},b.prototype.renderFilters=function(){var a=this,b=this.props.search.query.flags,c=void 0===b?{}:b;return h().createElement(h().Fragment,null,this.renderElement({hr:!0}),Tt.map(function(b){return a.renderElement({key:b,onAppendSuggest:a.handleAppendSuggest,selected:c[b],type:b})}))},b.prototype.renderCategories=function(){var a=this;if(!s.SEARCH_HIDE_CATEGORIES){var b=this.props,c=b.search,d=b.categories,e=c.query.transaction_category,f=void 0===e?"":e;return h().createElement(h().Fragment,null,this.renderElement({hr:!0}),d.map(function(b){if(b===sa.CategoryTypes.DOCUMENT_SCANS)return a.renderElement({key:sa.CategoryTypes.DOCUMENT_SCANS,onAppendSuggest:a.handleAppendSuggest,selected:b===f,type:sa.CategoryTypes.DOCUMENT_SCANS,testId:"category:".concat(sa.CategoryTypes.DOCUMENT_SCANS)});else return a.renderElement({key:b,onAppendSuggest:a.handleAppendSuggest,selected:b===f,type:b,testId:"category:".concat(b)})}))}},b.prototype.renderFolders=function(){var a=this,b=this.props,c=b.search,d=b.shortcut,e=c.folders,f=c.currentMailbox,g=e.filter(function(a){return a.found&&a.folderModel}),i=c.query.folder,j=void 0===i?void 0:String(i);if(!d)if(g.length&&(1!==g.length||void 0!==j&&g[0].id!==j||g[0].isShareTake)){var k=!j&&"0"!==j||j===f.id;return h().createElement(h().Fragment,null,this.renderElement({hr:!0}),this.renderElement({key:"top",onMouseDown:this.handleAllFoldersClick,selected:k,text:i18n("Все папки")}),g.map(function(b){return a.renderElement({folderSuggest:b,key:b.idNumber,onAppendSuggest:a.handleAppendSuggest,selected:j===b.id})}))}},b.prototype.renderDates=function(){var a=this,b=this.props,c=b.search,d=b.shortcut,e=c.response.dates,f=c.query.interval,g=e.all;if(d)return h().createElement(h().Fragment,null,this.renderElement({hr:!0}),this.renderElement({key:"data-picker",iconName:ua.CALENDAR,onMouseDown:function(){},onClick:this.handleDataPickerClick,selected:!1,text:i18n("Указать дату")}));if(!(e.all.length<=1))return h().createElement(Qr,{ponyMode:this.props.ponyMode,nanoMode:this.props.nanoMode},this.renderElement({hr:!0}),this.renderElement({key:"top-top",onClick:this.handleAllDatesClick,selected:!f,text:i18n("За всё время")}),g.map(function(b){return a.renderElement({dateSuggest:b,key:b.type+":"+b.from,onAppendSuggest:a.handleAppendSuggest,selected:Ut(b,f)})}))},b.prototype.renderColorTags=function(){var a=this;if(s.ENABLE_COLOR_TAGS_SEARCH){var b=this.props,c=b.search,d=b.colorTags,e=c.query.transaction_category,f=void 0===e?"":e;return h().createElement(h().Fragment,null,this.renderElement({hr:!0}),d.map(function(b){return a.renderElement({key:b,onAppendSuggest:a.handleAppendSuggest,selected:b===f,type:b,testId:"color-tag:".concat(b)})}))}},b.prototype.render=function(){var a,b=this.props,c=b.ponyMode,d=b.nanoMode,e=b.shortcut,f=b.qaEnabled,g=ca()(((a={})[Pt.container]=!0,a[Pt.shortcut]=e,a));return h().createElement(Qr,{ponyMode:c,nanoMode:d},h().createElement("div",Rt({className:g},f?{"data-test-id":"categories"}:{}),this.renderMailboxes(),this.renderContacts(),this.renderFilters(),this.renderColorTags(),this.renderCategories(),this.renderFolders(),this.renderDates()))},b=St([Tr.observer],b)}(h().Component),Wt=nc(8269),Xt=nc.n(Wt),Yt=function(){l().send("settings_cleanmailbox_ready")},Zt=function(a){var b=a.text;if(l().send("settings_cleanmailbox_error"),!b)return ge().error({unique:!0});ge().error({text:b})},$t=function(a){var b=a.darkMode,c=a.ponymode,d=a.onPopupShow,e=a.isFullheight,f=(0,g.useState)(null),i=f[0],j=f[1];(0,g.useEffect)(function(){window.require(["settings.cleanmailbox.page"],function(a){j(a)})},[j]);if(!i)return null;else return h().createElement(i,{onContentReady:Yt,onError:Zt,onSecureFolder:function(a){var b=a.folder;return d(!0),Xt()(b).finally(function(){d(!1)})},darkMode:b,ponymode:c,isFullheight:e})},_t=function(a){var b=a.activeItemIndex,c=a.setActiveItemIndex,d=a.startSection,e=a.availableNavigationItems;(0,g.useEffect)(function(){if(d){var a=(f=d,e.findIndex(function(a){return a.id===f}));if(l().send("settings-dock_sidebar_itemIndex_".concat(d)),b===a)return;if(e[a].handle)return e[a].handle(),void c(a);c(a)}var f},[d])},au="_1AXeFOZ6FZljClOyAmifSq",bu="hy6wRqVbNmT8XkrDfKsMW",cu="_1YkJIthKTnGWtAuG8-a_-V",du="VU2Vk_VHHt6WvmcSzjCW3",eu="Gz5GjPuUWCsNUwx2wOggE",fu="bJCxAsQ0eXX6wx01CQ7ux",gu=function(a){var b=a.model,c=a.selectedId,d=a.onEvent,e=b.id,f=b.colorized,g=b.preview,i=b.title,j=f?{backgroundColor:f}:{backgroundImage:"url(".concat(g,")")};return h().createElement("div",{className:ca()(au,f&&fu),key:b.id},h().createElement("div",{className:ca()(bu,e===c&&eu),onClick:function(){var a=new Event("theme:select");a.details={model:b},d(a),l().send("themes_select_".concat(b.id))},"data-test-id":"themes-item-"+b.id,style:j},h().createElement("div",{className:cu}),h().createElement("span",{className:du},i)))},hu={colorized:"_1eNsQPD4WYb6ZmExbjsyce"},iu=function(a){var b=a.onEvent,c=a.themes,d=c.main,e=c.colorized,f=c.selected,g=null==f?void 0:f.id,i=function(a){return a.map(function(a){return h().createElement(gu,{model:a,selectedId:g,onEvent:b,key:a.id})})};return h().createElement(h().Fragment,null,h().createElement("div",{className:hu.colorized,"data-test-id":"themes-container-colorized"},i(e)),h().createElement("div",{className:hu.main,"data-test-id":"themes-container-main"},i(d)))},ju="_3bobCcH2i6CjXBdV6jLbeC",ku="_39cAq2mMwfkX5RH_UKKkws",lu="_2x_046fMPXhKznJisMRJb8",mu="_2jv2OImEVD-elNS7Sa7nh",nu="_1fiT1m_S8jkHsPAapA5uSb",ou="_1Lod0h7ryPD83RuYmN-ING",pu="_3vEv928jeaEvb_gp1LHqxr",qu="_3WC4Upnrun59Z_LKACM-a0",ru={header:i18n("Настройки внешнего вида вашей почты и темы оформления"),threePane:i18n("Список писем с колонкой письма"),ponymode:i18n("Компактный вид почты"),shortcuts:i18n("Свернуть список папок"),threads:i18n("Группировать письма одной темы"),todo:i18n("Список задач"),letterListDividers:i18n("Показывать разделители списка")},su=function(){},tu=function(a){l().send("settings-dock_apprnce_tggl_".concat(a))},uu=function(a){var b,c=a.onEvent,d=a.support3pane,e=a.layoutType,g=a.canTogglePonymode,i=a.ponymode,j=a.canToggleShortcuts,k=a.manualShortcuts,l=a.threads,m=a.themes,n=a.canToggleTodo,o=a.todo,p=a.lettersDividersEnabled,q=a.canToggleLettersDividers,r="3pane"===e;return h().createElement("div",{className:ca()(ju,(b={},b[qu]=i,b))},h().createElement("div",{className:ku},h().createElement(f.Text,{mode:i?"small":"base"},ru.header),h().createElement(f.Margin,{desktopX:i?3:5,mobileX:i?3:5})),h().createElement("div",{className:lu},d&&h().createElement("div",{onClick:function(){c(new Event("layout:toggle")),tu("layout")},className:mu},h().createElement("div",{className:nu},h().createElement(f.Switch,{checked:r,onChange:su,compact:!0,testId:r?"3pane-enabled":"3pane-disabled"})),h().createElement(f.Space,{inline:!0,large:!0}),h().createElement("div",{className:ou},h().createElement(f.Text,{mode:i?"small":"base"},ru.threePane))),g&&h().createElement("div",{onClick:function(){c(new Event("ponymode:toggle")),tu("ponymode")},className:mu},h().createElement("div",{className:nu},h().createElement(f.Switch,{checked:i,onChange:su,compact:!0,testId:i?"ponymode-enabled":"ponymode-disabled"})),h().createElement(f.Space,{inline:!0,large:!0}),h().createElement("div",{className:ou},h().createElement(f.Text,{mode:i?"small":"base"},ru.ponymode))),j&&h().createElement("div",{onClick:function(){c(new Event("shortcuts:toggle")),tu("shortcuts")},className:mu},h().createElement("div",{className:nu},h().createElement(f.Switch,{checked:k,onChange:su,compact:!0,testId:k?"shortcuts-enabled":"shortcuts-disabled"})),h().createElement(f.Space,{inline:!0,large:!0}),h().createElement("div",{className:ou},h().createElement(f.Text,{mode:i?"small":"base"},ru.shortcuts))),h().createElement("div",{onClick:function(){c(new Event("threads:toggle")),tu("threads")},className:mu},h().createElement("div",{className:nu},h().createElement(f.Switch,{checked:l,onChange:su,compact:!0,testId:l?"threads-enabled":"threads-disabled"})),h().createElement(f.Space,{inline:!0,large:!0}),h().createElement("div",{className:ou},h().createElement(f.Text,{mode:i?"small":"base"},ru.threads))),q&&h().createElement("div",{onClick:function(){c(new Event("lettersdividers:toggle")),tu("lettersdividers")},className:mu},h().createElement("div",{className:nu},h().createElement(f.Switch,{checked:p,onChange:su,compact:!0,testId:p?"latters-list-dividers-enabled":"latters-list-dividers-disabled"})),h().createElement(f.Space,{inline:!0,large:!0}),h().createElement("div",{className:ou},h().createElement(f.Text,{mode:i?"small":"base"},ru.letterListDividers))),n&&h().createElement("div",{onClick:function(){c(new Event(Wn.TODO_TOGGLE)),tu("todo")},className:mu},h().createElement("div",{className:nu},h().createElement(f.Switch,{checked:o,onChange:su,compact:!0,testId:o?"todo-enabled":"todo-disabled"})),h().createElement(f.Space,{inline:!0,large:!0}),h().createElement("div",{className:ou},h().createElement(f.Text,{mode:i?"small":"base"},ru.todo)))),h().createElement("div",{className:pu},h().createElement(iu,{themes:m,onEvent:c})))},vu=nc(1349),wu=nc.n(vu),xu=nc(1936),yu=nc.n(xu),zu=nc(4198),Au=nc.n(zu),Bu=nc(7047),Cu=nc.n(Bu),Du={page:"_3yWjF-Af5XijT3-K4LlCUx",page_compact:"_3pwC2gcuhQKHxvvv2R49kR",prompt:"_3jb9hdaq_FemxP4g-zNZ1W",prompt_compact:"_2AcKxOEPr5zm826ii940bO",page_fullScreen:"_1G1N5xyOzosxFqjzmHCquL"};function Eu(){switch(wu().getAsString("browser-settings-promo-type")){case"mailto":return"mailto";default:case"push":return"push"}}function Fu(){var a,b;null===(a=yu().get("octavius-letterblock-browser-settings"))||void 0===a||a.save({state:!0}),null===(b=yu().get("octavius-notify-browser-settings"))||void 0===b||b.save({state:!0})}var Gu,Hu=function(a){var b=a.compact,c=a.darkMode,d=a.isFullScreen,e=(0,g.useState)(null),i=e[0],j=e[1],k=(0,g.useCallback)(function(a){ge().add(a)},[]),l=(0,g.useCallback)(function(){if("push"===Eu())Fu()},[]),m=(0,g.useCallback)(function(){var a;if("mailto"===Eu())Fu();null===(a=yu().get("from-mailto-handler-count"))||void 0===a||a.save({state:!0})},[]);if((0,g.useEffect)(function(){Cu()("settings.general.page/browser-settings").then(function(a){return j(function(){return a})})},[]),!i)return null;else return h().createElement(f.Responsive,{mode:"desktopS"},h().createElement(i,{activeEmail:Au().getUser().attributes.email,onEvent:k,onMailToToggle:m,onPushToggle:l,ponymode:b,isDarkMode:c,className:[Du.page,b&&Du.page_compact,d&&Du.page_fullScreen].filter(Boolean).join(" "),promptClassName:[Du.prompt,b&&Du.prompt_compact].filter(Boolean).join(" ")}))},Iu=f.TwoKitTheming.createUseStyles({wrapper:{height:"100%"}}),Ju=function(){return(Ju=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++)for(var e in b=arguments[c])if(Object.prototype.hasOwnProperty.call(b,e))a[e]=b[e];return a}).apply(this,arguments)},Ku=function(){},Lu=function(a){var b=a.text,c=a.qa;ge().add({text:b,qa:c,duration:s.SETTINGS_DOCK_CLEANMASTER_NOTIFY_DURATION,inline:!1})},Mu=function(a){var b=a.text,c=a.qa;ge().error({text:b,qa:c,duration:s.SETTINGS_DOCK_CLEANMASTER_NOTIFY_DURATION,inline:!1})},Nu=function(a){var b=a.onPopupShow,c=void 0===b?Ku:b,d=a.compact,e=void 0===d?!1:d,f=g.useRef(),h=Iu(a);return g.useEffect(function(){window.require(["cleanmaster"],function(a){var b=a.default(f.current,{features:wu(),septima:!1,app:!1,touch:!1,octavius:!0,headerMode:"hidden",isDockSettings:!0,compact:e,onModalVisibilityChange:function(a){c(a)}}),d={"@stat/radar":function(a){var b=a.name,c=a.params,d=a.dwh,e=void 0===d?{}:d;l().send(b,{i:c,v:1,dwh:Ju({},e)})},"@search/open":function(a){var b=a.from,c=a.onlyNewsletters;P()(ao()(wu().getAsString("searchUrl","/search"),{q_from:b,q_newsletters_exclude_transactions:c}))},"@notify/success":Lu,"@notify/info":Lu,"@notify/error":Mu};Object.keys(d).forEach(function(a){b.on(a,d[a])}),b.create()})},[]),g.createElement("div",{ref:f,className:h.wrapper})},Ou="_2NRfgzOvCQj8dfoA841zPJ",Pu="_33Wbz9kDCBjFoklUxhiy_r",Qu="_29vsrPctlrfHWseJn5DkZw",Ru=function(a){var b=a.text,c=a.isExternalLink,d=a.flag;return h().createElement("span",{className:Ou},h().createElement("span",{className:Pu},b),d&&h().createElement("span",{className:Qu,style:{backgroundImage:'url("'.concat(d,'")')}}),c&&h().createElement(h().Fragment,null,h().createElement(f.Space,{small:!0,responsive:"desktopS"}),h().createElement(f.Space,{small:!0,responsive:"desktopS"}),h().createElement(f.Icon,{icon:t.NAVIGATION_ARROW_NEXT_S})))},Su="_1babwMxfp82FGwQ28dhmYJ",Tu="_2ILLnEBSKtOtyFE7j9ALDX",Uu=function(a){var b=a.onHide,c=a.onScroll,d=a.theme,e=a.lang,i=(0,g.useState)(!1),j=i[0],k=i[1],m=(0,g.useRef)(null);return(0,g.useEffect)(function(){if(m.current){var a=function(a){var d=null;try{d=JSON.parse(a.data)}catch(a){return void l().send("invalid_post_message")}if("close"===d.type)l().send("settings-pulse-subs_close"),b();if("scroll"===d.type)c();if("subscribe"===d.type){var e=d.data.id;l().send("settings-pulse-subs_on",{dwh:{id:e}})}if("unsubscribe"===d.type){e=d.data.id;l().send("settings-pulse-subs_off",{dwh:{id:e}})}if("pulseHTMLLoaded"===d.type)k(!j)};return window.addEventListener("message",a),function(){window.removeEventListener("message",a)}}},[m.current,b,c,k]),h().createElement(h().Fragment,null,!j?h().createElement("div",{className:ca()(Su)},h().createElement(f.Progress,{size:35})):null,h().createElement("iframe",{className:!j?ca()(Tu):null,src:s.FEED_SUBSCRIPTIONS_IFRAME_URL_SETTINGS+"?theme=".concat(d,"&lang=").concat(e),width:"100%",height:"100%",frameBorder:"0",ref:m}))},Vu="_3Cn-EmstXVr9LMQLvXQi3",Wu="_1gWJhJFtkaru-QhzvkexcZ",Xu="DQ3TUvpE-8DYg0TVU-KL8",Yu="_1D_8UpQJRYEyyXCR_YRnpR",Zu="_1gFBwYzu2iOBwpzNaoe91M",$u="snp0qY8HzcByvw9wEIlxV",_u="_2Hah1-jSTlP39ja1gvmk5N";!function(a){a.Appearance="appearance",a.Metathreads="metathreads",a.Cleanmaster="cleanmaster",a.Cleanmailbox="cleanmailbox",a.BrowserSettings="browsersettings",a.Pulse="pulse",a.Help="help",a.Security="security",a.Log="log",a.Lang="lang",a.More="more",a.HelpVK="support_vk"}(Gu||(Gu={}));var av,bv=function(){return(bv=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++)for(var e in b=arguments[c])if(Object.prototype.hasOwnProperty.call(b,e))a[e]=b[e];return a}).apply(this,arguments)},cv="calc(100% - var(--vkui--octavius_size_headline_height--regular))",dv=function(a){if(!a)return{collapsed:"50%",expanded:cv}},ev=function(a){var b,c=a.show,d=a.startSection,e=a.darkMode,i=a.ponymode,j=a.applicationElement,k=a.userLang,m=a.disableExpand,n=a.disableAutoExpand,o=a.startFullscreen,p=a.thirtyFiftyMode,q=a.metathreadsData,r=a.onMetathreadsSettingsEdit,u=a.onMetathreadsHelpClick,v=a.onEvent,w=a.metathreadsFiltersCount,x=a.metathreadsFiltersCountLoading,y=(0,g.useRef)(null),z=(0,g.useState)(0),A=z[0],B=z[1],C=(0,g.useState)(o),D=C[0],F=C[1],G=(0,g.useState)(!1),H=G[0],I=G[1],J=(0,g.useState)(!1),K=J[0],L=J[1],M=(0,g.useState)(!0),N=M[0],O=M[1],Q=(0,g.useCallback)(function(a){if(c)if(B(0),F(o),I(!1),L(!1),v(new Event("settings:close")),y.current)l().send("settings-dock_close_".concat(a))},[c,B,F,o,I,L,y,v]),R=(0,g.useCallback)(function(){Q("outside")},[Q]),S=(0,g.useCallback)(function(){Q("esc")},[Q]),T=(0,g.useCallback)(function(){Q("cross")},[Q]),U=(0,g.useCallback)(function(){Q("pulse-frame")},[Q]),V=function(){l().send("settings_dock_".concat(D?"collapse":"expand")),F(!D),I(!1),L(!0)},W=function(){if(l().send("settings_dock_auto-expand"),H)F(!0),L(!0)},X=h().useCallback(function(){Q("support_vk"),v(new Event("support_vk:click"))},[Q,v]),Y=[{id:Gu.Appearance,testId:Gu.Appearance,text:h().createElement(Ru,{text:i18n("Внешний вид")})},{id:Gu.Metathreads,testId:Gu.Metathreads,text:h().createElement(Ru,{text:i18n("Умная сортировка")}),isHidden:s.HIDE_METATHREADS},{id:Gu.Cleanmaster,testId:Gu.Cleanmaster,text:h().createElement(Ru,{text:s.SETTINGS_DOCK_CLEANMASTER_USE_UNSUBSCRIBE_TITLE?i18n("Отписаться от рассылок"):i18n("Управление рассылками"),isExternalLink:s.SETTINGS_DOCK_CLEANMASTER_INLINE_DISABLED}),href:s.SETTINGS_DOCK_CLEANMASTER_INLINE_DISABLED?s.CLEANMASTER_URL:null,isHidden:s.SETTINGS_DROPDOWN_HIDE_CLEANMASTER},{id:Gu.Cleanmailbox,testId:Gu.Cleanmailbox,text:h().createElement(Ru,{text:i18n("Разобрать почту")}),isHidden:s.SETTINGS_DOCK_HIDE_CLEANMAILBOX},{id:Gu.BrowserSettings,testId:Gu.BrowserSettings,text:h().createElement(Ru,{text:i18n("Работа в браузере")}),isHidden:!s.SETTINGS_DOCK_BROWSERSETTINGS_ENABLED},{id:Gu.Pulse,testId:Gu.Pulse,text:h().createElement(Ru,{text:i18n("Подписка на новости"),isExternalLink:s.SETTINGS_DOCK_PULSE_INLINE_DISABLED}),isHidden:!s.FEED_SUBSCRIPTIONS,handle:s.SETTINGS_DOCK_PULSE_INLINE_DISABLED&&function(){v(new Event("subscriptions:open")),Q("pulse")}},{id:Gu.Help,testId:Gu.Help,text:h().createElement(Ru,{text:i18n("Помощь"),isExternalLink:!0}),href:s.HELP_URL,isHidden:s.SETTINGS_DROPDOWN_HIDE_HELP},{id:Gu.HelpVK,testId:Gu.HelpVK,text:h().createElement(Ru,{text:i18n("Чат с поддержкой VK"),isExternalLink:!0}),handle:X,isHidden:!s.SHOW_VK_HELP},{id:Gu.Security,testId:Gu.Security,text:h().createElement(Ru,{text:i18n("Безопасность"),isExternalLink:!0}),href:s.SECURITY_URL,isHidden:s.SETTINGS_DROPDOWN_HIDE_SECURITY},{id:Gu.Log,testId:Gu.Log,text:h().createElement(Ru,{text:i18n("Отправить логи")}),isHidden:!s.ENABLE_LOGGING,handle:function(){v(new Event("logs:click"))}},{id:Gu.Lang,testId:Gu.Lang,text:h().createElement(Ru,{text:"".concat(i18n("Язык:")," ").concat(Gm.LANG_MAP[k].label),flag:Gm.LANG_MAP[k].src})},{id:Gu.More,testId:Gu.More,text:h().createElement(Ru,{text:i18n("Все настройки"),isExternalLink:!0}),href:s.SETTINGS_URL,isHidden:s.SETTINGS_DROPDOWN_HIDE_SETTINGS}].filter(function(a){return!a.isHidden});f.hooks.useOnESC({onEsc:S});var Z=function(a){O(!a)};_t({activeItemIndex:A,setActiveItemIndex:B,startSection:d,availableNavigationItems:Y}),(0,g.useEffect)(function(){if(c)if(l().send("settings-dock_sidebar_show_".concat(Y[A].id)),y.current)y.current.scrollTop=0},[c,A]),(0,g.useEffect)(function(){null==j||j.classList.toggle("g-app-scaled",c),document.body.classList.toggle(Vu,c)},[c,j]),(0,g.useEffect)(function(){if(c&&!n&&!K&&Y[A].id!==Gu.Appearance)I(!0);else I(!1)},[c,A,n]);var _=function(a,b,c){var d=a.thirtyFiftyMode;if(b)return cv;if(d||c)return f.DOCK_HEIGHT_MODES.AUTO_EXPAND;else return"50%"}(a,D,H);return h().createElement(f.Dock,{show:c,closeByBackdropClick:N,scaleElement:j,onHide:R,testId:"settings-dock",height:_,autoExpandHeights:dv(p),onExpand:W},h().createElement("div",{className:Wu,"data-test-id":D?"dock-expanded":"dock-collapsed"},h().createElement(E.Z,null,function(a){var b=a.Button;return h().createElement("div",{className:Xu},!m&&h().createElement(h().Fragment,null,h().createElement(f.Tooltip,{overlay:h().createElement(f.Text,null,D?i18n("Свернуть"):i18n("Развернуть"))},h().createElement(b,{"data-test-id":D?"collapse":"expand",mode:"tertiary",size:i?"s":"l",before:h().createElement("div",{style:{display:"flex"}},h().createElement(f.Icon,{icon:D?t.NAVIGATION_ZOOM_OUT_OVERLAY:t.NAVIGATION_ZOOM_OVERLAY})),onClick:V})),h().createElement(f.Space,{responsive:"desktopS",small:!0}),h().createElement(f.Space,{responsive:"desktopS",small:!0})),h().createElement(f.Tooltip,{placement:"bottomRight",overlay:h().createElement(f.Text,null,i18n("Закрыть"))},h().createElement(b,{"data-test-id":"cross",mode:"tertiary",size:i?"s":"l",before:h().createElement("div",{style:{display:"flex"}},h().createElement(f.Icon,{icon:t.ACTIONS_CLOSE_BIG})),onClick:T})))}),h().createElement("div",{className:Yu},h().createElement("div",{className:_u},h().createElement(f.NavigationMenu,{activeItem:A,items:Y,onClick:function(a,b){if(l().send("settings-dock_sidebar_click_".concat(Y[a].id)),Y[a].href)return b.preventDefault(),void P()(Y[a].href);if(Y[a].handle)return b.preventDefault(),void Y[a].handle();else B(a)},size:i?"compact":"normal",noBorder:!0})),h().createElement("div",{className:ca()(Zu,(b={},b[$u]=Y[A].id===Gu.Pulse,b)),ref:y,"data-test-id":"".concat(Y[A].id,"-page")},Y[A].id===Gu.Appearance&&h().createElement(uu,bv({},a)),Y[A].id===Gu.Cleanmaster&&h().createElement(Nu,{onPopupShow:Z,compact:i}),Y[A].id===Gu.BrowserSettings&&h().createElement(Hu,{compact:i,darkMode:e,isFullScreen:D}),Y[A].id===Gu.Cleanmailbox&&h().createElement($t,{darkMode:e,ponymode:i,onPopupShow:Z,isFullheight:D}),Y[A].id===Gu.Pulse&&h().createElement(Uu,{onHide:U,onScroll:W,theme:e?"dark":"light",lang:k}),Y[A].id===Gu.Metathreads&&h().createElement(Il,{key:q.length,metathreadsData:q,onSettingsEdit:r,onHelpClick:u,onCreateFilter:function(){Q("add-filter"),v(new Event("metathreads:filters:create"))},updateFilters:function(){v(new Event("metathreads:filters:update"))},filtersCount:w,filtersCountLoading:x,ponymode:i,darkMode:e}),Y[A].id===Gu.Lang&&h().createElement(Rm,{currentLang:k,darkMode:e,ponymode:i})))))},fv=nc(7596),gv=nc(7771),hv=nc.n(gv),iv=nc(3805),jv=nc.n(iv),kv=nc(5510),lv=nc.n(kv),mv=nc(6146),nv=nc.n(mv),ov=function(){return(ov=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++)for(var e in b=arguments[c])if(Object.prototype.hasOwnProperty.call(b,e))a[e]=b[e];return a}).apply(this,arguments)},pv=new nf("thread"),qv=new nf("delimeter");function rv(){var a,b,c=this,d=ov(ov({},this.props),this.state),e=d.model,f=e.get("subject")||i18n("<Без темы>"),g=d.folders,i=null===(b=null===(a=d.route)||void 0===a?void 0:a.params)||void 0===b?void 0:b.part,j=d.ponymode,k=e.get("transaction_metadata"),l=this.actualLettersEnabled(),m=e.get("messages.0.headers.X-Mailru-Bimi-Organization"),n=this.getResendData(),o=1==d.model.get("length"),p=this._formDatesMetadata(),q=e.get("transaction_category"),r=this.isHideCategory(e);return h().createElement("div",{ref:this.threadRef,"data-qa-id":(0,Ub.qa)("thread"),"data-transaction-category":d.model.get("transaction_category"),className:pv.root({preview:d["preview-mode"],fluid:!d.compact,compact:d.compact,rounded:d.rounded,touch:d.touch,"no-divider":d.noDivider,compressed:d.ponymode})},h().createElement("div",{className:pv.elem("header",{"pony-mode":d.ponymode})},!d["preview-mode"]&&h().createElement(h().Fragment,null,h().createElement("div",{className:pv.elem("meta-header")},function(){if(c.parentalControlDieEnabled())return h().createElement(Jc,{type:"parent-filter",model:e,useMediators:["letters-actions","themes-manager"],component:Ze(),key:"letter-meta"});if(c.getMessageFolder().isSpam()&&e.get("messages.0.flags.blacklist_spam"))return h().createElement(Jc,{type:"spam-blacklist",model:e,useMediators:["letters-actions","themes-manager"],component:Ze(),key:"letter-meta"});if(d.showOfficialSender&&c.isOfficialSender(e))return h().createElement(Jc,{type:"official-sender",model:e,sender:m,useMediators:["themes-manager"],"data-qa-id":"official-sender-promo",component:Ze(),key:"letter-meta"});if(c.isShowPromoPush()&&e.meta("unread-on-open"))return h().createElement(Jc,{type:"promo-push-header",model:e,useMediators:["letters-actions","themes-manager"],component:"letter-meta",key:"letter-meta"});if(l&&d.actualReasonFeedback&&e.get("actual_reason")&&e.meta("unread-on-open"))return h().createElement(Jc,{type:"actual-reason-feedback",model:e,useMediators:["letters-actions","themes-manager"],component:Ze(),key:"letter-meta"});if(c.isShowCategoryFeedbackPlate()&&e.meta("unread-on-open"))return h().createElement(Jc,{type:"category-feedback",model:e,useMediators:["themes-manager"],component:Ze(),key:"letter-meta"});if(d.showReliableSender&&c.isReliableSender(e))return h().createElement(Jc,{type:"reliable-sender",model:e,sender:m,useMediators:["themes-manager"],"data-qa-id":"reliable-sender-promo",component:Ze(),key:"letter-meta"});if(c.isFakeDoorFmail18333Visible(e))return h().createElement(Jc,{type:"fake-door-header-fmail-18333",model:e,component:Ze(),key:"letter-meta"});else return}()),h().createElement(Jc,{model:e,senderEmail:this.getSenderEmail(e),receivers:this.getReceivers(e),"dark-mode":d["dark-mode"],component:nv(),key:"promo-domain-die"})),h().createElement("div",{className:pv.elem("subject-line")},h().createElement("h2",{key:"thread-subject",className:pv.elem("subject",{"pony-mode":d.ponymode}),"data-qa-id":"subject"},f),!(d["disable-category"]||e.getFolder().isSpam())&&function(){if(d["category-feedback"]&&!e.getFolder().isShareTake())if(c.hasCategory(e)&&!r)return h().createElement("div",{className:pv.elem("category")},h().createElement(Jc,{model:e,useMediators:["settings-manager","themes-manager"],component:hv(),key:"category-feedback"}));else return;if(q&&!r)return h().createElement("div",{className:pv.elem("category")},h().createElement(Jc,{name:q,short:d.touch,component:Te(),key:"letter-category"}))}()),!d.isResendDropdownDisabled&&n&&h().createElement(wm,{"class-name":"thread__resend-dropdown",resendFrom:n.from,resendTo:n.to,resendDate:n.date,receivedDate:n.receivedDate,darkMode:d["dark-mode"],qaEnabled:(0,Ub.U)()}),h().createElement("div",{className:pv.elem("letter-meta")},this.needLetterMeta()&&h().createElement(Jc,{model:e,metadata:k,ponymode:d.ponymode,calendar:this.getFirstCalendarAttach(),useMediators:["themes-manager","layout-manager","letters-selection"],remitEvents:{render:"letter-meta:render",letterclick:"letter-meta:letterclick"},broadcastEvent:(0,ze.Yv)(this),component:Ze(),needLetterMetaSkeleton:this.needLetterMetaSkeleton(),key:"letter-meta"}))),!!d.hasDraft&&h().createElement("div",{className:pv.elem("letter",{first:!0,expanded:!0})},d.draft?h().createElement(Jc,{model:d.draft,touch:d.touch,disabled:!0,draft:!0,"disable-select":!0,"disable-subject":!0,"disable-category":!0,compressed:j,remitEvents:{click:"draft:open"},broadcastEvent:(0,ze.Yv)(this),component:jv(),key:"letter-list-item"}):h().createElement(Jc,{touch:d.touch,compressed:j,component:lv(),key:"letter-list-item-placeholder"})),d.model.get("messages").map(function(a,b){var e=0==b,f=d.model.get("length")==b+1,l=!d.model.canUnfoldMessage(a),m=c.isPrevCollapsed(b),n=c.isNextCollapsed(b),q=c.isSticky(a.id),r=!c.isCollapsed(a.id),t=0!==b?d.model.get("messages")[b-1]:null,u=t&&(null==t?void 0:t.is("flags.bimi_important_msg"))&&s.SHOW_RELIABLE_ON_LETTER_LIST&&!s.DISABLE_GREEN_RELIABLE_ON_LETTER_LIST,v=t&&(null==t?void 0:t.is("flags.official"))&&s.SHOW_OFFICIAL_ON_LETTER_LIST&&!s.DISABLE_GREEN_OFFICIAL_ON_LETTER_LIST,w=!1,x=!1,y=(0,Be.checkOfficialGreen)(a),z=(0,Be.checkOfficial)(a);if(!y&&!z)w=(0,Be.checkReliable)(a),x=(0,Be.checkImportantReliable)(a);var A=e||u||v||x||y;if(!d["preview-mode"]||!c.isCollapsed(a.id))return h().createElement("div",{key:a.id,"data-id":a.id,"data-qa-id":(0,Ub.qa)("thread-letter:".concat(b+1)),"data-qa-state":(0,Ub.qa)("open:".concat(!c.isCollapsed(a.id))),className:pv.elem("letter",{expanded:r,"expanded-next":!n,"expanded-prev":!e&&!m,collapsed:c.isCollapsed(a.id)&&!d["preview-mode"],"collapsed-next":n,first:e,last:f,single:o,react:!0})},!c.isCollapsed(a.id)&&h().createElement(Fh,{route:d.route,router:d.router,model:a,parentThread:d.model,folders:g,autoread:a.isDataFully()&&!d["preview-mode"],"allow-collapse":d.model.get("length")>1&&!d["preview-mode"],readonly:d["preview-mode"],single:o,"collapsed-default":l,first:e,last:f,touch:d.touch,sticky:c.isStickyEnabled()&&q&&d.sticky,showfolder:d.model.get("folder")!=a.get("folder"),"quotes-collapsed-default":!f,"disable-category":!0,"disable-edit":i,compactTranslator:d.compact,ponymode:j,"dark-mode":d["dark-mode"],"expanded-next":!n,"preview-mode":d["preview-mode"],"dates-metadata":p,"transaction-metadata":k,useMediators:["user-info","layout-manager","settings-filters-manager","attachments-manager","calendar-manager","translator-manager","addressbook-manager","share-folders-manager","settings-manager","calls-manager","marusia-manager","thread-scroller","letters-actions","compose-manager"],remitEvents:{clickhead:"letter:close","attaches:expanded":"letter:expand:attaches","attaches:collapsed":"letter:collapsed:attaches",resize:"letter:resize","letter-force-recalc":"force:recalc","translator:scrollto":"translator:scrollto"},updateRemitEventsName:!0,broadcastEvent:(0,ze.Yv)(c),remitDetails:a,key:"letter"}),!(!c.isCollapsed(a.id)||d["preview-mode"])&&h().createElement("div",{onClick:(0,ze.CH)(c,{name:"letter:open",details:a})},d.touch?h().createElement(dl,{"in-thread":!0,"disable-subject":!0,"disable-select":!0,"disable-avatar-hover":!0,"enable-user-select":!0,key:"list-letter-common",first:e||!m,hideDelimeter:A,isImportantReliable:x,isReliable:w,isOfficial:z,isOfficialGreen:y,last:f||!n,"pony-mode":j,model:a,"main-field":"from",showfolder:d.model.get("folder")!=a.get("folder"),welter:!1,useMediators:["letters-actions","layout-manager"],"layout-mode":"2pane",remitEvents:{contextmenu:"letter:rightclick"},broadcastEvent:(0,ze.Yv)(c),remitDetails:a,fromThread:!0}):h().createElement(Qq,{"in-thread":!0,"disable-subject":!0,"disable-select":!0,"disable-avatar-hover":!0,"enable-user-select":!0,key:"list-letter-common",first:e||!m,hideDelimeter:A,isImportantReliable:x,isReliable:w,isOfficial:z,isOfficialGreen:y,last:f||!n,"pony-mode":j,model:a,"main-field":"from",showfolder:d.model.get("folder")!=a.get("folder"),welter:!1,useMediators:["letters-actions","layout-manager"],"layout-mode":"2pane",remitEvents:{contextmenu:"letter:rightclick"},broadcastEvent:(0,ze.Yv)(c),remitDetails:a,fromThread:!0})),!d["preview-mode"]&&h().createElement("div",{className:qv.root({full:r||!m})}));else return null}),h().createElement("div",{className:pv.elem("rounding-footer")}),d.kaspersky&&!d["preview-mode"]?h().createElement("div",{className:pv.elem("footer")},h().createElement("div",{className:pv.elem("kaspersky")},h().createElement($d,{isEngLogo:this.isEngKasperskyLogo(),onLogoLinkClick:(0,ze.CH)(this,{stop:!0,name:"click-kaspersky"}),contrast:!(d.isDarkDefaultMode||d.isLightDefaultMode)}))):h().createElement("div",{className:pv.elem("footer",{empty:!0})}))}!function(a){a.mount="$mount",a.unmount="$destroyed",a.clickKaspersky="clickkaspersky"}(av||(av={}));var sv=function(){var a=function(b,c){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)if(Object.prototype.hasOwnProperty.call(b,c))a[c]=b[c]})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw new TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),tv=function(){return(tv=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++)for(var e in b=arguments[c])if(Object.prototype.hasOwnProperty.call(b,e))a[e]=b[e];return a}).apply(this,arguments)},uv=function(a,b,c){if(c||2===arguments.length)for(var d,e=0,f=b.length;e<f;e++)if(d||!(e in b)){if(!d)d=Array.prototype.slice.call(b,0,e);d[e]=b[e]}return a.concat(d||Array.prototype.slice.call(b))}([],Object.values(fv.blockSpec.events),!0),vv=function(a){function b(b){var c=a.call(this,b)||this;if(c.thredMounted=!1,c.events=fv.blockSpec.events,c.isCollapsed=fv.blockSpec.isCollapsed,c.onDraftOpen=fv.blockSpec.onDraftOpen,c.onLetterOpen=fv.blockSpec.onLetterOpen,c.onLetterClose=fv.blockSpec.onLetterClose,c.onRightClick=fv.blockSpec.onRightClick,c.onLetterMetaRender=fv.blockSpec.onLetterMetaRender,c.onLetterMetaClick=fv.blockSpec.onLetterMetaClick,c.onTranslatorScrollTo=fv.blockSpec.onTranslatorScrollTo,c.bindThread=fv.blockSpec.bindThread,c.getSenderEmail=fv.blockSpec.getSenderEmail,c.getReceivers=fv.blockSpec.getReceivers,c.unbindThread=fv.blockSpec.unbindThread,c.isStickyEnabled=fv.blockSpec.isStickyEnabled,c.isSticky=fv.blockSpec.isSticky,c.isNextCollapsed=fv.blockSpec.isNextCollapsed,c.isPrevCollapsed=fv.blockSpec.isPrevCollapsed,c.isHideCategory=fv.blockSpec.isHideCategory,c.isReliableSender=fv.blockSpec.isReliableSender,c.isShowCategoryFeedbackPlate=fv.blockSpec.isShowCategoryFeedbackPlate,c.isShowPromoPush=fv.blockSpec.isShowPromoPush,c.parentalControlDieEnabled=fv.blockSpec.parentalControlDieEnabled,c.hasCategory=fv.blockSpec.hasCategory,c.actualLettersEnabled=fv.blockSpec.actualLettersEnabled,c.getMessageFolder=fv.blockSpec.getMessageFolder,c.setExpId=fv.blockSpec.setExpId,c._setExpanded=fv.blockSpec._setExpanded,c._loadDraft=fv.blockSpec._loadDraft,c.scrollLetterIntoView=fv.blockSpec.scrollLetterIntoView,c.scheduleScrollLetterIntoView=fv.blockSpec.scheduleScrollLetterIntoView,c._loadLetter=fv.blockSpec._loadLetter,c._closeLetter=fv.blockSpec._closeLetter,c.getFirstCalendarAttach=fv.blockSpec.getFirstCalendarAttach,c.isEngKasperskyLogo=fv.blockSpec.isEngKasperskyLogo,c._formDatesMetadata=fv.blockSpec._formDatesMetadata,c.getResendData=fv.blockSpec.getResendData,c.isOfficialSender=fv.blockSpec.isOfficialSender,c.usePortalSearchPanel=fv.blockSpec.usePortalSearchPanel,c.needLetterMeta=fv.blockSpec.needLetterMeta,c.needLetterMetaSkeleton=fv.blockSpec.needLetterMetaSkeleton,c.isFakeDoorFmail18333Visible=fv.blockSpec.isFakeDoorFmail18333Visible,c.onKasperskyLogoClick=fv.blockSpec.onKasperskyLogoClick,c.onToggleIcsAttach=fv.blockSpec.onToggleIcsAttach,c.needHideAttachList=fv.blockSpec.needHideAttachList,c.isTrackingStatusPlate=fv.blockSpec.isTrackingStatusPlate,c.render=rv,c.threadRef=h().createRef(),b.model)c._setExpanded(b.model);return uv.forEach(function(a){c[a]=c[a].bind(c)}),c}return sv(b,a),Object.defineProperty(b.prototype,"el",{get:function(){return this.threadRef.current},enumerable:!1,configurable:!0}),b.prototype.componentDidMount=function(){this.thredMounted=!0,fv.blockSpec.didMount.bind(this)(),this.updateModel(tv(tv({},this.props),this.state).model,void 0),this.loadDraft(tv(tv({},this.props),this.state)),this.setExpanded(),(0,Wo.sendAfterMountMetric)("readletter")},b.prototype.componentDidUpdate=function(a,b){var c=tv(tv({},this.props),this.state),d=tv(tv({},a),b);if(fv.blockSpec.didUpdate.bind(this)(),c.model!==d.model)this.updateModel(c.model,d.model);if(c["load-draft-disabled"]!==d["load-draft-disabled"]&&!1===c["load-draft-disabled"])this.loadDraft(c);if(this.props["expand-letter-id"]!==a["expand-letter-id"]&&this.props["expand-letter-id"]&&this.props.model)this.setExpanded()},b.prototype.componentWillUnmount=function(){this.thredMounted=!1,fv.blockSpec.didUnmount.bind(this)()},b.prototype.handleInnerEvent=function(a){switch(a.type){case av.mount:return void ce()(["thread","mount"],1,(0,Ae.getModelDataWithRelevant)(this));case av.unmount:return void ce()(["thread","unmount"],1,(0,Ae.getModelData)(this));case av.clickKaspersky:ce()(["thread","kaspersky_click"])}},b.prototype.updateModel=function(a,b){this.unbindThread(b),this.bindThread(a)},b.prototype.isMounted=function(){return this.thredMounted},b.prototype.loadDraft=function(a){this._loadDraft(a.model)},b.prototype.setExpanded=function(){this._setExpanded(this.get("model"),!0)},b.prototype.get=function(a){return tv(tv({},this.props),this.state)[a]},b.prototype.update=function(){this.forceUpdate()},b}(h().Component),wv=(0,ze.v$)("thread",vv,{syncMediatorsOnRender:!1});wv.defaultProps=fv.blockSpec.defaults;var xv=wv,yv={AccountDock:aa,AdFeedback:ja,AdFeedback2step:ra,AttachIcon:Tb,AttachThumb:pd,AttachmentButton:Yb,AttachmentDropdown:wc,AttachSafetyStatus:$c,ChangeLanguage:Rm,ClipInListItem:ic,CreateTodo:To,DatasetLetters:Dr,ErrorBoundary:Bd,FeastBlock:Jc,FileLimitPopup:yd,KasperskyLogo:$d,LayerChooseSaveFolder:ae,LayerConfirmMoveToSpam:le,LayerFakeDoor:me.Z,LayerPromoEnabledPush:oe,LayerTemplateSelect:ue,Letter:Fh,LetterBody:yf,LetterHeaderActions:function(a){var b=ci(a),c=b.broadcast,d=b.attrs,e=b.globals,f=b.selectedLettersInfo,g=b.syntheticBlock,i=e.isDisableEdit,j=e.ponyMode,k=e.letter,l=e.readMode,m=e.hasNext,n=e.filterRoute,o=e.hasPrev,p=e.searchRoute,q=e.is3Pane,r=e.is2Pane,t=d.mobile,u=d.letterNotFound,v=d.selected,w=!!v&&v.length>0,x=(l||w)&&!u,y=l&&r,z=w&&q,A={"touch-nav":t,letter:k,ponymode:j,remitEvents:Gh,broadcastEvent:c,useContext:g.radarContext},B={"is-search":p,"is-filter":n,hidden:!y};return a._node.classList[!x?"add":"remove"](Vh.display_none),h().createElement("div",{"data-qa-id":(0,Ub.qa)("portal"),"data-qa-type":(0,Ub.qa)("letter-actions"),className:ca()(Vh.display_mode,z?Vh.single:Vh.not_single,s.ENABLE_LETTERS_DIVIDERS&&!B.hidden&&Vh.short_padding)},h().createElement(Xh,di({},A,B,{type:z?"deselect-back":"back",notDelete:l,short:!0})),h().createElement(Zh,di({},{attrs:d,globalEnv:A,globals:e,selectedLettersInfo:f,displayMode:x})),h().createElement(Xh,di({},A,B,{type:"prev",disabled:i||!o})),h().createElement(Xh,di({},A,B,{type:"next",disabled:i||!m})))},LetterMetaSkeleton:qi,LetterTags:zg,LettersDivider:yi,ListLetterCommonTouch:dl,ListLetterCompactTouch:gl,ListLetterGoToActionButton:dk,ListLetterHeaderActions:function(a){var b=ci(a),c=b.broadcast,d=b.attrs,e=b.globals,f=b.selectedLettersInfo,g=b.syntheticBlock,i=d.filter,j=d.folder,k=d.folders,l=d.selectFolder,m=d.selected,n=d.sortingType,o=d.hasLetters,p=d.deselectAll,q=d.readAllInProgress,r=d.mobile,t=d.showBackToParentFolder,u=d.advTopLine,v=e.ponyMode,w=e.layoutType,x=e.selectMode,y=e.is2Pane,z=e.letter,A=e.searchRoute,B=e.filterRoute,C=e.readMode,D=h().useMemo(function(){return(0,Jh.getSelectedCount)({folder:j,selectFolder:l,selected:m},{searchRoute:A})},[j,A,l,m]),E=h().useState(null),F=E[0],G=E[1],H=Ih({element:F,breakpoints:rl,pureBreakpoints:!0,initialState:function(){return rl.at(-1).props}}),I=x&&!!D,J=I&&y,K=h().useMemo(function(){return!I&&!C&&t?(0,il.getParentFolder)(j,k):null},[I,j,k,C,t]),L={"touch-nav":r,letter:z,ponymode:v,remitEvents:Gh,broadcastEvent:c,useContext:g.radarContext};return a._node.classList[!o&&!B?"add":"remove"](Vh.display_none),h().createElement("div",{"data-qa-id":(0,Ub.qa)("portal"),"data-qa-type":(0,Ub.qa)("list-letter-actions"),className:ca()(Vh.display_mode,u?Vh.not_border:Vh.border,o?Vh.not_single:Vh.single,s.ENABLE_LETTERS_DIVIDERS&&(y?Vh.middle_padding:Vh.short_padding)),ref:G},h().createElement("div",{className:Vh.read_letter},h().createElement(Xh,kl({},L,{hidden:!I&&!K,type:K?"backToParentFolder":x?"deselect-back":"back",parentFolder:K,folder:j,folders:k,short:!0})),h().createElement(Xh,kl({},L,{type:p?"deselect":"select",disabled:!o,"has-explanation":!0,short:(0,Jh.isShortButtonSelectAll)({selectedCount:D,sidebarColumn:H+(A?25:0)},{filter:i,sortingType:n},{is2Pane:y}),text:D})),h().createElement(Xh,kl({},L,{type:"all-read",hidden:ll(I||q||!(0,hl.isAllreadButtonVisible)(i,{folder:j}),!0,w),shortText:(0,Jh.isShortTextAllRead)(e)})),y&&h().createElement(Zh,kl({},{attrs:d,globalEnv:L,globals:e,selectedLettersInfo:f,displayMode:J}))),h().createElement(Xh,kl({},L,{type:"filters",short:!0,hidden:I||A,folder:j})))},ListLetterTags:sk,MarusiaReadLetterButton:Hg,MetathreadsSettingsContainer:Il,MiniAppUnknownError:Ml,NoadsButton:ud,NotificationBadge:Rg,OctopusLogo:Nl,OversizeAttachCancelPopup:Pl,PriorityWidget:Zl,PromtAboutAdWrapper:dm,PromtTooltip:im,ReceiptWidget:mm,RemindWidget:tm,ResendDropdown:wm,ScheduleWidget:Fm,SearchMobilePanel:Ft,SearchAttachmentButton:pc,SearchPanel:Ot,SearchPanelInput:jt,SearchSidebar:Vt,SettingsDock:ev,SuggestsForm:cn,Swipeable:Bk,TagsPicker:xg,Thread:xv,UnsubscribeDropdown:on,VKUIOverlay:Ln,VkMessengerProvider:pn,WebviewMobileFooter:Vn,WidgetColumn:function(){var a,b,c,d=(0,ai.C)({name:"WidgetColumn",mediators:["layout-manager","todo-manager"]}),e=d[0],i=e.disabledEvents,j=e.showWidgetColumn,k=e.widgetType,m=e.widgetIsOpen,n=d[1],o=Do({broadcast:n,widgetType:k,widgetIsOpen:m}),p=o.widget,q=o.setWidget,r=o.open,t=o.setOpen;(0,g.useLayoutEffect)(function(){if(!r&&s.WIDGET_COLUMN)a="arrow",l().send("show_widget_button",{dwh:{type_button:a}});var a;return function(){n((0,Dc.BU)(Wn.WIDGET_COLUMN_UNMOUNT))}},[n]);var u=s.WIDGET_COLUMN?j:r,v=(0,g.useRef)(!1);return v.current||(v.current=u),v.current&&h().createElement("div",{className:ca()(Eo.border,(a={},a[Eo.open]=r,a[Eo.close]=!r,a[Eo.hidden]=!u,a))},s.WIDGET_COLUMN&&h().createElement("div",{className:ca()(Eo.openerWrapper,(b={},b[Eo.hidden]=r,b)),onClick:function(){var a,b;a="arrow",b=Xn[p],l().send("click_widget_button",{dwh:{type_button:a,widget_show:b}}),t(!0)},onMouseOver:Go},h().createElement("div",{className:Eo.opener},h().createElement(f.Icon,{icon:Nb[ua.NAVIGATION_ARROW_LIST_PREVIOUS]})),h().createElement("div",{className:Eo.tooltip},h().createElement(Fo,{width:3},i18n("Показать панель инструментов")))),h().createElement("div",{className:ca()(Eo.content,(c={},c[Eo.hidden]=!r,c[Eo.disabledEvents]=i,c))},s.WIDGET_COLUMN&&h().createElement(xo,{widget:p,setWidget:q,open:r,setOpen:t}),s.SHOW_TODO_TOGGLE&&h().createElement(Co,{hidden:!r||"widget-todo"!==p}),s.WIDGET_CALENDAR&&h().createElement(po,{hidden:!r||"widget-calendar"!==p})))},getFullMomentFormat:function(a){return ym()(a).calendar(null,Bm)},AttachViolatedFileNamePopup:function(a){var b=(0,g.useState)(!0),c=b[0],d=b[1],e=a.violatedAttaches,j=function(){a.onClose(),d(!1)},k=a.uploadedAttachmentsCount>0?i18n("Остальные файлы загружены в хранилище."):null,l=i18n("Файлы {strongOpen}{violatedAttaches}{strongClose} не могут быть загружены в хранилище в соответствии с правилами безопасности. Обратитесь к администратору.",{violatedAttaches:e,"unsafe-strongOpen":"<strong>","unsafe-strongClose":"</strong>"});if(k)l="".concat(l," ").concat(k);return h().createElement(f.Popup,{show:c,onHide:j,testId:"attach-violated-file-name-popup"},h().createElement(f.Panel,{popup:!0,onClose:j,header:i.title,size:"small",content:h().createElement(h().Fragment,null,h().createElement(f.Text,null,h().createElement("span",{dangerouslySetInnerHTML:{__html:l}}))),controls:h().createElement(f.Button,{text:i.close,onClick:j,testId:"close-button"})}))}}}(),oc}()});